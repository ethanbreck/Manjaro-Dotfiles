/*! permutive-javascript-sdk v9.10.4 (web) (built 2020-04-28 16:31:53 GMT+0000) */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=29)}([function(e,t,n){"use strict";n.r(t),n.d(t,"URI",function(){return o}),n.d(t,"none",function(){return a}),n.d(t,"some",function(){return c}),n.d(t,"isSome",function(){return s}),n.d(t,"isNone",function(){return u}),n.d(t,"fold",function(){return f}),n.d(t,"fromNullable",function(){return d}),n.d(t,"toNullable",function(){return l}),n.d(t,"toUndefined",function(){return p}),n.d(t,"getOrElse",function(){return g}),n.d(t,"elem",function(){return h}),n.d(t,"exists",function(){return m}),n.d(t,"fromPredicate",function(){return _}),n.d(t,"tryCatch",function(){return v}),n.d(t,"getLeft",function(){return y}),n.d(t,"getRight",function(){return b}),n.d(t,"getRefinement",function(){return w}),n.d(t,"mapNullable",function(){return k}),n.d(t,"getShow",function(){return q}),n.d(t,"getEq",function(){return E}),n.d(t,"getOrd",function(){return S}),n.d(t,"getApplySemigroup",function(){return P}),n.d(t,"getApplyMonoid",function(){return x}),n.d(t,"getFirstMonoid",function(){return O}),n.d(t,"getLastMonoid",function(){return T}),n.d(t,"getMonoid",function(){return I}),n.d(t,"option",function(){return j}),n.d(t,"alt",function(){return N}),n.d(t,"ap",function(){return R}),n.d(t,"apFirst",function(){return D}),n.d(t,"apSecond",function(){return L}),n.d(t,"chain",function(){return B}),n.d(t,"chainFirst",function(){return z}),n.d(t,"duplicate",function(){return F}),n.d(t,"extend",function(){return W}),n.d(t,"filter",function(){return U}),n.d(t,"filterMap",function(){return K}),n.d(t,"flatten",function(){return G}),n.d(t,"foldMap",function(){return H}),n.d(t,"map",function(){return Q}),n.d(t,"partition",function(){return J}),n.d(t,"partitionMap",function(){return V}),n.d(t,"reduce",function(){return Y}),n.d(t,"reduceRight",function(){return $}),n.d(t,"compact",function(){return X}),n.d(t,"separate",function(){return Z}),n.d(t,"fromEither",function(){return ee});var r=n(2),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o="Option",a={_tag:"None"};function c(e){return{_tag:"Some",value:e}}function s(e){return"Some"===e._tag}function u(e){return"None"===e._tag}function f(e,t){return function(n){return u(n)?e():t(n.value)}}function d(e){return null==e?a:c(e)}function l(e){return u(e)?null:e.value}function p(e){return u(e)?void 0:e.value}function g(e){return function(t){return u(t)?e():t.value}}function h(e){return function(t,n){return!u(n)&&e.equals(t,n.value)}}function m(e){return function(t){return!u(t)&&e(t.value)}}function _(e){return function(t){return e(t)?c(t):a}}function v(e){try{return c(e())}catch(e){return a}}function y(e){return"Right"===e._tag?a:c(e.left)}function b(e){return"Left"===e._tag?a:c(e.right)}function w(e){return function(t){return s(e(t))}}function k(e){return function(t){return u(t)?a:d(e(t.value))}}function q(e){return{show:function(t){return u(t)?"none":"some("+e.show(t.value)+")"}}}function E(e){return{equals:function(t,n){return t===n||(u(t)?u(n):!u(n)&&e.equals(t.value,n.value))}}}function S(e){return{equals:E(e).equals,compare:function(t,n){return t===n?0:s(t)?s(n)?e.compare(t.value,n.value):1:-1}}}function P(e){return{concat:function(t,n){return s(t)&&s(n)?c(e.concat(t.value,n.value)):a}}}function x(e){return i(i({},P(e)),{empty:c(e.empty)})}function O(){return{concat:function(e,t){return u(e)?t:e},empty:a}}function T(){return{concat:function(e,t){return u(t)?e:t},empty:a}}function I(e){return{concat:function(t,n){return u(t)?n:u(n)?t:c(e.concat(t.value,n.value))},empty:a}}var M={left:a,right:a},C=function(e){return e},j={URI:o,map:function(e,t){return u(e)?a:c(t(e.value))},of:c,ap:function(e,t){return u(e)?a:u(t)?a:c(e.value(t.value))},chain:function(e,t){return u(e)?a:t(e.value)},reduce:function(e,t,n){return u(e)?t:n(t,e.value)},foldMap:function(e){return function(t,n){return u(t)?e.empty:n(t.value)}},reduceRight:function(e,t,n){return u(e)?t:n(e.value,t)},traverse:function(e){return function(t,n){return u(t)?e.of(a):e.map(n(t.value),c)}},sequence:function(e){return function(t){return u(t)?e.of(a):e.map(t.value,c)}},zero:function(){return a},alt:function(e,t){return u(e)?t():e},extend:function(e,t){return u(e)?a:c(t(e))},compact:function(e){return j.chain(e,C)},separate:function(e){var t=j.map(e,function(e){return{left:y(e),right:b(e)}});return u(t)?M:t.value},filter:function(e,t){return u(e)?a:t(e.value)?e:a},filterMap:function(e,t){return u(e)?a:t(e.value)},partition:function(e,t){return{left:j.filter(e,function(e){return!t(e)}),right:j.filter(e,t)}},partitionMap:function(e,t){return j.separate(j.map(e,t))},wither:function(e){return function(t,n){return u(t)?e.of(a):n(t.value)}},wilt:function(e){return function(t,n){var r=j.map(t,function(t){return e.map(n(t),function(e){return{left:y(e),right:b(e)}})});return u(r)?e.of({left:a,right:a}):r.value}},throwError:function(){return a}},A=Object(r.pipeable)(j),N=A.alt,R=A.ap,D=A.apFirst,L=A.apSecond,B=A.chain,z=A.chainFirst,F=A.duplicate,W=A.extend,U=A.filter,K=A.filterMap,G=A.flatten,H=A.foldMap,Q=A.map,J=A.partition,V=A.partitionMap,Y=A.reduce,$=A.reduceRight,X=A.compact,Z=A.separate,ee=A.fromEither},function(e,t,n){"use strict";n.r(t);var r=n(2);n.d(t,"URI",function(){return o}),n.d(t,"left",function(){return a}),n.d(t,"right",function(){return c}),n.d(t,"fromNullable",function(){return s}),n.d(t,"toError",function(){return u}),n.d(t,"tryCatch",function(){return f}),n.d(t,"fold",function(){return d}),n.d(t,"getShow",function(){return l}),n.d(t,"getEq",function(){return p}),n.d(t,"getSemigroup",function(){return g}),n.d(t,"getApplySemigroup",function(){return h}),n.d(t,"getApplyMonoid",function(){return m}),n.d(t,"isLeft",function(){return _}),n.d(t,"isRight",function(){return v}),n.d(t,"swap",function(){return y}),n.d(t,"orElse",function(){return b}),n.d(t,"getOrElse",function(){return w}),n.d(t,"elem",function(){return k}),n.d(t,"exists",function(){return q}),n.d(t,"parseJSON",function(){return E}),n.d(t,"stringifyJSON",function(){return S}),n.d(t,"getWitherable",function(){return P}),n.d(t,"getValidation",function(){return x}),n.d(t,"getValidationSemigroup",function(){return O}),n.d(t,"getValidationMonoid",function(){return T}),n.d(t,"either",function(){return I}),n.d(t,"alt",function(){return C}),n.d(t,"ap",function(){return j}),n.d(t,"apFirst",function(){return A}),n.d(t,"apSecond",function(){return N}),n.d(t,"bimap",function(){return R}),n.d(t,"chain",function(){return D}),n.d(t,"chainFirst",function(){return L}),n.d(t,"duplicate",function(){return B}),n.d(t,"extend",function(){return z}),n.d(t,"flatten",function(){return F}),n.d(t,"foldMap",function(){return W}),n.d(t,"map",function(){return U}),n.d(t,"mapLeft",function(){return K}),n.d(t,"reduce",function(){return G}),n.d(t,"reduceRight",function(){return H}),n.d(t,"fromOption",function(){return Q}),n.d(t,"fromPredicate",function(){return J}),n.d(t,"filterOrElse",function(){return V});var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o="Either";function a(e){return{_tag:"Left",left:e}}function c(e){return{_tag:"Right",right:e}}function s(e){return function(t){return null==t?a(e):c(t)}}function u(e){return e instanceof Error?e:new Error(String(e))}function f(e,t){try{return c(e())}catch(e){return a(t(e))}}function d(e,t){return function(n){return _(n)?e(n.left):t(n.right)}}function l(e,t){return{show:function(n){return _(n)?"left("+e.show(n.left)+")":"right("+t.show(n.right)+")"}}}function p(e,t){return{equals:function(n,r){return n===r||(_(n)?_(r)&&e.equals(n.left,r.left):v(r)&&t.equals(n.right,r.right))}}}function g(e){return{concat:function(t,n){return _(n)?t:_(t)?n:c(e.concat(t.right,n.right))}}}function h(e){return{concat:function(t,n){return _(t)?t:_(n)?n:c(e.concat(t.right,n.right))}}}function m(e){return i(i({},h(e)),{empty:c(e.empty)})}function _(e){switch(e._tag){case"Left":return!0;case"Right":return!1}}function v(e){return!_(e)}function y(e){return _(e)?c(e.left):a(e.right)}function b(e){return function(t){return _(t)?e(t.left):t}}function w(e){return function(t){return _(t)?e(t.left):t.right}}function k(e){return function(t,n){return!_(n)&&e.equals(t,n.right)}}function q(e){return function(t){return!_(t)&&e(t.right)}}function E(e,t){return f(function(){return JSON.parse(e)},t)}function S(e,t){return f(function(){return JSON.stringify(e)},t)}function P(e){var t=a(e.empty),n=function(t){return _(t)?t:"None"===t.right._tag?a(e.empty):c(t.right.value)},r=function(e){return _(e)?{left:e,right:e}:_(e.right)?{left:c(e.right.left),right:t}:{left:t,right:c(e.right.right)}};return{URI:o,_E:void 0,map:I.map,compact:n,separate:r,filter:function(t,n){return _(t)?t:n(t.right)?t:a(e.empty)},filterMap:function(t,n){if(_(t))return t;var r=n(t.right);return"None"===r._tag?a(e.empty):c(r.value)},partition:function(e,n){return _(e)?{left:e,right:e}:n(e.right)?{left:t,right:c(e.right)}:{left:c(e.right),right:t}},partitionMap:function(e,n){if(_(e))return{left:e,right:e};var r=n(e.right);return _(r)?{left:c(r.left),right:t}:{left:t,right:c(r.right)}},traverse:I.traverse,sequence:I.sequence,reduce:I.reduce,foldMap:I.foldMap,reduceRight:I.reduceRight,wither:function(e){var t=I.traverse(e);return function(r,i){return e.map(t(r,i),n)}},wilt:function(e){var t=I.traverse(e);return function(n,i){return e.map(t(n,i),r)}}}}function x(e){return i(i({},I),{_E:void 0,ap:function(t,n){return _(t)?_(n)?a(e.concat(t.left,n.left)):t:_(n)?n:c(t.right(n.right))},alt:function(t,n){if(v(t))return t;var r=n();return _(r)?a(e.concat(t.left,r.left)):r}})}function O(e,t){return{concat:function(n,r){return _(n)?_(r)?a(e.concat(n.left,r.left)):n:_(r)?r:c(t.concat(n.right,r.right))}}}function T(e,t){return{concat:O(e,t).concat,empty:c(t.empty)}}var I={URI:o,map:function(e,t){return _(e)?e:c(t(e.right))},of:c,ap:function(e,t){return _(e)?e:_(t)?t:c(e.right(t.right))},chain:function(e,t){return _(e)?e:t(e.right)},reduce:function(e,t,n){return _(e)?t:n(t,e.right)},foldMap:function(e){return function(t,n){return _(t)?e.empty:n(t.right)}},reduceRight:function(e,t,n){return _(e)?t:n(e.right,t)},traverse:function(e){return function(t,n){return _(t)?e.of(a(t.left)):e.map(n(t.right),c)}},sequence:function(e){return function(t){return _(t)?e.of(a(t.left)):e.map(t.right,c)}},bimap:function(e,t,n){return _(e)?a(t(e.left)):c(n(e.right))},mapLeft:function(e,t){return _(e)?a(t(e.left)):e},alt:function(e,t){return _(e)?t():e},extend:function(e,t){return _(e)?e:c(t(e))},chainRec:function(e,t){return function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}(t(e),function(e){return _(e)?c(a(e.left)):_(e.right)?a(t(e.right.left)):c(c(e.right.right))})},throwError:a},M=Object(r.pipeable)(I),C=M.alt,j=M.ap,A=M.apFirst,N=M.apSecond,R=M.bimap,D=M.chain,L=M.chainFirst,B=M.duplicate,z=M.extend,F=M.flatten,W=M.foldMap,U=M.map,K=M.mapLeft,G=M.reduce,H=M.reduceRight,Q=M.fromOption,J=M.fromPredicate,V=M.filterOrElse},function(e,t,n){"use strict";n.r(t),n.d(t,"pipe",function(){return i}),n.d(t,"pipeable",function(){return w});var r=n(6);function i(e,t,n,r,i,o,a,c,s,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return a(o(i(r(n(t(e))))));case 8:return c(a(o(i(r(n(t(e)))))));case 9:return s(c(a(o(i(r(n(t(e))))))));case 10:return u(s(c(a(o(i(r(n(t(e)))))))))}}var o=function(e){return"function"==typeof e.map},a=function(e){return"function"==typeof e.contramap},c=function(e){return"function"==typeof e.mapWithIndex},s=function(e){return"function"==typeof e.ap},u=function(e){return"function"==typeof e.chain},f=function(e){return"function"==typeof e.bimap},d=function(e){return"function"==typeof e.extend},l=function(e){return"function"==typeof e.reduce},p=function(e){return"function"==typeof e.reduceWithIndex},g=function(e){return"function"==typeof e.alt},h=function(e){return"function"==typeof e.compact},m=function(e){return"function"==typeof e.filter},_=function(e){return"function"==typeof e.filterWithIndex},v=function(e){return"function"==typeof e.promap},y=function(e){return"function"==typeof e.compose},b=function(e){return"function"==typeof e.throwError};function w(e){var t={};if(o(e)){t.map=function(t){return function(n){return e.map(n,t)}}}if(a(e)){t.contramap=function(t){return function(n){return e.contramap(n,t)}}}if(c(e)){t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}}if(s(e)){t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,function(e){return function(){return e}}),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,function(){return function(e){return e}}),t)}}}if(u(e)){t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,function(n){return e.map(t(n),function(){return n})})}},t.flatten=function(t){return e.chain(t,r.identity)}}if(f(e)){t.bimap=function(t,n){return function(r){return e.bimap(r,t,n)}},t.mapLeft=function(t){return function(n){return e.mapLeft(n,t)}}}if(d(e)){t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,r.identity)}}if(l(e)){t.reduce=function(t,n){return function(r){return e.reduce(r,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(r){return e.reduceRight(r,t,n)}}}if(p(e)){t.reduceWithIndex=function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(r){return e.reduceRightWithIndex(r,t,n)}}}if(g(e)){t.alt=function(t){return function(n){return e.alt(n,t)}}}if(h(e)&&(t.compact=e.compact,t.separate=e.separate),m(e)){t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}}if(_(e)){t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}}if(v(e)){t.promap=function(t,n){return function(r){return e.promap(r,t,n)}}}if(y(e)){t.compose=function(t){return function(n){return e.compose(n,t)}}}if(b(e)){t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.left):e.of(t.right)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,function(r){return t(r)?e.of(r):e.throwError(n(r))})}}}return t}},function(e,t,n){"use strict";var r=n(12).Promise,i=n(37).polyfill;t.Promise=r,t.polyfill=i},function(e,t,n){"use strict";(function(e){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeObjects=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return n({},e,t)},{})},t.swap=function(e){var t={};for(var n in e)t[e[n]]=n;return t},t.filterByKey=function(e,t){return Object.keys(e).filter(t).reduce(function(t,n){return t[n]=e[n],t},{})},t.lens=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(e,t){return e?e[t]:void 0},e)},t.hash=function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t},t.deferredPromise=function(){var t,n;return{promise:new e(function(e,r){t=e,n=r}),reject:n,resolve:t}},t.poller=function(e,t,n){void 0===n&&(n=30);var r=0,i=!1;return function e(t,o,a){if(!(i||r>=n)){var c=null;try{c=t()}catch(e){return}c?o():setTimeout(function(){r++,e(t,o,2*a)},a)}}(e,t,50),{cancel:function(){i=!0}}},t.findIndex=function(e,t){for(var n=-1,r=0;r<e.length;r++){var i=e[r];if(t(i)){n=e.indexOf(i);break}}return n},t.forP=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){return t.reduce(function(t,n){return e.resolve(t).then(n)},n)}},t.nonPrimitiveEq=function e(t,n){var r,i=function(e){return Object.keys(t).every(e)};switch(r=t,{}.toString.call(r).match(/\[object (\w+)\]/)[1]){case"Array":return t.length===n.length&&i(function(r){return e(t.sort()[r],n.sort()[r])});case"Object":return Object.keys(t).length===Object.keys(n).length&&i(function(r){return e(t[r],n[r])});default:return t===n}},t.numericStringToNumber=function(e){if("string"==typeof e){var t=+e;if(!isNaN(t))return t}return e},t.onPageUnload=function(e){var t=function(t){if(!n&&t)return n=!0,e()},n=!1;["blur","visibilitychange"].forEach(function(e){window.addEventListener(e,function(){return t(document.hidden&&/Mobi|Android/i.test(navigator.userAgent))})}),["beforeunload","pagehide"].forEach(function(e){window.addEventListener(e,function(){return t(!0)})})},t.uuidv4=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}}).call(this,n(3).Promise)},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"URI",function(){return o}),n.d(t,"never",function(){return a}),n.d(t,"getSemigroup",function(){return c}),n.d(t,"getMonoid",function(){return s}),n.d(t,"getRaceMonoid",function(){return u}),n.d(t,"delay",function(){return f}),n.d(t,"fromIO",function(){return d}),n.d(t,"of",function(){return l}),n.d(t,"fromIOK",function(){return p}),n.d(t,"chainIOK",function(){return g}),n.d(t,"task",function(){return h}),n.d(t,"taskSeq",function(){return m}),n.d(t,"ap",function(){return v}),n.d(t,"apFirst",function(){return y}),n.d(t,"apSecond",function(){return b}),n.d(t,"chain",function(){return w}),n.d(t,"chainFirst",function(){return k}),n.d(t,"flatten",function(){return q}),n.d(t,"map",function(){return E});var r=n(2),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o="Task",a=function(){return new e(function(e){})};function c(e){return{concat:function(t,n){return function(){return t().then(function(t){return n().then(function(n){return e.concat(t,n)})})}}}}function s(e){return{concat:c(e).concat,empty:h.of(e.empty)}}function u(){return{concat:function(t,n){return function(){return e.race([t(),n()])}},empty:a}}function f(t){return function(n){return function(){return new e(function(e){setTimeout(function(){n().then(e)},t)})}}}function d(t){return function(){return e.resolve(t())}}function l(t){return function(){return e.resolve(t)}}function p(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return d(e.apply(void 0,t))}}function g(e){return w(p(e))}var h={URI:o,map:function(e,t){return function(){return e().then(t)}},of:l,ap:function(t,n){return function(){return e.all([t(),n()]).then(function(e){return(0,e[0])(e[1])})}},chain:function(e,t){return function(){return e().then(function(e){return t(e)()})}},fromIO:d,fromTask:function(e){return e}},m=i(i({},h),{ap:function(e,t){return function(){return e().then(function(e){return t().then(function(t){return e(t)})})}}}),_=Object(r.pipeable)(h),v=_.ap,y=_.apFirst,b=_.apSecond,w=_.chain,k=_.chainFirst,q=_.flatten,E=_.map}.call(this,n(3).Promise)},function(e,t,n){"use strict";function r(e){return e}n.r(t),n.d(t,"identity",function(){return r}),n.d(t,"unsafeCoerce",function(){return i}),n.d(t,"not",function(){return o}),n.d(t,"constant",function(){return a}),n.d(t,"constTrue",function(){return c}),n.d(t,"constFalse",function(){return s}),n.d(t,"constNull",function(){return u}),n.d(t,"constUndefined",function(){return f}),n.d(t,"constVoid",function(){return d}),n.d(t,"flip",function(){return l}),n.d(t,"flow",function(){return p}),n.d(t,"tuple",function(){return g}),n.d(t,"increment",function(){return h}),n.d(t,"decrement",function(){return m}),n.d(t,"absurd",function(){return _}),n.d(t,"tupled",function(){return v}),n.d(t,"untupled",function(){return y});var i=r;function o(e){return function(t){return!e(t)}}function a(e){return function(){return e}}var c=function(){return!0},s=function(){return!1},u=function(){return null},f=function(){},d=function(){};function l(e){return function(t,n){return e(n,t)}}function p(e,t,n,r,i,o,a,c,s){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return a(o(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return c(a(o(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return s(c(a(o(i(r(n(t(e.apply(this,arguments)))))))))}}}function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function h(e){return e+1}function m(e){return e-1}function _(e){throw new Error("Called `absurd` function which should be uncallable")}function v(e){return function(t){return e.apply(void 0,t)}}function y(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}}},function(e,t,n){"use strict";function r(e){return"function"==typeof e}var i=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=function(e){return r(e)||"object"==typeof e&&null!==e},t.isFunction=r,t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.now=i},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeEvent=function(e){return r({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{}},i(e))},t.serializeEvent=function(e){return r({id:e.id||null,name:e.name,time:(o(e.time)?e.time:new Date).toISOString(),properties:e.properties||{}},i(e))},t.deserializeMinimalEvent=function(e,t){return r({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties},i(t))},t.isEventTrackError=function(e){return void 0!==e.request_id},t.isFullPermutiveEventJson=function(e){return void 0!==e.properties};var i=function(e){return r({},e.session_id?{session_id:e.session_id}:{},e.view_id?{view_id:e.view_id}:{})},o=function(e){return isFinite(e)&&e instanceof Date}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(10),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){return i(i({},Object(r.a)(e,t)),{of:function(n){return e.of(t.of(n))},ap:function(n,r){return e.ap(e.map(n,function(e){return function(n){return t.ap(e,n)}}),r)}})}},function(e,t,n){"use strict";function r(e,t){return{map:function(n,r){return e.map(n,function(e){return t.map(e,r)})}}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"URI",function(){return d}),n.d(t,"left",function(){return l}),n.d(t,"right",function(){return p}),n.d(t,"rightIO",function(){return g}),n.d(t,"leftIO",function(){return h}),n.d(t,"rightTask",function(){return m}),n.d(t,"leftTask",function(){return _}),n.d(t,"fromIOEither",function(){return v}),n.d(t,"fold",function(){return y}),n.d(t,"getOrElse",function(){return b}),n.d(t,"orElse",function(){return w}),n.d(t,"swap",function(){return k}),n.d(t,"getSemigroup",function(){return q}),n.d(t,"getApplySemigroup",function(){return E}),n.d(t,"getApplyMonoid",function(){return S}),n.d(t,"tryCatch",function(){return P}),n.d(t,"bracket",function(){return x}),n.d(t,"taskify",function(){return O}),n.d(t,"getTaskValidation",function(){return T}),n.d(t,"getFilterable",function(){return I}),n.d(t,"fromEitherK",function(){return M}),n.d(t,"chainEitherK",function(){return C}),n.d(t,"fromIOEitherK",function(){return j}),n.d(t,"chainIOEitherK",function(){return A}),n.d(t,"tryCatchK",function(){return N}),n.d(t,"taskEither",function(){return R}),n.d(t,"taskEitherSeq",function(){return D}),n.d(t,"alt",function(){return B}),n.d(t,"ap",function(){return z}),n.d(t,"apFirst",function(){return F}),n.d(t,"apSecond",function(){return W}),n.d(t,"bimap",function(){return U}),n.d(t,"chain",function(){return K}),n.d(t,"chainFirst",function(){return G}),n.d(t,"flatten",function(){return H}),n.d(t,"map",function(){return Q}),n.d(t,"mapLeft",function(){return J}),n.d(t,"fromEither",function(){return V}),n.d(t,"fromOption",function(){return Y}),n.d(t,"fromPredicate",function(){return $}),n.d(t,"filterOrElse",function(){return X});var r=n(1),i=n(26),o=n(28),a=n(2),c=n(5),s=n(27),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=Object(i.a)(c.task),d="TaskEither",l=f.left,p=f.of;function g(e){return m(c.task.fromIO(e))}function h(e){return _(c.task.fromIO(e))}var m=f.rightM,_=f.leftM,v=c.task.fromIO;function y(e,t){return function(n){return f.fold(n,e,t)}}function b(e){return function(t){return f.getOrElse(t,e)}}function w(e){return function(t){return f.orElse(t,e)}}var k=f.swap;function q(e){return Object(c.getSemigroup)(r.getSemigroup(e))}function E(e){return Object(c.getSemigroup)(r.getApplySemigroup(e))}function S(e){return{concat:E(e).concat,empty:p(e.empty)}}function P(e,t){return function(){return e().then(r.right,function(e){return r.left(t(e))})}}function x(e,t,n){return f.chain(e,function(e){return f.chain(c.task.map(t(e),r.right),function(t){return f.chain(n(e,t),function(){return r.isLeft(t)?f.left(t.left):f.of(t.right)})})})}function O(t){return function(){var n=Array.prototype.slice.call(arguments);return function(){return new e(function(e){t.apply(null,n.concat(function(t,n){return e(null!=t?r.left(t):r.right(n))}))})}}}function T(e){var t=Object(s.a)(e,c.task);return u(u({_E:void 0},R),t)}function I(e){var t=r.getWitherable(e);return u({URI:d,_E:void 0},Object(o.a)(c.task,t))}function M(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return V(e.apply(void 0,t))}}function C(e){return K(M(e))}function j(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return v(e.apply(void 0,t))}}function A(e){return K(j(e))}function N(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return P(function(){return e.apply(void 0,n)},t)}}var R={URI:d,bimap:f.bimap,mapLeft:f.mapLeft,map:f.map,of:f.of,ap:f.ap,chain:f.chain,alt:f.alt,fromIO:g,fromTask:m,throwError:l},D=u(u({},R),{ap:function(e,t){return f.chain(e,function(e){return f.map(t,e)})}}),L=Object(a.pipeable)(R),B=L.alt,z=L.ap,F=L.apFirst,W=L.apSecond,U=L.bimap,K=L.chain,G=L.chainFirst,H=L.flatten,Q=L.map,J=L.mapLeft,V=L.fromEither,Y=L.fromOption,$=L.fromPredicate,X=L.filterOrElse}.call(this,n(3).Promise)},function(e,t,n){"use strict";var r=n(13).config,i=(n(13).configure,n(7).objectOrFunction),o=n(7).isFunction,a=(n(7).now,n(30).cast),c=n(31).all,s=n(32).race,u=n(33).resolve,f=n(34).reject,d=n(35).asap;function l(e){if(!o(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],function(e,t){function n(e){q(t,e)}try{e(function(e){w(t,e)},n)}catch(e){n(e)}}(e,this)}function p(e,t,n,r){var i,a,c,s,u=o(n);if(u)try{i=n(r),c=!0}catch(e){s=!0,a=e}else i=r,c=!0;b(t,i)||(u&&c?w(t,i):s?q(t,a):e===m?w(t,i):e===_&&q(t,i))}r.async=d;var g=void 0,h=0,m=1,_=2;function v(e,t,n,r){var i=e._subscribers,o=i.length;i[o]=t,i[o+m]=n,i[o+_]=r}function y(e,t){for(var n=e._subscribers,r=e._detail,i=0;i<n.length;i+=3)p(t,n[i],n[i+t],r);e._subscribers=null}function b(e,t){var n,r=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(i(t)&&(r=t.then,o(r)))return r.call(t,function(r){if(n)return!0;n=!0,t!==r?w(e,r):k(e,r)},function(t){if(n)return!0;n=!0,q(e,t)}),!0}catch(t){return!!n||(q(e,t),!0)}return!1}function w(e,t){e===t?k(e,t):b(e,t)||k(e,t)}function k(e,t){e._state===g&&(e._state=h,e._detail=t,r.async(E,e))}function q(e,t){e._state===g&&(e._state=h,e._detail=t,r.async(S,e))}function E(e){y(e,e._state=m)}function S(e){y(e,e._state=_)}l.prototype={constructor:l,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var n=this,i=new this.constructor(function(){});if(this._state){var o=arguments;r.async(function(){p(n._state,i,o[n._state-1],n._detail)})}else v(this,i,e,t);return i},catch:function(e){return this.then(null,e)}},l.all=c,l.cast=a,l.race=s,l.resolve=u,l.reject=f,t.Promise=l},function(e,t,n){"use strict";var r={instrument:!1};t.config=r,t.configure=function(e,t){if(2!==arguments.length)return r[e];r[e]=t}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(1),o=n(0),a=n(42),c=n(2),s=n(47);t.EVENTS_CACHE_KEY="permutive-events-cache";var u=function(){function n(e,t){this.state=e,this._internals=t,this.EVENTS_CACHE_OBJECT_STORE="events",this.CRYPTO_KEY_OBJECT_STORE="keys",this.CRYPTO_KEY_OBJECT_KEY="events",this.lastRefreshed=null,this.eventObjectCache=[],this.eventCacheSizeInBytes=0,this.retrieveLastRefreshTime(),this.eventStore=new a.EventsCacheStore(this._internals,new s.AESCrypto,"970c370e-66b5-4cc7-ad17-1d370e11bf75",this.EVENTS_CACHE_OBJECT_STORE+"_"+this.state.userId,this.CRYPTO_KEY_OBJECT_STORE+"_"+this.state.userId,this.CRYPTO_KEY_OBJECT_KEY,2)}return n.prototype.all=function(){return this.eventObjectCache},n.prototype.add=function(e,t){void 0===t&&(t=!0);for(var n=!1,r=0;r<this.eventObjectCache.length;r++)if(this.eventObjectCache[r].id===e.id){n=!0;break}return n?e=void 0:(this.eventObjectCache.push(e),t&&this.write()),e},n.prototype.processCachedEvents=function(e){for(var t=[],n=0;n<e.length;n++){var i=r.deserializeEvent(e[n]);t.push(i),this.add(i,!1)}return t},n.prototype.load=function(){var n=this;return this.eventStore.migrateIfRequired()().then(i.fold(function(e){return n._internals.network.error("Failed to migrate events cache. Got "+JSON.stringify(e)),n.reset().then(function(e){return[]})},function(){var r=n._internals.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{});return n.eventStore.get(t.EVENTS_CACHE_KEY)().then(function(t){return n._internals.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r),i.fold(function(e){return n._internals.network.error("Error fetching data from store. Got "+e),n.reset().then(function(e){return[]})},o.fold(function(){return e.resolve([])},function(t){return c.pipe(n.eventCacheSizeInBytes=2*JSON.stringify(t).length,function(e){n._internals.metrics.track({name:"sdk_events_cache_byte_total",value:n.eventCacheSizeInBytes,labels:{}}),n._internals.metrics.track({name:"sdk_events_cache_size_total",value:t.length,labels:{}})},function(n){return e.resolve(t)})}))(t)})}))},n.prototype.refresh=function(e){return void 0===e&&(e={processImmediately:!1}),e.from||(e.from=this.getRefreshFromTime(),this.lastRefreshed=e.from,this.storeLastRefreshTime()),this._internals.log("refreshing from: ",e.from),this._internals.api.events(this._internals.state.userId,{error:e.error,from:e.from})},n.prototype.processRefreshEvents=function(e,t){void 0===t&&(t={});for(var n=[],i=e||[],o=0;o<i.length;o++){var a=this.add(r.deserializeEvent(i[o]),!1);a&&n.push(a)}if(i.length>0){var c=new Date(i[i.length-1].time);c.setMilliseconds(c.getMilliseconds()+1),this.lastRefreshed=c,this.storeLastRefreshTime()}return this._internals.log("events from api: ",i),this._internals.log("new events from api: ",n),this._internals.log("events cache",this.eventObjectCache),n.length>0&&t.write&&this.write(),n},n.prototype.reset=function(){var e=this;return this._internals.log("Resetting Events Cache"),this.eventObjectCache=[],this.eventCacheSizeInBytes=0,this.lastRefreshed=null,this.eventStore.deleteStore()().then(function(){e.eventStore=new a.EventsCacheStore(e._internals,new s.AESCrypto,"970c370e-66b5-4cc7-ad17-1d370e11bf75",e.EVENTS_CACHE_OBJECT_STORE+"_"+e.state.userId,e.CRYPTO_KEY_OBJECT_STORE+"_"+e.state.userId,e.CRYPTO_KEY_OBJECT_KEY,2)})},n.prototype.write=function(e){void 0===e&&(e=this.eventObjectCache);for(var n=JSON.stringify(e),i=1;e.length>0&&n.length>this._internals.config.eventsCacheLimitBytes/2;)e.splice(0,i),i*=2,n=JSON.stringify(e);this._internals.log("Writing cache (#e)",e.length),this.eventStore.put(e.map(r.serializeEvent),t.EVENTS_CACHE_KEY)(),this.eventCacheSizeInBytes=2*n.length},n.prototype.setRefreshFromTime=function(e){this.lastRefreshed=e,this.storeLastRefreshTime()},n.prototype.getRefreshFromTime=function(){var e=this.lastRefreshed||new Date(0);return e.setMilliseconds(e.getMilliseconds()+1),e},n.prototype.storeLastRefreshTime=function(){this.state.setPermutiveData("last_refresh_time",this.lastRefreshed.toISOString())},n.prototype.getStateSizeInBytes=function(){return this.eventCacheSizeInBytes},n.prototype.retrieveLastRefreshTime=function(){var e=this.state.getPermutiveData("last_refresh_time")||null;e&&(this.lastRefreshed=new Date(e))},n}();t.PermutiveEventsCache=u}).call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e,t){this._internals=e,this.network=t,this.identities=this._internals.state.getPermutiveData("identities")||{},this.currentAliases=this._internals.state.getPermutiveData("aliases")||{},this.providers={}}return t.getAliasesFromIdentifyArg=function(e){if("string"!=typeof e&&"object"!=typeof e||null===e||""===e)throw new Error("Identify must be passed a non-empty string or list of aliases, value passed was '"+e+"'");return"string"==typeof e?[{id:e,tag:"default"}]:e},t.prototype.setIdentity=function(e,t,n){void 0===n&&(n=86400),this.identities[e]={value:t,expiry:Date.now()+Math.floor(1e3*n)},this._internals.state.setPermutiveData("identities",this.identities)},t.prototype.getIdentity=function(e){return{defined:e in this.identities,value:e in this.identities?this.identities[e].value:void 0}},t.prototype.getIdentities=function(e){var t=this;return void 0===e&&(e=!1),Object.keys(this.identities).reduce(function(n,r){var i=t.getIdentity(r).value;return void 0!==i&&(e&&!t.getProvider(r).usedForThirdPartyData()||(n[r]=i)),n},{})},t.prototype.hasExpired=function(e){return!(e in this.identities)||Date.now()>=this.identities[e].expiry},t.prototype.registerProvider=function(e){this.providers[e.getTag()]=e},t.prototype.getProvider=function(e){return e in this.providers?this.providers[e]:(this.network.error("Identity provider "+e+" is not registered.",this._internals.state.userId),null)},t.prototype.retrieveIdentity=function(t){var n=this,r=this.getProvider(t);return null===r?e.resolve(void 0):r.getId().then(function(e){var t=void 0===e?"sdk_third_party_identity_missing_count":"sdk_third_party_identity_present_count";return n._internals.metrics.track({name:t,value:1,labels:{identity_tag:r.getTag()}}),n.setIdentity(r.getTag(),e,r.getTtlInSeconds()),e})},t.prototype.retrieveAllIdentities=function(){var t=this,n=this._internals.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),r=[],i=function(n){if(!o.providers.hasOwnProperty(n))return"continue";var i=o.getIdentity(n),a=!i.defined||o.hasExpired(n)?o.retrieveIdentity(n):e.resolve(i.value);a.then(function(e){return void 0!==e?t._internals.api.identify([{id:e,tag:n}]):null}),r.push(a)},o=this;for(var a in this.providers)i(a);return e.all(r).then(function(e){return t._internals.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",n),e})},t.prototype.addAlias=function(e,t){this.currentAliases[t]=e},t.prototype.removeAliasByTag=function(e){delete this.currentAliases[e]},t.prototype.storeAliases=function(e){this._internals.state.setPermutiveData("aliases",e)},t.prototype.convertAliases=function(e){var t=this,n={default:0,appnexus:1},r=function(e){return t._internals.identities.getIdentity(e).defined?e in n?n[e]+1:1:0};return Object.keys(e).map(function(t){return{id:e[t],tag:t,priority:r(t)}})},t}();t.PermutiveIdentities=n}).call(this,n(3).Promise)},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){};t.SingleEnricher=o;var a=function(){function e(){this.replacementMap={}}return e.prototype.register=function(e){this.replacementMap=r({},this.replacementMap,e.replacementMap)},e.prototype.enrich=function(e){for(var t=[{},!0],n=0;n<Object.keys(e[0]).length;n++){var r=Object.keys(e[0])[n],o=e[0][r];switch(!0){case"string"==typeof o&&"$"===o[0]:var a=i(this.isPropertyReplaceable(o),2),c=a[0],s=a[1];t[0][r]=c?s:o,t[1]=!!c&&t[1];break;case null!==o&&"object"==typeof o&&o.constructor===Object:var u=this.enrich([o,t[1]]);t[0][r]=u[0],t[1]=t[1]&&u[1];break;default:t[0][r]=o}}return t},e.prototype.isPropertyReplaceable=function(e){var t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]},e}();t.GlobalEnricher=a},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=["mousemove","click","scroll"],a=["email","tel","submit","reset","button","file","password","radio","checkbox"];t.load=function(e,t,n){0};var c=function(){function e(e){var t=this;this.dirtyState=!1,this.initialised=!1,this.totalCompletion=0,this.totalEngagedTime=0,this.trackPageviewEngagement="boolean"!=typeof{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_pageview_engagement||{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_pageview_engagement,this.trackPageviewEngagementAggregate="boolean"==typeof{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_aggregate_pageview_engagement&&{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_aggregate_pageview_engagement,this.trackFormSubmission="boolean"!=typeof{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_form_submission||{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_form_submission,this.trackLinkClick="boolean"!=typeof{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_link_click||{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_link_click,this.aggregateTimeoutDuration=3e5,this.hasAggregateFired=!1,this.permutive=e.permutive,this._internals=e._internals,this.context=e.context,this.eventInterval=e.eventInterval||5,this.page=e.page||{},this.sendPageviewEvent(),(e.dirtyEvents||o).map(function(e){window.addEventListener(e,function(){t.dirtyState=!0,t.trackPageviewEngagementAggregate&&t.resetTimeout()})}),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners,!1),this.trackPageviewEngagement&&(this.timerHandle=this.registerEngagementInterval(this.eventInterval)),this.trackPageviewEngagementAggregate&&(this.setAggregateTimeout(this.aggregateTimeoutDuration),i.onPageUnload(function(){return t.hasAggregateFired?null:t.sendAggregateEvent(t.totalEngagedTime,t.totalCompletion)})),this.initialised=!0}return e.prototype.sendPageviewEvent=function(){var e=this,t=r({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{},{},this.enrichmentProperties(this.context.isArticle),this.page?this.page:{}),n={success:function(){e.initialised||e._internals.metrics.trackTimeSinceInit("sdk_first_event_tracked_task_duration_seconds",{})}};this.permutive.track("Pageview",t,n)},e.prototype.sendLinkClickEvent=function(e,t){if(window.location.href&&e.href){var n=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:n},{useBeacon:t})}},e.prototype.sendFormSubmissionEvent=function(e){var t=e.currentTarget,n={form:r({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{},t.name&&"string"==typeof t.name?{name:t.name}:{},t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",n)},e.prototype.sendEngagementEvent=function(e){var t=this.updateState(e),n=t.engaged_time,i=t.total_engaged_time,o=t.completion,a=t.total_completion,c=r({engaged_time:n,total_engaged_time:i},this.page,{completion:o,total_completion:a},{});this.permutive.track("PageviewEngagement",c)},e.prototype.sendAggregateEvent=function(e,t,n){void 0===n&&(n=!0);var i=r({total_engaged_time:e},{total_completion:t});this.permutive.track("PageviewEngagementAggregate",i,{useBeacon:n}),this.hasAggregateFired=!0},e.prototype.reset=function(e){this._internals.state.viewId=i.uuidv4(),this.page=e.page||null,this.totalCompletion=0,this.totalEngagedTime=0,this.sendPageviewEvent(),this.trackPageviewEngagement&&(clearInterval(this.timerHandle),this.timerHandle=this.registerEngagementInterval(this.eventInterval))},e.prototype.serializeForm=function(e){return[].slice.call(e.getElementsByTagName("input"),0).filter(function(e){return!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==a.indexOf(e.type.toLowerCase()))}).map(function(e){return{name:e.name||e.id,value:e.value}}).filter(function(e){return e.value.length<120})},e.prototype.enrichmentProperties=function(e){return r({},{},{},{})},e.prototype.findParent=function(e,t){if(e.tagName.toLowerCase()===t)return e;for(var n=e.parentElement;null!==n;){if(n.tagName.toLowerCase()===t)return n;n=n.parentElement}return null},e.prototype.registerEngagementInterval=function(e){var t=this;return setInterval(function(){t.dirtyState&&t.sendEngagementEvent(e)},1e3*e)},e.prototype.attachListeners=function(){var e=this;this.trackFormSubmission&&[].slice.call(document.getElementsByTagName("form"),0).forEach(function(t){t.addEventListener("submit",e._internals.makeSafe(e.sendFormSubmissionEvent.bind(e)))}),this.trackLinkClick&&document.body.addEventListener("click",function(t){var n=e.findParent(t.target,"a");if(n){var r=!("_blank"===n.target||t.metaKey||t.ctrlKey||t.shiftKey||2===t.which||3===t.which);e.sendLinkClickEvent(n,r)}})},e.prototype.updateState=function(e){var t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}},e.prototype.getCurrentCompletion=function(){var e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e},e.prototype.setAggregateTimeout=function(e){var t=this;return window.setTimeout(function(){return t.sendAggregateEvent(t.totalEngagedTime,t.totalCompletion,!1)},e)},e.prototype.resetTimeout=function(){clearTimeout(this.aggregateTimeoutHandle),this.aggregateTimeoutHandle=this.setAggregateTimeout(this.aggregateTimeoutDuration)},e}();t.WebAddon=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(e,t,n){e.unshift({functionName:"addon",arguments:["overlays",{}]})};var r=function(){function e(e){var t=this,n=this;this.permutive=e.permutive,this._internals=e._internals,this.reactions=this._internals.state.reactionManager.getReactions("show_overlay"),this.loadedImageCounts={};for(var r=function(e){var r=i.reactions[e],o=r.config,a=i.buildOverlayCss(o,e);document.head.insertAdjacentHTML("beforeend",a);var c=i.buildOverlayBody(o,e);document.body.insertAdjacentHTML("beforeend",c);var s="permutive-overlay-"+e,u=document.getElementById(s),f=u.getElementsByClassName("close")[0],d=u.getElementsByClassName("content")[0],l=function(){u.style.visibility="hidden",u.style.opacity="0"},p=function(e){d.contains(e.target)||(l(),u.removeEventListener("click",p))};f.addEventListener("click",l),u.addEventListener("click",p),[].slice.call(u.getElementsByTagName("a")).slice(1).forEach(function(e){e.addEventListener("click",function(e){r.trackConversion({useBeacon:!0})})});var g=u.getElementsByTagName("form")[0];g&&g.addEventListener("submit",function(e){e.preventDefault(),e.currentTarget,r.trackConversion({success:function(){g.submit()}})});var h=function(e,t){n.showOverlay(e),t.trackImpression()};r.reactEveryTime()?i.permutive.query(r.segmentCode,i._internals.makeSafe(function(e){e.result?h(s,r):t.permutive.trigger(r.segmentCode,"result",function(e){e.result&&h(s,r)})})):r.reactOnEntry()?i.permutive.trigger(r.segmentCode,"result",i._internals.makeSafe(function(e){e.result&&h(s,r)})):r.reactOnExit()&&i.permutive.trigger(r.segmentCode,"result",i._internals.makeSafe(function(e){e.result||h(s,r)}))},i=this,o=0;o<this.reactions.length;o++)r(o)}return e.prototype.buildOverlayCss=function(e,t){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())},e.prototype.buildOverlayBody=function(e,t){var n="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(n='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):n=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${content}",n).replace(/<img /g,"<img onload='window.permutive.addons.overlays.loadedImage(\"permutive-overlay-"+t+"\")' ")},e.prototype.showOverlay=function(e){var t=this,n=document.getElementById(""+e),r=function(){var e=n.getElementsByTagName("div")[0],t=e.getBoundingClientRect().height,r=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-r/2+"px",e.style.top=window.innerHeight/2-t/2+"px",n.style.visibility="visible",n.style.opacity="1"},i=n.getElementsByTagName("img");if(i.length>0){var o=0,a=function(){o<10&&(!(e in t.loadedImageCounts)||t.loadedImageCounts[e]<i.length)?(o+=1,setTimeout(a,500)):r()};a()}else r()},e.prototype.loadedImage=function(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1},e}();t.OverlaysAddon=r},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.load=function(e,t,n){e.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};var ScriptRunnerAddon=function(){function ScriptRunnerAddon(options){var _this=this;this.permutive=options.permutive,this._internals=options._internals,this.network=options.network,this.reactions=this._internals.state.reactionManager.getReactions("run_script");for(var _loop_1=function(i){var reaction=this_1.reactions[i],run_1=function(reaction){var script=reaction.config.script.replace(/impression\(\)/g,"reaction.trackImpression();").replace(/conversion\(\)/g,"reaction.trackConversion();");try{eval(script)}catch(e){e.message="Error running custom script: "+e.message,_this.network.error(e,_this._internals.state.userId)}};reaction.reactEveryTime()?this_1.permutive.query(reaction.segmentCode,function(e){e.result?run_1(reaction):_this.permutive.trigger(reaction.segmentCode,"result",function(e){e.result&&run_1(reaction)})}):reaction.reactOnEntry()?this_1.permutive.trigger(reaction.segmentCode,"result",function(e){e.result&&run_1(reaction)}):reaction.reactOnExit()&&this_1.permutive.trigger(reaction.segmentCode,"result",function(e){e.result||run_1(reaction)})},this_1=this,i=0;i<this.reactions.length;i++)_loop_1(i)}return ScriptRunnerAddon}();exports.ScriptRunnerAddon=ScriptRunnerAddon},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o="_pdfps",a={};t.load=function(e,t,n){e.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){t.ready(n.makeSafe(function(){var e=0;googletag.pubads&&googletag.pubads().getSlots&&googletag.pubads().getSlots().length>0&&googletag.pubads().getSlots().forEach(function(t){t.getResponseInformation()&&e++});var t=0===e?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";n.metrics.track({name:t,value:1,labels:{target:"dfp"}})}),"realtime");var e,c=(e=n.getExternalData(o))?JSON.parse(e):[];googletag.cmd.push(function(){googletag.pubads().setTargeting("permutive",c.map(String))});var s=function(e){for(var t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId(),targeting_keys:[]},n={},r=e.getTargetingKeys(),i=0;i<r.length;i++){for(var o=r[i],a=[],c=e.getTargeting(o),s=0;s<c.length;s++)a.push(c[s].toString());a.length>0&&(n[o]=1,t.targeting_keys.push({key:o,value:a}))}var u=googletag.pubads().getTargetingKeys();for(i=0;i<u.length;i++){a=[];if(void 0===n[o=u[i]]){for(c=googletag.pubads().getTargeting(u[i]),s=0;s<c.length;s++)a.push(c[s].toString());a.length>0&&t.targeting_keys.push({key:o,value:a})}}return t},u=function(e){try{var n=!1;window.addEventListener("blur",function(){if(n){var r=a[e];r&&t.track("SlotClicked",r)}}),document.getElementById(e).addEventListener("mouseover",function(){n=!0}),document.getElementById(e).addEventListener("mouseout",function(){n=!1})}catch(e){}};googletag.pubads&&googletag.pubads().getSlots&&googletag.pubads().getSlots().forEach(function(e){var t=e.getResponseInformation();if(t){var n=e.getSlotElementId(),r={advertiser_id:i.numericStringToNumber(t.advertiserId),campaign_id:i.numericStringToNumber(t.campaignId),line_item_id:i.numericStringToNumber(t.lineItemId),creative_id:i.numericStringToNumber(t.creativeId),is_empty:!1,service_name:"publisher_ads",slot:s(e)};a[n]=r,u(n)}}),googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(e){var t=e,n=t.slot.getSlotElementId(),o={advertiser_id:i.numericStringToNumber(t.advertiserId),campaign_id:i.numericStringToNumber(t.campaignId),line_item_id:i.numericStringToNumber(t.lineItemId),creative_id:i.numericStringToNumber(t.creativeId),is_empty:t.isEmpty,service_name:t.serviceName,slot:s(e.slot)};if(t.size){var c=r(t.size),f=c[0],d=c[1];c.slice(2);"number"==typeof f&&"number"==typeof d&&(o.width=f,o.height=d)}a[n]=o,u(n)}),googletag.pubads().addEventListener("impressionViewable",function(e){var n=e.slot.getResponseInformation();n&&t.track("SlotViewable",{advertiser_id:i.numericStringToNumber(n.advertiserId),campaign_id:i.numericStringToNumber(n.campaignId),line_item_id:i.numericStringToNumber(n.lineItemId),creative_id:i.numericStringToNumber(n.creativeId),service_name:e.serviceName,slot:s(e.slot)})})}),window.addEventListener("message",function(e){try{var n=JSON.parse(e.data);if(n.permutive_type&&"google_ad_click"===n.permutive_type){var r=n.data.ad_unit_path,o=i.numericStringToNumber(n.data.creative_id),c=void 0;Object.keys(a).forEach(function(e){void 0!==a[e].slot&&a[e].slot.ad_unit_path===r&&a[e].creative_id===o&&(c=a[e])}),c=c||{line_item_id:i.numericStringToNumber(n.data.line_item_id),advertiser_id:i.numericStringToNumber(n.data.advertiser_id),campaign_id:i.numericStringToNumber(n.data.order_id),creative_id:i.numericStringToNumber(o),is_empty:!1},t.track("SlotClicked",c)}}catch(e){}},!1)})};var c=function(){function e(e){var t=this;this.trackedTargetingLimitMetric=!1,this._internals=e._internals;var n=this._internals.getExternalData(o);this.liveSegments=n?JSON.parse(n):[],this.eligibleSegments={};for(var r=this._internals.state.reactionManager.getSpecializedReactions("target_dfp"),i=0;i<r.dfp.length;i++){var a=r.dfp[i];this.eligibleSegments[a]=a}for(var c in r.dfp_legacy)if(r.dfp_legacy.hasOwnProperty(c)){var s=r.dfp_legacy[c];this.eligibleSegments[c]=s}var u=this._internals.queryManager.userSegments;this.updateSegments(this.filterSegments(u)),this._internals.messages.emit("permutive:dfp:ready"),this._internals.messages.on("permutive:segments:updated",this._internals.makeSafe(function(){var e=t._internals.queryManager.userSegments;t.updateIfNecessary(e)})),this._internals.messages.on("permutive:reset",this._internals.makeSafe(function(){t._internals.removeExternalData(o),t._internals.deleteCookie(o),t.liveSegments=[]}))}return e.prototype.updateIfNecessary=function(e){var t=this.filterSegments(e);this._internals.arraysEqual(t,this.liveSegments)||this.updateSegments(t)},e.prototype.updateSegments=function(e){var t=this.processActivations(this._internals.thirdParty.getActivationMetadata()),n=e.concat(t);encodeURIComponent(JSON.stringify(n)).length>1500&&(n=e,this.trackedTargetingLimitMetric||(this._internals.metrics.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),this.trackedTargetingLimitMetric=!0)),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){return googletag.pubads().setTargeting("permutive",n.map(String).concat(["rts"]))});var r=JSON.stringify(n.map(String));this._internals.setExternalData(o,r),"boolean"==typeof{auto_init:!0,networks:[{name:"Default",network_code:"5117602"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0}.sync_segments_cookie&&{auto_init:!0,networks:[{name:"Default",network_code:"5117602"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0}.sync_segments_cookie&&this._internals.api.segmentSync(o,r),this.liveSegments=e},e.prototype.filterSegments=function(e){var t=this;return e.filter(function(e){return e in t.eligibleSegments}).map(function(e){return t.eligibleSegments[e]})},e.prototype.processActivations=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)&&n in this.eligibleSegments)for(var r=0;r<e[n].length;r++)t.push(e[n][r]);return t},e}();t.DFPAddon=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.load=function(e,t,n){r.poller(function(){return"undefined"!=typeof fbq},function(){return t.addon("facebook_pixel_v2",{})})};var i=function(){function e(e){var t=this;this.permutive=e.permutive,this._internals=e._internals;for(var n=this._internals.state.getPermutiveData("addon:facebook_pixel_v2")||!1,r=this._internals.queryManager.userSegmentsDict,i=this._internals.state.reactionManager.getReactions("facebook_pixel_v2"),o=!n,a=function(){var e=i[s],n=e.segmentCode;c.permutive.trigger(e.segmentCode,"",function(n){t.firePixel(n.result?"PermutiveSegmentEntry":"PermutiveSegmentExit",e)}),o&&n in r&&c.firePixel("PermutiveSegmentEntry",e)},c=this,s=0;s<i.length;s++)a();o&&this._internals.state.setPermutiveData("addon:facebook_pixel_v2",!0),this._internals.messages.on("permutive:reset",function(){t._internals.state.setPermutiveData("addon:facebook_pixel_v2",!1)})}return e.prototype.firePixel=function(e,t){fbq("trackCustom",e,{segment_id:t.segmentCode}),t.trackImpression()},e}();t.FacebookPixelV2Addon=i},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(e,t,n){e.push({functionName:"addon",arguments:["tracking_pixel",{}]})};var i=function(){function e(e){var t=this,n=this;this.permutive=e.permutive,this._internals=e._internals,this.latestStateByDomain=this._internals.state.getPermutiveData("addon:tracking_pixel")||{},this.reactions=this._internals.state.reactionManager.getReactions("tracking_pixel");var r=0===Object.keys(this.latestStateByDomain).length;this.eligibleSegmentsForEntries={},this.eligibleSegmentsForExits={};for(var i=0;i<this.reactions.length;i++){var o=this.reactions[i],a=o.segmentCode,c=o.config.pixel_url,s=this.extractPixelType(c);o.reactOnEntry()?(s in this.eligibleSegmentsForEntries||(this.eligibleSegmentsForEntries[s]={}),this.eligibleSegmentsForEntries[s][a]=o):o.reactOnExit()&&(s in this.eligibleSegmentsForExits||(this.eligibleSegmentsForExits[s]={}),this.eligibleSegmentsForExits[s][a]=o)}var u=this._internals.queryManager.userSegments;r&&this._internals.makeSafe(function(){return t.firePixelsIfNecessary(u)}),this._internals.messages.on("permutive:segments:updated",this._internals.makeSafe(function(){var e=t._internals.queryManager.userSegments;n.firePixelsIfNecessary(e)})),this._internals.messages.on("permutive:reset",this._internals.makeSafe(function(){n.latestStateByDomain={},t._internals.state.setPermutiveData("addon:tracking_pixel",{})}))}return e.prototype.extractPixelType=function(e){return e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]},e.prototype.firePixelsIfNecessary=function(e){var t=this,n=Object.keys(r({},this.eligibleSegmentsForEntries,this.eligibleSegmentsForExits)),i={},o=this.eligibleSegmentsForEntries,a=this.eligibleSegmentsForExits;n.forEach(function(t){i[t]=i[t]||[];for(var n=0;n<e.length;n++){var r=e[n];(o[t]&&o[t][r]||a[t]&&a[t][r])&&i[t].push(e[n])}}),n.forEach(function(e){for(var n=i[e]||[],r=Array.isArray(t.latestStateByDomain[e])?t.latestStateByDomain[e]:[],c=0;c<n.length;c++){var s=n[c];if(-1===r.indexOf(s))(u=o[e]&&o[e][s])&&u.reactOnEntry()&&t.firePixel(u)}for(c=0;c<r.length;c++){var u;s=r[c];if(-1===n.indexOf(s))(u=a[e]&&a[e][s])&&u.reactOnExit()&&t.firePixel(u)}}),this.latestStateByDomain=i,this._internals.state.setPermutiveData("addon:tracking_pixel",this.latestStateByDomain)},e.prototype.firePixel=function(e){(new Image).src=e.config.pixel_url,e.trackImpression()},e}();t.PixelAddon=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(e,t,n){e.push({functionName:"addon",arguments:["twitter_pixel",{}]})};var r=function(){function e(e){var t=this,n=this;this.permutive=e.permutive,this._internals=e._internals,this.firedSegments=this._internals.state.getPermutiveData("addon:twitter_pixel")||{},this.reactions=this._internals.state.reactionManager.getReactions("twitter_pixel");var r=0===Object.keys(this.firedSegments).length;this.eligibleSegments={};for(var i=0;i<this.reactions.length;i++){var o=this.reactions[i],a=o.segmentCode;this.eligibleSegments[a]=o}r&&this.firePixelsIfNecessary(this._internals.queryManager.userSegments),this._internals.messages.on("permutive:segments:updated",function(){n.firePixelsIfNecessary(t._internals.queryManager.userSegments)}),this._internals.messages.on("permutive:reset",function(){n.firedSegments={},t._internals.state.setPermutiveData("addon:twitter_pixel",{})})}return e.prototype.firePixelsIfNecessary=function(e){for(var t=0;t<e.length;t++){var n=e[t];n in this.eligibleSegments&&!(n in this.firedSegments)&&(this.firePixel(this.eligibleSegments[n]),this.firedSegments[n]=1)}this._internals.state.setPermutiveData("addon:twitter_pixel",this.firedSegments)},e.prototype.firePixel=function(e){(new Image).src="https://analytics.twitter.com/i/adsct?txn_id="+e.config.audience_tag_id+"&p_id=Twitter",e.trackImpression()},e}();t.TwitterAddon=r},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(6),o=n(0);var a={concat:function(e,t){return 0!==e?e:t},empty:0};var c=function(e,t){return e<t?-1:e>t?1:0};function s(e,t){return e===t}var u={equals:s,compare:c};function f(e){var t=function(t,n){return t===n?0:e(t,n)};return{equals:function(e,n){return 0===t(e,n)},compare:t}}var d={concat:{concat:function(e,t){return f(function(n,r){return a.concat(e.compare(n,r),t.compare(n,r))})}}.concat,empty:f(function(){return 0})};var l={URI:"Ord",contramap:function(e,t){return f(function(n,r){return e.compare(t(n),t(r))})}},p=(Object(r.pipeable)(l).contramap,l.contramap(u,function(e){return e.valueOf()}),function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r});var g=function(e,t){var n=e.length;if(0===n)return t;var r=t.length;if(0===r)return e;for(var i=Array(n+r),o=0;o<n;o++)i[o]=e[o];for(o=0;o<r;o++)i[o+n]=t[o];return i};var h=[];function m(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n}function _(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r].length;var i=Array(t),o=0;for(r=0;r<n;r++){for(var a=e[r],c=a.length,s=0;s<c;s++)i[s+o]=a[s];o+=c}return i}function v(e){return 0===e.length}function y(e){return e.length>0}function b(e,t){return e<0||e>=t.length}function w(e,t){return b(e,t)?o.none:Object(o.some)(t[e])}function k(e,t){for(var n=e.length,r=Array(n+1),i=0;i<n;i++)r[i]=e[i];return r[n]=t,r}var q=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};function E(e,t,n){var r=p(n);return r.splice(e,0,t),r}function S(e,t,n){if(n[e]===t)return n;var r=p(n);return r[e]=t,r}function P(e,t){var n=p(t);return n.splice(e,1),n}function x(e){return function(t){return p(t).sort(e.compare)}}function O(e,t,n){for(var r=[],i=Math.min(e.length,t.length),o=0;o<i;o++)r[o]=n(e[o],t[o]);return r}function T(e){return function(t,n){for(var r,i=0,o=n.length;i<o;i++)if(r=n[i],e.equals(r,t))return!0;return!1}}function I(e){return function(t){for(var n=[],r=t;y(r);){var i=e(r),o=i[0],a=i[1];n.push(o),r=a}return n}}function M(e){return function(t){return[t.slice(0,e),t.slice(e)]}}var C=function(e){return[e]},j={URI:"ReadonlyArray",map:function(e,t){return e.map(function(e){return t(e)})},mapWithIndex:function(e,t){return e.map(function(e,n){return t(n,e)})},compact:function(e){return j.filterMap(e,i.identity)},separate:function(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var o=i[r];"Left"===o._tag?t.push(o.left):n.push(o.right)}return{left:t,right:n}},filter:function(e,t){return e.filter(t)},filterMap:function(e,t){return j.filterMapWithIndex(e,function(e,n){return t(n)})},partition:function(e,t){return j.partitionWithIndex(e,function(e,n){return t(n)})},partitionMap:function(e,t){return j.partitionMapWithIndex(e,function(e,n){return t(n)})},of:C,ap:function(e,t){return _(j.map(e,function(e){return j.map(t,e)}))},chain:function(e,t){for(var n=0,r=e.length,i=new Array(r),o=0;o<r;o++){n+=(s=t(e[o])).length,i[o]=s}var a=Array(n),c=0;for(o=0;o<r;o++){for(var s,u=(s=i[o]).length,f=0;f<u;f++)a[f+c]=s[f];c+=u}return a},reduce:function(e,t,n){return j.reduceWithIndex(e,t,function(e,t,r){return n(t,r)})},foldMap:function(e){var t=j.foldMapWithIndex(e);return function(e,n){return t(e,function(e,t){return n(t)})}},reduceRight:function(e,t,n){return j.reduceRightWithIndex(e,t,function(e,t,r){return n(t,r)})},unfold:function(e,t){for(var n=[],r=e;;){var i=t(r);if(!Object(o.isSome)(i))break;var a=i.value,c=a[0],s=a[1];n.push(c),r=s}return n},traverse:function(e){var t=j.traverseWithIndex(e);return function(e,n){return t(e,function(e,t){return n(t)})}},sequence:function(e){return function(t){return j.reduce(t,e.of(j.zero()),function(t,n){return e.ap(e.map(t,function(e){return function(t){return k(e,t)}}),n)})}},zero:function(){return h},alt:function(e,t){return g(e,t())},extend:function(e,t){return e.map(function(e,n,r){return t(r.slice(n))})},wither:function(e){var t=j.traverse(e);return function(n,r){return e.map(t(n,r),j.compact)}},wilt:function(e){var t=j.traverse(e);return function(n,r){return e.map(t(n,r),j.separate)}},reduceWithIndex:function(e,t,n){for(var r=e.length,i=t,o=0;o<r;o++)i=n(o,i,e[o]);return i},foldMapWithIndex:function(e){return function(t,n){return t.reduce(function(t,r,i){return e.concat(t,n(i,r))},e.empty)}},reduceRightWithIndex:function(e,t,n){return e.reduceRight(function(e,t,r){return n(r,t,e)},t)},traverseWithIndex:function(e){return function(t,n){return j.reduceWithIndex(t,e.of(j.zero()),function(t,r,i){return e.ap(e.map(r,function(e){return function(t){return k(e,t)}}),n(t,i))})}},partitionMapWithIndex:function(e,t){for(var n=[],r=[],i=0;i<e.length;i++){var o=t(i,e[i]);"Left"===o._tag?n.push(o.left):r.push(o.right)}return{left:n,right:r}},partitionWithIndex:function(e,t){for(var n=[],r=[],i=0;i<e.length;i++){var o=e[i];t(i,o)?r.push(o):n.push(o)}return{left:n,right:r}},filterMapWithIndex:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=t(r,e[r]);Object(o.isSome)(i)&&n.push(i.value)}return n},filterWithIndex:function(e,t){return e.filter(function(e,n){return t(n,e)})}},A=Object(r.pipeable)(j);A.alt,A.ap,A.apFirst,A.apSecond,A.chain,A.chainFirst,A.duplicate,A.extend,A.filter,A.filterMap,A.filterMapWithIndex,A.filterWithIndex,A.foldMap,A.foldMapWithIndex,A.map,A.mapWithIndex,A.partition,A.partitionMap,A.partitionMapWithIndex,A.partitionWithIndex,A.reduce,A.reduceRight,A.reduceRightWithIndex,A.reduceWithIndex,A.compact,A.separate;n.d(t,"URI",function(){return N}),n.d(t,"getShow",function(){return R}),n.d(t,"getMonoid",function(){return D}),n.d(t,"getEq",function(){return L}),n.d(t,"getOrd",function(){return B}),n.d(t,"empty",function(){return z}),n.d(t,"makeBy",function(){return F}),n.d(t,"range",function(){return W}),n.d(t,"replicate",function(){return U}),n.d(t,"flatten",function(){return K}),n.d(t,"foldLeft",function(){return G}),n.d(t,"foldRight",function(){return H}),n.d(t,"scanLeft",function(){return Q}),n.d(t,"scanRight",function(){return J}),n.d(t,"isEmpty",function(){return V}),n.d(t,"isNonEmpty",function(){return Y}),n.d(t,"isOutOfBound",function(){return $}),n.d(t,"lookup",function(){return X}),n.d(t,"cons",function(){return Z}),n.d(t,"snoc",function(){return ee}),n.d(t,"head",function(){return te}),n.d(t,"last",function(){return ne}),n.d(t,"tail",function(){return re}),n.d(t,"init",function(){return ie}),n.d(t,"takeLeft",function(){return oe}),n.d(t,"takeRight",function(){return ae}),n.d(t,"takeLeftWhile",function(){return ce}),n.d(t,"spanLeft",function(){return se}),n.d(t,"dropLeft",function(){return ue}),n.d(t,"dropRight",function(){return fe}),n.d(t,"dropLeftWhile",function(){return de}),n.d(t,"findIndex",function(){return le}),n.d(t,"findFirst",function(){return pe}),n.d(t,"findFirstMap",function(){return ge}),n.d(t,"findLast",function(){return he}),n.d(t,"findLastMap",function(){return me}),n.d(t,"findLastIndex",function(){return _e}),n.d(t,"copy",function(){return ve}),n.d(t,"unsafeInsertAt",function(){return ye}),n.d(t,"insertAt",function(){return be}),n.d(t,"unsafeUpdateAt",function(){return we}),n.d(t,"updateAt",function(){return ke}),n.d(t,"unsafeDeleteAt",function(){return qe}),n.d(t,"deleteAt",function(){return Ee}),n.d(t,"modifyAt",function(){return Se}),n.d(t,"reverse",function(){return Pe}),n.d(t,"rights",function(){return xe}),n.d(t,"lefts",function(){return Oe}),n.d(t,"sort",function(){return Te}),n.d(t,"zipWith",function(){return Ie}),n.d(t,"zip",function(){return Me}),n.d(t,"unzip",function(){return Ce}),n.d(t,"rotate",function(){return je}),n.d(t,"elem",function(){return Ae}),n.d(t,"uniq",function(){return Ne}),n.d(t,"sortBy",function(){return Re}),n.d(t,"chop",function(){return De}),n.d(t,"splitAt",function(){return Le}),n.d(t,"chunksOf",function(){return Be}),n.d(t,"comprehension",function(){return ze}),n.d(t,"union",function(){return Fe}),n.d(t,"intersection",function(){return We}),n.d(t,"difference",function(){return Ue}),n.d(t,"of",function(){return Ke}),n.d(t,"array",function(){return Ge}),n.d(t,"alt",function(){return Qe}),n.d(t,"ap",function(){return Je}),n.d(t,"apFirst",function(){return Ve}),n.d(t,"apSecond",function(){return Ye}),n.d(t,"chain",function(){return $e}),n.d(t,"chainFirst",function(){return Xe}),n.d(t,"duplicate",function(){return Ze}),n.d(t,"extend",function(){return et}),n.d(t,"filter",function(){return tt}),n.d(t,"filterMap",function(){return nt}),n.d(t,"filterMapWithIndex",function(){return rt}),n.d(t,"filterWithIndex",function(){return it}),n.d(t,"foldMap",function(){return ot}),n.d(t,"foldMapWithIndex",function(){return at}),n.d(t,"map",function(){return ct}),n.d(t,"mapWithIndex",function(){return st}),n.d(t,"partition",function(){return ut}),n.d(t,"partitionMap",function(){return ft}),n.d(t,"partitionMapWithIndex",function(){return dt}),n.d(t,"partitionWithIndex",function(){return lt}),n.d(t,"reduce",function(){return pt}),n.d(t,"reduceRight",function(){return gt}),n.d(t,"reduceRightWithIndex",function(){return ht}),n.d(t,"reduceWithIndex",function(){return mt}),n.d(t,"compact",function(){return _t}),n.d(t,"separate",function(){return vt});var N="Array",R=function(e){return{show:function(t){return"["+t.map(e.show).join(", ")+"]"}}},D=function(){return{concat:g,empty:h}},L=function(e){return{equals:function(t,n){return t===n||t.length===n.length&&t.every(function(t,r){return e.equals(t,n[r])})}}},B=function(e){return f(function(t,n){for(var r=t.length,i=n.length,o=Math.min(r,i),a=0;a<o;a++){var c=e.compare(t[a],n[a]);if(0!==c)return c}return u.compare(r,i)})},z=[],F=m,W=function(e,t){return m(t-e+1,function(t){return e+t})},U=function(e,t){return m(e,function(){return t})},K=_,G=function(e,t){return function(n){return v(n)?e():t(n[0],n.slice(1))}},H=function(e,t){return function(n){return v(n)?e():t(n.slice(0,n.length-1),n[n.length-1])}},Q=function(e,t){return function(n){var r=n.length,i=new Array(r+1);i[0]=e;for(var o=0;o<r;o++)i[o+1]=t(i[o],n[o]);return i}},J=function(e,t){return function(n){var r=n.length,i=new Array(r+1);i[r]=e;for(var o=r-1;o>=0;o--)i[o]=t(n[o],i[o+1]);return i}},V=v,Y=y,$=b,X=w,Z=function(e,t){for(var n=t.length,r=Array(n+1),i=0;i<n;i++)r[i+1]=t[i];return r[0]=e,r},ee=k,te=function(e){return v(e)?o.none:Object(o.some)(e[0])},ne=function(e){return w(e.length-1,e)},re=function(e){return v(e)?o.none:Object(o.some)(e.slice(1))},ie=function(e){var t=e.length;return 0===t?o.none:Object(o.some)(e.slice(0,t-1))},oe=function(e){return function(t){return t.slice(0,e)}},ae=function(e){return function(t){return 0===e?h:t.slice(-e)}};function ce(e){return function(e){return function(t){for(var n=q(t,e),r=Array(n),i=0;i<n;i++)r[i]=t[i];return r}}(e)}function se(e){return function(e){return function(t){for(var n=q(t,e),r=Array(n),i=0;i<n;i++)r[i]=t[i];var o=t.length,a=Array(o-n);for(i=n;i<o;i++)a[i-n]=t[i];return{init:r,rest:a}}}(e)}var ue=function(e){return function(t){return t.slice(e,t.length)}},fe=function(e){return function(t){return t.slice(0,t.length-e)}},de=function(e){return function(t){for(var n=q(t,e),r=t.length,i=Array(r-n),o=n;o<r;o++)i[o-n]=t[o];return i}},le=function(e){return function(t){for(var n=t.length,r=0;r<n;r++)if(e(t[r]))return Object(o.some)(r);return o.none}};function pe(e){return function(e){return function(t){for(var n=t.length,r=0;r<n;r++)if(e(t[r]))return Object(o.some)(t[r]);return o.none}}(e)}var ge=function(e){return function(t){for(var n=t.length,r=0;r<n;r++){var i=e(t[r]);if(Object(o.isSome)(i))return i}return o.none}};function he(e){return function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return Object(o.some)(t[n]);return o.none}}(e)}var me=function(e){return function(t){for(var n=t.length-1;n>=0;n--){var r=e(t[n]);if(Object(o.isSome)(r))return r}return o.none}},_e=function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return Object(o.some)(n);return o.none}},ve=function(e){for(var t=e.length,n=Array(t),r=0;r<t;r++)n[r]=e[r];return n},ye=E,be=function(e,t){return function(n){return e<0||e>n.length?o.none:Object(o.some)(E(e,t,n))}},we=S,ke=function(e,t){return function(n){return b(e,n)?o.none:Object(o.some)(S(e,t,n))}},qe=P,Ee=function(e){return function(t){return b(e,t)?o.none:Object(o.some)(P(e,t))}},Se=function(e,t){return function(n){return b(e,n)?o.none:Object(o.some)(S(e,t(n[e]),n))}},Pe=function(e){return p(e).reverse()},xe=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];"Right"===i._tag&&t.push(i.right)}return t},Oe=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];"Left"===i._tag&&t.push(i.left)}return t},Te=x,Ie=O,Me=function(e,t){return O(e,t,function(e,t){return[e,t]})},Ce=function(e){for(var t=[],n=[],r=0;r<e.length;r++)t[r]=e[r][0],n[r]=e[r][1];return[t,n]},je=function e(t){return function(n){var r=n.length;return 0===t||r<=1||r===Math.abs(t)?n:t<0?e(r+t)(n):n.slice(-t).concat(n.slice(0,r-t))}},Ae=T,Ne=function(e){var t=T(e);return function(e){for(var n=[],r=e.length,i=0;i<r;i++){var o=e[i];t(o,n)||n.push(o)}return r===n.length?e:n}},Re=function(e){var t=d;return x(e.reduce(t.concat,t.empty))},De=I,Le=M,Be=function(e){return function(t){return 0===t.length?h:b(e-1,t)?[t]:I(M(e))(t)}};function ze(e,t,n){return void 0===n&&(n=function(){return!0}),function(e,t,n){void 0===n&&(n=function(){return!0});var r=function(e,i){return 0===i.length?n.apply(void 0,e)?[t.apply(void 0,e)]:h:j.chain(i[0],function(t){return r(k(e,t),i.slice(1))})};return r(h,e)}(e,t,n)}var Fe=function(e){var t=T(e);return function(e,n){return g(e,n.filter(function(n){return!t(n,e)}))}},We=function(e){var t=T(e);return function(e,n){return e.filter(function(e){return t(e,n)})}},Ue=function(e){var t=T(e);return function(e,n){return e.filter(function(e){return!t(e,n)})}},Ke=C,Ge={URI:N,map:j.map,mapWithIndex:j.mapWithIndex,compact:j.compact,separate:j.separate,filter:j.filter,filterMap:j.filterMap,partition:j.partition,partitionMap:j.partitionMap,of:Ke,ap:j.ap,chain:j.chain,reduce:j.reduce,foldMap:j.foldMap,reduceRight:j.reduceRight,unfold:j.unfold,traverse:j.traverse,sequence:j.sequence,zero:j.zero,alt:j.alt,extend:j.extend,wither:j.wither,wilt:j.wilt,reduceWithIndex:j.reduceWithIndex,foldMapWithIndex:j.foldMapWithIndex,reduceRightWithIndex:j.reduceRightWithIndex,traverseWithIndex:j.traverseWithIndex,partitionMapWithIndex:j.partitionMapWithIndex,partitionWithIndex:j.partitionWithIndex,filterMapWithIndex:j.filterMapWithIndex,filterWithIndex:j.filterWithIndex},He=Object(r.pipeable)(Ge),Qe=He.alt,Je=He.ap,Ve=He.apFirst,Ye=He.apSecond,$e=He.chain,Xe=He.chainFirst,Ze=He.duplicate,et=He.extend,tt=He.filter,nt=He.filterMap,rt=He.filterMapWithIndex,it=He.filterWithIndex,ot=He.foldMap,at=He.foldMapWithIndex,ct=He.map,st=He.mapWithIndex,ut=He.partition,ft=He.partitionMap,dt=He.partitionMapWithIndex,lt=He.partitionWithIndex,pt=He.reduce,gt=He.reduceRight,ht=He.reduceRightWithIndex,mt=He.reduceWithIndex,_t=He.compact,vt=He.separate},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(9),i=n(1),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e){var t=Object(r.a)(e,i.either);return o(o({},t),{chain:function(t,n){return e.chain(t,function(t){return Object(i.isLeft)(t)?e.of(Object(i.left)(t.left)):n(t.right)})},alt:function(n,r){return e.chain(n,function(e){return Object(i.isLeft)(e)?r():t.of(e.right)})},bimap:function(t,n,r){return e.map(t,function(e){return i.either.bimap(e,n,r)})},mapLeft:function(t,n){return e.map(t,function(e){return i.either.mapLeft(e,n)})},fold:function(t,n,r){return e.chain(t,Object(i.fold)(n,r))},getOrElse:function(t,n){return e.chain(t,Object(i.fold)(n,e.of))},orElse:function(n,r){return e.chain(n,Object(i.fold)(r,function(e){return t.of(e)}))},swap:function(t){return e.map(t,i.swap)},rightM:function(t){return e.map(t,i.right)},leftM:function(t){return e.map(t,i.left)},left:function(t){return e.of(Object(i.left)(t))}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(9),i=n(1),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n=Object(r.a)(t,Object(i.getValidation)(e));return o(o({},n),{chain:function(e,n){return t.chain(e,function(e){return Object(i.isLeft)(e)?t.of(Object(i.left)(e.left)):n(e.right)})},alt:function(r,o){return t.chain(r,function(r){return Object(i.isRight)(r)?n.of(r.right):t.map(o(),function(t){return Object(i.isLeft)(t)?Object(i.left)(e.concat(r.left,t.left)):t})})}})}},function(e,t,n){"use strict";var r=n(10),i=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};n.d(t,"a",function(){return c});var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e,t){var n=a(a({},function(e,t){var n=Object(r.a)(e,t),a=o(o({},n),{compact:function(n){return e.map(n,t.compact)},separate:function(e){return{left:a.compact(n.map(e,i.getLeft)),right:a.compact(n.map(e,i.getRight))}}});return a}(e,t)),{partitionMap:function(e,t){return{left:n.filterMap(e,function(e){return Object(i.getLeft)(t(e))}),right:n.filterMap(e,function(e){return Object(i.getRight)(t(e))})}},partition:function(e,t){return{left:n.filter(e,function(e){return!t(e)}),right:n.filter(e,t)}},filterMap:function(n,r){return e.map(n,function(e){return t.filterMap(e,r)})},filter:function(n,r){return e.map(n,function(e){return t.filter(e,r)})}});return n}},function(module,exports,__webpack_require__){"use strict";(function(Promise){var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},__read=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},__spread=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e};Object.defineProperty(exports,"__esModule",{value:!0});var PermutiveNetwork_1=__webpack_require__(38),PermutiveState_1=__webpack_require__(39),PermutiveUtils_1=__webpack_require__(4),PermutiveIdentities_1=__webpack_require__(16),PermutiveInternals_1=__webpack_require__(49),PermutiveMetrics_1=__webpack_require__(57),PermutiveThirdParty_1=__webpack_require__(58),PermutiveMethods_1=__webpack_require__(60),GraphQLIdentify_1=__webpack_require__(62),GraphQLEvents_1=__webpack_require__(63),Config_1=__webpack_require__(64),QueryManager_1=__webpack_require__(65),Option_1=__webpack_require__(0),Either_1=__webpack_require__(1),Apply_1=__webpack_require__(67),pipeable_1=__webpack_require__(2),Array_1=__webpack_require__(25),Eq_1=__webpack_require__(68),TaskEither_1=__webpack_require__(11),Task_1=__webpack_require__(5),function_1=__webpack_require__(6),sdkInitTimestamp=window.performance.now();exports.canRun=function(e){var t=e.Worker&&e.Blob?Either_1.right(null):Either_1.left("WebWorkers not supported"),n=["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"],r=Either_1.tryCatch(function(){e.localStorage.setItem("_permutive_ls_test","_permutive_ls_test"),e.localStorage.removeItem("_permutive_ls_test")},function(t){return e.localStorage&&0===e.localStorage.remainingSpace||n.some(function(e){return-1!==String(t).indexOf(e)})?"localStorage quota exceeded":"localStorage not supported"});return pipeable_1.pipe(Apply_1.sequenceT(Either_1.either)(r,t),function(t){return TaskEither_1.map(function(t){return e})(TaskEither_1.fromEither(t))})},exports.getTag=function(e){return pipeable_1.pipe(Either_1.fromNullable("Can't find permutive tag on the page")(e.permutive),TaskEither_1.fromEither)},exports.makeConfig=function(e){return TaskEither_1.right(__assign({},e,{config:Config_1.make(e.config)}))};var makeNetwork=function(e){return TaskEither_1.right([e,new PermutiveNetwork_1.PermutiveNetwork(e.config)])};exports.consent=function(e){return"object"==typeof e&&pipeable_1.pipe(window.localStorage.setItem("permutive-consent",JSON.stringify(e)),function(t){return e.opt_in&&null!==e.token&&e.token.length>0})},exports.hasConsent=function(e){var t,n=__read(e,2),r=n[0],i=n[1],o=TaskEither_1.getOrElse(function(e){return TaskEither_1.getOrElse(function(e){return TaskEither_1.getOrElse(function(e){return Task_1.of(!1)})(Array_1.elem(Eq_1.eqString)(r.config.projectId,["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"])?TaskEither_1.tryCatch(function(){return i.req({url:i.getEndpointUrl("/geoip"),method:"GET"},!1).then(function(e){return"Israel"===PermutiveUtils_1.lens(e,"geo_info","country")&&exports.consent({opt_in:!0,token:"whitelisted-geo"})})},function(e){return i.error("Failed to retrieve geo location information required for consent. Got "+e)}):TaskEither_1.right(!0))})(TaskEither_1.fromOption(function_1.constVoid)((t=JSON.parse(window.localStorage.getItem("permutive-consent")))?Option_1.some(exports.consent(t)):Option_1.none));var t})(TaskEither_1.fromOption(function_1.constVoid)((t=Array_1.findFirst(function(e){return"consent"===e.functionName})(r.q),Option_1.map(function(e){return exports.consent(e.arguments[0])})(t))));return Task_1.map(function(e){return e?Either_1.right(function_1.tuple(PermutiveUtils_1.mergeObjects(__assign({},r),{consent:exports.consent}),i)):Either_1.left("No consent to run on the page")})(o)};var init=function(tagAndNetwork){return TaskEither_1.tryCatch(function(){var _a=__read(tagAndNetwork,2),tag=_a[0],network=_a[1],context=PermutiveUtils_1.mergeObjects(tag.context||{},{path:window.location.pathname,url:window.location.href,referrer:document.referrer}),_internals=new PermutiveInternals_1.PermutiveInternals(tag.config,network),permutiveMethods=new PermutiveMethods_1.PermutiveMethods(_internals,network,context);_internals.state=new PermutiveState_1.PermutiveState(_internals,permutiveMethods,context),_internals.queryManager=new QueryManager_1.QueryManager(_internals,permutiveMethods,network),_internals.thirdParty=new PermutiveThirdParty_1.PermutiveThirdParty(_internals,permutiveMethods,network),_internals.identities=new PermutiveIdentities_1.PermutiveIdentities(_internals,network);var isMetricsUser=_internals.state.getPermutiveData("metricsEnabled");_internals.metrics=!0===isMetricsUser?new PermutiveMetrics_1.PermutiveMetrics(sdkInitTimestamp,_internals,permutiveMethods):!1===isMetricsUser?new PermutiveMetrics_1.PermutiveMetricsNoOp:pipeable_1.pipe(Math.random()<=_internals.config.metricsSamplingPercentage/100,function(e){return[_internals.state.setPermutiveData("metricsEnabled",e),e]},function(e){var t=__read(e,2);t[0];return t[1]?new PermutiveMetrics_1.PermutiveMetrics(sdkInitTimestamp,_internals,permutiveMethods):new PermutiveMetrics_1.PermutiveMetricsNoOp});var permutiveShell=PermutiveUtils_1.mergeObjects(tag,{q:window.permutive.q},{context:context},{addons:_internals.addons});[].forEach(function(s){try{eval(s)}catch(e){network.error(__assign({},e,{message:"Error running custom script "+s}),_internals.state.userId)}}),_internals.addBlocker("permutive:queries:initialised"),_internals.messages.on("permutive:blockers:empty",function(){var e=PermutiveUtils_1.mergeObjects(permutiveShell,{identify:permutiveMethods.identify.bind(permutiveMethods),on:permutiveMethods.on.bind(permutiveMethods),once:permutiveMethods.once.bind(permutiveMethods),track:permutiveMethods.track.bind(permutiveMethods),trigger:permutiveMethods.trigger.bind(permutiveMethods),query:permutiveMethods.query.bind(permutiveMethods),segment:permutiveMethods.segment.bind(permutiveMethods),segments:permutiveMethods.segments.bind(permutiveMethods),reset:permutiveMethods.reset.bind(permutiveMethods),ready:permutiveMethods.ready.bind(permutiveMethods),addon:permutiveMethods.addon.bind(permutiveMethods)},Array_1.elem(Eq_1.eqString)("970c370e-66b5-4cc7-ad17-1d370e11bf75",["c8c3489e-f329-40e8-bcfc-1f852e512b01","be668577-07f5-444d-98e0-222b990951b1"])?{_internals:_internals}:{});_internals.setAsReady();var t=["identify","trigger","addon","track"];permutiveShell.q.filter(function(e){return"consent"!==e.functionName}).sort(function(e,n){var r=t.indexOf(e.functionName),i=t.indexOf(n.functionName);return-1===r?-1===i?0:1:-1===i?-1:r-i}).forEach(function(t){t.functionName in e?e[t.functionName].apply(permutiveMethods,t.arguments):network.error('Function "permutive.'+t.functionName+'" does not exist.',_internals.state.userId)}),window.permutive=__assign({},e,{q:[]})});var retrieveThirdPartyIdentities=function(){return _internals.identities.retrieveAllIdentities()},resolveIdentity=function(){var e=PermutiveUtils_1.deferredPromise();_internals.log("<call> init identity "),permutiveShell.context.user_id=_internals.state.userId,permutiveShell.q.filter(function(e){return"identify"===e.functionName}).forEach(function(e){_internals.makeSafe(function(){var t=PermutiveIdentities_1.PermutiveIdentities.getAliasesFromIdentifyArg(e.arguments[0]);_internals.api.identify(t)})()}),permutiveShell.q=permutiveShell.q.filter(function(e){return"identify"!==e.functionName});var t=_internals.identities.currentAliases;_internals.log("Starting identification... Current aliases are:",t);var n=_internals.state.userId,r=new GraphQLIdentify_1.GraphQLIdentify(n,_internals.identities.convertAliases(t));return _internals.graphql.register(r).then(function(r){return i={user_id:r.identity.identify.id},void((o=i.user_id)!==n?(_internals.log("Got different user id from API: "+o),_internals.state.reset().then(function(e){return pipeable_1.pipe(_internals.state.setUserId(o),function(e){return _internals.identities.storeAliases(t)},function(e){return _internals.state.eventsCache.reset()})}).then(function(t){return e.resolve({identityChanged:!0,userId:o})})):(_internals.identities.storeAliases(t),e.resolve({identityChanged:!1,userId:o})));var i,o}).catch(function(){network.error("Couldn't set identity for user "+n,n),e.resolve({identityChanged:!1,userId:n})}),e.promise.then(function(e){_internals.messages.emit("permutive:user:ready"),_internals.setIdentityReady(),_internals.log("<done> init identity ",e)}),e.promise},onIdentityChanged=function(){return _internals.log("Identity has changed"),_internals.state.eventsCache.refresh({from:new Date(0)}).then(function(e){var t=_internals.state.eventsCache.processRefreshEvents(e,{write:!0});return _internals.log("Retrieved full event history from API"),_internals.queryManager.updateSegmentResults(t),_internals.queryManager.initWorker(t)})},onIdentityRemained=function(e){return _internals.log("Identity hasn't changed"),_internals.state.eventsCache.load().then(function(e){_internals.log("Loaded local event cache");var t=_internals.state.eventsCache.processCachedEvents(e);return _internals.queryManager.initWorker(t)}).then(function(){return e}).then(function(e){var t=_internals.state.eventsCache.processRefreshEvents(e,{write:!0});return _internals.log("Updating query states with unseen events from API (#e)",t.length),_internals.queryManager.updateWithHistoricSegments(t)})},loadAddon=function(e){return e.load(permutiveShell.q,permutiveMethods,_internals,network)},addons=__spread([],[],[],[],[],[],[],[Promise.resolve().then(function(){return __webpack_require__(21)})],[],[Promise.resolve().then(function(){return __webpack_require__(22)})],[],[],[],[],[],[],[Promise.resolve().then(function(){return __webpack_require__(19)})],[],[],[],[],[],[],[],[Promise.resolve().then(function(){return __webpack_require__(20)})],[],[Promise.resolve().then(function(){return __webpack_require__(23)})],[],[Promise.resolve().then(function(){return __webpack_require__(24)})],[Promise.resolve().then(function(){return __webpack_require__(18)})]);addons.forEach(function(e){return e.then(loadAddon)});var registerEnricher=function(e){return e.register(_internals,permutiveShell.context,permutiveShell.config)},enrichers=__spread([Promise.resolve().then(function(){return __webpack_require__(69)})],[]);enrichers.forEach(function(e){return e.then(registerEnricher)});var registerIdentityPovider=function(e){return e.register(_internals,network)},identityProviders=__spread([],[Promise.resolve().then(function(){return __webpack_require__(70)})],[]);return Promise.all(identityProviders).then(function(e){return e.forEach(registerIdentityPovider)}).then(function(e){return retrieveThirdPartyIdentities()}).then(function(){_internals.thirdParty.segments();var e=resolveIdentity(),t=_internals.state.eventsCache.getRefreshFromTime(),n=_internals.graphql.register(new GraphQLEvents_1.GraphQLEvents(_internals.state.userId,t));return _internals.graphql.run(),e.then(function(e){return e.identityChanged?onIdentityChanged():(_internals.state.eventsCache.lastRefreshed=t,_internals.state.eventsCache.storeLastRefreshTime(),onIdentityRemained(n.then(function(e){return e.events}).catch(function(e){return network.error("Identity retrieval failed with reason: "+e,_internals.state.userId),e})))})}).then(function(){return Promise.all([_internals.thirdParty.segments(),_internals.models.getModels()]).then(function(e){return _internals.log("Loaded TPD segments and lookalike models",e),_internals.queryManager.updateEnvironment({segments:PermutiveUtils_1.mergeObjects({"1p":_internals.queryManager.userSegmentsDict},e[0]),lookalikeModels:e[1]})})}).then(function(){_internals.queryManager.setAsReady(),_internals.messages.emit("permutive:api:ready"),_internals.metrics.track({name:"sdk_local_storage_byte_total",value:_internals.state.getStateSizeInBytes(),labels:{}}),_internals.metrics.track({name:"sdk_query_states_byte_total",value:_internals.queryManager.getStateSizeInBytes(),labels:{}})})},function(e){return"Exception during initialisation. Got "+e})},initialisationSequence=pipeable_1.pipe(TaskEither_1.right(window),TaskEither_1.chain(exports.canRun),TaskEither_1.chain(exports.getTag),TaskEither_1.chain(exports.makeConfig),TaskEither_1.chain(makeNetwork),TaskEither_1.chain(exports.hasConsent),TaskEither_1.chain(init));initialisationSequence().then(Either_1.fold(function(e){return console.error("Error while initialising permutive. "+e)},function_1.constVoid))}).call(this,__webpack_require__(3).Promise)},function(e,t,n){"use strict";t.cast=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})}},function(e,t,n){"use strict";var r=n(7).isArray,i=n(7).isFunction;t.all=function(e){if(!r(e))throw new TypeError("You must pass an array to all.");return new this(function(t,n){var r,o=[],a=e.length;function c(e){return function(t){s(e,t)}}function s(e,n){o[e]=n,0==--a&&t(o)}0===a&&t([]);for(var u=0;u<e.length;u++)(r=e[u])&&i(r.then)?r.then(c(u),n):s(u,r)})}},function(e,t,n){"use strict";var r=n(7).isArray;t.race=function(e){if(!r(e))throw new TypeError("You must pass an array to race.");return new this(function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"==typeof r.then?r.then(t,n):t(r)})}},function(e,t,n){"use strict";t.resolve=function(e){return new this(function(t,n){t(e)})}},function(e,t,n){"use strict";t.reject=function(e){return new this(function(t,n){n(e)})}},function(e,t,n){"use strict";(function(e,n){var r="undefined"!=typeof window?window:{},i=r.MutationObserver||r.WebKitMutationObserver,o=void 0!==e?e:void 0===this?window:this;var a,c,s,u,f=[];function d(){for(var e=0;e<f.length;e++){var t=f[e];(0,t[0])(t[1])}f=[]}void 0!==n&&"[object process]"==={}.toString.call(n)?a=function(){n.nextTick(d)}:i?(c=0,s=new i(d),u=document.createTextNode(""),s.observe(u,{characterData:!0}),a=function(){u.data=c=++c%2}):a=function(){o.setTimeout(d,1)},t.asap=function(e,t){1===f.push([e,t])&&a()}}).call(this,n(14),n(36))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,u=[],f=!1,d=-1;function l(){f&&s&&(f=!1,s.length?u=s.concat(u):d=-1,u.length&&p())}function p(){if(!f){var e=c(l);f=!0;for(var t=u.length;t;){for(s=u,u=[];++d<t;)s&&s[d].run();d=-1,t=u.length}s=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new g(e,t)),1!==u.length||f||c(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){var r=n(12).Promise,i=n(7).isFunction;t.polyfill=function(){var t,n;"Promise"in(t=void 0!==e?e:"undefined"!=typeof window&&window.document?window:self)&&"cast"in t.Promise&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&(new t.Promise(function(e){n=e}),i(n))||(t.Promise=r)}}).call(this,n(14))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){this.config=e,this.clientErrorsSent=0}return t.prototype.getEndpointUrl=function(e){return this.config.apiProtocol+"://"+this.config.apiHost+"/"+this.config.apiVersion+e},t.prototype.req=function(t,n){var r=-1===t.url.indexOf("?")?"?":"&",i=""+t.url+r+"k="+this.config.apiKey,o=t.method||"GET",a=t.data?JSON.stringify(t.data):"",c=t.contentType?t.contentType:"application/json";if(n&&navigator.sendBeacon){if(navigator.sendBeacon(i,a))return t.success&&t.success(a),e.resolve();var s="Failed to queue beacon";return t.error&&t.error(s),e.reject(s)}return this.ajax({type:o,url:i,contentType:c,dataType:t.dataType?t.dataType:"json",data:a,timeout:this.config.requestTimeout,xhrFields:t.xhrFields}).then(function(e){return t.success&&t.success(e),e},function(e){return t.error&&t.error(e),null})},t.prototype.ajax=function(t){var n=this;return new e(function(e,r){var i={},o=t.dataType?t.dataType:"json",a=new XMLHttpRequest;if(t.contentType&&function(e,t){i[e.toLowerCase()]=[e,t]}("Content-Type",t.contentType),"binary"===t.dataType&&(a.responseType="arraybuffer"),a.onload=function(){404===this.status?r("Resource not found"):e("json"===o?this.responseText?JSON.parse(this.responseText):null:"text"===o?this.responseText:this.response)},a.onerror=function(){n.error("Failed AJAX request"),r(new TypeError("Network request failed"))},a.ontimeout=function(){n.error("AJAX request timed out"),r(new TypeError("Network request timed out"))},a.open(t.type?t.type:"GET",t.url,!0),t.timeout&&(a.timeout=t.timeout),t.xhrFields)for(var c in t.xhrFields)a[c]=t.xhrFields[c];Object.keys(i).forEach(function(e){var t=i[e];a.setRequestHeader(t[0],t[1])}),a.send(t.data?t.data:null)})},t.prototype.error=function(e,t){if(this.config.sendClientErrors){if(this.clientErrorsSent>3)return;this.clientErrorsSent+=1;var n={user_id:t||"",domain:window.location.hostname?window.location.hostname:"",url:window.location.href?window.location.href:"",referrer:document.referrer?document.referrer:"",user_agent:navigator.userAgent?navigator.userAgent:"",error_message:"",stack_trace:"",additional_details:""};e instanceof Error?(void 0!==e.message&&(n.error_message=e.message.toString()),void 0!==e.stack&&(n.stack_trace=e.stack.toString())):n.additional_details=e.toString(),this.req({url:this.getEndpointUrl("/internal/errors"),method:"POST",data:n,contentType:"text/plain",dataType:"text"},!1)}else window.console&&(window.console.error?window.console.error("[Permutive]",e):window.console.log&&window.console.log("[Permutive]",e))},t}();t.PermutiveNetwork=n}).call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(40),i=n(15),o=n(48),a=n(0),c=n(4),s=n(2),u=function(){function t(e,t,n){this._internals=e,this.permutive=t,this.context=n,this.taskQueue=new o.PermutiveTaskQueue(this._internals);var s=this._internals.getNamespacedStorageKey(e.config.permutiveDataKey),u=localStorage.getItem(s);this.permutiveDataByteSize=null===u?0:2*u.length,this.permutiveData=null===u?{}:JSON.parse(u);var f=a.fromNullable(this._internals.getCookie(this._internals.config.cookieName)),d=a.fromNullable(this._internals.getExternalData(this._internals.config.cookieName)),l=a.getOrElse(function(){return a.getOrElse(c.uuidv4)(d)})(f);this.setUserId(l),this.viewId=c.uuidv4(),this.eventsCache=new i.PermutiveEventsCache(this,this._internals),this.reactionManager=new r.PermutiveReactionManager(this._internals,this.permutive,this.context),this.reactionManager.load()}return t.prototype.setUserId=function(e){this._internals.setCookie(this._internals.config.cookieName,e,!0),this._internals.setExternalData(this._internals.config.cookieName,e),this.userId=e},t.prototype.getPermutiveData=function(e){return this.permutiveData[e]},t.prototype.setPermutiveData=function(e,t){this.permutiveData[e]=t;var n=this._internals.getNamespacedStorageKey(this._internals.config.permutiveDataKey),r=JSON.stringify(this.permutiveData);this.permutiveDataByteSize=2*r.length,this._internals.makeSafe(function(){localStorage.setItem(n,r)})()},t.prototype.getPageviewId=function(){return this.viewId},t.prototype.getClient=function(){var e="";return e=document.title?document.title:"",{type:"web",user_agent:navigator.userAgent||"",url:window.location.href||"",domain:window.location.hostname||"",title:e,referrer:document.referrer||""}},t.prototype.getStateSizeInBytes=function(){return this.permutiveDataByteSize+this.eventsCache.getStateSizeInBytes()},t.prototype.reset=function(){var t=this;return this._internals.log("Resetting State"),e.resolve(s.pipe(this._internals.deleteCookie(this._internals.config.cookieName),function(e){return t._internals.removeExternalData(t._internals.config.cookieName)},function(e){return t.permutiveData={}},function(e){return t.permutiveDataByteSize=0},function(e){return localStorage.removeItem(t._internals.config.permutiveDataKey)}))},t}();t.PermutiveState=u}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(41),o=function(){function e(e,t,n){this._internals=e,this.permutive=t,this.context=n,this.reactionsConfig=[{id:"ceccbcbd-14cc-46b7-b2b6-d4d476771ac2",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"c4bac7c1-2dbd-44f5-bd90-24e38862b4fe",start_bucket:0,segment_code:22247}]},{id:"bcc74381-62f1-4d56-8537-eaa71220b40e",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"d12a8c03-8539-491b-8d52-be78c2b9a5a4",start_bucket:0,segment_code:31893}]},{id:"8ea8824b-a7bc-4a40-8708-87935b9be7f4",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"4e21c2ae-c1ae-4bd5-a3d3-02d5c39e11a6",start_bucket:0,segment_code:31575}]},{id:"8b7be83e-9c58-41a8-b9ec-a06e588cc8f7",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"963a7125-36c7-4179-bd7e-69ef3de3bda6",start_bucket:0,segment_code:22674}]},{id:"f9481457-a4fc-4de9-b7a2-cf9970c98a25",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"63d8bc35-aab5-4e89-ba8d-30945a15f309",start_bucket:0,segment_code:27722}]},{id:"b1ce38f1-3c82-44f0-8bae-d4691cf9c19b",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"16b9b53e-0c4c-4885-be15-3be03eab8a5a",start_bucket:0,segment_code:32776}]},{id:"626b3186-f2b1-4783-b742-4560669a3a20",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"abaa7524-aecf-4586-b6d9-7a17d97ccbe5",start_bucket:0,segment_code:27729}]},{id:"ddc793c6-a66c-4ee3-8a6a-732894bebd07",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"871314ba-b9ff-4239-bbb1-fb137f6d4cbe",start_bucket:0,segment_code:33324}]},{id:"b6c2f6d6-6d98-4ab8-a4de-71ae288e4b8b",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"6c9ec56a-8787-42ca-8d05-784cef74c756",start_bucket:0,segment_code:33951}]},{id:"c799bca9-f15c-4447-b614-cc3339d6c6b2",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"d7e42924-f75f-47f8-8dd0-a1a1f011b516",start_bucket:0,segment_code:32013}]},{id:"4fb500f6-dbbf-4fee-aceb-bb951a857725",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"01373ebb-4cb5-471d-93c5-1e7b05bca477",start_bucket:0,segment_code:31545}]},{id:"1d4749c1-8a29-4ecb-9ae0-5c6e190ee7e5",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"87cf3403-f17c-4895-916b-0ed0a964d251",start_bucket:0,segment_code:33632}]},{id:"6cacca44-4272-4c2d-8ce9-1c618d72e638",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"9a34f116-a772-46b9-a0a6-c9e5691a0a9b",start_bucket:0,segment_code:27725}]},{id:"07a0aec5-2458-4559-8c59-41ef623db1bb",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"32858937-b76b-4fe3-9100-9b08a40e05d7",start_bucket:0,segment_code:25633}]},{id:"b8fdb6df-e2c3-4cac-9196-cde6acfe43d0",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"37d21eb5-2e8d-439d-828d-327b746ffe16",start_bucket:0,segment_code:31188}]},{id:"2749e097-be32-4efc-bc75-47615da3f7f7",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"dece14f2-9626-4d19-a630-10fa4fb914cf",start_bucket:0,segment_code:33079}]},{id:"60c72deb-86d8-4484-b4ef-604fbe8f7947",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"8bb754fe-3e35-4d63-892d-b2754fc52860",start_bucket:0,segment_code:34138}]},{id:"545bfa7c-d797-4592-9cdc-398f27a096e0",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"0f8f7775-7c00-4aa3-9896-85d363830082",start_bucket:0,segment_code:26576}]},{id:"cfc5801f-19fc-45cf-84e4-fcdb9618bfff",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"6161a690-26ce-46a3-bd61-892a395380df",start_bucket:0,segment_code:31564}]},{id:"c915e5c2-4e5a-4f36-91f4-9442a3a99d84",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"65c652df-f92a-4a11-99b2-512e5a99ea4a",start_bucket:0,segment_code:31576}]},{id:"b1a19683-e161-4c51-ad0f-44b85fccf4a7",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"19f40505-5763-4fd6-9b1b-f5f8cc43c4b8",start_bucket:0,segment_code:31899}]},{id:"3ebfc0fc-f2b5-496d-a53f-0b6e73d72beb",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"a6923ab7-f1e3-4d58-85a5-bd955055a47a",start_bucket:0,segment_code:24134}]},{id:"0f1d0317-89ad-4f6b-9996-11df31ab2186",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"4083b3a5-bb40-41aa-a9c8-c484d02e6371",start_bucket:0,segment_code:34076}]},{id:"1e4f9392-126e-4b1e-ae13-b490492e1edf",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"54580999-4965-4bea-88d8-140bf74a8cc2",start_bucket:0,segment_code:31552}]},{id:"5ad19282-9812-4461-aa48-a94c65711e72",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"2fb24851-d138-4a88-a954-9d26f0103ccf",start_bucket:0,segment_code:31017}]},{id:"63236bf4-2a1b-43d9-bccf-22f1220ae323",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"11e20a22-37a6-428a-a471-fa538ae8565c",start_bucket:0,segment_code:27727}]},{id:"1833ec87-6b16-4a9d-9cd3-b690d8f3451d",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"351c6cad-4202-4c95-b13d-cc9ad313678e",start_bucket:0,segment_code:31596}]},{id:"dd3e734b-e97d-415c-be90-5177d285b1e9",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"13014fcd-214e-4a20-8b12-ed68ad9eb50e",start_bucket:0,segment_code:27726}]},{id:"efc8dea4-fc64-4675-9ca1-9647193bd408",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"365c439f-8672-48c3-b79b-055406515189",start_bucket:0,segment_code:31592}]},{id:"26a31e7b-9d8a-49d5-ac38-a40639f4a355",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"f0438845-5b8c-4282-b4a0-04e6548e25a5",start_bucket:0,segment_code:31497}]},{id:"a541202d-6325-4a57-ac6f-759d132b26eb",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"4f050e82-371b-4691-8cdd-7080edd77b4c",start_bucket:0,segment_code:27723}]},{id:"81e3abcb-a0a6-49e0-adad-0e642ae1b639",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"50f82879-55ea-429f-9c66-75c9bbf33f19",start_bucket:0,segment_code:34051}]},{id:"b40b461c-1c17-4af8-bb91-0a63d4abcc5a",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"f67ea0ac-f2b2-4231-90c5-8bb11ada0e41",start_bucket:0,segment_code:33076}]},{id:"4ab71566-4f71-4d87-ad3d-cd7d84bfcdb9",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"3bd5691d-d632-4b38-b977-f5965bab1ecd",start_bucket:0,segment_code:31015}]},{id:"7d359f6d-4b1b-45fe-bbb9-b9ff696bf3b5",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"48612e32-344c-4b1e-96c9-3738fd52d5e8",start_bucket:0,segment_code:33006}]},{id:"26e0640f-5f6e-4250-afa2-966a20e4c860",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"5b4b6d41-1b4d-495d-a804-fc9c5cb38cc1",start_bucket:0,segment_code:32775}]},{id:"8154e60a-2b82-4535-b218-345e68ec5a40",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"042f14ab-7ff7-4fe3-8425-d338b2d9b2d9",start_bucket:0,segment_code:31565}]},{id:"8b0fbbbb-ac32-4aa6-b56b-37a475479a5a",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"f0bb2f65-b4cc-40cf-a19f-00d0bdc0c7b1",start_bucket:0,segment_code:31891}]},{id:"c05237f3-06dc-439d-83d8-f3683a030581",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"b4a5c563-7a5e-462f-8d2d-f005930fe18d",start_bucket:0,segment_code:34077}]},{id:"a797513d-81e3-4c25-bcaa-35c71345da13",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"773fc074-5bfd-4328-95b4-c0bef824a145",start_bucket:0,segment_code:33903}]},{id:"c77bc2f6-2fa9-4f6c-9af7-c1d504e6e882",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"f9436335-0375-4af2-800c-3dcbc851bb5a",start_bucket:0,segment_code:26647}]},{id:"a9197a0e-6eca-46dc-bdb0-fb31886be51b",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"2c2b0f77-1f1d-45bc-86c1-0285cb8da0e9",start_bucket:0,segment_code:31892}]},{id:"90a0fcb1-5825-46f6-a905-a32389a5e1b7",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"12ff2177-a21b-4613-8acc-a1d1c29c76ab",start_bucket:0,segment_code:22677}]},{id:"ca6d39a2-0380-4b7d-8066-7b074866367c",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"6a8d31e7-f5aa-4fcb-a7af-9bd7e0ef3e86",start_bucket:0,segment_code:31020}]},{id:"586d0e64-8dfb-4c75-bd54-0e69fbbdd780",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"0bb50839-4980-4a28-ae4f-4992d070ee9b",start_bucket:0,segment_code:31514}]},{id:"26e57fb0-4b0a-41b1-b87f-53ed560d5d88",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"ba85344d-cdab-4570-8ed1-e388cad38c59",start_bucket:0,segment_code:24870}]},{id:"cb6c0360-cd4c-468b-b74e-364f8ccdbb77",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"aed1cecc-7717-49a0-a424-884cc6959167",start_bucket:0,segment_code:31186}]},{id:"da8aacad-b256-4502-8651-6dc7c4117589",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"d5a5a9b3-92eb-434d-b22b-f45058efea68",start_bucket:0,segment_code:27724}]},{id:"3bd2b053-d45a-4e6e-a3d2-d40642f51d3b",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"cf932417-ca14-459e-8e6d-13b5704288df",start_bucket:0,segment_code:33593}]},{id:"8e22f030-4e02-4c5a-837a-6da5939a8061",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"37310d53-01b2-4080-9878-ffd0ea7579d5",start_bucket:0,segment_code:31901}]},{id:"97acd755-1d85-4eee-8beb-68e595d8bd5b",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"58fc60a8-6a63-4f47-a7b9-7c7b6503afb6",start_bucket:0,segment_code:31905}]},{id:"8d4bff41-d46d-43ef-862d-9b52af8dc755",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"a909bd64-d9c5-4814-9414-cf18f7c629f6",start_bucket:0,segment_code:31589}]},{id:"5784b45e-2cea-4961-9db9-9558088bcb7f",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"af0d0e6a-1947-4e8f-961a-3759aad0fb46",start_bucket:0,segment_code:31571}]},{id:"fc3f8aad-3f00-462e-a635-26a5c15b801f",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"5a809829-baaf-411f-a4d8-97a58eeee12f",start_bucket:0,segment_code:31895}]},{id:"9cdbf385-ae7b-488f-ba73-66871a14e190",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"17a6baa3-f0b4-4a4d-87bc-038548912c71",start_bucket:0,segment_code:27730}]},{id:"b988ab76-1a81-4996-b0e1-08d636b44231",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"790a297c-2fdd-444e-8828-5f6cdc0ed35f",start_bucket:0,segment_code:33059}]},{id:"6cab567f-4c33-495a-b3d5-6069a4ff1a0c",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"99cf75db-5cc2-4b1b-8127-3b0d526f797f",start_bucket:0,segment_code:27721}]},{id:"20a31508-430c-4046-83c4-f0bac3dc1ea4",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"3ab104b3-0de3-4c10-b401-fcb26240996c",start_bucket:0,segment_code:31016}]},{id:"858a8bbc-7d22-4ded-9384-fd2296113a73",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"28373a44-23e6-403c-acec-08067a0b76f6",start_bucket:0,segment_code:27738}]},{id:"5f1a402b-d038-458a-8d87-db24beabfd2b",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"ee9f05c3-a487-43b0-83bb-cbe31690ba58",start_bucket:0,segment_code:32291}]},{id:"27316af3-04df-48f9-919b-0905ab108026",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"8921095c-340a-483b-8fd0-22bbca55d7a9",start_bucket:0,segment_code:33595}]},{id:"eac826a2-33e0-4dae-a019-c1972a47562e",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"a757d1fa-8343-473c-a92e-d18452ed2193",start_bucket:0,segment_code:31779}]},{id:"11a7d8e5-5400-4c59-971e-c3fd89d5cfcb",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"38d8bb8d-8077-4e8f-b6eb-4e838fe9b85f",start_bucket:0,segment_code:31594}]},{id:"6ed8c81e-f2b1-44e4-8052-d1ab9d26ed4a",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"bd945f8d-1199-4858-a7e3-963189ca8579",start_bucket:0,segment_code:32867}]},{id:"5f475269-0214-4cdc-a935-470c28a8c6c2",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"4a55e2fb-4946-4cf6-995f-4749eb7bb650",start_bucket:0,segment_code:31894}]},{id:"3dcd35e3-3fe9-4098-a7c3-9c5156b88381",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"87af03ce-fe53-4761-b7fe-20ac65a673d4",start_bucket:0,segment_code:31942}]},{id:"25b884a4-69e0-4054-a47f-95fe414e95aa",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"16f2b9b6-ca37-4641-b047-f49e2740a522",start_bucket:0,segment_code:31941}]},{id:"2b84b19b-bcc6-47cc-b83c-b1e44d4db5b2",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"e4d63e99-edcc-4180-b290-607996981ec8",start_bucket:0,segment_code:32863}]},{id:"81ef33ab-8c7e-4332-a209-8d149fd169a2",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"793bf243-ea44-4c98-ab48-2973bd2fe94a",start_bucket:0,segment_code:31897}]},{id:"0713da08-8424-4257-ac30-1f83f318e65e",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"ab9e4888-dc52-4ef7-9d9a-7acdeef36079",start_bucket:0,segment_code:31902}]},{id:"1558a256-6858-4e30-9e43-1c1e273d9a5a",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"ec8d4225-80d1-480f-af97-010223873ef3",start_bucket:0,segment_code:31574}]},{id:"7645b01f-f5f7-4377-a8c6-361cd9fee768",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"170b8a63-eb9d-4e45-a4a7-0046b341ae8a",start_bucket:0,segment_code:33596}]},{id:"d73e3560-29d1-4337-8fdb-97a071fa0f54",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"23a2ce04-abde-4e41-a457-aa8206121db0",start_bucket:0,segment_code:31595}]},{id:"bdd0c883-29e7-47be-8a63-e116bee2a703",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"b90e1076-7f7c-43cd-bf21-6207749ad720",start_bucket:0,segment_code:33082}]},{id:"e8f66061-3516-4780-b5f1-38e62f3a90f0",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"016dbf27-f081-4de0-8729-8fc55d07bbb8",start_bucket:0,segment_code:34137}]},{id:"b811fa38-9603-4d1f-9c15-31fd98fb8649",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"baec62a5-3328-4762-a067-2937db260e37",start_bucket:0,segment_code:32991}]},{id:"d52b5bd6-0b8c-4a40-b3e0-b71216650e86",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"fde9e944-267f-430d-8829-85196fcdc5cd",start_bucket:0,segment_code:31593}]},{id:"b9484260-6856-4286-96da-1bb8509d43f2",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"7244db85-d8e8-491b-9898-d26ed8f503ab",start_bucket:0,segment_code:31904}]},{id:"310c6825-6c02-48b1-8cdf-ef54e393255d",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"fe234d6b-3695-45e0-832f-3d1854e75bf3",start_bucket:0,segment_code:33002}]},{id:"e5e467eb-8975-4a30-9192-fb4d318e131f",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"81b39f0c-da07-4987-9904-51bec7e9b5ac",start_bucket:0,segment_code:22664}]},{id:"7548835f-b5b4-4c54-960b-082ca9508c8c",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"bf77e277-c266-4bfa-93be-1d123ee05036",start_bucket:0,segment_code:33636}]},{id:"87a62271-1d59-4ff2-9737-eef12722c1b8",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"4ce5264c-ae55-4a61-b1c9-560bb524c1a6",start_bucket:0,segment_code:31573}]},{id:"a3e91193-ce50-4094-b243-8b94399ae973",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"f3e35455-c1fe-4463-919f-a5dea84e8693",start_bucket:0,segment_code:31551}]},{id:"71c984bf-8bd9-458a-8d10-77c482405da9",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"6b470631-d1c1-405e-ab07-4ee5ff4638c2",start_bucket:0,segment_code:31550}]},{id:"b8ebf119-2165-41fe-b457-d3842fb743f3",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"184ae58d-22ba-43c5-8337-669a1c27e86f",start_bucket:0,segment_code:27741}]},{id:"62dbe79a-03f9-413e-99c0-367e278ed9ec",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"80b8a192-cb58-4fa5-84dc-d5c72cc8c846",start_bucket:0,segment_code:33055}]},{id:"b20ffd27-338b-423f-8dec-9413f55461e0",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"0ec04cd7-d5cf-4897-9a9f-dca0dbb0589a",start_bucket:0,segment_code:31682}]},{id:"d340892c-d304-408e-a857-afe0f122fbcf",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"513b599d-a827-4cc9-a862-a79506d492da",start_bucket:0,segment_code:31890}]},{id:"2ca18f71-40cb-4e2d-bb19-2b3d89f73bf6",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"a0fd56d1-a9d5-43db-9c3c-3367cc0fde68",start_bucket:0,segment_code:31568}]},{id:"29b2d47c-2c4f-47c8-baaa-24f6bebfc31e",reaction_type:"facebook_pixel_v2",trigger_type:"EveryTime",variants:[{config:{},id:"c2eca409-f342-4670-94ce-1a224831446e",start_bucket:0,segment_code:27737}]}],this.specializedReactionsConfig={target_dfp:{dfp:[22865,31565,33002,27729,31905,22625,31592,31895,33951,31897,31901,23499,31904,22247,26647,33632,34051,31514,31575,31942,31576,31902,31682,31899,31552,33596,33324,24870,27738,33006,27730,22782,31017,27722,31015,22664,34076,22674,32291,31593,33636,31890,31545,31891,31016,33903,31894,24134,27741,31594,31020,27725,22686,32776,22786,22677,34137,27721,33079,22741,31941,32775,25633,32863,32013,31188,31564,31550,31892,27727,33593,31893,22828,31186,33055,22788,22823,27723,22684,31779,31596,31497,22787,33076,33059,31595,22728,31589,27726,32867,34138,22899,27737,31551,26576,32991,31573,31574],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[]},this.reactions={}}return e.prototype.load=function(){for(var e=0;e<this.reactionsConfig.length;e++){var t=this.reactionsConfig[e];this.reactions[t.reaction_type]?this.reactions[t.reaction_type].push(t):this.reactions[t.reaction_type]=[t]}},e.prototype.evaluateContextCriteria=function(e){for(var t=this,n=function(e){var n=t.context[e.key];return void 0!==n&&("EQUALS"===e.comparison?n===e.value:"NOT_EQUALS"===e.comparison?n!==e.value:"CONTAINS"===e.comparison&&"string"==typeof n||Array.isArray(n)?n.indexOf(e.value)>=0:!!("NOT_CONTAINS"===e.comparison&&"string"==typeof n||Array.isArray(n))&&n.indexOf(e.value)<0)},r=0;r<e.criteria.length;r++){var i=n(e.criteria[r]);if("AND"===e.operator&&!i)return!1;if("OR"===e.operator&&i)return!0}return"AND"===e.operator},e.prototype.selectVariant=function(e,t){if(1===t.length)return t[0];var n=this._internals.state.userId+e,i=Math.abs(r.hash(n))%12e4;t.sort(function(e,t){return e.start_bucket-t.start_bucket});var o=r.findIndex(t,function(e){return i<e.start_bucket});return t[o>=0?o-1:t.length-1]},e.prototype.getSpecializedReactions=function(e){return this.specializedReactionsConfig[e]},e.prototype.getReactions=function(e){var t=[];if(this.reactions[e])for(var n=0;n<this.reactions[e].length;n++){var r=this.reactions[e][n],o=this.selectVariant(r.id,r.variants);if(o){var a=o.context_criteria;a&&!this.evaluateContextCriteria(a)||t.push(new i.PermutiveReaction(this.permutive,this._internals,r.id,o.segment_code,"",r.reaction_type,r.trigger_type,o.id,o.config))}}return t},e}();t.PermutiveReactionManager=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r,i,o,a,c,s){this.permutive=e,this._internals=t,this.id=n,this.segmentCode=r,this.segmentName=i,this.reactionType=o,this.triggerType=a,this.variantId=c,this.config=s}return e.prototype.reactEveryTime=function(){return"EveryTime"===this.triggerType},e.prototype.reactOnEntry=function(){return"OnEntry"===this.triggerType},e.prototype.reactOnExit=function(){return"OnExit"===this.triggerType},e.prototype.trackImpression=function(e){var t={reaction_id:this.id,variant_id:this.variantId,type:"impression"};this.permutive.track("Reaction",t,e),this._internals.log("impression: ",t)},e.prototype.trackConversion=function(e){var t={reaction_id:this.id,variant_id:this.variantId,type:"conversion"};this.permutive.track("Reaction",t,e),this._internals.log("conversion: ",t)},e}();t.PermutiveReaction=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=n(43),o=n(1),a=n(0),c=n(44),s=function(){function e(e,t,n,r,a,s,u){var f=this;this._internals=e,this.cryptoAlg=t,this.dbName=n,this.mainObjectStore=r,this.keyObjectStore=a,this.keyObjectKey=s,this.version=u,this.db=c.IndexedDB.initialise(this._internals,this.cryptoAlg,this.dbName,this.mainObjectStore,this.keyObjectStore,this.keyObjectKey,this.version)().then(o.getOrElse(function(e){return new i.LocalStorageDB(f._internals)}))}return e.prototype.put=function(e,t){var n=this;return r.tryCatch(function(){return n.db.then(function(n){return n.put(e,t)})},function(e){return String(e)})},e.prototype.get=function(e){var t=this;return r.tryCatch(function(){return t.db.then(function(t){return t.get(e)}).then(a.fromNullable)},function(e){return String(e)})},e.prototype.delete=function(e){var t=this;return r.tryCatch(function(){return t.db.then(function(t){return t.delete(e)})},function(e){return String(e)})},e.prototype.deleteStore=function(){var e=this;return r.tryCatch(function(){return e.db.then(function(e){return e.deleteStore()})},function(e){return String(e)})},e.prototype.migrateIfRequired=function(){var e=this;return r.tryCatch(function(){return e.db.then(function(e){return e.migrateIfRequired()})},function(e){return String(e)})},e}();t.EventsCacheStore=s},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(){function t(e){this._internals=e}return t.prototype.put=function(t,n){return r.pipe(this._internals.getNamespacedStorageKey(String(n)),function(e){return window.localStorage.setItem(e,JSON.stringify(t))},function(t){return e.resolve(n)})},t.prototype.get=function(e){return r.pipe(this._internals.getNamespacedStorageKey(String(e)),function(e){return JSON.parse(window.localStorage.getItem(e))})},t.prototype.delete=function(t){return r.pipe(this._internals.getNamespacedStorageKey(String(t)),function(t){return e.resolve(window.localStorage.removeItem(t))})},t.prototype.deleteStore=function(){return e.resolve()},t.prototype.migrateIfRequired=function(){return e.resolve()},t}();t.LocalStorageDB=i}).call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),a=n(11),c=n(1),s=n(2),u=n(15),f=n(25),d=n(8),l=function(){function t(e,t,n,r,i,o){this._internals=e,this.cryptoAlg=t,this.idb=n,this.mainObjectStore=r,this.keyObjectStore=i,this.keyObjectKey=o,this.cryptoKey=this.getOrGenerateKey()}return t.initialise=function(e,n,r,i,s,u,f){var d=("development"===e.config.environment?window.isSecureContext:"https:"===window.location.protocol)?c.tryCatch(function(){return o.openDB(r,f,{upgrade:function(e){e.createObjectStore(i),e.createObjectStore(s)}})},function(e){return String(e)}):c.left("Insecure context. Can't use crypto APIs");return c.fold(function(e){return a.left(e)},function(r){return a.tryCatch(function(){return r.then(function(r){return new t(e,n,r,i,s,u)})},function(e){return String(e)})})(d)},t.prototype.put=function(t,n){var r=this;return this.cryptoKey.then(function(i){return s.pipe(JSON.stringify(t),function(t){return new e(function(e,o){r.cryptoAlg.encrypt(i,t).then(function(t){return s.pipe(r._internals.getNamespacedStorageKey(String(n)),function(i){return r.idb.put(r.mainObjectStore,t,i).then(function(t){return e(n)})})},function(e){return o(e)})})})})},t.prototype.get=function(e){var t=this;return this.cryptoKey.then(function(n){return s.pipe(t._internals.getNamespacedStorageKey(String(e)),function(e){return t.idb.get(t.mainObjectStore,e).then(function(e){return e?t.cryptoAlg.decrypt(n,e):null}).then(JSON.parse)})})},t.prototype.delete=function(e){var t=this;return s.pipe(this._internals.getNamespacedStorageKey(String(e)),function(e){return t.idb.delete(t.mainObjectStore,e)})},t.prototype.migrateIfRequired=function(){var t=this,n=s.pipe(this._internals.getExternalData(u.EVENTS_CACHE_KEY),function(e){return e?a.right(JSON.parse(e)):a.left(null)}),r=a.tryCatch(function(){return t.idb.get("events","permutive-events-cache")},function(e){});return e.all([n(),r()]).then(function(e){return e.filter(c.isRight).map(function(e){return e.right}).filter(function(e){return e})}).then(f.flatten).then(function(e){return s.pipe(e,function(e){return e.forEach(function(e){return t._internals.state.eventsCache.add(d.deserializeEvent(e),!1)})},function(e){return t._internals.removeExternalData(u.EVENTS_CACHE_KEY)})}).then(function(n){return-1!==i(t.idb.objectStoreNames).indexOf("events")?t.idb.delete("events","permutive-events-cache"):e.resolve()})},t.prototype.deleteStore=function(){var t=this;return e.resolve(this.idb.close()).then(function(e){return o.deleteDB(t.idb.name)})},t.prototype.getOrGenerateKey=function(){var e=this;return s.pipe(this._internals.getNamespacedStorageKey(this.keyObjectKey),function(t){return e.idb.get(e.keyObjectStore,t).then(function(t){return t||e.generateAndStoreKey()})})},t.prototype.generateAndStoreKey=function(){var t=this;return this.cryptoAlg.generateKey(!1).then(function(e){return s.pipe(t._internals.getNamespacedStorageKey(t.keyObjectKey),function(n){return t.idb.put(t.keyObjectStore,e,n)},function(t){return e})},function(t){return e.reject(t)})},t}();t.IndexedDB=l}).call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.deleteDB=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).blocked,n=indexedDB.deleteDatabase(e);t&&n.addEventListener("blocked",function(){return t()});return(0,r.w)(n).then(function(){})},t.openDB=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.blocked,o=n.upgrade,a=n.blocking,c=n.terminated,s=indexedDB.open(e,t),u=(0,r.w)(s);o&&s.addEventListener("upgradeneeded",function(e){o((0,r.w)(s.result),e.oldVersion,e.newVersion,(0,r.w)(s.transaction))});i&&s.addEventListener("blocked",function(){return i()});return u.then(function(e){c&&e.addEventListener("close",function(){return c()}),a&&e.addEventListener("versionchange",function(){return a()})}).catch(function(){}),u},Object.defineProperty(t,"unwrap",{enumerable:!0,get:function(){return r.u}}),Object.defineProperty(t,"wrap",{enumerable:!0,get:function(){return r.w}});var r=n(46);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){}function c(t,n){if(!n)return t&&t.then?t.then(a):e.resolve()}function s(e,t){var n=e();return n&&n.then?n.then(t):t(n)}var u=["get","getKey","getAll","getAllKeys","count"],f=["put","add","delete","clear"],d=new Map;function l(t,n){if(r=t,(null!=(i=IDBDatabase)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)&&!(n in t)&&"string"==typeof n){var r,i;if(d.get(n))return d.get(n);var o=n.replace(/FromIndex$/,""),a=n!==o,l=f.includes(o);if(o in(a?IDBIndex:IDBObjectStore).prototype&&(l||u.includes(o))){var p,g=(p=function(e){for(var t,n=this,r=n.transaction(e,l?"readwrite":"readonly"),i=r.store,u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];a&&(i=i.index(f.shift()));var p=(t=i)[o].apply(t,f);return s(function(){if(l)return c(r.done)},function(){return p})},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return e.resolve(p.apply(this,t))}catch(t){return e.reject(t)}});return d.set(n,g),g}}}(0,r.r)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{get:function(t,n,r){return l(t,n)||e.get(t,n,r)},has:function(t,n){return!!l(t,n)||e.has(t,n)}})})}).call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){function n(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}Object.defineProperty(t,"__esModule",{value:!0}),t.r=function(e){d=e(d)},t.w=g,t.u=t.i=t.a=void 0;var r,i,o=function(e,t){return t.some(function(t){return n(e,t)})};t.i=o;var a=new WeakMap,c=new WeakMap,s=new WeakMap,u=new WeakMap,f=new WeakMap;t.a=f;var d={get:function(e,t,r){if(n(e,IDBTransaction)){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||s.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return g(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return!(!n(e,IDBTransaction)||"done"!==t&&"store"!==t)||t in e}};function l(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(h(this),n),g(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(e.apply(h(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[h(this),t].concat(r));return s.set(o,t.sort?t.sort():[t]),g(o)}}function p(t){return"function"==typeof t?l(t):(n(t,IDBTransaction)&&function(t){if(!c.has(t)){var n=new e(function(e,n){var r=function(){t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=function(){e(),r()},o=function(){n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});c.set(t,n)}}(t),o(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,d):t)}function g(t){if(n(t,IDBRequest))return r=t,(i=new e(function(e,t){var n=function(){r.removeEventListener("success",i),r.removeEventListener("error",o)},i=function(){e(g(r.result)),n()},o=function(){t(r.error),n()};r.addEventListener("success",i),r.addEventListener("error",o)})).then(function(e){n(e,IDBCursor)&&a.set(e,r)}).catch(function(){}),f.set(i,r),i;var r,i;if(u.has(t))return u.get(t);var o=p(t);return o!==t&&(u.set(t,o),f.set(o,t)),o}var h=function(e){return f.get(e)};t.u=h}).call(this,n(3).Promise)},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}return e.prototype.generateKey=function(e){return void 0===e&&(e=!1),this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"])},e.prototype.encrypt=function(e,t){var n=r(this._encrypt(e,this.str2bytes(t)),2),i=n[0],o=n[1];return i.then(function(e){var t=new Uint8Array(16+e.byteLength);return t.set(o,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer})},e.prototype.decrypt=function(e,t){var n=new Uint8Array(t,0,12),r=new Uint32Array(t,12,1)[0],i=t.slice(16,16+r);return this._decrypt(e,n,i).then(this.bytes2str)},e.prototype._encrypt=function(e,t){var n=this.crypto.getRandomValues(new Uint8Array(12));return[this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},e,t),n]},e.prototype._decrypt=function(e,t,n){return this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,n)},e.prototype.str2bytes=function(e){return(new TextEncoder).encode(e).buffer},e.prototype.bytes2str=function(e){return(new TextDecoder).decode(e)},e}();t.AESCrypto=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t=this;this._internals=e,this.queue=[],this.nextNotify=null,e.messages.on("permutive:taskQueue:update",function(){t.execute()})}return e.prototype.add=function(e){this.queue.push(e),this.notify()},e.prototype.notify=function(){var e=this,t=function(){e._internals.messages.emit("permutive:taskQueue:update")},n=(new Date).getTime();null===this.nextNotify||this.nextNotify<n-50?(this.nextNotify=n,t()):this.nextNotify<=n&&(this.nextNotify=n+50,window.setTimeout(t,50))},e.prototype.execute=function(){var e=this;if(0!==this.queue.length){for(var t=!1,n=!1,r=0,i=0;i<this.queue.length;i++){var o=this.queue[i];if(o.complete)r+=1;else if(o.started)n=!0,t=t||o.blocks();else{if(o.waits()&&n)break;t||(n=!0,t=t||o.blocks(),o.execute(function(){e.notify()}))}}this.queue.splice(0,r)}},e.prototype.size=function(){return this.queue.length},e}();t.PermutiveTaskQueue=r},function(e,t,n){"use strict";(function(e){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(50),a=n(51),c=n(52),s=n(17),u=n(53),f=n(54),d=n(55),l=n(56),p=function(){function t(t,n,r,i,p,g,h,m){void 0===r&&(r=[]),void 0===i&&(i={}),void 0===p&&(p=new f.EventHandler),void 0===g&&(g=new c.PermutivePromises),void 0===h&&(h=new d.Events),void 0===m&&(m=new s.GlobalEnricher),this.config=t,this.network=n,this.blockers=r,this.addons=i,this.eventHandler=p,this.promises=g,this.messages=h,this.enrichers=m,this.isReady=!1,this.isRealtime=!1,this.isIdentityReady=!1,this.listenForBlockers=!0,this.sessionManager=new o.SessionManager(this),this.eventsBatch=new l.PermutiveEventsBatch(this),this.api=new a.PermutiveApi(this),this.graphql=new u.GraphQLQuery(this),this.models={getModels:function(){return e.resolve({})}}}return t.prototype.makeSafe=function(e){var t=this;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,i(n))}catch(e){t.network.error(e,t.state.userId)}}},t.prototype.utcNow=function(){var e=new Date;return new Date(e.toUTCString())},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.config.loggingEnabled&&window.console&&window.console.log&&(e.splice(0,0,"[Permutive]"),console.log.apply(console,e))},t.prototype.setAsReady=function(){this.isReady=!0,this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{sdk_version:"v9.10.4"}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}})),this.messages.emit("permutive:ready")},t.prototype.setAsRealtime=function(){this.isRealtime=!0,this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{})},t.prototype.setIdentityReady=function(){this.isIdentityReady=!0},t.prototype.addBlocker=function(e){var t=this;this.blockers.push(e),this.log("<blockers> added blocker "+e),this.messages.on(e,function(){if(t.listenForBlockers){var n=t.blockers.indexOf(e);n>=0&&(t.blockers.splice(n,1),t.log("<blockers> removed blocker "+e)),0===t.blockers.length&&(t.listenForBlockers=!1,t.messages.emit("permutive:blockers:empty"),t.log("<blockers> complete"))}})},t.prototype.getNamespacedStorageKey=function(e){return""+this.config.stateNamespace+e},t.prototype.setCookie=function(e,t,n){if(void 0===n&&(n=!1),!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain))return!1;var r=this.getNamespacedStorageKey(e);document.cookie=[encodeURIComponent(r),"=",encodeURIComponent(t),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",n?"; samesite=none; secure":""].join("")},t.prototype.getCookie=function(e,t){void 0===t&&(t=!1);var n=t?e:this.getNamespacedStorageKey(e),r=new RegExp(encodeURIComponent(n)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null},t.prototype.deleteCookie=function(e){if(!e||!this.config.cookieDomain)return!1;var t=this.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0},t.prototype.getExternalData=function(e){var t=this.getNamespacedStorageKey(e);return localStorage.getItem(t)},t.prototype.setExternalData=function(e,t){var n=this.getNamespacedStorageKey(e);this.makeSafe(function(){localStorage.setItem(n,t)})()},t.prototype.removeExternalData=function(e){var t=this.getNamespacedStorageKey(e);localStorage.removeItem(t)},t.prototype.arraysEqual=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},t}();t.PermutiveInternals=p}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e,t){this._internals=e,(t=t||{}).timeout_seconds=t.timeout_seconds||1800,t.session_data_key=t.session_data_key||"permutive-session",this.options=t,this.session_id=null,this.initialize()}return e.prototype.getSessionId=function(){return this.session_id},e.prototype.newSession=function(e){return{session_id:r.uuidv4(),last_updated:e}},e.prototype.initialize=function(){var e=new Date,t=this._internals.getCookie(this.options.session_data_key),n=this.decodeSessionData(t);if(null===n)n=this.newSession(e);else{var r=this.options.timeout_seconds;e>new Date(n.last_updated.getTime()+1e3*r)?n=this.newSession(e):n.last_updated=e}this.persistSessionData(n),this.session_id=n.session_id},e.prototype.decodeSessionData=function(e){var t=null;try{t=JSON.parse(e)}catch(e){return null}return null!==t&&"object"==typeof t&&t.hasOwnProperty("session_id")&&t.hasOwnProperty("last_updated")&&(t.last_updated=new Date(t.last_updated),!isNaN(t.last_updated.getTime()))?t:null},e.prototype.persistSessionData=function(e){e.last_updated=e.last_updated.toISOString(),this._internals.setCookie(this.options.session_data_key,JSON.stringify(e))},e}();t.SessionManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={success:function(e){},error:function(e,t){}},i=function(){function e(e){this._internals=e}return e.prototype.identify=function(e,t){var n=this;if(void 0===t&&(t=r),e.forEach(function(e){return n._internals.identities.addAlias(e.id,e.tag)}),this._internals.isIdentityReady){var i=this._internals.identities.currentAliases;this.sendIdentify(this._internals.state.userId,i,t).then(function(e){return n._internals.identities.storeAliases(i)})}},e.prototype.graphql=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.config.apiProtocol+"://"+this._internals.config.apiHost+"/graphql",method:"POST",success:t.success,error:t.error,data:{query:e},contentType:"text/plain",xhrFields:{withCredentials:!0}},!1)},e.prototype.sendIdentify=function(e,t,n){return void 0===n&&(n=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/identify"),method:"POST",data:{user_id:e,aliases:this._internals.identities.convertAliases(t)},success:n.success,error:n.error,contentType:"text/plain",xhrFields:{withCredentials:!0}},!1)},e.prototype.setUserProperties=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/users/"+this._internals.state.userId+"/properties"),method:"POST",data:{properties:e},success:t.success,error:t.error,contentType:"text/plain"},!1)},e.prototype.metrics=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/internal/metrics"),method:"POST",data:e,contentType:"text/plain",dataType:"text",success:t.success,error:t.error},!1)},e.prototype.track=function(e,t,n){return this._internals.network.req({url:this._internals.network.getEndpointUrl((Array.isArray(e)?"/batch":"")+"/events")+"?enrich="+!!t.includeResponseBody,method:"POST",data:e,success:t.success,error:t.error,contentType:"text/plain"},n)},e.prototype.events=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/events")+"?user_id="+e+(t.from?"&from="+t.from.toISOString():""),method:"GET",success:t.success,error:t.error,contentType:"text/plain"},!1)},e.prototype.tpdUsage=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/tpd/usage"),method:"POST",data:e,success:t.success,error:t.error,contentType:"text/plain"},!1)},e.prototype.reset=function(){return this._internals.network.req({url:this._internals.network.getEndpointUrl("/reset"),method:"POST",xhrFields:{withCredentials:!0},contentType:"text/plain"},!1)},e.prototype.segmentSync=function(e,t){return this._internals.network.ajax({url:"https://"+this._internals.config.segmentSyncApiHost+"/sync/"+e,type:"POST",data:"value="+encodeURIComponent(t),contentType:"application/x-www-form-urlencoded",xhrFields:{withCredentials:!0}})},e.prototype.models=function(e){var t="binary"===e?"bin":"json";return this._internals.network.ajax({url:"https://"+this._internals.config.cdnBaseUrl+"/models/"+this._internals.config.projectId+"-models."+t,dataType:e})},e}();t.PermutiveApi=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(){this.promises={}}return e.prototype.addPromise=function(e,t,n,r){var i=this;e in this.promises||(this.promises[e]={}),this.promises[e][t]=r,window.setTimeout(function(){i.resolvePromise(e,t)},n)},e.prototype.createPromise=function(e,t,n){this.addPromise(e,t,n,r.deferredPromise())},e.prototype.getPromise=function(e,t){return r.lens(this.promises,e,t)},e.prototype.resolvePromise=function(e,t){var n=this.getPromise(e,t);return void 0!==n?(n.resolve(),n):void 0},e.prototype.getPromisesByCategory=function(e){var t=r.lens(this.promises,e)||{};return Object.keys(t).map(function(e){return t[e]})},e}();t.PermutivePromises=i},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function t(e){this._internals=e,this.queries={},this.promises={}}return t.prototype.register=function(e){var t=r.deferredPromise();return this.queries[e.resource]=e.query(),this.promises[e.resource]=t,t.promise},t.prototype.run=function(){var t=this;if(0===Object.keys(this.queries).length)return e.resolve();var n=r.deferredPromise();return this._internals.api.graphql(this.toQueryString(this.queries),{success:function(e){Object.keys(t.promises).forEach(function(n){var r=e.data[n];r?t.promises[n].resolve(r):t.promises[n].reject("Could not find a graphql response for resource "+n)}),n.resolve()},error:function(e){console.error(e),Object.keys(t.promises).forEach(function(e){return t.promises[e].reject()}),n.reject()}}),n.promise},t.prototype.toQueryString=function(e){return"{ "+Object.keys(e).map(function(t){return e[t]}).join(" ")+" }"},t}();t.GraphQLQuery=i}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.events=[],this.listeners=[]}return e.prototype.newEvent=function(e,t){var n=this;this.events.push([e,t]),this.listeners.forEach(function(r){n.handle(e,t,r)})},e.prototype.addListener=function(e){var t=this;this.listeners.push(e);var n={replay:function(){return t.replay(e),n},remove:function(){return t.remove(e),n}};return n},e.prototype.handle=function(e,t,n){var r="string"==typeof n.name&&e.name===n.name,i=n.name.test&&n.name.test(e.name),o=r||i;if(o)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}o&&n.once&&this.remove(n)},e.prototype.replay=function(e){for(var t=-1!==this.listeners.indexOf(e),n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)},e.prototype.remove=function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},e}();t.EventHandler=r},function(e,t,n){"use strict";function r(e){var t={},n=[];(e=e||this).on=function(n,r,i){return(t[n]=t[n]||[]).push([r,i]),e},e.off=function(r,i){r||(t={});for(var o=t[r]||n,a=o.length=i?o.length:0;a--;)i==o[a][0]&&o.splice(a,1);return e},e.once=function(t,r){var i=n.slice.call(arguments,2),o=function(){r(i),e.off(t,o)};return e.on(t,o),e},e.emit=function(r){for(var i,o=t[r]||n,a=o.length>0?o.slice(0,o.length):o,c=0;i=a[c++];)i[0].apply(i[1],n.slice.call(arguments,1));return e}}n.r(t),n.d(t,"Events",function(){return r})},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),a=n(4),c=function(){function e(e){var t=this;this._internals=e,this.timeoutDuration=500,this.maxWaitTime=5e3,this.requests=[],setInterval(function(){t.requests.length>0&&t.flush()},this.maxWaitTime),a.onPageUnload(function(){t.requests.length>0&&t.flush(!0)})}return e.prototype.add=function(e,t,n){this.resetTimeout(),this.requests.push([e,t,n])},e.prototype.flush=function(e){var t=this;void 0===e&&(e=!1);var n=i(this.requests);e||this.trackMetrics(n),this._internals.api.track(n.map(function(e){return e[0]}),{},e).then(function(e){return t.isBatchResponse(e)?t.handleBatchResponse(e,n):null},function(e){return t._internals.network.error(e)}).catch(function(e){return t._internals.network.error(e)}),this.requests=[]},e.prototype.handleBatchResponse=function(e,t){var n=this;e.map(function(e){return e.body}).forEach(function(e,r){var i=t.map(function(e){return e[0]})[r],a=t[r][1],c=t[r][2];o.isEventTrackError(e)?n.handleTrackError(e,i,a.error):n.handleTrackResponse(e,i,a.success,c)})},e.prototype.handleTrackResponse=function(e,t,n,r){var i=o.deserializeMinimalEvent(e,t);n(i),"never"!==r&&(this._internals.state.eventsCache.add(i),this._internals.eventHandler.newEvent(o.serializeEvent(i),null))},e.prototype.handleTrackError=function(e,t,n){var r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:(new Date).toISOString()};n(e.error.message),this._internals.eventHandler.newEvent(r,e),console.error(e)},e.prototype.setTimeout=function(e){var t=this;return window.setTimeout(function(){return t.flush()},e)},e.prototype.resetTimeout=function(){clearTimeout(this.timeout),this.timeout=this.setTimeout(this.timeoutDuration)},e.prototype.trackMetrics=function(e){this._internals.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this._internals.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e.map(function(e){return e[0]})).length,labels:{}})},e.prototype.isBatchResponse=function(e){return!!e},e}();t.PermutiveEventsBatch=c},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=function(){function e(){}return e.prototype.track=function(e){},e.prototype.trackTimeSinceInit=function(e,t){},e.prototype.startTimer=function(e,t){return""},e.prototype.stopTimer=function(e,t){},e}();t.PermutiveMetricsNoOp=a;var c=function(){function e(e,t,n){var r=this;this.sdkInitTimestamp=e,this._internals=t,this.permutive=n,this.sendFrequencyInSeconds=5,this.pendingMetrics=[],this.pendingTimers={},this.permutive.ready(function(){window.setInterval(r.processPending.bind(r),1e3*r.sendFrequencyInSeconds),o.onPageUnload(function(){r.processPending.bind(r)})}),this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}return e.prototype.track=function(e){this.pendingMetrics.push(e)},e.prototype.trackTimeSinceInit=function(e,t){var n=performance.now();this.track({name:e,value:(n-this.sdkInitTimestamp)/1e3,labels:t})},e.prototype.startTimer=function(e,t){var n=performance.now(),r=this.generateRandomKey(e);return this.pendingTimers[r]={startTime:n,labels:t},r},e.prototype.stopTimer=function(e,t){var n=this.pendingTimers[t];if(n){var r=performance.now();this.track({name:e,value:(r-n.startTime)/1e3,labels:n.labels}),delete this.pendingTimers[t]}},e.prototype.processPending=function(){this.pendingMetrics.length>0&&(this._internals.api.metrics({context:{environment:"web",events_count:this._internals.state.eventsCache.all().length,segments_count:Object.keys(this._internals.queryManager.queryStateMap).length},items:this.pendingMetrics}),this.pendingMetrics=[])},e.prototype.generateRandomKey=function(e){return e+"-"+i(Array(24)).map(function(){return Math.random().toString(36)[2]}).join("")},e}();t.PermutiveMetrics=c},function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=n(59);t.providerToIdMap={permutive:"1",eyeota:"2",skimlinks:"4",comscore:"5",eyeota_bombora:"6",eyeota_aimmatic:"7",eyeota_alc:"8",eyeota_amberdata:"9",eyeota_caci:"10",eyeota_corelogic:"11",eyeota_dlg:"12",eyeota_dataxpand:"13",eyeota_dunbradstreet:"14",eyeota_experian:"15",eyeota_gbgtransactis:"16",eyeota_gfk:"17",eyeota_rdaresearch:"18",eyeota_kantarmedia:"19",eyeota_mastercard:"20",eyeota_meritdirect:"21",eyeota_netsprint:"22",eyeota_nri:"23",eyeota_onaudience:"24",eyeota_pacificdatapartners:"25",eyeota_plungedigital:"26",eyeota_roymorgan:"27",eyeota_schober:"28",eyeota_sharethis:"30",eyeota_skimlinks:"31",eyeota_specialists:"32",eyeota_statsocial:"33",eyeota_stirista:"34",eyeota_yougov:"36"};var c=function(){function n(e,t,n){var r=this;this._internals=e,this.permutive=t,this.network=n,this._internals.log("Enabling tpd reporting"),this._internals.messages.on("permutive:segments:updated",function(){r.reportUsage()});var i=this._internals.state.getPermutiveData("third-party-data");this.userSegments=this.isValidState(i)?i:{},this.lastCheckedSession=this._internals.state.getPermutiveData("third-party-data-session-id")||""}return n.prototype.segments=function(){var t=this;if(this.segmentsPromise)return this.segmentsPromise;var n=this._internals.sessionManager.getSessionId();if(this.lastCheckedSession===n)return e.resolve(this.userSegments);var c=o.deferredPromise();this.lastCheckedSession=n;var s=this._internals.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{}),u=r({},this._internals.identities.getIdentities(!0),this._internals.identities.currentAliases);if(Object.keys(u).length>0){var f=new a.GraphQLTPD(this._internals.state.userId||o.uuidv4(),this._internals.identities.convertAliases(u));this._internals.graphql.register(f).then(function(e){var n=t.graphQLTPDResponseToSegmentMap(e);t.updateCache(n),c.resolve(n)}).catch(function(e){t.network.error("Third Party Data segments retrieval failed with reason: "+e,t._internals.state.userId),c.resolve({})})}else c.resolve({});var d=this._internals.promises.getPromisesByCategory("tpd"),l=e.all(d.map(function(e){return e.promise})).then(function(e){return c.promise}).then(function(e){return t.userSegments});return l.then(function(e){t._internals.state.setPermutiveData("third-party-data-session-id",n),t._internals.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",s);var r=t._internals.state.getPermutiveData("third-party-data");r&&o.nonPrimitiveEq(r,e)||(t._internals.state.setPermutiveData("third-party-data",t.userSegments),Object.entries(e).forEach(function(e){var n=i(e,2),a=n[0],c=n[1];r&&o.nonPrimitiveEq(r[a],c)||t.fireSegments(a,Object.keys(c))}))}),this.segmentsPromise=l,this.segmentsPromise},n.prototype.addSegments=function(e,t){var n;this.updateCache(((n={})[e]=this.listToSegmentMap(t),n))},n.prototype.getActivationMetadata=function(){var e=this._internals.queryManager.getTpdUsage(),n={},i=function(i){if(e.hasOwnProperty(i)){var o=[],a=r({},e[i]);Object.keys(a).forEach(function(e){a[e].forEach(function(n){o.push([i,t.providerToIdMap[e],n].join("-"))})}),n[i]=o}};for(var o in e)i(o);return n},n.prototype.updateCache=function(e){this.userSegments=o.mergeObjects(this.userSegments,e)},n.prototype.fireSegments=function(e,t){this.permutive.track("ThirdPartySegments",{data_provider:e,segments:t},{isAnalyticsOnly:!0})},n.prototype.reportUsage=function(){var e=this._internals.queryManager.getTpdUsage(),t=o.hash(JSON.stringify(e));if(this._internals.state.getPermutiveData("third-party-data-usage")!==t&&Object.keys(e).length>0){this._internals.state.setPermutiveData("third-party-data-usage",t);var n={user_id:this._internals.state.userId,time:new Date,tpd_segments:e};this._internals.api.tpdUsage(n)}},n.prototype.graphQLTPDResponseToSegmentMap=function(e){var t=this;return e.identity.tpd.reduce(function(e,n){var i;return r({},e,((i={})[n.name]=t.listToSegmentMap(n.segments),i))},{})},n.prototype.listToSegmentMap=function(e){return e.reduce(function(e,t){return e[t]=!0,e},{})},n.prototype.isValidState=function(e){return e&&void 0===e.expiry_time},n}();t.PermutiveThirdParty=c}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n=this;this.userId=e,this.aliases=t,this.resource="userTPD",this.query=function(){var e=n.aliases.map(function(e){return'{id: "'+e.id+'", tag: "'+e.tag+'", priority: '+e.priority+"}"}).join(",");return'\n      userTPD: user(user_id: "'+n.userId+'") {\n        identity(aliases: ['+e+"]) {\n          tpd {\n            name\n            segments\n          }\n        }\n      }\n    "}};t.GraphQLTPD=r},function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=n(16),c=n(61),s=n(8),u=n(2),f=function(){function t(e,t,n){this._internals=e,this.network=t,this.context=n,this.initialisedAddons=[]}return t.prototype.identify=function(e){var t=this;this._internals.log("<call> identify",e);var n=a.PermutiveIdentities.getAliasesFromIdentifyArg(e),r=o.deferredPromise();if(!this._internals.api)return this.network.error("The API hasn't been loaded.",this._internals.state.userId),r.reject(),r.promise;return this._internals.state.taskQueue.add(new c.Task(function(e){t._internals.log("<task> identify ",n);var i=t._internals.state.userId,o={success:function(o){var a=o.user_id;if(a!==i){var c={error:function(){t.network.error("couldn't retrieve events for user "+a,a),e(),r.resolve()},from:new Date(0)};t._internals.state.reset().then(function(){return u.pipe(t._internals.state.setUserId(a),function(e){return t._internals.state.eventsCache.reset()}).then(function(e){return t._internals.state.eventsCache.refresh(c)}).then(function(e){var n=t._internals.state.eventsCache.processRefreshEvents(e,{write:!0});return t._internals.queryManager.updateSegmentResults(n),t._internals.queryManager.initWorker(n)}).then(function(){e(),r.resolve()})})}else t._internals.log("<done> identify ",n),e(),r.resolve()},error:function(){t.network.error("Couldn't set identity for user "+i,i),e(),r.resolve()}};t._internals.api.identify(n,o)},{wait_prev:!0,block_next:!0})),r.promise},t.prototype.on=function(e,t){return this._internals.eventHandler.addListener({name:e,callback:t,once:!1})},t.prototype.once=function(e,t){return this._internals.eventHandler.addListener({name:e,callback:t,once:!0})},t.prototype.track=function(){for(var t=this,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var u=i([n[0],n[1]||{},n[2]||{}],3),f=u[0],l=u[1],p=u[2];this._internals.log("<call> track",f);var g=o.deferredPromise();if(!this._internals.api)return this.network.error("The API hasn't been loaded."),g.reject(),g.promise;var h=!!p.isAnalyticsOnly,m=this._internals.sessionManager.getSessionId(),_=this._internals.state.viewId,v={success:p.success||function(e){},error:p.error||function(e,t){}},y=function(n){t._internals.log("<task> track",f);var a,c=h?null:t._internals.metrics.startTimer("sdk_events_api_roundtrip_seconds",{}),u=h?null:t._internals.metrics.startTimer("sdk_events_overall_processing_seconds",{}),y=i(t._internals.enrichers.enrich([l,!0]),2),b=y[0],w=y[1],k=r({},b,{client:t._internals.state.getClient()}),q=d(p,w),E={user_id:t._internals.state.userId,name:f,segments:t._internals.queryManager.userSegments,properties:k,session_id:m,view_id:_},S={name:f,properties:k,session_id:m,view_id:_,time:new Date},P=function(e){var n=t._internals.metrics.startTimer("sdk_events_querylanguage_seconds",{});return t._internals.queryManager.update([e]).then(function(){t._internals.metrics.stopTimer("sdk_events_querylanguage_seconds",n),t._internals.metrics.stopTimer("sdk_events_overall_processing_seconds",u)})},x=function(n){t._internals.log("Tracking failed with reason",n);var r={name:E.name,session_id:E.session_id,view_id:E.view_id,properties:E.properties,id:null,time:new Date};return e.resolve({event:r,error:n})},O=function(t){var n=s.isFullPermutiveEventJson(t)?s.deserializeEvent(r({},t,{session_id:E.session_id,view_id:E.view_id})):s.deserializeMinimalEvent(t,E);return e.resolve({event:n,error:null})},T=function(t){return e.resolve(t.error?v.error(t.error.error.message):v.success(t.event))},I=function(n){return n.error||t._internals.state.eventsCache.add(n.event),e.resolve(n)},M=function(n){return t._internals.eventHandler.newEvent(s.serializeEvent(n.event),n.error),e.resolve(n.event)};switch(q){case"immediate":a=o.forP(function(n){var r=i(n,2),o=r[0],a=r[1];return e.all([P(o),t._internals.eventsBatch.add(a,v,q),e.resolve(o)])},function(t){var n=i(t,3),r=(n[0],n[1],n[2]);return e.resolve(r)});break;case"onResponse":a=o.forP(function(e){var n=i(e,2),r=(n[0],n[1]);return t._internals.api.track(r,{includeResponseBody:!0},!1)},function(e){return function(e){return t._internals.metrics.stopTimer("sdk_events_api_roundtrip_seconds",c),s.isEventTrackError(e)?x(e):O(e)}(e)},function(t){return e.all([T(t),I(t),P(t.event),M(t)])},function(t){var n=i(t,4),r=(n[0],n[1],n[2],n[3]);return e.resolve(r)});break;case"deferred":a=o.forP(function(n){var r=i(n,2),o=r[0],a=r[1];return e.all([t._internals.api.track(a,{includeResponseBody:!1},!0),e.resolve(o)])},function(e){var t=i(e,2),n=(t[0],t[1]);return M({event:n,error:null})});break;case"never":a=function(n){var r=i(n,2),o=r[0],a=r[1];return t._internals.eventsBatch.add(a,v,q),e.resolve(o)}}a([S,E]).then(function(r){return g.resolve(r),t._internals.log("<done> track",r.name),n(),e.resolve(r)}).catch(function(e){t._internals.metrics.stopTimer("sdk_events_api_roundtrip_seconds",c),v.error(e),t.network.error(e,t._internals.state.userId)})};return this._internals.state.taskQueue.add(new c.Task(y)),g.promise},t.prototype.trigger=function(e,t,n){var r=this,i=o.deferredPromise();this._internals.log("<call> trigger",e),this._internals.triggerListeners=this._internals.triggerListeners||[];return this._internals.state.taskQueue.add(new c.Task(function(t){r._internals.log("<task> trigger",e);var o=r._internals.messages.on("permutive:query:changed",function(t){t.queryCode===e&&(n(t.result),i.resolve(t.result))});r._internals.triggerListeners.push(o),r._internals.log("<done> trigger",e),t()})),i.promise},t.prototype.query=function(e,t){var n=this,r=o.deferredPromise();this._internals.log("<call> query",e);return this._internals.state.taskQueue.add(new c.Task(function(i){n._internals.log("<task> query",e),n._internals.queryManager.handleResult(e,function(e){t(e),r.resolve(e)}),n._internals.log("<done> query",e),i()})),r.promise},t.prototype.segment=function(e,t){var n=this,r=o.deferredPromise();this._internals.log("<call> segment",e);return this._internals.state.taskQueue.add(new c.Task(function(i){n._internals.log("<task> segment",e),n._internals.queryManager.handleResult(e,function(n){if("boolean"!=typeof n.result)throw new Error("Segment "+e+" is missing boolean result property");t(n.result),r.resolve(n.result)}),n._internals.log("<done> segment",e),i()})),r.promise},t.prototype.segments=function(e,t){var n=this;void 0===t&&(t="all");var r=o.deferredPromise();this._internals.log("<call> segments");return this._internals.state.taskQueue.add(new c.Task(function(i){n._internals.log("<task> segments ("+t+")");var o=function(o){e(o),r.resolve(o),n._internals.log("<done> segments ("+t+")"),i()};"dfp"===t?void 0!==n._internals.addons.dfp&&n._internals.addons.dfp.isReady?o(n._internals.addons.dfp.liveSegments):n._internals.messages.once("permutive:dfp:ready",function(){o(n._internals.addons.dfp.liveSegments)}):o(n._internals.queryManager.userSegments)})),r.promise},t.prototype.reset=function(){var t=this;return e.all([this._internals.state.reset(),this._internals.api.reset()]).then(function(e){var n=i(e,2),r=(n[0],n[1]);t._internals.state.setUserId(r.id),t._internals.state.eventsCache.reset(),t._internals.messages.emit("permutive:reset")})},t.prototype.addon=function(t,i){var o=this;if(-1===this.initialisedAddons.indexOf(t)){this.initialisedAddons.push(t);var a=r({},i,{_internals:this._internals,permutive:this,network:this.network,context:this.context});switch(t){case"web":e.resolve().then(function(){return n(18)}).then(function(e){return o._internals.addons.web=new e.WebAddon(a)});break;case"publishers":0;break;case"overlays":e.resolve().then(function(){return n(19)}).then(function(e){return o._internals.addons.overlays=new e.OverlaysAddon(a)});break;case"scriptrunner":e.resolve().then(function(){return n(20)}).then(function(e){return o._internals.addons.scriptrunner=new e.ScriptRunnerAddon(a)});break;case"dfp":e.resolve().then(function(){return n(21)}).then(function(e){return o._internals.addons.dfp=new e.DFPAddon(a)});break;case"smart":case"nativo":case"freewheel":case"gigya":case"facebook_pixel":0;break;case"facebook_pixel_v2":e.resolve().then(function(){return n(22)}).then(function(e){return o._internals.addons.facebook_pixel_v2=new e.FacebookPixelV2Addon(a)});break;case"eyeota_pixel":case"pubmatic":case"tradedesk":case"dbm":case"rubicon":case"rubicon_ssp":case"aol":case"lotame":0;break;case"tracking_pixel":e.resolve().then(function(){return n(23)}).then(function(e){return o._internals.addons.tracking_pixel=new e.PixelAddon(a)});break;case"twitter_pixel":e.resolve().then(function(){return n(24)}).then(function(e){return o._internals.addons.twitter_pixel=new e.TwitterAddon(a)});break;case"pinterest_pixel":case"local_storage":case"appnexus":case"appnexus_adserver":case"prebid":0}}else"web"===t&&!0!==i.auto_init&&this._internals.addons[t].reset(i)},t.prototype.ready=function(e,t){void 0===t&&(t="initialised");var n=o.deferredPromise(),r=function(){e(),n.resolve()};switch(t){case"initialised":this._internals.isReady?r():this._internals.messages.on("permutive:ready",r);break;case"realtime":this._internals.isRealtime?r():this._internals.messages.once("permutive:ready",r)}return n.promise},t}();function d(e,t){return e.useBeacon?"deferred":e.isAnalyticsOnly?"never":t?"immediate":"onResponse"}t.PermutiveMethods=f}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t={}),this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.description=t.description||"",this.started=!1,this.complete=!1,this.task=e}return e.prototype.waits=function(){return this.wait_prev},e.prototype.blocks=function(){return this.block_next},e.prototype.execute=function(e){var t=this;this.started=!0,this.task(function(){t.complete=!0,e()})},e}();t.Task=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n=this;this.userId=e,this.aliases=t,this.resource="userIdentify",this.query=function(){var e=n.aliases.map(function(e){return'{id: "'+e.id+'", tag: "'+e.tag+'", priority: '+e.priority+"}"}).join(",");return'\n      userIdentify: user(user_id: "'+n.userId+'") {\n        identity(aliases: ['+e+"]) {\n          identify {\n            id\n          }\n        }\n      }\n    "}};t.GraphQLIdentify=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n=this;this.userId=e,this.from=t,this.resource="userEvents",this.query=function(){return'\n      userEvents: user(user_id: "'+n.userId+'") {\n        events(from: "'+n.from.toISOString()+'") {\n          id\n          name\n          time\n          session_id\n          view_id\n          properties\n        }\n      }\n    '}};t.GraphQLEvents=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(4);t.PERMUTIVE_CONFIG={default:{environment:"default",projectId:"",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",apiVersion:"v2.0",apiProtocol:"https",loggingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+function(e){var t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,24}$/i),r=e.match(/localhost/);if(n&&n.length>0){var i=e.split(".").reverse(),o=i.length;return o>=3&&i[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?i[2]+"."+i[1]+"."+i[0]:i[1]+"."+i[0]}return t&&t.length>0?t[0]:r&&r.length>0?"localhost":""}(window.location.hostname),cookieName:"permutive-id",cookieExpiry:(r=new Date,r.setFullYear(r.getFullYear()+3),r.toUTCString()),permutiveDataKey:"permutive-data",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:10,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"970c370e-66b5-4cc7-ad17-1d370e11bf75.partner.permutive.app"},production:{},development:{apiProtocol:"http",loggingEnabled:!0,sendClientErrors:!1}},t.make=function(e){return i.mergeObjects(t.PERMUTIVE_CONFIG.default,t.PERMUTIVE_CONFIG[e.environment]||{},e)}},function(e,t,n){"use strict";(function(e){var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=n(66);function a(e){return"SegmentEntry"===e.name}var c=function(){function t(e,t,n){var r=this;this._internals=e,this.permutive=t,this.network=n,this.initialised=!1,this.stateChangeQueue=[],this.CACHED_SEGMENTS_STORAGE_KEY="_psegs",this.queryMetadata={22246:["36b5256b4f",["s"],"c0a87436-365f-4f5a-ad1f-38b8ee4932af"],22247:["300027dc01",["s"],"2f620584-9322-44f6-8364-6f1dc58e71c9"],22248:["0c8b70cdb7",["s"],"d51c2e77-664e-41cc-82c1-a92576a31590"],22625:["e5ac25fa51",["s"],"b4abbedf-da82-48a3-ac66-4ccfb57945bd"],22664:["c784c76f7e",["s"],"e058f3d1-58e0-412c-b2ea-9e699ed808cb"],22667:["bf89c7dc0c",["s"],"41fe66df-9e26-49de-909d-aa4fec78db54"],22668:["7d307948b5",["s"],"267147eb-9db9-4786-b7a4-ebc718c02c52"],22669:["431b8f3694",["s"],"c5b7aa05-9196-4572-8b97-15abbb690c5a"],22670:["2106b55c73",["s"],"89a82ba7-38b4-4854-8551-4cade194c0c9"],22672:["119f019bf3",["s"],"c0dbb70c-5082-48f7-ac9b-a28bb9c940cf"],22673:["772b9c8a4c",["s"],"cc51931f-f739-4d2a-906d-b008609bbf7d"],22674:["3300da6ade",["s"],"bfefa7d8-12f2-4c56-80d9-97ca22cc27f7"],22675:["a5a0353c63",["s"],"9a6887a3-4646-4275-9d40-fff530266f07"],22676:["e1c416aee4",["s"],"78158a14-67d8-436d-ac7d-aaa602dd9fbb"],22677:["b0556161a3",["s"],"d4e38b4d-38d2-4c5e-a092-81b3858c44df"],22678:["730fba9306",["s"],"3247eacc-493a-4aa2-be4e-1db8e72b24a9"],22684:["5da6d6f3ae",["s"],"8b8add14-27a5-47f2-89d5-ad0a0740aadc"],22686:["cf069904e8",["s"],"f874d621-a490-44c2-97f8-1f1b49a914e6"],22693:["ba5699ba8f",["s"],"ce298fc9-3514-4b67-bedf-c7c9ca51dd93"],22728:["ef82aaeb3d",["s"],"10e09c66-f4d1-469e-878c-4c227b50cd8a"],22741:["fb43e400a8",["s"],"5721949e-9ae1-4c08-be47-259297b21f2e"],22782:["3fc5e716b3",["s"],"d22994e2-d37f-4199-91d2-f35c8c1761c2"],22783:["67027d49f5",["s"],"e5a7fd2f-c542-473b-a5d7-23205e4150af"],22784:["3c9f503b5b",["s"],"0e3f2ef1-e510-4a26-ac72-6352dc309e86"],22785:["8cc466146b",["s"],"76e3f876-adad-486b-b98b-96cbd04dd615"],22786:["9d132cac28",["s"],"6d99f95b-473a-4738-a033-fe53355d2512"],22787:["b17b71daa7",["s"],"3380baea-c7d9-4988-9bae-fee6b7934c97"],22788:["0338020d5e",["s"],"f0c3ee99-c58b-42d8-855b-bb909ce0c65c"],22823:["cb8068697c",["s"],"c31a246e-c504-4902-81de-5fc1bd290ff4"],22825:["c831f53006",["s"],"69845814-592c-4816-a180-93e906cf1d37"],22828:["982b0198a8",["s"],"2d0dff15-9af0-44ad-9936-dd4e352120e9"],22829:["384dabfc0a",["s"],"085c6e3e-eb8a-413c-b6f5-17d12c6a8acc"],22830:["e8e6e24307",["s"],"8258a50d-0e10-417b-8245-ec37b14deeb8"],22831:["7439863f44",["s"],"ceaf170f-6d2d-4df9-9861-c629ef74230e"],22865:["1c8dc7a045",["s"],"513c05c2-882c-4d85-81e5-0c892aec4c4f"],22899:["8877273a75",["s"],"27440683-9cff-4572-a1d2-ffbe81c6cc21"],23499:["216d45dcc3",["s"],"fa05d376-d434-4e79-99a8-54e5671bfc1f"],24057:["8544deec47",["s"],"fa8bf7f0-92dd-45c0-9da7-14711271a2ce"],24134:["0a873ae63d",["s"],"b3952087-7961-40a2-a0ef-22f7a945a8da"],24870:["b83b440410",["s"],"48f7b1fa-f075-4d73-ac2f-dc24e9a280fc"],25633:["35c2e07361",["s"],"c2f066e9-da22-4c7b-bb64-f2d1de5d90a0"],26576:["061a0b51d3",["s"],"3f1a8320-c21a-45b1-837f-b17139bcf3bf"],26647:["7e0fc27553",["s"],"e05c07c0-a9b7-4da8-b065-17c9cded93d3"],27721:["084215a8d4",["s"],"b025b970-2ee6-4ddc-a401-371b4662ee64"],27722:["f51b7a11c7",["s"],"a7278668-3940-4712-ad59-9a6c1bb843d6"],27723:["144c140462",["s"],"61ed7079-0bd4-44b8-8b96-ef1c2f72bbd7"],27724:["7e55f751d8",["s"],"730b557d-25a0-4bd2-9fe5-7bc59cd6277f"],27725:["7c1d1c21ed",["s"],"11d0e116-05ae-4807-acfb-51ca42f6ecb0"],27726:["685e80f014",["s"],"d6204d98-80e4-4dda-a6e7-f6f14e136cac"],27727:["3d10105782",["s"],"24e58ab2-d15f-47d5-9ea3-8e033bb5f6b8"],27729:["e916c622ea",["s"],"10a21604-66ad-4aa9-9512-cb116a823935"],27730:["39fd3182ff",["s"],"32ed03bd-ad6f-4e2d-9622-92232815905f"],27737:["cd1b1d99ca",["s"],"b6719fae-82c6-43ff-ac2c-eb35500407a3"],27738:["9ac2e06b70",["s"],"ae299033-2297-4942-8990-0d9201dcfeaa"],27741:["7f304b8a60",["s"],"cdb05e94-4f24-44da-905c-637aca38e3a2"],28700:["f3b8cb8f1e",["s"],"1be108f2-2515-4da9-a7c8-5db21316e6ae"],30273:["3031b36387",["s"],"d0d39d36-f1ba-424c-85dd-cf777ad9cc87"],31006:["4939c86fbb",["s"],"031822fc-4e74-4042-a893-8d4c43f18a21"],31015:["0d6fb83a33",["s"],"900905f5-70f5-4906-9816-c0ab48eef2d2"],31016:["9aabd7f466",["s"],"67c71fdb-5d18-4567-8432-a8053936e3fc"],31017:["c83279b855",["s"],"2a82ea6f-5dc5-4c01-9431-46d24f8f231a"],31019:["1109b26e2e",["s"],"ae4ad769-d8e4-43d3-a2dd-13bcb36b7e95"],31020:["5ad8ef5847",["s"],"8eec7438-dd50-4bef-9b0b-83819a326504"],31186:["40418082d5",["s"],"f9ec8e10-c4e4-40a7-864e-9178333c6d96"],31188:["3fa46fd88f",["s"],"000697b3-a627-4d5f-9fa5-89eeb1b8a7bb"],31198:["b46262e3e8",["s"],"21390f6a-2aa1-47c1-b4ba-db4735bef5b1"],31497:["4d0c58e863",["s"],"1088dc98-9f0a-4a76-8798-bc423e5c08aa"],31514:["a054b7d2f2",["s"],"395bb8e9-7ddd-49dd-8862-090a3ce83ddc"],31545:["e2d8f1e143",["s"],"b1d8ad71-cd58-4607-88e0-24860b59439a"],31550:["fbe25327bd",["s"],"1bdfffaf-5c91-44a6-b000-c76ce4f23b71"],31551:["64c738829a",["s"],"50a07373-cc0c-49ae-9134-9f5e32ada8b3"],31552:["369063529f",["s"],"63a86002-a055-49c2-9a9c-c519faddd356"],31564:["edd65f19c7",["s"],"d2244638-a56a-4295-8f7a-fc9825e3a547"],31565:["e84b8c783b",["s"],"e4d7db2b-1647-4a3c-b410-f22b37e9c9ff"],31568:["40602d4604",["s"],"85e93759-f98a-4026-b0d9-3c2badaccd8b"],31571:["03c3670112",["s"],"ffd57c06-ed06-48e1-9b1e-b8a7291b232b"],31573:["78915798f0",["s"],"c0db2e49-c4a8-4795-a171-961e0fac4fdb"],31574:["284cde7677",["s"],"cb6d1922-da48-46c2-bae5-1dcc3be331a7"],31575:["26bf0a3028",["s"],"2becd9b2-a788-4292-9dcf-ece7d2d43a3f"],31576:["3a5427eced",["s"],"a80a0bae-fb8d-440f-81bd-c9bd1f26ab4a"],31589:["280527b53c",["s"],"ad706b73-a204-4f51-966f-dbec119a0c38"],31592:["9dae0fb8cc",["s"],"5e698e6b-a728-474f-a3e7-6c80159cebdc"],31593:["02af1698b2",["s"],"c5c0592c-6786-469b-8001-59a0acd84ef2"],31594:["f67a01cd9f",["s"],"6df3765a-244b-4682-9bd1-bf631d04c09b"],31595:["850b606c27",["s"],"1fee49e8-09f3-4915-ac47-6f1d75fbc2b1"],31596:["72bdb44ec9",["s"],"508e30df-ce3e-4fe8-9001-ac0953508322"],31682:["befacb317d",["s"],"5f9f96b4-9f89-4f35-8010-513be42d5e23"],31779:["7a0c78c1cd",["s"],"a4178239-9a10-4aaa-9054-de58904d7a33"],31890:["473e6a8957",["s"],"46f566d0-d0d9-49a1-b71d-7fe2bcbbb93d"],31891:["974933378f",["s"],"eb7aff5b-080d-4047-93f4-9a58dccd3a33"],31892:["e872a36573",["s"],"cbbfc557-58f1-4892-8f55-25679bd05ce2"],31893:["cd20fadf8b",["s"],"ea06343d-8ee0-4a6a-803e-e1d16e1355bc"],31894:["1fcb4f4b6a",["s"],"e15bb34a-1c31-4d20-adf0-f0cab4fcb5b1"],31895:["e814104cb9",["s"],"bb633cef-77aa-4c35-9965-21c74e035040"],31897:["4b4088b97d",["s"],"d9ac7e90-2958-410d-bceb-3f77e90e09d8"],31899:["7209309fa8",["s"],"bd7a1e36-0563-44ba-8ab9-a986cf2e9d6f"],31901:["ba32643358",["s"],"9c81e45f-0a7c-49fd-a9c8-30815e910edf"],31902:["6136d8881d",["s"],"2f3983a9-8262-4b24-9793-d57ebdc67677"],31904:["540c7e577d",["s"],"de72f047-0664-4d86-bd08-2e6b8da02bba"],31905:["8836b8d24b",["s"],"091b9394-1ed1-4b53-8a18-0876a0836e39"],31941:["4875ef9078",["s"],"943cc711-dbbc-4b30-a061-7588735c8cf4"],31942:["fff1b27394",["s"],"25997416-86ee-4b03-9ea3-1065285c94a4"],32013:["30802612ac",["s"],"0a010dfc-4337-4404-a2ad-2a076ebead7e"],32291:["ef74ed0f99",["s"],"e697147a-d833-4d8a-acfe-59bc2054db52"],32775:["07e97e9369",["s"],"b1db4ab6-1e6e-43b1-b6e2-38ebbb52a27e"],32776:["7069613cf8",["s"],"fd4453db-0be4-406f-b983-840aca82ec7f"],32863:["833b58925a",["s"],"d1b437e4-1c6b-4d95-b548-28ab1d21982e"],32867:["6506d2e2a7",["s"],"f6a60a73-abca-4af4-823e-ce20af570346"],32991:["60dbddcbeb",["s"],"2c46163f-0150-4ca2-8634-364a863ff5c6"],33002:["6f6440dcc3",["s"],"4b826385-f98e-4a1c-bd13-c1bae4e02fb3"],33006:["4798335d2e",["s"],"d09ff03d-0293-4266-aa2b-7761cb61de8a"],33055:["d80b4e794c",["s"],"5f6cc12d-5222-4f0c-8be7-1db5c9dc9d19"],33059:["d404ec1f72",["s"],"e35ef9bf-3d09-412c-9c9e-2017f3f992ba"],33076:["029c05bb3a",["s"],"67d7f42b-c355-4b2c-bf65-d213ef09c66a"],33079:["8bcd563ef5",["s"],"b0b644f8-20fc-43da-bc72-111f5c6bc4c1"],33082:["c64b253eb0",["s"],"a89f0f90-fb1e-4f29-81f2-91e99eeff2f7"],33324:["d04b6d19df",["s"],"ba9d85df-2c9b-4280-95db-891ad85e2f02"],33593:["b8799d5f89",["s"],"50989e57-7d9e-4b5a-9ca1-1a54891e3604"],33595:["d39fbcb72b",["s"],"46fef8f3-62ac-426c-8571-5ea6348284c2"],33596:["6cbb6bb36c",["s"],"e2439df1-f500-47a4-b0e0-0b673b2ffb7e"],33632:["4b5e8b7dd3",["s"],"459ed100-15fe-4b79-bd7d-d85f4ae94dc2"],33636:["6d9ff6969b",["s"],"a7a0554d-6b2e-4300-b59c-3ac8d90bce26"],33903:["d2a3e1dbd5",["s"],"9aec7545-62b7-4159-b06b-18f972b26ba6"],33951:["ae05401ce5",["s"],"76cf08de-f38e-45f1-8d86-f8831261f88f"],34051:["3c59bc9d91",["s"],"c83b144a-265d-421b-a5a5-3534254872a2"],34076:["9108ad5011",["s"],"b54cf98c-acc3-4954-bc62-62859f7d3b44"],34077:["0310a11b4f",["s"],"98028a3a-d1e3-4b66-86c9-5ed1bf3f6927"],34137:["81d39ae4a7",["s"],"702155ff-66c8-4457-8727-55d4252b9067"],34138:["12fae8ef4b",["s"],"6ed9dd2c-3fbb-4e69-ab36-3142c70c4758"]},this.userSegments=[],this.userSegmentsDict={},this.queryStateMap={},this.globalMsgId=0,this.resolves={},this.readSegmentCache(),this.readQueryStateCache(),this.handlers={complete:function(e){var t=r.resolves[e];t&&t(),delete r.resolves[e]},errors:function(e){e.forEach(function(e){r.network.error("QL error. "+e.error+" in query "+e.identifier+" with event "+e.event_id,r._internals.state.userId)})},stateChange:function(e){if(!r.initialised)return r.stateChangeQueue.push(e);for(var t in e)if(e.hasOwnProperty(t)){var n=parseInt(t),o=e[n];if(o.is_segment){var a=n in r.userSegmentsDict,c=o.result.result;if(a===c)continue;c?r.addSegment(n):r.removeSegment(n),r.trackSegmentTransition(c,o.id,n)}else{var s=r.queryStateMap[n]||{result:{}};if(JSON.stringify(s.result)===JSON.stringify(o.result))continue}r._internals.messages.emit("permutive:query:changed",{queryCode:n,result:o.result})}Object.keys(e).length>0&&(r.queryStateMap=i.mergeObjects(r.queryStateMap,e),r.writeSegmentCache(),r.writeQueryStateCache()),r._internals.messages.emit("permutive:segments:updated")}};var a=new Blob([("("+o.QueryWorker+")();").replace('"use strict";',"")],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(a)),this.worker.onmessage=function(e){switch(e.data.type){case"stateChange":return r.handlers.stateChange(e.data.args);case"errors":return r.handlers.errors(e.data.args);case"complete":return r.handlers.complete(e.data.args)}},this.worker.onerror=function(e){e.preventDefault(),r.network.error("WebWorker error: "+e.message,r._internals.state.userId)}}return t.prototype.initWorker=function(e){return this.sendMessage({type:"init",args:[this.queryMetadata,this.queryStateMap,{segments:{"1p":this.userSegmentsDict},sessionId:this._internals.sessionManager.getSessionId(),viewId:this._internals.state.viewId,lookalikeModels:{}},e]})},t.prototype.updateEnvironment=function(e){return this.sendMessage({type:"updateEnvironment",args:[e]})},t.prototype.updateWithHistoricSegments=function(t){return 0===t.length?e.resolve():(this.updateSegmentResults(t),this.sendMessage({type:"processEvents",args:[t]}))},t.prototype.update=function(e){var t=this,n=this.sendMessage({type:"processEvents",args:[e]});return!this._internals.isRealtime&&e.filter(function(e){return"Pageview"===e.name}).length>0&&n.then(function(){t._internals.setAsRealtime()}),n},t.prototype.updateSegmentResults=function(e){var t=this;if(0!==e.length){var n=this.calculateHistoricSegments(e);this._internals.log("New segment states",n),Object.keys(n).forEach(function(e){var r=parseInt(e);n[r]?t.addSegment(r):t.removeSegment(r)}),Object.keys(n).length>0&&this.writeSegmentCache()}},t.prototype.handleResult=function(e,t){e in this.queryStateMap&&t(this.queryStateMap[e].result)},t.prototype.getTpdUsage=function(){for(var e={},t=Object.keys(this.queryStateMap),n=t.length,i=0;i<n;i++){var o=t[i],a=this.queryStateMap[o],c=a.activations;r(a,["activations"]);Object.keys(c).length>0&&(e[o]=c)}return e},t.prototype.reset=function(){this.clearSegmentCache(),this.clearQueryStateCache(),this.userSegments=[],this.userSegmentsDict={},this.queryStateMap={}},t.prototype.setAsReady=function(){this.initialised=!0,this.processStateChangeQueue(),this._internals.messages.emit("permutive:queries:initialised")},t.prototype.getStateSizeInBytes=function(){return 2*JSON.stringify(this.queryStateMap).length},t.prototype.processStateChangeQueue=function(){this._internals.log("state change queue",this.stateChangeQueue);var e=this.stateChangeQueue.reduce(function(e,t){return i.mergeObjects(e,t)},{});this.stateChangeQueue=[],this._internals.log("final state",e),this.handlers.stateChange(e)},t.prototype.sendMessage=function(t){var n=this,r=this.globalMsgId++;return new e(function(e,i){n.resolves[r]=e,t.msgId=r,n.worker.postMessage(t)})},t.prototype.addSegment=function(e){this.userSegmentsDict[e]||(this.userSegments.push(e),this.userSegmentsDict[e]=!0,this.updateQlEffectsSegments())},t.prototype.removeSegment=function(e){if(e in this.userSegmentsDict){delete this.userSegmentsDict[e];var t=this.userSegments.indexOf(e);t>-1&&this.userSegments.splice(t,1),this.updateQlEffectsSegments()}},t.prototype.updateQlEffectsSegments=function(){var e=this;this._internals.thirdParty.segments().then(function(t){e.updateEnvironment({segments:i.mergeObjects({"1p":e.userSegmentsDict},t)})})},t.prototype.calculateHistoricSegments=function(e){for(var t,n={},r=0;r<e.length;r++){var i=e[r];("SegmentEntry"===(t=i).name||"SegmentExit"===t.name)&&(n[i.properties.segment_number]=a(i))}return n},t.prototype.trackSegmentTransition=function(e,t,n){var r=e?"SegmentEntry":"SegmentExit",i={segment_id:t,segment_number:n};this.permutive.track(r,i)},t.prototype.writeSegmentCache=function(){this._internals.log("Writing segment cache");var e=JSON.stringify(this.userSegments);this._internals.setExternalData(this.CACHED_SEGMENTS_STORAGE_KEY,e)},t.prototype.readSegmentCache=function(){var e=this,t=this._internals.getExternalData(this.CACHED_SEGMENTS_STORAGE_KEY);t&&(this.userSegments=this.filterActiveSegments(JSON.parse(t)),this.userSegments.forEach(function(t){e.userSegmentsDict[t]=!0})),this._internals.log("Read segment cache",this.userSegments)},t.prototype.filterActiveSegments=function(e){var t=this;return e.filter(function(e){return e in t.queryMetadata})},t.prototype.clearSegmentCache=function(){this._internals.removeExternalData(this.CACHED_SEGMENTS_STORAGE_KEY)},t.prototype.writeQueryStateCache=function(){this._internals.log("Writing query state cache",this.queryStateMap),this._internals.state.setPermutiveData("query_states",this.queryStateMap)},t.prototype.readQueryStateCache=function(){var e=this,t=this._internals.state.getPermutiveData("query_states")||{};this.queryStateMap=i.filterByKey(t,function(t){return t in e.queryMetadata}),this._internals.log("Read query state cache",this.queryStateMap)},t.prototype.clearQueryStateCache=function(){this._internals.state.setPermutiveData("query_states",{})},t}();t.QueryManager=c}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryWorker=function(){var e=this,t=function(){var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},t=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},n={k:function(e,t){return t.reduce(function(e,t){return e&&null!=e[t]?e[t]:null},e)},kf:function(e,t,n){var r=t.reduce(function(e,t){return e&&null!=e[t]?e[t]:null},e);return null===r?null:n(r)},ti:function(e){return new Date(e).getTime()},pre:function(e,t){var n=t.slice();return n.unshift(e),n},n0:function(e){return!e},nt:function(e){return function(t){return!e(t)}},t:function(e){return!0},a:function(e){return e.reduce(function(e,t){return function(n){return e(n)&&t(n)}})},o:function(e){return e.reduce(function(e,t){return function(n){return e(n)||t(n)}})},i:function(e){return e},as:function(e,t,r){return function(i){return r.reduce(function(r,o){return r&&e(o)(n.k(i,n.pre("properties",t)))},!0)}},os:function(e,t,r){return function(i){return r.reduce(function(r,o){return r||e(o)(n.k(i,n.pre("properties",t)))},!1)}},e:function(e){return function(t){return t===e}},n:function(e){return function(t){return t!==e}},g:function(e){return function(t){return t>e}},ge:function(e){return function(t){return t>=e}},l:function(e){return function(t){return t<e}},le:function(e){return function(t){return t<=e}},b:function(e,t){return function(n){return n>=e&&n<=t}},s:function(e){return function(t){return"string"==typeof e&&"string"==typeof t&&t.toLowerCase().indexOf(e.toLowerCase())>-1}},c:function(e){return function(t){return null!=t&&"object"==typeof t&&t.indexOf(e)>=0}},e_:function(e,t){return function(r){return n.k(r,e)===t}},n_:function(e,t){return function(r){return n.k(r,e)!==t}},g_:function(e,t){return function(r){return n.k(r,e)>t}},ge_:function(e,t){return function(r){return n.k(r,e)>=t}},l_:function(e,t){return function(r){return n.k(r,e)<t}},le_:function(e,t){return function(r){return n.k(r,e)<=t}},b_:function(e,t,r){return function(i){return n.k(i,e)>=t&&n.k(i,e)<=r}},s_:function(e,t){return function(r){var i=n.k(r,e);return"string"==typeof t&&"string"==typeof i&&i.toLowerCase().indexOf(t.toLowerCase())>-1}},c_:function(e,t){return function(r){var i=n.k(r,e);return null!=i&&"object"==typeof i&&i.indexOf(t)>=0}},pe:function(e,t){return function(r){return n.k(r,n.pre("properties",e))===t}},pn:function(e,t){return function(r){return n.k(r,n.pre("properties",e))!==t}},pg:function(e,t){return function(r){return n.k(r,n.pre("properties",e))>t}},pge:function(e,t){return function(r){return n.k(r,n.pre("properties",e))>=t}},pl:function(e,t){return function(r){return n.k(r,n.pre("properties",e))<t}},ple:function(e,t){return function(r){return n.k(r,n.pre("properties",e))<=t}},pb:function(e,t,r){return function(i){return n.k(i,n.pre("properties",e))>=t&&n.k(i,n.pre("properties",e))<=r}},ps:function(e,t){return function(r){var i=n.k(r,n.pre("properties",e));return"string"==typeof t&&"string"==typeof i&&i.toLowerCase().indexOf(t.toLowerCase())>-1}},pc:function(e,t){return function(r){var i=n.k(r,n.pre("properties",e));return null!=i&&"object"==typeof i&&i.indexOf(t)>=0}},te_:function(e,t){return function(r){return n.kf(r,e,n.ti)===t}},tn_:function(e,t){return function(r){return n.kf(r,e,n.ti)!==t}},tg_:function(e,t){return function(r){return n.kf(r,e,n.ti)>t}},tge_:function(e,t){return function(r){return n.kf(r,e,n.ti)>=t}},tl_:function(e,t){return function(r){return n.kf(r,e,n.ti)<t}},tle_:function(e,t){return function(r){return n.kf(r,e,n.ti)<=t}},tb_:function(e,t,r){return function(i){return n.kf(i,e,n.ti)>=t&&n.kf(i,e,n.ti)<=r}},te:function(e){return function(t){return n.kf(t,["time"],n.ti)===e}},tn:function(e){return function(t){return n.kf(t,["time"],n.ti)!==e}},tg:function(e){return function(t){return n.kf(t,["time"],n.ti)>e}},tge:function(e){return function(t){return n.kf(t,["time"],n.ti)>=e}},tl:function(e){return function(t){return n.kf(t,["time"],n.ti)<e}},tle:function(e){return function(t){return n.kf(t,["time"],n.ti)<=e}},tb:function(e,t){return function(r){return n.kf(r,["time"],n.ti)>=e&&n.kf(r,["time"],n.ti)<=t}},af:function(e,t,r,i,o,a){return function(c){var s=n.kf(c,e,function(e){return e.filter(i).map(function(e){return n.k(e,t)}).reduce(o,a)});return r(null===s?a:s)}},af_s:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),n.af(e,t,r,i,function(e,t){return e+t},0)},af_p:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),n.af(e,t,r,i,function(e,t){return e*t},1)},af_n:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),n.af(e,t,r,i,function(e,t){return Math.min(e,t)},Number.POSITIVE_INFINITY)},af_x:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),n.af(e,t,r,i,function(e,t){return Math.max(e,t)},Number.NEGATIVE_INFINITY)},af_m:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),function(o){var a=n.kf(o,e,function(e){return e.filter(i)});return null===a||0===a.length?r(0):r(a.map(function(e){return n.k(e,t)}).reduce(function(e,t){return e+t},0)/a.length)}},af_u:function(e,t,r){return void 0===r&&(r=function(e){return!0}),function(i){return n.kf(i,e,function(e){return e.filter(r).map(t).reduce(function(e,t){return e||t},!1)})||!1}},af_i:function(e,t,r){return void 0===r&&(r=function(e){return!0}),function(i){return n.kf(i,e,function(e){return e.filter(r).map(t).reduce(function(e,t){return e&&t},!0)})&&!0}},af_l:function(e,t,r){return void 0===r&&(r=function(e){return!0}),function(i){var o=n.kf(i,e,function(e){return e.filter(r).length});return t(null===o?0:o)}},tp:function(e,t,r,i,o){var a=n.k(e.getSegments(),[t,r])||!1;return o&&(i||a)&&e.setSegmentActivation(t,r,o),a},tpn:function(e,t,r){return n.k(e.getSegments(),[t,r])||!1},oe:function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r},lms:function(e,t,r){var i,o=e||{},a=t[r]||{},c=(a["1p"]||{}).const||0,s=n.oe(a);for(var u in s){var f=n.oe(s[u][1]);for(var d in f)!0===(o[s[u][0]]||{})[f[d][0]]&&(c+=f[d][1])}return i=c,1/(1+Math.pow(Math.E,-i))},fm:function(e,t){return{p:t.p,r:function(n,r){return e(t.r(n,r))},a:t.a}},acq:function(e,t){return{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(n,r){return e.r(n,r[0])&&t.r(n,r[1])},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}}}},ocq:function(e,t){return{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(n,r){return e.r(n,r[0])||t.r(n,r[1])},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}}}},cw:function(e,t,r){return void 0===r&&(r=n.i),{a:{m:function(e,t){return e+t},z:0},p:function(r,i){return n.k(i,["name"])===e&&t(i)?1:0},r:function(e,t){return r(t)}}},mxw:function(e,t,r,i){void 0===i&&(i=n.i);var o=Number.NEGATIVE_INFINITY;return{a:{m:function(e,t){return e>t?e:t},z:o},p:function(i,a){return n.k(a,["name"])===e&&t(a)?n.k(a,r):o},r:function(e,t){return i(t)}}},vgw:function(e,t,r,i){void 0===i&&(i=n.i);var o={v:0,k:0};return{a:{m:function(e,t){var n=e.k+t.k;return{v:n?e.v+t.k*(t.v-e.v)/n:0,k:n}},z:o},p:function(i,a){return n.k(a,["name"])===e&&t(a)?{v:n.k(a,r),k:1}:o},r:function(e,t){return i(t.v)}}},mnw:function(e,t,r,i){void 0===i&&(i=n.i);var o=Number.POSITIVE_INFINITY;return{a:{m:function(e,t){return e<t?e:t},z:o},p:function(i,a){return n.k(a,["name"])===e&&t(a)?n.k(a,r):o},r:function(e,t){return i(t)}}},sw:function(e,t,r,i){return void 0===i&&(i=n.i),{a:{m:function(e,t){return e+t},z:0},p:function(i,o){return n.k(o,["name"])===e&&t(o)?n.k(o,r):0},r:function(e,t){return i(t)}}},pw:function(e,t,r,i){return void 0===i&&(i=n.i),{a:{m:function(e,t){return e*t},z:1},p:function(i,o){return n.k(o,["name"])===e&&t(o)?n.k(o,r):1},r:function(e,t){return i(t)}}},ctw:function(e,t,r,i){return{a:i?{m:function(e,t){return e.concat(t).slice(-i)},z:[]}:{m:function(e,t){return e.concat(t)},z:[]},p:function(i,o){return n.k(o,["name"])===e&&t(o)?n.k(o,r):[]},r:function(e,t){return t}}},ctv:function(t,r,i,o){function a(e,t){var n=function(e){return{k:e.k,c:1+e.c}},r={arr:[],add:{k:t,c:1}};return t?function(e){return e.arr.concat(e.add)}(e.reduce(function(e,t){return e.add.k===t.k?{arr:e.arr,add:n(t)}:{arr:e.arr.concat(t),add:e.add}},r)):e}return{a:o?{m:function(e,t){return a(e,t).slice(-o)},z:[]}:{m:function(e,t){return a(e,t)},z:[]},p:function(e,o){return n.k(o,["name"])===t&&r(o)?n.k(o,i):null},r:function(t,n){return n.reduce(function(t,n){var r;return e({},t,((r={})[n.k]=n.c,r))},{})}}},ctu:function(e,t,r,i){return{a:i?{m:function(e,t){return e.filter(function(e){return!t.includes(e)}).concat(t).slice(-i)},z:[]}:{m:function(e,t){return e.filter(function(e){return!t.includes(e)}).concat(t)},z:[]},p:function(i,o){return n.k(o,["name"])===e&&t(o)?n.k(o,r):[]},r:function(e,t){return t}}},itp:function(e,t,r,i){return{a:{m:function(e,t){return t},z:!1},p:function(r,i){return n.tpn(r,e,t)},r:function(o,a){return n.tp(o,e,t,r,i)}}},isp:function(e,t,r,i){return{a:{m:function(e,t){return t},z:!1},p:function(r,i){return n.tpn(r,e,t)},r:function(o,a){return n.tp(o,e,t,r,i)}}},ifp:function(e){return{a:{m:function(e,t){return t},z:!1},p:function(t,r){return n.tp(t,"1p",e,!1)},r:function(e,t){return t}}},lm:function(e,t){return{a:{m:function(e,t){return t},z:[]},p:function(t,r){return[n.lms(t.getSegments(),t.getLookalikeModels(),e)]},r:function(e,n){return!!n[0]&&t(n[0])}}},sq:function(e){return{a:{m:function(t,n){return[n[0],e.a.m(null!=t[0]&&t[0][0]===n[0][0]?t[1]:e.a.z,n[1])]},z:[[],e.a.z]},p:function(t,r){return[[t.getCurrentSession()],n.k(r,["session_id"])===t.getCurrentSession()?e.p(t,r):e.a.z]},r:function(t,n){return e.r(t,n[0]!=[]&&n[0][0]===t.getCurrentSession()?n[1]:e.a.z)}}},vq:function(e){return{a:{m:function(t,n){return[n[0],e.a.m(null!=t[0]&&t[0][0]===n[0][0]?t[1]:e.a.z,n[1])]},z:[[],e.a.z]},p:function(t,r){return[[t.getCurrentView()],n.k(r,["view_id"])===t.getCurrentView()?e.p(t,r):e.a.z]},r:function(t,n){return e.r(t,n[0]!=[]&&n[0][0]===t.getCurrentView()?n[1]:e.a.z)}}},ltn:function(e,t,r){return{a:{m:function(e,t){return e.concat(t).slice(-r)},z:[]},p:function(r,i){return n.k(i,["name"])===t?[e.p(r,i)]:[]},r:function(t,n){return e.r(t,n.reduce(function(t,n){return e.a.m(t,n)},e.a.z))}}},ftn:function(e,t,r){return{a:{m:function(e,t){return e.concat(t.slice(0,r-e.length))},z:[]},p:function(r,i){return n.k(i,["name"])===t?[e.p(r,i)]:[]},r:function(t,n){return e.r(t,n.reduce(function(t,n){return e.a.m(t,n)},e.a.z))}}},gb:function(e,t,r){return{a:{m:function(r,i){return Object.keys(r).concat(Object.keys(i)).filter(function(e,t,n){return n.indexOf(e)===t}).sort(function(e,t){return Math.max(n.k(r,[t,1]),n.k(i,[t,1]))-Math.max(n.k(r,[e,1]),n.k(i,[e,1]))}).slice(0,t).reduce(function(t,o){var a=e.a.m(n.k(r,[o,0])||e.a.z,n.k(i,[o,0])||e.a.z);return t[o]=[a,Math.max(n.k(r,[o,1]),n.k(i,[o,1]))],t},{})},z:{}},p:function(t,i){var o,a,c=n.k(i,n.pre("properties",r)),s=e.p(t,i);return null==c||null==(a=s)||"object"==typeof a&&0===Object.keys(a).length||a===e.a.z?{}:((o={})[c]=[s,n.kf(i,["time"],n.ti)],o)},r:function(t,n){var r={};return Object.keys(n).forEach(function(i){return r[i]=e.r(t,n[i][0])}),r}}},tw:function(e,r,i){var o=i||100,a=Math.ceil(r/o),c=function(e,t,n){var i;return[Math.floor((e-r)/a),(i={},i[Math.floor(t/a)]=n,i)]},s=function(t,n){var r=Math.max(t[0],n[0]),i=Object.keys(t[1]).filter(function(e){return e>=r}).concat(Object.keys(n[1]).filter(function(e){return e>=r})).filter(function(e,t,n){return n.indexOf(e)===t}).reduce(function(r,i){var o=e.a.m(t[1][i]||e.a.z,n[1][i]||e.a.z);return o!==e.a.z&&(r[i]=o),r},{});return[r,i]},u=[Number.NEGATIVE_INFINITY,{}],f=function(e){var n=function(n){return n.map(function(n){var r=t(n,3),i=r[0],o=(r[1],r[2]);return c(e.t,o,i)}).reduce(s,u)};return s(n(e.in),n(e.out))};return{a:{m:function(e,t){var n=e.w?f(e):e;return s(n,t)},z:u},p:function(t,r){return c(t.getCurrentTime(),n.kf(r,["time"],n.ti),e.p(t,r))},r:function(t,n){var r=(n.w?f(n):n)[1];return e.r(t,Object.keys(r).reduce(function(t,n){return e.a.m(t,r[n])},e.a.z))}}},q:function(e){return{initial:function(t){return{result:e.a.z}},update:function(t,n,r){return{result:e.a.m(n.result,e.p(t,r))}},result:function(t,n){return{result:e.r(t,n.result)}},m:e.a.m,z:e.a.z,p:e.p,r:e.r}}},r={22246:n.q(n.cw("Pageview",n.o([n.pc(["article","wordlift"],"Artificial intelligence"),n.pc(["article","categories"],"Artificial Intelligence"),n.pc(["article","keywords"],"Artificial intelligence")]),n.ge(1))),22247:n.q(n.cw("Pageview",n.o([n.os(n.c,["article","categories"],["Hard Fork","Hard Fork Basics"])]),n.ge(1))),22248:n.q(n.cw("Pageview",n.t,n.ge(1))),22625:n.q(n.acq(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","categories"],["Hard Fork","Hard Fork Basics"])]),n.ge(1)),2592e6),n.sq(n.cw("Pageview",n.a([n.nt(n.pc(["article","categories"],"Hard Fork")),n.nt(n.pc(["article","categories"],"Hard Fork Basics"))]),n.ge(1))))),22664:n.q(n.cw("Pageview",n.pe(["geo_info","country"],"United States"),n.ge(1))),22667:n.q(n.tw(n.cw("Pageview",n.pe(["geo_info","country"],"Netherlands"),n.ge(1)),2592e6)),22668:n.q(n.cw("Pageview",n.pe(["geo_info","country"],"Netherlands"),n.ge(1))),22669:n.q(n.tw(n.cw("Pageview",n.pe(["geo_info","country"],"United Kingdom"),n.ge(1)),2592e6)),22670:n.q(n.tw(n.cw("Pageview",n.pc(["article","categories"],"Plugged"),n.ge(1)),2592e6)),22672:n.q(n.tw(n.cw("Pageview",n.pc(["article","categories"],"Apps"),n.ge(1)),2592e6)),22673:n.q(n.tw(n.cw("Pageview",n.pc(["article","categories"],"Hard Fork"),n.ge(1)),2592e6)),22674:n.q(n.tw(n.cw("Pageview",n.pc(["article","categories"],"Science"),n.ge(1)),2592e6)),22675:n.q(n.tw(n.cw("Pageview",n.pc(["article","categories"],"Gaming"),n.ge(1)),2592e6)),22676:n.q(n.tw(n.cw("Pageview",n.pc(["article","categories"],"Security"),n.ge(1)),2592e6)),22677:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","categories"],["Artificial Intelligence","Neural"])]),n.ge(1)),2592e6)),22678:n.q(n.tw(n.cw("Pageview",n.pe(["geo_info","continent"],"Europe"),n.ge(1)),2592e6)),22684:n.q(n.sq(n.cw("Pageview",n.o([n.os(n.c,["article","categories"],["Hard Fork","Hard Fork Basics"])]),n.ge(1)))),22686:n.q(n.tw(n.cw("SegmentExit",n.pe(["segment_number"],22684),n.ge(1)),5184e6)),22693:n.q(n.itp("eyeota","64",!1,"22693")),22728:n.q(n.cw("Pageview",n.t,n.ge(3))),22741:n.q(n.cw("Pageview",n.o([n.os(n.c,["article","wordlift"],["Electric vehicle","Vehicle","Truck","Autonomous car","Automotive industry","Autonomous driving","Bicycle","Driving","Tesla Motors","Traffic","Public transport","Smart city","Walking","Infrastructure","Accessibility"]),n.pc(["article","categories"],"Cars")]),n.ge(1))),22782:n.q(n.acq(n.cw("Pageview",n.t,n.ge(1)),n.itp("eyeota","1473",!1,"22782"))),22783:n.q(n.itp("eyeota","241",!1,"22783")),22784:n.q(n.itp("eyeota","238",!1,"22784")),22785:n.q(n.itp("eyeota","239",!1,"22785")),22786:n.q(n.itp("eyeota","240",!1,"22786")),22787:n.q(n.itp("eyeota","236",!1,"22787")),22788:n.q(n.itp("eyeota","237",!1,"22788")),22823:n.q(n.cw("Pageview",n.ps(["client","user_agent"],"iPhone"),n.ge(1))),22825:n.q(n.cw("Pageview",n.ps(["client","referrer"],"flipboard"),n.ge(1))),22828:n.q(n.cw("Pageview",n.o([n.os(n.s,["isp_info","organization"],["University","College","School"])]),n.ge(1))),22829:n.q(n.cw("Pageview",n.pe(["client","type"],"amp"),n.ge(1))),22830:n.q(n.cw("Pageview",n.pe(["client","type"],"web"),n.ge(1))),22831:n.q(n.cw("Pageview",n.pe(["user","subscriber"],!0),n.ge(1))),22865:n.q(n.ocq(n.itp("eyeota","13226",!1,"22865"),n.itp("eyeota","35714",!1,"22865"))),22899:n.q(n.acq(n.ocq(n.itp("eyeota","13226",!1,"22899"),n.itp("eyeota","35714",!1,"22899")),n.sq(n.cw("Pageview",n.pc(["article","categories"],"Hard Fork"),n.e(0))))),23499:n.q(n.sq(n.cw("Pageview",n.pn(["client","url"],"thenextweb.com"),n.ge(1)))),24057:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","wordlift"],["Electric vehicle","Vehicle","Truck","Autonomous car","Automotive industry","Autonomous driving","Bicycle","Driving","Tesla Motors","Traffic","Public transport","Smart city","Walking","Infrastructure","Accessibility"]),n.pc(["article","categories"],"Cars")]),n.ge(2)),2592e6)),24134:n.q(n.acq(n.tw(n.cw("Pageview",n.pe(["geo_info","continent"],"Europe"),n.ge(1)),2592e6),n.ocq(n.ocq(n.itp("eyeota","35224",!1,"24134"),n.itp("eyeota","35223",!1,"24134")),n.itp("eyeota","35110",!1,"24134")))),24870:n.q(n.itp("eyeota","35231",!1,"24870")),25633:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","keywords"],["Venture capital","Funding","Startup company","Entrepreneurship","OKR","Learning","Training","Emerging markets"])]),n.ge(1)),2592e6)),26576:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.itp("eyeota","35119",!1,"26576"),n.itp("eyeota","35104",!1,"26576")),n.itp("eyeota","34890",!1,"26576")))),26647:n.q(n.ocq(n.ocq(n.tw(n.cw("Pageview",n.pc(["article","sections"],"Money"),n.ge(1)),2592e6),n.cw("Pageview",n.o([n.os(n.c,["article","keywords"],["market capitalization","Business","Diversification","Investor","Portfolio (finance)","Initial public offering"])]),n.ge(1))),n.cw("Pageview",n.pc(["article","categories"],"Money"),n.ge(1)))),27721:n.q(n.ocq(n.itp("eyeota","287",!1,"27721"),n.itp("eyeota","35490",!1,"27721"))),27722:n.q(n.itp("eyeota","35489",!1,"27722")),27723:n.q(n.ocq(n.itp("eyeota","35491",!1,"27723"),n.itp("eyeota","288",!1,"27723"))),27724:n.q(n.ocq(n.itp("eyeota","332",!1,"27724"),n.itp("eyeota","35572",!1,"27724"))),27725:n.q(n.ocq(n.itp("eyeota","331",!1,"27725"),n.itp("eyeota","35571",!1,"27725"))),27726:n.q(n.ocq(n.itp("eyeota","35568",!1,"27726"),n.itp("eyeota","328",!1,"27726"))),27727:n.q(n.ocq(n.itp("eyeota","35573",!1,"27727"),n.itp("eyeota","333",!1,"27727"))),27729:n.q(n.ocq(n.itp("eyeota","35484",!1,"27729"),n.itp("eyeota","327",!1,"27729"))),27730:n.q(n.itp("eyeota","326",!1,"27730")),27737:n.q(n.ocq(n.itp("eyeota","244",!1,"27737"),n.itp("eyeota","35469",!1,"27737"))),27738:n.q(n.itp("eyeota","35470",!1,"27738")),27741:n.q(n.ocq(n.itp("eyeota","35468",!1,"27741"),n.itp("eyeota","35471",!1,"27741"))),28700:n.q(n.acq(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.itp("eyeota","35119",!1,"28700"),n.itp("eyeota","35104",!1,"28700")),n.itp("eyeota","34890",!1,"28700"))),n.cw("Pageview",n.o([n.os(n.e,["geo_info","continent"],["Europe","North America"])]),n.ge(1)))),30273:n.q(n.acq(n.cw("Pageview",n.t,n.ge(1)),n.itp("eyeota_bombora","13944",!1,"30273"))),31006:n.q(n.tw(n.cw("Pageview",n.pc(["article","wordlift"],"Coronavirus"),n.ge(1)),2592e6)),31015:n.q(n.tw(n.cw("PageviewEngagement",n.pge(["completion"],.5),n.ge(1)),2592e6)),31016:n.q(n.tw(n.cw("PageviewEngagement",n.pge(["completion"],.75),n.ge(1)),2592e6)),31017:n.q(n.tw(n.cw("PageviewEngagement",n.pge(["completion"],1),n.ge(1)),2592e6)),31019:n.q(n.tw(n.cw("Pageview",n.pc(["article","categories"],"Basics"),n.ge(1)),2592e6)),31020:n.q(n.tw(n.cw("Pageview",n.pc(["article","categories"],"Growth Quarters"),n.ge(1)),2592e6)),31186:n.q(n.acq(n.tw(n.cw("Pageview",n.pe(["geo_info","country"],"United States"),n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","35119",!1,"31186"),n.itp("eyeota_bombora","14312",!1,"31186")),n.itp("eyeota","35276",!1,"31186")),n.itp("eyeota_bombora","14287",!1,"31186")),n.itp("eyeota","35468",!1,"31186")),n.itp("eyeota","248",!1,"31186")))),31188:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","35119",!1,"31188"),n.itp("eyeota_bombora","14312",!1,"31188")),n.itp("eyeota","35276",!1,"31188")),n.itp("eyeota_bombora","14287",!1,"31188")),n.itp("eyeota","35468",!1,"31188")),n.itp("eyeota","248",!1,"31188")))),31198:n.q(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6)),31497:n.q(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota_bombora","14270",!1,"31497"),n.itp("eyeota_bombora","13946",!1,"31497")),n.itp("eyeota_bombora","13947",!1,"31497")),n.itp("eyeota_bombora","13948",!1,"31497")),n.itp("eyeota_bombora","13949",!1,"31497")),n.itp("eyeota_bombora","13953",!1,"31497")),n.itp("eyeota_bombora","14019",!1,"31497")),n.itp("eyeota","25",!1,"31497")),n.itp("eyeota","271",!1,"31497")),n.itp("eyeota","6597",!1,"31497")),n.itp("eyeota","6545",!1,"31497")),n.itp("eyeota","11",!1,"31497")),n.itp("eyeota","251",!1,"31497"))),31514:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota_bombora","13830",!1,"31514"),n.itp("eyeota_bombora","13831",!1,"31514")),n.itp("eyeota_bombora","13922",!1,"31514")),n.itp("eyeota_bombora","14052",!1,"31514")),n.itp("eyeota_bombora","14055",!1,"31514")),n.itp("eyeota_bombora","14056",!1,"31514")),n.itp("eyeota","1465",!1,"31514")))),31545:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","12935",!1,"31545"),n.itp("eyeota","12878",!1,"31545")),n.itp("eyeota","6619",!1,"31545")),n.itp("eyeota_bombora","14178",!1,"31545")),n.itp("eyeota_bombora","13868",!1,"31545")),n.itp("eyeota_bombora","13944",!1,"31545")),n.itp("eyeota","35119",!1,"31545")))),31550:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.itp("eyeota_bombora","14312",!1,"31550"),n.itp("eyeota","35276",!1,"31550")),n.itp("eyeota","56",!1,"31550")))),31551:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.itp("eyeota","35761",!1,"31551"),n.itp("eyeota","1656",!1,"31551")),n.itp("eyeota","13",!1,"31551")),n.itp("eyeota","255",!1,"31551")))),31552:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","35328",!1,"31552"),n.itp("eyeota","13156",!1,"31552")),n.itp("eyeota","1496",!1,"31552")),n.itp("eyeota","1617",!1,"31552")),n.itp("eyeota","1519",!1,"31552")),n.itp("eyeota","1616",!1,"31552")),n.itp("eyeota","6723",!1,"31552")))),31564:n.q(n.tw(n.cw("PageviewEngagement",n.pge(["completion"],.25),n.ge(1)),2592e6)),31565:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.t,n.ge(1)),2592e6),n.tw(n.cw("PageviewEngagement",n.t,n.le(2)),2592e6))),31568:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.t,n.ge(2)),2592e6),n.tw(n.cw("PageviewEngagement",n.t,n.le(6)),2592e6))),31571:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.t,n.ge(6)),2592e6),n.tw(n.cw("PageviewEngagement",n.t,n.le(12)),2592e6))),31573:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.t,n.ge(12)),2592e6),n.tw(n.cw("PageviewEngagement",n.t,n.le(36)),2592e6))),31574:n.q(n.tw(n.cw("PageviewEngagement",n.pge(["total_completion"],.5),n.ge(1)),2592e6)),31575:n.q(n.tw(n.cw("PageviewEngagement",n.pge(["total_completion"],.75),n.ge(1)),2592e6)),31576:n.q(n.tw(n.cw("PageviewEngagement",n.pge(["total_completion"],1),n.ge(1)),2592e6)),31589:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(3)),2592e6),n.tw(n.cw("PageviewEngagement",n.t,n.ge(6)),2592e6))),31592:n.q(n.tw(n.cw("PageviewEngagement",n.t,n.ge(36)),2592e6)),31593:n.q(n.tw(n.cw("Pageview",n.t,n.e(1)),2592e6)),31594:n.q(n.tw(n.cw("Pageview",n.t,n.e(2)),2592e6)),31595:n.q(n.tw(n.cw("Pageview",n.t,n.e(3)),2592e6)),31596:n.q(n.tw(n.cw("Pageview",n.t,n.ge(4)),2592e6)),31682:n.q(n.acq(n.acq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota_bombora","14272",!1,"31682"),n.itp("eyeota","6553",!1,"31682")),n.itp("eyeota","6554",!1,"31682")),n.itp("eyeota","6555",!1,"31682")),n.itp("eyeota","6561",!1,"31682")),n.itp("eyeota","6597",!1,"31682")),n.itp("eyeota","6540",!1,"31682")),n.itp("eyeota","25",!1,"31682")),n.cw("Pageview",n.pe(["geo_info","continent"],"Europe"),n.ge(1))),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota_bombora","13892",!1,"31682"),n.itp("eyeota_bombora","13894",!1,"31682")),n.itp("eyeota","6526",!1,"31682")),n.itp("eyeota","35220",!1,"31682")),n.itp("eyeota","6528",!1,"31682")),n.itp("eyeota","7",!1,"31682")))),31779:n.q(n.tw(n.cw("Pageview",n.pe(["geo_info","country"],"United States"),n.ge(1)),2592e6)),31890:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["innovation","technology","tech","tech trend","innovative","innovative hub","business innovation","technologies"])]),n.ge(1)),2592e6)),31891:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["startup","scale","scalability"])]),n.ge(1)),2592e6),n.tw(n.cw("Pageview",n.pc(["article","categories"],"Growth Quarters"),n.ge(1)),2592e6)))),31892:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["ecommerce","retail","amazon","customer"])]),n.ge(1)),2592e6)),31893:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["sustainable","sustainability","smart cities","green"])]),n.ge(1)),2592e6)),31894:n.q(n.ocq(n.ocq(n.ocq(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["brand","branding","marketing","marketer","advertising","marketeer","digital marketing","google analytic","marketing campaign","A/B testing"])]),n.ge(1)),n.cw("Pageview",n.o([n.os(n.c,["article","wordlift"],["Marketing","brand","branding","digital marketing","advertising","marketer","marketeer","google analytic","marketing campaign","A/B testing"])]),n.ge(1))),n.cw("Pageview",n.pc(["article","sections"],"Marketing"),n.ge(1))),n.cw("Pageview",n.o([n.os(n.c,["article","categories"],["Marketing and SEO","Market Intelligence","Business","Media","Social Media"])]),n.ge(1)))),31895:n.q(n.ocq(n.ocq(n.ocq(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["artificial intelligence","AI","big data","machine learning","internet of things","data privacy"])]),n.ge(1)),2592e6),n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","keywords"],["Artificial intelligence","Artificial intelligence (video games)","Data","Internet","Internet privacy","Privacy"])]),n.ge(1)),2592e6)),n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","wordlift"],["Artificial intelligence","Artificial intelligence (video games)","Data","Internet privacy","Privacy"])]),n.ge(1)),2592e6)),n.tw(n.cw("Pageview",n.pc(["article","categories"],"Neural"),n.ge(1)),2592e6))),31897:n.q(n.ocq(n.ocq(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["mobility","vehicle","urban","electric","transport","infrastructure"])]),n.ge(1)),2592e6),n.tw(n.cw("Pageview",n.pc(["article","keywords"],"Future"),n.ge(1)),2592e6)),n.tw(n.cw("Pageview",n.pc(["article","wordlift"],"Future"),n.ge(1)),2592e6))),31899:n.q(n.ocq(n.ocq(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["art","digital art","digital design","design","designer","creative","creativity"])]),n.ge(1)),2592e6),n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","keywords"],["Adobe Photoshop Lightroom","User interface"])]),n.ge(1)),2592e6)),n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","wordlift"],["User interface","Adobe Photoshop Lightroom"])]),n.ge(1)),2592e6))),31901:n.q(n.ocq(n.ocq(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["workplace","future of work","work life","work-life"])]),n.ge(1)),2592e6),n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","keywords"],["Office","Company"])]),n.ge(1)),2592e6)),n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","wordlift"],["Office","Company"])]),n.ge(1)),2592e6))),31902:n.q(n.ocq(n.ocq(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["design thinking","product design","digital product","personalization","UX","UI","design","designer"])]),n.ge(1)),2592e6),n.tw(n.cw("Pageview",n.pc(["article","keywords"],"User interface"),n.ge(1)),2592e6)),n.tw(n.cw("Pageview",n.pc(["article","wordlift"],"User interface"),n.ge(1)),2592e6))),31904:n.q(n.ocq(n.ocq(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["corporate","corporate innovation","startup","startup ecosystem","governance","corporate governance"])]),n.ge(1)),2592e6),n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","keywords"],["Business","Company"])]),n.ge(1)),2592e6)),n.tw(n.cw("Pageview",n.pc(["article","wordlift"],"Company"),n.ge(1)),2592e6))),31905:n.q(n.ocq(n.ocq(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","title"],["ecosystem","data-driven"])]),n.ge(1)),2592e6),n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","keywords"],["Government","Data"])]),n.ge(1)),2592e6)),n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","wordlift"],["Government","Data"])]),n.ge(1)),2592e6))),31941:n.q(n.acq(n.tw(n.cw("Pageview",n.pe(["geo_info","country"],"Netherlands"),n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.itp("eyeota","1657",!1,"31941"),n.itp("eyeota","35475",!1,"31941")),n.itp("eyeota","6694",!1,"31941")),n.itp("eyeota","35473",!1,"31941")))),31942:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.itp("eyeota","1657",!1,"31942"),n.itp("eyeota","35475",!1,"31942")),n.itp("eyeota","6694",!1,"31942")),n.itp("eyeota","35473",!1,"31942")))),32013:n.q(n.tw(n.cw("Pageview",n.pe(["article","title"],"5 easy tips on how to brainstorm with your newly remote team"),n.ge(1)),2592e6)),32291:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.itp("eyeota_bombora","13949",!1,"32291"),n.itp("eyeota","35032",!1,"32291")),n.itp("eyeota","6574",!1,"32291")))),32775:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","6619",!1,"32775"),n.itp("eyeota","6643",!1,"32775")),n.itp("eyeota","6633",!1,"32775")),n.itp("eyeota","6622",!1,"32775")),n.itp("eyeota","6597",!1,"32775")),n.itp("eyeota","6591",!1,"32775")),n.itp("eyeota","6575",!1,"32775")),n.itp("eyeota_bombora","13940",!1,"32775")),n.itp("eyeota_bombora","13942",!1,"32775")),n.itp("eyeota_bombora","13902",!1,"32775")))),32776:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","12912",!1,"32776"),n.itp("eyeota","12926",!1,"32776")),n.itp("eyeota","12935",!1,"32776")),n.itp("eyeota","12942",!1,"32776")),n.itp("eyeota","36",!1,"32776")),n.itp("eyeota","1716",!1,"32776")),n.itp("eyeota","12932",!1,"32776")),n.itp("eyeota","50",!1,"32776")),n.itp("eyeota","1709",!1,"32776")),n.itp("eyeota_bombora","13867",!1,"32776")))),32863:n.q(n.acq(n.acq(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["United States","Canada"])]),n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","6525",!1,"32863"),n.itp("eyeota","6527",!1,"32863")),n.itp("eyeota_bombora","13893",!1,"32863")),n.itp("eyeota_bombora","13891",!1,"32863")),n.itp("eyeota_bombora","13897",!1,"32863")),n.itp("eyeota_bombora","13898",!1,"32863"))),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","35119",!1,"32863"),n.itp("eyeota","6619",!1,"32863")),n.itp("eyeota_bombora","13935",!1,"32863")),n.itp("eyeota_bombora","13944",!1,"32863")),n.itp("eyeota_bombora","13902",!1,"32863")),n.itp("eyeota","34896",!1,"32863")),n.itp("eyeota","34899",!1,"32863")),n.itp("eyeota_bombora","13935",!1,"32863")),n.itp("eyeota_bombora","13936",!1,"32863")),n.itp("eyeota_bombora","13937",!1,"32863")),n.itp("eyeota_bombora","13942",!1,"32863")),n.itp("eyeota_bombora","13943",!1,"32863")),n.itp("eyeota_bombora","13944",!1,"32863")),n.itp("eyeota","35112",!1,"32863")),n.itp("eyeota","35120",!1,"32863")),n.itp("eyeota","34891",!1,"32863")))),32867:n.q(n.acq(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","6525",!1,"32867"),n.itp("eyeota","6527",!1,"32867")),n.itp("eyeota_bombora","13893",!1,"32867")),n.itp("eyeota_bombora","13891",!1,"32867")),n.itp("eyeota_bombora","13897",!1,"32867")),n.itp("eyeota_bombora","13898",!1,"32867"))),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","35119",!1,"32867"),n.itp("eyeota","6619",!1,"32867")),n.itp("eyeota_bombora","13935",!1,"32867")),n.itp("eyeota_bombora","13944",!1,"32867")),n.itp("eyeota_bombora","13902",!1,"32867")),n.itp("eyeota","34896",!1,"32867")),n.itp("eyeota","34899",!1,"32867")),n.itp("eyeota_bombora","13935",!1,"32867")),n.itp("eyeota_bombora","13936",!1,"32867")),n.itp("eyeota_bombora","13937",!1,"32867")),n.itp("eyeota_bombora","13942",!1,"32867")),n.itp("eyeota_bombora","13943",!1,"32867")),n.itp("eyeota_bombora","13944",!1,"32867")),n.itp("eyeota","35112",!1,"32867")),n.itp("eyeota","35120",!1,"32867")),n.itp("eyeota","34891",!1,"32867")))),32991:n.q(n.acq(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.itp("eyeota","6525",!1,"32991"),n.itp("eyeota_bombora","13891",!1,"32991")),n.itp("eyeota_bombora","13897",!1,"32991")),n.itp("eyeota_bombora","13898",!1,"32991"))),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","279",!1,"32991"),n.itp("eyeota","6618",!1,"32991")),n.itp("eyeota_bombora","13872",!1,"32991")),n.itp("eyeota","35045",!1,"32991")),n.itp("eyeota","35083",!1,"32991")),n.itp("eyeota","34875",!1,"32991")),n.itp("eyeota_bombora","13908",!1,"32991")))),33002:n.q(n.acq(n.acq(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["China","India","Indonesia","Pakistan","Bangladesh","Japan","Philippines","Vietnam","Thailand","Myanmar (Burma)","South Korea","Malaysia","Nepal","Australia","Taiwan","Cambodia","Papua New Guinea","Sri Lanka","Laos","Singapore","New Zealand","Mongolia","Timor-Leste","Fiji","Bhutan","Solomon Islands","Maldives","Brunei","Vanuatu","New Caledonia","French Polynesia","Samoa","Guam","Kiribati","Federated States of Micronesia","Tonga","Marshall Islands","Northern Mariana Islands","American Samoa","Palau","Cook Islands","Tuvalu","Wallis and Futuna","Nauru","Niue","Tokelau"])]),n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.itp("eyeota","6525",!1,"33002"),n.itp("eyeota_bombora","13891",!1,"33002")),n.itp("eyeota_bombora","13897",!1,"33002")),n.itp("eyeota_bombora","13898",!1,"33002"))),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","279",!1,"33002"),n.itp("eyeota","6618",!1,"33002")),n.itp("eyeota_bombora","13872",!1,"33002")),n.itp("eyeota","35045",!1,"33002")),n.itp("eyeota","35083",!1,"33002")),n.itp("eyeota","34875",!1,"33002")),n.itp("eyeota_bombora","13908",!1,"33002")))),33006:n.q(n.acq(n.acq(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["Algeria","Bahrain","Egypt","Iraq","Israel","Jordan","Kuwait","Lebanon","Libya","Morocco","Oman","Qatar","Saudi Arabia","Palestine","Tunisia","United Arab Emirates","Yemen","United Kingdom","Romania","Russia","Spain","Latvia","Albania","Moldova","Italy","Israel","Lithuania","Andorra","Georgia","Kazakhstan","Portugal","Estonia","Norway","Armenia","Sweden","France","Switzerland","Montenegro","Belgium","Turkey","Iceland","Vatican City","Bosnia and Herzegovina","Serbia","Finland","Luxembourg","Greece","Czechia","Bulgaria","Slovakia","Cyprus","San Marino","Malta","Denmark","Poland","Azerbaijan","Belarus","Austria","Ireland","Germany","Monaco","Liechtenstein","Croatia","North Macedonia","Slovenia","Hungary","Ukraine","Netherlands"])]),n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.itp("eyeota","6525",!1,"33006"),n.itp("eyeota_bombora","13891",!1,"33006")),n.itp("eyeota_bombora","13897",!1,"33006")),n.itp("eyeota_bombora","13898",!1,"33006"))),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","279",!1,"33006"),n.itp("eyeota","6618",!1,"33006")),n.itp("eyeota_bombora","13872",!1,"33006")),n.itp("eyeota","35045",!1,"33006")),n.itp("eyeota","35083",!1,"33006")),n.itp("eyeota","34875",!1,"33006")),n.itp("eyeota_bombora","13908",!1,"33006")))),33055:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["Netherlands","Belgium","Luxembourg"])]),n.ge(1)),2592e6)),33059:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","6642",!1,"33059"),n.itp("eyeota","276",!1,"33059")),n.itp("eyeota_bombora","14110",!1,"33059")),n.itp("eyeota_bombora","14112",!1,"33059")),n.itp("eyeota_bombora","14113",!1,"33059")),n.itp("eyeota_bombora","14114",!1,"33059")),n.itp("eyeota_bombora","14115",!1,"33059")),n.itp("eyeota_bombora","14118",!1,"33059")),n.itp("eyeota_bombora","14119",!1,"33059")),n.itp("eyeota_bombora","14121",!1,"33059")),n.itp("eyeota_bombora","14122",!1,"33059")))),33076:n.q(n.acq(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["Netherlands","Belgium","Luxembourg"])]),n.ge(1)),2592e6),n.ocq(n.ocq(n.itp("eyeota","6642",!1,"33076"),n.itp("eyeota","276",!1,"33076")),n.itp("eyeota_bombora","14110",!1,"33076")))),33079:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.itp("eyeota","6642",!1,"33079"),n.itp("eyeota","276",!1,"33079")))),33082:n.q(n.acq(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["Netherlands","Belgium","Luxembourg"])]),n.ge(1)),2592e6),n.ocq(n.itp("eyeota","6642",!1,"33082"),n.itp("eyeota","276",!1,"33082")))),33324:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["Denmark","Norway","Sweden","Finland","Iceland"])]),n.ge(1)),2592e6)),33593:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","35119",!1,"33593"),n.itp("eyeota","6619",!1,"33593")),n.itp("eyeota_bombora","13944",!1,"33593")),n.itp("eyeota_bombora","13937",!1,"33593")),n.itp("eyeota_bombora","13942",!1,"33593")))),33595:n.q(n.acq(n.tw(n.cw("Pageview",n.pe(["geo_info","continent"],"Europe"),n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","35119",!1,"33595"),n.itp("eyeota","6619",!1,"33595")),n.itp("eyeota_bombora","13944",!1,"33595")),n.itp("eyeota_bombora","13937",!1,"33595")),n.itp("eyeota_bombora","13942",!1,"33595")))),33596:n.q(n.acq(n.tw(n.cw("Pageview",n.pe(["geo_info","country"],"United States"),n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","35119",!1,"33596"),n.itp("eyeota","6619",!1,"33596")),n.itp("eyeota_bombora","13944",!1,"33596")),n.itp("eyeota_bombora","13937",!1,"33596")),n.itp("eyeota_bombora","13942",!1,"33596")))),33632:n.q(n.acq(n.acq(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["Singapore","New Zealand","Australia"])]),n.ge(1)),2592e6),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","6525",!1,"33632"),n.itp("eyeota_bombora","13891",!1,"33632")),n.itp("eyeota_bombora","13897",!1,"33632")),n.itp("eyeota_bombora","13898",!1,"33632")),n.itp("eyeota_bombora","13893",!1,"33632")),n.itp("eyeota_bombora","13892",!1,"33632")),n.itp("eyeota","6526",!1,"33632")),n.itp("eyeota","6527",!1,"33632"))),n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","279",!1,"33632"),n.itp("eyeota","6618",!1,"33632")),n.itp("eyeota_bombora","13872",!1,"33632")),n.itp("eyeota","35045",!1,"33632")),n.itp("eyeota","35083",!1,"33632")),n.itp("eyeota","34875",!1,"33632")),n.itp("eyeota_bombora","13908",!1,"33632")),n.itp("eyeota_bombora","13935",!1,"33632")),n.itp("eyeota","6591",!1,"33632")))),33636:n.q(n.acq(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["Singapore","New Zealand","Australia"])]),n.ge(1)),10368e5),n.ocq(n.ocq(n.ocq(n.itp("eyeota","6618",!1,"33636"),n.itp("eyeota","35045",!1,"33636")),n.itp("eyeota","35083",!1,"33636")),n.itp("eyeota","6591",!1,"33636")))),33903:n.q(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","53",!1,"33903"),n.itp("eyeota_bombora","13854",!1,"33903")),n.itp("eyeota_bombora","13855",!1,"33903")),n.itp("eyeota_bombora","13866",!1,"33903")),n.itp("eyeota_bombora","13858",!1,"33903")),n.itp("eyeota_bombora","13859",!1,"33903")),n.itp("eyeota_bombora","13860",!1,"33903")),n.itp("eyeota_bombora","13861",!1,"33903")),n.itp("eyeota_bombora","13862",!1,"33903")),n.itp("eyeota_bombora","13865",!1,"33903")),n.itp("eyeota_bombora","13866",!1,"33903")),n.itp("eyeota","12942",!1,"33903")),n.itp("eyeota","35605",!1,"33903"))),33951:n.q(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.ocq(n.itp("eyeota","6558",!1,"33951"),n.itp("eyeota","34897",!1,"33951")),n.itp("eyeota_bombora","14273",!1,"33951")),n.itp("eyeota","6553",!1,"33951")),n.itp("eyeota","6555",!1,"33951")),n.itp("eyeota","6559",!1,"33951")),n.itp("eyeota","6540",!1,"33951")),n.itp("eyeota","6531",!1,"33951")),n.itp("eyeota_bombora","14273",!1,"33951")),n.itp("eyeota_bombora","14274",!1,"33951")),n.itp("eyeota_bombora","13903",!1,"33951")),n.itp("eyeota_bombora","13904",!1,"33951")),n.itp("eyeota_bombora","13902",!1,"33951")),n.itp("eyeota_bombora","13899",!1,"33951")),n.itp("eyeota_bombora","14274",!1,"33951")),n.itp("eyeota","260",!1,"33951")),n.itp("eyeota","273",!1,"33951")),n.itp("eyeota","6562",!1,"33951")),n.itp("eyeota","34899",!1,"33951")),n.itp("eyeota","34892",!1,"33951"))),34051:n.q(n.cw("LinkClick",n.o([n.os(n.e,["dest_url"],["https://thenextweb.com/conference/tracks/rebrand","https://thenextweb.com/conference/tracks","https://thenextweb.com/conference"])]),n.ge(1))),34076:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.itp("eyeota","264",!1,"34076"),n.itp("eyeota","35189",!1,"34076")))),34077:n.q(n.acq(n.tw(n.cw("Pageview",n.t,n.ge(1)),2592e6),n.ocq(n.itp("eyeota","34976",!1,"34077"),n.itp("eyeota","34975",!1,"34077")))),34137:n.q(n.tw(n.cw("Pageview",n.pe(["geo_info","continent"],"Asia"),n.ge(1)),2592e6)),34138:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.e,["geo_info","country"],["Bolivia","Paraguay","Venezuela","Brazil","Uruguay","Argentina","Chile","Colombia","Mexico","Peru","Guatemala","Ecuador","Haiti","Dominican Republic","Honduras","El Salvador","Nicaragua","Costa Rica","Panama","Puerto Rico","Guadeloupe","Martinique","French Guiana"])]),n.ge(1)),2592e6))};return void 0!==r?r:{}}(),n=null,r=!1,i=[],o={},a={},c=function(t){switch(t.type){case"init":return e.init(t.msgId,t.args[0],t.args[1],t.args[2],t.args[3]);case"processEvents":return e.processEvents(t.msgId,t.args[0]);case"updateEnvironment":return e.updateEnvironment(t.msgId,t.args[0]);default:throw Error("Unexpected message "+t)}},s=function(t){e.postMessage({type:"complete",args:t})},u=function(t){0!==Object.keys(t).length&&e.postMessage({type:"stateChange",args:t})},f=function(t){0!==t.length&&e.postMessage({type:"errors",args:t})},d=function(e,a){var s={},d=[];e.forEach(function(e){var r=t[e],i=o[e];a.forEach(function(t){try{i.state=r.update(n,i.state,t)}catch(n){d.push({error:n.toString(),identifier:e,event_id:t.id})}}),i.result=r.result(n,i.state),s[e]=o[e]}),u(s),f(d),r=!0,i.forEach(c),i=[]};this.init=function(e,r,i,c,u){var f=c.lookalikeModels||{},l=function(e,t,n){var r=o[n].activations;e in r?-1!==r[e].indexOf(t)||r[e].push(t):r[e]=[t]};o=i,a=r,n={getCurrentTime:function(){return new Date},getCurrentSession:function(){return c.sessionId},getCurrentView:function(){return c.viewId},getSegments:function(){return{"1p":c.segments["1p"]}},getLookalikeModels:function(){return f},setThirdPartyActivation:function(e,t){},setSegmentActivation:function(e,t){}};var p=[];Object.keys(a).forEach(function(e){var r=a[e];if(!(e in i)||i[e].checksum!==r[0]){p.push(parseInt(e));var c=t[e],s=c.initial(n);o[e]={id:r[2],is_segment:r[1].indexOf("s")>-1,checksum:r[0],state:s,result:c.result(n,s),activations:{}}}}),d(p,u),n.getSegments=function(){return c.segments},n.setSegmentActivation=l,n.setThirdPartyActivation=l,d(p,[{}]),s(e)},this.updateEnvironment=function(t,o){if(!r)return i.push({msgId:t,type:"updateEnvironment",args:[o]});o.sessionId&&(n.getCurrentSession=function(){return o.sessionId}),o.segments&&(n.getSegments=function(){return o.segments}),o.lookalikeModels&&(n.getLookalikeModels=function(){return o.lookalikeModels}),e.processEvents(t,[{}])},this.processEvents=function(e,c){if(!r)return i.push({msgId:e,type:"processEvents",args:[c]});var d={},l=[];c.forEach(function(e){Object.keys(a).forEach(function(r){var i=t[r],a=o[r].state;try{var c=i.update(n,a,e);JSON.stringify(a)!==JSON.stringify(c)&&(o[r].state=c,o[r].result=i.result(n,c),d[r]=o[r])}catch(t){l.push({error:t.toString(),identifier:r,event_id:e.id})}})}),u(d),f(l),s(e)},onmessage=function(e){c(e.data)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"sequenceT",function(){return c}),n.d(t,"sequenceS",function(){return s});var r=n(6);function i(e,t,n){return function(r){var o=n.concat([r]);return 0===t?e.apply(null,o):i(e,t-1,o)}}var o={};function a(e){return o.hasOwnProperty(e)||(o[e]=i(r.tuple,e-1,[])),o[e]}function c(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,i=a(r),o=e.map(t[0],i),c=1;c<r;c++)o=e.ap(o,t[c]);return o}}function s(e){return function(t){for(var n=Object.keys(t),r=n.length,o=function(e){var t=e.length;return i(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i={},o=0;o<t;o++)i[e[o]]=n[o];return i},t-1,[])}(n),a=e.map(t[n[0]],o),c=1;c<r;c++)a=e.ap(a,t[n[c]]);return a}}},function(e,t,n){"use strict";n.r(t),n.d(t,"URI",function(){return i}),n.d(t,"fromEquals",function(){return o}),n.d(t,"eqStrict",function(){return a}),n.d(t,"strictEqual",function(){return c}),n.d(t,"eqString",function(){return s}),n.d(t,"eqNumber",function(){return u}),n.d(t,"eqBoolean",function(){return f}),n.d(t,"getStructEq",function(){return d}),n.d(t,"getTupleEq",function(){return l}),n.d(t,"eq",function(){return p}),n.d(t,"contramap",function(){return g}),n.d(t,"eqDate",function(){return h});var r=n(2),i="Eq";function o(e){return{equals:function(t,n){return t===n||e(t,n)}}}var a={equals:c};function c(e,t){return e===t}var s=a,u=a,f=a;function d(e){return o(function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0})}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(function(t,n){return e.every(function(e,r){return e.equals(t[r],n[r])})})}var p={URI:i,contramap:function(e,t){return o(function(n,r){return e.equals(t(n),t(r))})}},g=Object(r.pipeable)(p).contramap,h=p.contramap(u,function(e){return e.valueOf()})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=function(e){function t(t){var n=e.call(this)||this;return n.replacementMap={$ip_geo_info:t.geo,$ip_isp_info:t.isp,$ip_address:t.ip,$ip_address_hash:t.ip_hash},n}return i(t,e),t}(n(17).SingleEnricher),c=function(e){var t=this;this.resource="geoip",this.query=function(){return"geoip { "+[t.config.includeGeo?"geo { continent country city province postal_code }":"",t.config.includeISP?"isp { isp organization autonomous_system_number autonomous_system_organization }":"",t.config.includeIP?"ip":"",t.config.includeIPHash?"ip_hash":""].join(" ")+" }"},this.config=e};t.GraphQLGeoIP=c,t.register=function(e,t,n){var r=function(e){e.isp&&(t.isp=e.isp.isp,t.organization=e.isp.organization,t.autonomous_system_number=e.isp.autonomous_system_number,t.autonomous_system_organization=e.isp.autonomous_system_organization),e.geo&&(t.continent=e.geo.continent,t.country=e.geo.country,t.city=e.geo.city,t.province=e.geo.province,t.postal_code=e.geo.postal_code)},i=e.state.getPermutiveData("enricher:geoip");if(i&&i.session_id===e.sessionManager.getSessionId())r(i.data),e.enrichers.register(new a(i.data));else{var s={includeGeo:o.lens({geoip:{}},"geoip","include_geo")||!0,includeISP:o.lens({geoip:{}},"geoip","include_isp")||!0,includeIPHash:o.lens({geoip:{}},"geoip","include_ip_hash")||!0,includeIP:o.lens({geoip:{}},"geoip","include_ip")||!1};e.graphql.register(new c(s)).then(function(t){r(t),e.state.setPermutiveData("enricher:geoip",{session_id:e.sessionManager.getSessionId(),data:t}),e.enrichers.register(new a(t))}).catch(function(t){return e.network.error("Error while registering the geoip enricher: got "+t)})}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e,t){this._internals=e,this.network=t,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["0","-1"]}return t.prototype.getTag=function(){return"appnexus"},t.prototype.getId=function(){var t=this;return this.network.ajax({url:this.url,xhrFields:{withCredentials:!0},timeout:3e3}).then(function(n){return"uid"in n&&t.isValidAlias(n.uid)?e.resolve(n.uid):e.resolve(void 0)},function(n){return t.network.error("Failed to retrieve third-party identity for "+t.getTag(),t._internals.state.userId),e.resolve(void 0)})},t.prototype.getTtlInSeconds=function(){return 86400},t.prototype.usedForThirdPartyData=function(){return!0},t.prototype.isValidAlias=function(e){return-1===this.invalidAliases.indexOf(e)},t}();t.AppNexusIdentityProvider=n,t.register=function(e,t){var r=new n(e,t);e.identities.registerProvider(r)}}).call(this,n(3).Promise)}]);