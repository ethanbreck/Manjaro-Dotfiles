function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}(function(){var e=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(e);var y=e.Rails;(function(){(function(){var t;t=null,y.loadCSPNonce=function(){var e;return t=null!=(e=document.querySelector("meta[name=csp-nonce]"))?e.content:void 0},y.cspNonce=function(){return null!=t?t:y.loadCSPNonce()}}).call(this),function(){var n,i;i=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,y.matches=function(e,t){return null!=t.exclude?i.call(e,t.selector)&&!i.call(e,t.exclude):i.call(e,t)},n="_ujsData",y.getData=function(e,t){var i;return null!=(i=e[n])?i[t]:void 0},y.setData=function(e,t,i){return null==e[n]&&(e[n]={}),e[n][t]=i},y.$=function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}.call(this),function(){var i,n,r;i=y.$,r=y.csrfToken=function(){var e;return(e=document.querySelector("meta[name=csrf-token]"))&&e.content},n=y.csrfParam=function(){var e;return(e=document.querySelector("meta[name=csrf-param]"))&&e.content},y.CSRFProtection=function(e){var t;if(null!=(t=r()))return e.setRequestHeader("X-CSRF-Token",t)},y.refreshCSRFTokens=function(){var e,t;if(t=r(),e=n(),null!=t&&null!=e)return i('form input[name="'+e+'"]').forEach(function(e){return e.value=t})}}.call(this),function(){var r,t,o,i;o=y.matches,"function"!=typeof(r=window.CustomEvent)&&((r=function(e,t){var i;return(i=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}).prototype=window.Event.prototype,i=r.prototype.preventDefault,r.prototype.preventDefault=function(){var e;return e=i.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),e}),t=y.fire=function(e,t,i){var n;return n=new r(t,{bubbles:!0,cancelable:!0,detail:i}),e.dispatchEvent(n),!n.defaultPrevented},y.stopEverything=function(e){return t(e.target,"ujs:everythingStopped"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},y.delegate=function(e,i,t,n){return e.addEventListener(t,function(e){var t;for(t=e.target;t instanceof Element&&!o(t,i);)t=t.parentNode;if(t instanceof Element&&!1===n.call(t,e))return e.preventDefault(),e.stopPropagation()})}}.call(this),function(){var t,n,e,o,r,a;o=y.cspNonce,n=y.CSRFProtection,y.fire,t={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},y.ajax=function(i){var n;return i=r(i),n=e(i,function(){var e,t;return t=a(null!=(e=n.response)?e:n.responseText,n.getResponseHeader("Content-Type")),2===Math.floor(n.status/100)?"function"==typeof i.success&&i.success(t,n.statusText,n):"function"==typeof i.error&&i.error(t,n.statusText,n),"function"==typeof i.complete?i.complete(n,n.statusText):void 0}),!(null!=i.beforeSend&&!i.beforeSend(n,i))&&(n.readyState===XMLHttpRequest.OPENED?n.send(i.data):void 0)},r=function(e){return e.url=e.url||location.href,e.type=e.type.toUpperCase(),"GET"===e.type&&e.data&&(e.url.indexOf("?")<0?e.url+="?"+e.data:e.url+="&"+e.data),null==t[e.dataType]&&(e.dataType="*"),e.accept=t[e.dataType],"*"!==e.dataType&&(e.accept+=", */*; q=0.01"),e},e=function(e,t){var i;return(i=new XMLHttpRequest).open(e.type,e.url,!0),i.setRequestHeader("Accept",e.accept),"string"==typeof e.data&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),n(i),i.withCredentials=!!e.withCredentials,i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE)return t(i)},i},a=function(e,t){var i,n;if("string"==typeof e&&"string"==typeof t)if(t.match(/\bjson\b/))try{e=JSON.parse(e)}catch(r){}else if(t.match(/\b(?:java|ecma)script\b/))(n=document.createElement("script")).setAttribute("nonce",o()),n.text=e,document.head.appendChild(n).parentNode.removeChild(n);else if(t.match(/\b(xml|html|svg)\b/)){i=new DOMParser,t=t.replace(/;.+/,"");try{e=i.parseFromString(e,t)}catch(r){}}return e},y.href=function(e){return e.href},y.isCrossDomain=function(e){var t,i;(t=document.createElement("a")).href=location.href,i=document.createElement("a");try{return i.href=e,!((!i.protocol||":"===i.protocol)&&!i.host||t.protocol+"//"+t.host==i.protocol+"//"+i.host)}catch(n){return n,!0}}}.call(this),function(){var r,o;r=y.matches,o=function(e){return Array.prototype.slice.call(e)},y.serializeElement=function(e,t){var i,n;return i=[e],r(e,"form")&&(i=o(e.elements)),n=[],i.forEach(function(t){if(t.name&&!t.disabled)return r(t,"select")?o(t.options).forEach(function(e){if(e.selected)return n.push({name:t.name,value:e.value})}):t.checked||-1===["radio","checkbox","submit"].indexOf(t.type)?n.push({name:t.name,value:t.value}):void 0}),t&&n.push(t),n.map(function(e){return null!=e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e}).join("&")},y.formElements=function(e,t){return r(e,"form")?o(e.elements).filter(function(e){return r(e,t)}):o(e.querySelectorAll(t))}}.call(this),function(){var t,o,i;o=y.fire,i=y.stopEverything,y.handleConfirm=function(e){if(!t(this))return i(e)},t=function(e){var t,i,n;if(!(n=e.getAttribute("data-confirm")))return!0;if(t=!1,o(e,"confirm")){try{t=confirm(n)}catch(r){}i=o(e,"confirm:complete",[t])}return t&&i}}.call(this),function(){var i,n,r,o,a,s,t,l,c,u,d;c=y.matches,l=y.getData,u=y.setData,d=y.stopEverything,t=y.formElements,y.handleDisabledElement=function(e){if(this.disabled)return d(e)},y.enableElement=function(e){var t;return t=e instanceof Event?e.target:e,c(t,y.linkDisableSelector)?s(t):c(t,y.buttonDisableSelector)||c(t,y.formEnableSelector)?o(t):c(t,y.formSubmitSelector)?a(t):void 0},y.disableElement=function(e){var t;return t=e instanceof Event?e.target:e,c(t,y.linkDisableSelector)?r(t):c(t,y.buttonDisableSelector)||c(t,y.formDisableSelector)?i(t):c(t,y.formSubmitSelector)?n(t):void 0},r=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(u(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t),e.addEventListener("click",d),u(e,"ujs:disabled",!0)},s=function(e){var t;return null!=(t=l(e,"ujs:enable-with"))&&(e.innerHTML=t,u(e,"ujs:enable-with",null)),e.removeEventListener("click",d),u(e,"ujs:disabled",null)},n=function(e){return t(e,y.formDisableSelector).forEach(i)},i=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(c(e,"button")?(u(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t):(u(e,"ujs:enable-with",e.value),e.value=t)),e.disabled=!0,u(e,"ujs:disabled",!0)},a=function(e){return t(e,y.formEnableSelector).forEach(o)},o=function(e){var t;return null!=(t=l(e,"ujs:enable-with"))&&(c(e,"button")?e.innerHTML=t:e.value=t,u(e,"ujs:enable-with",null)),e.disabled=!1,u(e,"ujs:disabled",null)}}.call(this),function(){var l;l=y.stopEverything,y.handleMethod=function(e){var t,i,n,r,o,a,s;if(s=(a=this).getAttribute("data-method"))return o=y.href(a),i=y.csrfToken(),t=y.csrfParam(),n=document.createElement("form"),r="<input name='_method' value='"+s+"' type='hidden' />",null==t||null==i||y.isCrossDomain(o)||(r+="<input name='"+t+"' value='"+i+"' type='hidden' />"),r+='<input type="submit" />',n.method="post",n.action=o,n.target=a.target,n.innerHTML=r,n.style.display="none",document.body.appendChild(n),n.querySelector('[type="submit"]').click(),l(e)}}.call(this),function(){var l,c,u,d,h,p,f,g,m,v=[].slice;p=y.matches,u=y.getData,g=y.setData,c=y.fire,m=y.stopEverything,l=y.ajax,d=y.isCrossDomain,f=y.serializeElement,h=function(e){var t;return null!=(t=e.getAttribute("data-remote"))&&"false"!==t},y.handleRemote=function(e){var t,i,n,r,o,a,s;return!h(r=this)||(c(r,"ajax:before")?(s=r.getAttribute("data-with-credentials"),n=r.getAttribute("data-type")||"script",p(r,y.formSubmitSelector)?(t=u(r,"ujs:submit-button"),o=u(r,"ujs:submit-button-formmethod")||r.method,a=u(r,"ujs:submit-button-formaction")||r.getAttribute("action")||location.href,"GET"===o.toUpperCase()&&(a=a.replace(/\?.*$/,"")),"multipart/form-data"===r.enctype?(i=new FormData(r),null!=t&&i.append(t.name,t.value)):i=f(r,t),g(r,"ujs:submit-button",null),g(r,"ujs:submit-button-formmethod",null),g(r,"ujs:submit-button-formaction",null)):p(r,y.buttonClickSelector)||p(r,y.inputChangeSelector)?(o=r.getAttribute("data-method"),a=r.getAttribute("data-url"),i=f(r,r.getAttribute("data-params"))):(o=r.getAttribute("data-method"),a=y.href(r),i=r.getAttribute("data-params")),l({type:o||"GET",url:a,data:i,dataType:n,beforeSend:function(e,t){return c(r,"ajax:beforeSend",[e,t])?c(r,"ajax:send",[e]):(c(r,"ajax:stopped"),!1)},success:function(){var e;return e=1<=arguments.length?v.call(arguments,0):[],c(r,"ajax:success",e)},error:function(){var e;return e=1<=arguments.length?v.call(arguments,0):[],c(r,"ajax:error",e)},complete:function(){var e;return e=1<=arguments.length?v.call(arguments,0):[],c(r,"ajax:complete",e)},crossDomain:d(a),withCredentials:null!=s&&"false"!==s}),m(e)):(c(r,"ajax:stopped"),!1))},y.formSubmitButtonClick=function(){var e,t;if(t=(e=this).form)return e.name&&g(t,"ujs:submit-button",{name:e.name,value:e.value}),g(t,"ujs:formnovalidate-button",e.formNoValidate),g(t,"ujs:submit-button-formaction",e.getAttribute("formaction")),g(t,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},y.preventInsignificantClick=function(e){var t,i,n,r;if(r=((n=this).getAttribute("data-method")||"GET").toUpperCase(),t=n.getAttribute("data-params"),i=(e.metaKey||e.ctrlKey)&&"GET"===r&&!t,null!=e.button&&0!==e.button||i)return e.stopImmediatePropagation()}}.call(this),function(){var e,n,t,i,r,o,a,s,l,c,u,d,h,p,f;if(o=y.fire,t=y.delegate,s=y.getData,e=y.$,f=y.refreshCSRFTokens,n=y.CSRFProtection,h=y.loadCSPNonce,r=y.enableElement,i=y.disableElement,c=y.handleDisabledElement,l=y.handleConfirm,p=y.preventInsignificantClick,d=y.handleRemote,a=y.formSubmitButtonClick,u=y.handleMethod,"undefined"!=typeof jQuery&&null!==jQuery&&null!=jQuery.ajax){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=y,jQuery.ajaxPrefilter(function(e,t,i){if(!e.crossDomain)return n(i)})}y.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return e(y.formEnableSelector).forEach(function(e){if(s(e,"ujs:disabled"))return r(e)}),e(y.linkDisableSelector).forEach(function(e){if(s(e,"ujs:disabled"))return r(e)})}),t(document,y.linkDisableSelector,"ajax:complete",r),t(document,y.linkDisableSelector,"ajax:stopped",r),t(document,y.buttonDisableSelector,"ajax:complete",r),t(document,y.buttonDisableSelector,"ajax:stopped",r),t(document,y.linkClickSelector,"click",p),t(document,y.linkClickSelector,"click",c),t(document,y.linkClickSelector,"click",l),t(document,y.linkClickSelector,"click",i),t(document,y.linkClickSelector,"click",d),t(document,y.linkClickSelector,"click",u),t(document,y.buttonClickSelector,"click",p),t(document,y.buttonClickSelector,"click",c),t(document,y.buttonClickSelector,"click",l),t(document,y.buttonClickSelector,"click",i),t(document,y.buttonClickSelector,"click",d),t(document,y.inputChangeSelector,"change",c),t(document,y.inputChangeSelector,"change",l),t(document,y.inputChangeSelector,"change",d),t(document,y.formSubmitSelector,"submit",c),t(document,y.formSubmitSelector,"submit",l),t(document,y.formSubmitSelector,"submit",d),t(document,y.formSubmitSelector,"submit",function(e){return setTimeout(function(){return i(e)},13)}),t(document,y.formSubmitSelector,"ajax:send",i),t(document,y.formSubmitSelector,"ajax:complete",r),t(document,y.formInputClickSelector,"click",p),t(document,y.formInputClickSelector,"click",c),t(document,y.formInputClickSelector,"click",l),t(document,y.formInputClickSelector,"click",a),document.addEventListener("DOMContentLoaded",f),document.addEventListener("DOMContentLoaded",h),window._rails_loaded=!0},window.Rails===y&&o(document,"rails:attachBindings")&&y.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=y:"function"==typeof define&&define.amd&&define(y)}).call(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.ActiveStorage={})}(this,function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}function a(e){var t=n(document.head,'meta[name="'+e+'"]');if(t)return t.getAttribute("content")}function r(e,t){return"string"==typeof e&&(t=e,e=document),o(e.querySelectorAll(t))}function n(e,t){return"string"==typeof e&&(t=e,e=document),e.querySelector(t)}function l(e,t,i){var n=2<arguments.length&&i!==undefined?arguments[2]:{},r=e.disabled,o=n.bubbles,a=n.cancelable,s=n.detail,l=document.createEvent("Event");l.initEvent(t,o||!0,a||!0),l.detail=s||{};try{e.disabled=!1,e.dispatchEvent(l)}finally{e.disabled=r}return l}function o(e){return Array.isArray(e)?e:Array.from?Array.from(e):[].slice.call(e)}function s(e,t){if(e&&"function"==typeof e[t]){for(var i=arguments.length,n=Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return e[t].apply(e,n)}}function i(){R||(R=!0,document.addEventListener("click",c,!0),document.addEventListener("submit",u),document.addEventListener("ajax:before",d))}function c(e){var t=e.target;"INPUT"!=t.tagName&&"BUTTON"!=t.tagName||"submit"!=t.type||!t.form||A.set(t.form,t)}function u(e){h(e)}function d(e){"FORM"==e.target.tagName&&h(e)}function h(e){var t=e.target;if(t.hasAttribute(P))e.preventDefault();else{var i=new S(t),n=i.inputs;n.length&&(e.preventDefault(),t.setAttribute(P,""),n.forEach(f),i.start(function(e){t.removeAttribute(P),e?n.forEach(g):p(t)}))}}function p(e){var t=A.get(e)||n(e,"input[type=submit], button[type=submit]");if(t){var i=t.disabled;t.disabled=!1,t.focus(),t.click(),t.disabled=i}else(t=document.createElement("input")).type="submit",t.style.display="none",e.appendChild(t),t.click(),e.removeChild(t);A["delete"](e)}function f(e){e.disabled=!0}function g(e){e.disabled=!1}function m(){window.ActiveStorage&&i()}var v=t(function(e){var t;t=function(u){function c(e,t){var i=e[0],n=e[1],r=e[2],o=e[3];n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&r|~n&o)+t[0]-680876936|0)<<7|i>>>25)+n|0)&n|~i&r)+t[1]-389564586|0)<<12|o>>>20)+i|0)&i|~o&n)+t[2]+606105819|0)<<17|r>>>15)+o|0)&o|~r&i)+t[3]-1044525330|0)<<22|n>>>10)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&r|~n&o)+t[4]-176418897|0)<<7|i>>>25)+n|0)&n|~i&r)+t[5]+1200080426|0)<<12|o>>>20)+i|0)&i|~o&n)+t[6]-1473231341|0)<<17|r>>>15)+o|0)&o|~r&i)+t[7]-45705983|0)<<22|n>>>10)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&r|~n&o)+t[8]+1770035416|0)<<7|i>>>25)+n|0)&n|~i&r)+t[9]-1958414417|0)<<12|o>>>20)+i|0)&i|~o&n)+t[10]-42063|0)<<17|r>>>15)+o|0)&o|~r&i)+t[11]-1990404162|0)<<22|n>>>10)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&r|~n&o)+t[12]+1804603682|0)<<7|i>>>25)+n|0)&n|~i&r)+t[13]-40341101|0)<<12|o>>>20)+i|0)&i|~o&n)+t[14]-1502002290|0)<<17|r>>>15)+o|0)&o|~r&i)+t[15]+1236535329|0)<<22|n>>>10)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&o|r&~o)+t[1]-165796510|0)<<5|i>>>27)+n|0)&r|n&~r)+t[6]-1069501632|0)<<9|o>>>23)+i|0)&n|i&~n)+t[11]+643717713|0)<<14|r>>>18)+o|0)&i|o&~i)+t[0]-373897302|0)<<20|n>>>12)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&o|r&~o)+t[5]-701558691|0)<<5|i>>>27)+n|0)&r|n&~r)+t[10]+38016083|0)<<9|o>>>23)+i|0)&n|i&~n)+t[15]-660478335|0)<<14|r>>>18)+o|0)&i|o&~i)+t[4]-405537848|0)<<20|n>>>12)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&o|r&~o)+t[9]+568446438|0)<<5|i>>>27)+n|0)&r|n&~r)+t[14]-1019803690|0)<<9|o>>>23)+i|0)&n|i&~n)+t[3]-187363961|0)<<14|r>>>18)+o|0)&i|o&~i)+t[8]+1163531501|0)<<20|n>>>12)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&o|r&~o)+t[13]-1444681467|0)<<5|i>>>27)+n|0)&r|n&~r)+t[2]-51403784|0)<<9|o>>>23)+i|0)&n|i&~n)+t[7]+1735328473|0)<<14|r>>>18)+o|0)&i|o&~i)+t[12]-1926607734|0)<<20|n>>>12)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n^r^o)+t[5]-378558|0)<<4|i>>>28)+n|0)^n^r)+t[8]-2022574463|0)<<11|o>>>21)+i|0)^i^n)+t[11]+1839030562|0)<<16|r>>>16)+o|0)^o^i)+t[14]-35309556|0)<<23|n>>>9)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n^r^o)+t[1]-1530992060|0)<<4|i>>>28)+n|0)^n^r)+t[4]+1272893353|0)<<11|o>>>21)+i|0)^i^n)+t[7]-155497632|0)<<16|r>>>16)+o|0)^o^i)+t[10]-1094730640|0)<<23|n>>>9)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n^r^o)+t[13]+681279174|0)<<4|i>>>28)+n|0)^n^r)+t[0]-358537222|0)<<11|o>>>21)+i|0)^i^n)+t[3]-722521979|0)<<16|r>>>16)+o|0)^o^i)+t[6]+76029189|0)<<23|n>>>9)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n^r^o)+t[9]-640364487|0)<<4|i>>>28)+n|0)^n^r)+t[12]-421815835|0)<<11|o>>>21)+i|0)^i^n)+t[15]+530742520|0)<<16|r>>>16)+o|0)^o^i)+t[2]-995338651|0)<<23|n>>>9)+r|0,n=((n+=((o=((o+=(n^((i=((i+=(r^(n|~o))+t[0]-198630844|0)<<6|i>>>26)+n|0)|~r))+t[7]+1126891415|0)<<10|o>>>22)+i|0)^((r=((r+=(i^(o|~n))+t[14]-1416354905|0)<<15|r>>>17)+o|0)|~i))+t[5]-57434055|0)<<21|n>>>11)+r|0,n=((n+=((o=((o+=(n^((i=((i+=(r^(n|~o))+t[12]+1700485571|0)<<6|i>>>26)+n|0)|~r))+t[3]-1894986606|0)<<10|o>>>22)+i|0)^((r=((r+=(i^(o|~n))+t[10]-1051523|0)<<15|r>>>17)+o|0)|~i))+t[1]-2054922799|0)<<21|n>>>11)+r|0,n=((n+=((o=((o+=(n^((i=((i+=(r^(n|~o))+t[8]+1873313359|0)<<6|i>>>26)+n|0)|~r))+t[15]-30611744|0)<<10|o>>>22)+i|0)^((r=((r+=(i^(o|~n))+t[6]-1560198380|0)<<15|r>>>17)+o|0)|~i))+t[13]+1309151649|0)<<21|n>>>11)+r|0,n=((n+=((o=((o+=(n^((i=((i+=(r^(n|~o))+t[4]-145523070|0)<<6|i>>>26)+n|0)|~r))+t[11]-1120210379|0)<<10|o>>>22)+i|0)^((r=((r+=(i^(o|~n))+t[2]+718787259|0)<<15|r>>>17)+o|0)|~i))+t[9]-343485551|0)<<21|n>>>11)+r|0,e[0]=i+e[0]|0,e[1]=n+e[1]|0,e[2]=r+e[2]|0,e[3]=o+e[3]|0}function d(e){var t,i=[];for(t=0;t<64;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i}function h(e){var t,i=[];for(t=0;t<64;t+=4)i[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return i}function n(e){var t,i,n,r,o,a,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)c(l,d(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),55<t)for(c(l,n),t=0;t<16;t+=1)n[t]=0;return r=(r=8*s).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),a=parseInt(r[1],16)||0,n[14]=o,n[15]=a,c(l,n),l}function r(e){var t,i,n,r,o,a,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)c(l,h(e.subarray(t-64,t)));for(i=(e=t-64<s?e.subarray(t-64):new Uint8Array(0)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),55<t)for(c(l,n),t=0;t<16;t+=1)n[t]=0;return r=(r=8*s).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),a=parseInt(r[1],16)||0,n[14]=o,n[15]=a,c(l,n),l}function i(e){var t,i="";for(t=0;t<4;t+=1)i+=g[e>>8*t+4&15]+g[e>>8*t&15];return i}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=i(e[t]);return e.join("")}function o(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function t(e,t){var i,n=e.length,r=new ArrayBuffer(n),o=new Uint8Array(r);for(i=0;i<n;i+=1)o[i]=e.charCodeAt(i);return t?o:r}function s(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function l(e,t,i){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),i?n:n.buffer}function p(e){var t,i=[],n=e.length;for(t=0;t<n-1;t+=2)i.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,i)}function f(){this.reset()}var g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return a(n("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function c(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(e,t){var i,n,r,o,a=this.byteLength,s=c(e,a),l=a;return t!==u&&(l=c(t,a)),l<s?new ArrayBuffer(0):(i=l-s,n=new ArrayBuffer(i),r=new Uint8Array(n),o=new Uint8Array(this,s,i),r.set(o),n)}}(),f.prototype.append=function(e){return this.appendBinary(o(e)),this},f.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)c(this._hash,d(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},f.prototype.end=function(e){var t,i,n=this._buff,r=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r;t+=1)o[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(o,r),i=a(this._hash),e&&(i=p(i)),this.reset(),i},f.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},f.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},f.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},f.prototype._finish=function(e,t){var i,n,r,o=t;if(e[o>>2]|=128<<(o%4<<3),55<o)for(c(this._hash,e),o=0;o<16;o+=1)e[o]=0;i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(i[2],16),r=parseInt(i[1],16)||0,e[14]=n,e[15]=r,c(this._hash,e)},f.hash=function(e,t){return f.hashBinary(o(e),t)},f.hashBinary=function(e,t){var i=a(n(e));return t?p(i):i},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(e){var t,i=l(this._buff.buffer,e,!0),n=i.length;for(this._length+=e.byteLength,t=64;t<=n;t+=64)c(this._hash,h(i.subarray(t-64,t)));return this._buff=t-64<n?new Uint8Array(i.buffer.slice(t-64)):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(e){var t,i,n=this._buff,r=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r;t+=1)o[t>>2]|=n[t]<<(t%4<<3);return this._finish(o,r),i=a(this._hash),e&&(i=p(i)),this.reset(),i},f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.getState=function(){var e=f.prototype.getState.call(this);return e.buff=s(e.buff),e},f.ArrayBuffer.prototype.setState=function(e){return e.buff=t(e.buff,!0),f.prototype.setState.call(this,e)},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.hash=function(e,t){var i=a(r(new Uint8Array(e)));return t?p(i):i},f},e.exports=t()}),y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),b=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,_=function(){function i(e){y(this,i),this.file=e,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}return w(i,null,[{key:"create",value:function n(e,t){new i(e).create(t)}}]),w(i,[{key:"create",value:function n(e){var t=this;this.callback=e,this.md5Buffer=new v.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",function(e){return t.fileReaderDidLoad(e)}),this.fileReader.addEventListener("error",function(e){return t.fileReaderDidError(e)}),this.readNextChunk()}},{key:"fileReaderDidLoad",value:function r(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){var t=this.md5Buffer.end(!0),i=btoa(t);this.callback(null,i)}}},{key:"fileReaderDidError",value:function e(){this.callback("Error reading "+this.file.name)}},{key:"readNextChunk",value:function o(){if(this.chunkIndex<this.chunkCount||0==this.chunkIndex&&0==this.chunkCount){var e=this.chunkIndex*this.chunkSize,t=Math.min(e+this.chunkSize,this.file.size),i=b.call(this.file,e,t);return this.fileReader.readAsArrayBuffer(i),this.chunkIndex++,!0}return!1}}]),i}(),x=function(){function r(e,t,i){var n=this;y(this,r),this.file=e,this.attributes={filename:e.name,content_type:e.type,byte_size:e.size,checksum:t},this.xhr=new XMLHttpRequest,this.xhr.open("POST",i,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xhr.setRequestHeader("X-CSRF-Token",a("csrf-token")),this.xhr.addEventListener("load",function(e){return n.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return n.requestDidError(e)})}return w(r,[{key:"create",value:function t(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}},{key:"requestDidLoad",value:function n(e){if(200<=this.status&&this.status<300){var t=this.response,i=t.direct_upload;delete t.direct_upload,this.attributes=t,this.directUploadData=i,this.callback(null,this.toJSON())}else this.requestDidError(e)}},{key:"requestDidError",value:function e(){this.callback('Error creating Blob for "'+this.file.name+'". Status: '+this.status)}},{key:"toJSON",value:function i(){var e={};for(var t in this.attributes)e[t]=this.attributes[t];return e}},{key:"status",get:function o(){return this.xhr.status}},{key:"response",get:function o(){var e=this.xhr,t=e.responseType,i=e.response;return"json"==t?i:JSON.parse(i)}}]),r}(),k=function(){function a(e){var t=this;y(this,a),this.blob=e,this.file=e.file;var i=e.directUploadData,n=i.url,r=i.headers;for(var o in this.xhr=new XMLHttpRequest,this.xhr.open("PUT",n,!0),this.xhr.responseType="text",r)this.xhr.setRequestHeader(o,r[o]);this.xhr.addEventListener("load",function(e){return t.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return t.requestDidError(e)})}return w(a,[{key:"create",value:function t(e){this.callback=e,this.xhr.send(this.file.slice())}},{key:"requestDidLoad",value:function r(e){var t=this.xhr,i=t.status,n=t.response;200<=i&&i<300?this.callback(null,n):this.requestDidError(e)}},{key:"requestDidError",value:function e(){this.callback('Error storing "'+this.file.name+'". Status: '+this.xhr.status)}}]),a}(),j=0,T=function(){function n(e,t,i){y(this,n),this.id=++j,this.file=e,this.url=t,this.delegate=i}return w(n,[{key:"create",value:function e(n){var r=this;_.create(this.file,function(e,t){if(e)n(e);else{var i=new x(r.file,t,r.url);s(r.delegate,"directUploadWillCreateBlobWithXHR",i.xhr),i.create(function(e){if(e)n(e);else{var t=new k(i);s(r.delegate,"directUploadWillStoreFileWithXHR",t.xhr),t.create(function(e){e?n(e):n(null,i.toJSON())})}})}})}}]),n}(),E=function(){function i(e,t){y(this,i),this.input=e,this.file=t,this.directUpload=new T(this.file,this.url,this),this.dispatch("initialize")}return w(i,[{key:"start",value:function e(i){var n=this,r=document.createElement("input");r.type="hidden",r.name=this.input.name,this.input.insertAdjacentElement("beforebegin",r),this.dispatch("start"),this.directUpload.create(function(e,t){e?(r.parentNode.removeChild(r),n.dispatchError(e)):r.value=t.signed_id,n.dispatch("end"),i(e)})}},{key:"uploadRequestDidProgress",value:function n(e){var t=e.loaded/e.total*100;t&&this.dispatch("progress",{progress:t})}},{key:"dispatch",value:function r(e,t){var i=1<arguments.length&&t!==undefined?arguments[1]:{};return i.file=this.file,i.id=this.directUpload.id,l(this.input,"direct-upload:"+e,{detail:i})}},{key:"dispatchError",value:function t(e){this.dispatch("error",{error:e}).defaultPrevented||alert(e)}},{key:"directUploadWillCreateBlobWithXHR",value:function o(e){this.dispatch("before-blob-request",{xhr:e})}},{key:"directUploadWillStoreFileWithXHR",value:function a(e){var t=this;this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",function(e){return t.uploadRequestDidProgress(e)})}},{key:"url",get:function s(){return this.input.getAttribute("data-direct-upload-url")}}]),i}(),C="input[type=file][data-direct-upload-url]:not([disabled])",S=function(){function t(e){y(this,t),this.form=e,this.inputs=r(e,C).filter(function(e){return e.files.length})}return w(t,[{key:"start",value:function e(t){var i=this,n=this.createDirectUploadControllers(),r=function r(){var e=n.shift();e?e.start(function(e){e?(t(e),i.dispatch("end")):r()}):(t(),i.dispatch("end"))};this.dispatch("start"),r()}},{key:"createDirectUploadControllers",value:function i(){var n=[];return this.inputs.forEach(function(i){o(i.files).forEach(function(e){var t=new E(i,e);n.push(t)})}),n}},{key:"dispatch",value:function n(e,t){var i=1<arguments.length&&t!==undefined?arguments[1]:{};return l(this.form,"direct-uploads:"+e,{detail:i})}}]),t}(),P="data-direct-uploads-processing",A=new WeakMap,R=!1;setTimeout(m,1),e.start=i,e.DirectUpload=T,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(k,e){function s(e){var t=!!e&&"length"in e&&e.length,i=pe.type(e);return"function"!==i&&!pe.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}function t(e,i,n){if(pe.isFunction(i))return pe.grep(e,function(e,t){return!!i.call(e,t,e)!==n});if(i.nodeType)return pe.grep(e,function(e){return e===i!==n});if("string"==typeof i){if(ke.test(i))return pe.filter(i,e,n);i=pe.filter(i,e)}return pe.grep(e,function(e){return-1<pe.inArray(e,i)!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e){var i={};return pe.each(e.match(Ae)||[],function(e,t){i[t]=!0}),i}function r(){ne.addEventListener?(ne.removeEventListener("DOMContentLoaded",o),k.removeEventListener("load",o)):(ne.detachEvent("onreadystatechange",o),k.detachEvent("onload",o))}function o(){(ne.addEventListener||"load"===k.event.type||"complete"===ne.readyState)&&(r(),pe.ready())}function l(e,t,i){if(i===undefined&&1===e.nodeType){var n="data-"+t.replace(Oe,"-$1").toLowerCase();if("string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:Ie.test(i)?pe.parseJSON(i):i)}catch(r){}pe.data(e,t,i)}else i=undefined}return i}function c(e){var t;for(t in e)if(("data"!==t||!pe.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function n(e,t,i,n){if(Le(e)){var r,o,a=pe.expando,s=e.nodeType,l=s?pe.cache:e,c=s?e[a]:e[a]&&a;if(c&&l[c]&&(n||l[c].data)||i!==undefined||"string"!=typeof t)return c||(c=s?e[a]=ie.pop()||pe.guid++:a),l[c]||(l[c]=s?{}:{toJSON:pe.noop}),"object"!=typeof t&&"function"!=typeof t||(n?l[c]=pe.extend(l[c],t):l[c].data=pe.extend(l[c].data,t)),o=l[c],n||(o.data||(o.data={}),o=o.data),i!==undefined&&(o[pe.camelCase(t)]=i),"string"==typeof t?null==(r=o[t])&&(r=o[pe.camelCase(t)]):r=o,r}}function a(e,t,i){if(Le(e)){var n,r,o=e.nodeType,a=o?pe.cache:e,s=o?e[pe.expando]:pe.expando;if(a[s]){if(t&&(n=i?a[s]:a[s].data)){r=(t=pe.isArray(t)?t.concat(pe.map(t,pe.camelCase)):t in n?[t]:(t=pe.camelCase(t))in n?[t]:t.split(" ")).length;for(;r--;)delete n[t[r]];if(i?!c(n):!pe.isEmptyObject(n))return}(i||(delete a[s].data,c(a[s])))&&(o?pe.cleanData([e],!0):de.deleteExpando||a!=a.window?delete a[s]:a[s]=undefined)}}}function d(e,t,i,n){var r,o=1,a=20,s=n?function(){return n.cur()}:function(){return pe.css(e,t,"")},l=s(),c=i&&i[3]||(pe.cssNumber[t]?"":"px"),u=(pe.cssNumber[t]||"px"!==c&&+l)&&$e.exec(pe.css(e,t));if(u&&u[3]!==c)for(c=c||u[3],i=i||[],u=+l||1;u/=o=o||".5",pe.style(e,t,u+c),o!==(o=s()/l)&&1!==o&&--a;);return i&&(u=+u||+l||0,r=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=r)),r}
function m(e){var t=Ye.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function v(e,t){var i,n,r=0,o="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):undefined;if(!o)for(o=[],i=e.childNodes||e;null!=(n=i[r]);r++)!t||pe.nodeName(n,t)?o.push(n):pe.merge(o,v(n,t));return t===undefined||t&&pe.nodeName(e,t)?pe.merge([e],o):o}function y(e,t){for(var i,n=0;null!=(i=e[n]);n++)pe._data(i,"globalEval",!t||pe._data(t[n],"globalEval"))}function w(e){We.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t,i,n,r){for(var o,a,s,l,c,u,d,h=e.length,p=m(t),f=[],g=0;g<h;g++)if((a=e[g])||0===a)if("object"===pe.type(a))pe.merge(f,a.nodeType?[a]:a);else if(Ge.test(a)){for(l=l||p.appendChild(t.createElement("div")),c=(qe.exec(a)||["",""])[1].toLowerCase(),d=Je[c]||Je._default,l.innerHTML=d[1]+pe.htmlPrefilter(a)+d[2],o=d[0];o--;)l=l.lastChild;if(!de.leadingWhitespace&&Ve.test(a)&&f.push(t.createTextNode(Ve.exec(a)[0])),!de.tbody)for(o=(a="table"!==c||Xe.test(a)?"<table>"!==d[1]||Xe.test(a)?0:l:l.firstChild)&&a.childNodes.length;o--;)pe.nodeName(u=a.childNodes[o],"tbody")&&!u.childNodes.length&&a.removeChild(u);for(pe.merge(f,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=p.lastChild}else f.push(t.createTextNode(a));for(l&&p.removeChild(l),de.appendChecked||pe.grep(v(f,"input"),w),g=0;a=f[g++];)if(n&&-1<pe.inArray(a,n))r&&r.push(a);else if(s=pe.contains(a.ownerDocument,a),l=v(p.appendChild(a),"script"),s&&y(l),i)for(o=0;a=l[o++];)Ue.test(a.type||"")&&i.push(a);return l=null,p}function h(){return!0}function p(){return!1}function f(){try{return ne.activeElement}catch(e){}}function b(e,t,i,n,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof i&&(n=n||i,i=undefined),t)b(e,s,i,n,t[s],o);return e}if(null==n&&null==r?(r=i,n=i=undefined):null==r&&("string"==typeof i?(r=n,n=undefined):(r=n,n=i,i=undefined)),!1===r)r=p;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return pe().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=pe.guid++)),e.each(function(){pe.event.add(this,t,r,n,i)})}function _(e,t){return pe.nodeName(e,"table")&&pe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function x(e){return e.type=(null!==pe.find.attr(e,"type"))+"/"+e.type,e}function j(e){var t=st.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){if(1===t.nodeType&&pe.hasData(e)){var i,n,r,o=pe._data(e),a=pe._data(t,o),s=o.events;if(s)for(i in delete a.handle,a.events={},s)for(n=0,r=s[i].length;n<r;n++)pe.event.add(t,i,s[i][n]);a.data&&(a.data=pe.extend({},a.data))}}function E(e,t){var i,n,r;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!de.noCloneEvent&&t[pe.expando]){for(n in(r=pe._data(t)).events)pe.removeEvent(t,n,r.handle);t.removeAttribute(pe.expando)}"script"===i&&t.text!==e.text?(x(t).text=e.text,j(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),de.html5Clone&&e.innerHTML&&!pe.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&We.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}}function C(i,n,r,o){n=oe.apply([],n);var e,t,a,s,l,c,u=0,d=i.length,h=d-1,p=n[0],f=pe.isFunction(p);if(f||1<d&&"string"==typeof p&&!de.checkClone&&at.test(p))return i.each(function(e){var t=i.eq(e);f&&(n[0]=p.call(this,e,t.html())),C(t,n,r,o)});if(d&&(e=(c=g(n,i[0].ownerDocument,!1,i,o)).firstChild,1===c.childNodes.length&&(c=e),e||o)){for(a=(s=pe.map(v(c,"script"),x)).length;u<d;u++)t=c,u!==h&&(t=pe.clone(t,!0,!0),a&&pe.merge(s,v(t,"script"))),r.call(i[u],t,u);if(a)for(l=s[s.length-1].ownerDocument,pe.map(s,j),u=0;u<a;u++)t=s[u],Ue.test(t.type||"")&&!pe._data(t,"globalEval")&&pe.contains(l,t)&&(t.src?pe._evalUrl&&pe._evalUrl(t.src):pe.globalEval((t.text||t.textContent||t.innerHTML||"").replace(lt,"")));c=e=null}return i}function S(e,t,i){for(var n,r=t?pe.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||pe.cleanData(v(n)),n.parentNode&&(i&&pe.contains(n.ownerDocument,n)&&y(v(n,"script")),n.parentNode.removeChild(n));return e}function P(e,t){var i=pe(t.createElement(e)).appendTo(t.body),n=pe.css(i[0],"display");return i.detach(),n}function A(e){var t=ne,i=dt[e];return i||("none"!==(i=P(e,t))&&i||((t=((ut=(ut||pe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||ut[0].contentDocument).document).write(),t.close(),i=P(e,t),ut.detach()),dt[e]=i),i}function R(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function L(e){if(e in Et)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),i=Tt.length;i--;)if((e=Tt[i]+t)in Et)return e}function I(e,t){for(var i,n,r,o=[],a=0,s=e.length;a<s;a++)(n=e[a]).style&&(o[a]=pe._data(n,"olddisplay"),i=n.style.display,t?(o[a]||"none"!==i||(n.style.display=""),""===n.style.display&&ze(n)&&(o[a]=pe._data(n,"olddisplay",A(n.nodeName)))):(r=ze(n),(i&&"none"!==i||!r)&&pe._data(n,"olddisplay",r?i:pe.css(n,"display"))));for(a=0;a<s;a++)(n=e[a]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[a]||"":"none"));return e}function O(e,t,i){var n=xt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function M(e,t,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===i&&(a+=pe.css(e,i+Fe[o],!0,r)),n?("content"===i&&(a-=pe.css(e,"padding"+Fe[o],!0,r)),"margin"!==i&&(a-=pe.css(e,"border"+Fe[o]+"Width",!0,r))):(a+=pe.css(e,"padding"+Fe[o],!0,r),"padding"!==i&&(a+=pe.css(e,"border"+Fe[o]+"Width",!0,r)));return a}function D(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=mt(e),a=de.boxSizing&&"border-box"===pe.css(e,"boxSizing",!1,o);if(r<=0||null==r){if(((r=vt(e,t,o))<0||null==r)&&(r=e.style[t]),pt.test(r))return r;n=a&&(de.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+M(e,t,i||(a?"border":"content"),n,o)+"px"}function N(e,t,i,n,r){return new N.prototype.init(e,t,i,n,r)}function B(){return k.setTimeout(function(){Ct=undefined}),Ct=pe.now()}function $(e,t){var i,n={height:e},r=0;for(t=t?1:0;r<4;r+=2-t)n["margin"+(i=Fe[r])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function F(e,t,i){for(var n,r=(W.tweeners[t]||[]).concat(W.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,t,e))return n}function z(t,e,i){var n,r,o,a,s,l,c,u=this,d={},h=t.style,p=t.nodeType&&ze(t),f=pe._data(t,"fxshow");for(n in i.queue||(null==(s=pe._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,pe.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(c=pe.css(t,"display"))?pe._data(t,"olddisplay")||A(t.nodeName):c)&&"none"===pe.css(t,"float")&&(de.inlineBlockNeedsLayout&&"inline"!==A(t.nodeName)?h.zoom=1:h.display="inline-block")),i.overflow&&(h.overflow="hidden",de.shrinkWrapBlocks()||u.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]})),e)if(r=e[n],Ot.exec(r)){if(delete e[n],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||f[n]===undefined)continue;p=!0}d[n]=f&&f[n]||pe.style(t,n)}else c=undefined;if(pe.isEmptyObject(d))"inline"===("none"===c?A(t.nodeName):c)&&(h.display=c);else for(n in f?"hidden"in f&&(p=f.hidden):f=pe._data(t,"fxshow",{}),o&&(f.hidden=!p),p?pe(t).show():u.done(function(){pe(t).hide()}),u.done(function(){var e;for(e in pe._removeData(t,"fxshow"),d)pe.style(t,e,d[e])}),d)a=F(p?f[n]:0,n,u),n in f||(f[n]=a.start,p&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}function H(e,t){var i,n,r,o,a;for(i in e)if(r=t[n=pe.camelCase(i)],o=e[i],pe.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(a=pe.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=r);else t[n]=r}function W(o,e,t){var i,a,n=0,r=W.prefilters.length,s=pe.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=Ct||B(),t=Math.max(0,c.startTime+c.duration-e),i=1-(t/c.duration||0),n=0,r=c.tweens.length;n<r;n++)c.tweens[n].run(i);return s.notifyWith(o,[c,i,t]),i<1&&r?t:(s.resolveWith(o,[c]),!1)},c=s.promise({elem:o,props:pe.extend({},e),opts:pe.extend(!0,{specialEasing:{},easing:pe.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ct||B(),duration:t.duration,tweens:[],createTween:function(e,t){var i=pe.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var t=0,i=e?c.tweens.length:0;if(a)return this;for(a=!0;t<i;t++)c.tweens[t].run(1);return e?(s.notifyWith(o,[c,1,0]),s.resolveWith(o,[c,e])):s.rejectWith(o,[c,e]),this}}),u=c.props;for(H(u,c.opts.specialEasing);n<r;n++)if(i=W.prefilters[n].call(c,o,u,c.opts))return pe.isFunction(i.stop)&&(pe._queueHooks(c.elem,c.opts.queue).stop=pe.proxy(i.stop,i)),i;return pe.map(u,F,c),pe.isFunction(c.opts.start)&&c.opts.start.call(o,c),pe.fx.timer(pe.extend(l,{elem:o,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function q(e){return pe.attr(e,"class")||""}function U(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(Ae)||[];if(pe.isFunction(t))for(;i=r[n++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(t)):(o[i]=o[i]||[]).push(t)}}function V(t,r,o,a){function s(e){var n;return l[e]=!0,pe.each(t[e]||[],function(e,t){var i=t(r,o,a);return"string"!=typeof i||c||l[i]?c?!(n=i):void 0:(r.dataTypes.unshift(i),s(i),!1)}),n}var l={},c=t===oi;return s(r.dataTypes[0])||!l["*"]&&s("*")}function Y(e,t){var i,n,r=pe.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&pe.extend(!0,e,i),e}function J(e,t,i){for(var n,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in i)o=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}n||(n=a)}o=o||n}if(o)return o!==l[0]&&l.unshift(o),i[o]}function G(e,t,i,n){var r,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function X(e){return e.style&&e.style.display||pe.css(e,"display")}function K(e){if(!pe.contains(e.ownerDocument||ne,e))return!0;for(;e&&1===e.nodeType;){if("none"===X(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function Q(i,e,n,r){var t;if(pe.isArray(e))pe.each(e,function(e,t){n||ui.test(i)?r(i,t):Q(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,n,r)});else if(n||"object"!==pe.type(e))r(i,e);else for(t in e)Q(i+"["+t+"]",e[t],n,r)}function Z(){try{return new k.XMLHttpRequest}catch(e){}}function ee(){try{return new k.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function te(e){return pe.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ie=[],ne=k.document,re=ie.slice,oe=ie.concat,ae=ie.push,se=ie.indexOf,le={},ce=le.toString,ue=le.hasOwnProperty,de={},he="1.12.4",pe=function(e,t){return new pe.fn.init(e,t)},fe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^-ms-/,me=/-([\da-z])/gi,ve=function(e,t){return t.toUpperCase()};pe.fn=pe.prototype={jquery:he,constructor:pe,selector:"",length:0,toArray:function(){return re.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:re.call(this)},pushStack:function(e){var t=pe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return pe.each(this,e)},map:function(i){return this.pushStack(pe.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ae,sort:ie.sort,splice:ie.splice},pe.extend=pe.fn.extend=function(e){var t,i,n,r,o,a,s=e||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[l]||{},l++),"object"==typeof s||pe.isFunction(s)||(s={}),l===c&&(s=this,l--);l<c;l++)if(null!=(o=arguments[l]))for(r in o)t=s[r],s!==(n=o[r])&&(u&&n&&(pe.isPlainObject(n)||(i=pe.isArray(n)))?(i?(i=!1,a=t&&pe.isArray(t)?t:[]):a=t&&pe.isPlainObject(t)?t:{},s[r]=pe.extend(u,a,n)):n!==undefined&&(s[r]=n));return s},pe.extend({expando:"jQuery"+(he+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===pe.type(e)},isArray:Array.isArray||function(e){return"array"===pe.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!pe.isArray(e)&&0<=t-parseFloat(t)+1},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==pe.type(e)||e.nodeType||pe.isWindow(e))return!1;try{if(e.constructor&&!ue.call(e,"constructor")&&!ue.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(!de.ownFirst)for(t in e)return ue.call(e,t);for(t in e);return t===undefined||ue.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?le[ce.call(e)]||"object":typeof e},globalEval:function(e){e&&pe.trim(e)&&(k.execScript||function(e){k.eval.call(k,e)})(e)},camelCase:function(e){return e.replace(ge,"ms-").replace(me,ve)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(s(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(fe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(s(Object(e))?pe.merge(i,"string"==typeof e?[e]:e):ae.call(i,e)),i},inArray:function(e,t,i){var n;if(t){if(se)return se.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;)e[r++]=t[n++];if(i!=i)for(;t[n]!==undefined;)e[r++]=t[n++];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,a=!i;r<o;r++)!t(e[r],r)!==a&&n.push(e[r]);return n},map:function(e,t,i){var n,r,o=0,a=[];if(s(e))for(n=e.length;o<n;o++)null!=(r=t(e[o],o,i))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&a.push(r);return oe.apply([],a)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(r=e[t],t=e,e=r),pe.isFunction(e)?(i=re.call(arguments,2),(n=function(){return e.apply(t||this,i.concat(re.call(arguments)))}).guid=e.guid=e.guid||pe.guid++,n):undefined},now:function(){return+new Date},support:de}),"function"==typeof Symbol&&(pe.fn[Symbol.iterator]=ie[Symbol.iterator]),pe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){le["[object "+t+"]"]=t.toLowerCase()});var ye=function(i){function b(e,t,i,n){var r,o,a,s,l,c,u,d,h=t&&t.ownerDocument,p=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return i;if(!n&&((t?t.ownerDocument||t:F)!==L&&R(t),t=t||L,O)){if(11!==p&&(c=ve.exec(e)))if(r=c[1]){if(9===p){if(!(a=t.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(h&&(a=h.getElementById(r))&&B(t,a)&&a.id===r)return i.push(a),i}else{if(c[2])return Q.apply(i,t.getElementsByTagName(e)),i;if((r=c[3])&&v.getElementsByClassName&&t.getElementsByClassName)return Q.apply(i,t.getElementsByClassName(r)),i}if(v.qsa&&!U[e+" "]&&(!M||!M.test(e))){if(1!==p)h=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(we,"\\$&"):t.setAttribute("id",s=$),o=(u=T(e)).length,l=he.test(s)?"#"+s:"[id='"+s+"']";o--;)u[o]=l+" "+m(u[o]);d=u.join(","),h=ye.test(e)&&g(t.parentNode)||t}if(d)try{return Q.apply(i,h.querySelectorAll(d)),i}catch(f){}finally{s===$&&t.removeAttribute("id")}}}return C(e.replace(se,"$1"),t,i,n)}function e(){function i(e,t){return n.push(e+" ")>x.cacheLength&&delete i[n.shift()],i[e+" "]=t}var n=[];return i}function l(e){return e[$]=!0,e}function r(e){var t=L.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function t(e,t){for(var i=e.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=t}function c(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function n(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function o(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}function a(a){return l(function(o){return o=+o,l(function(e,t){for(var i,n=a([],e.length,o),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function g(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function s(){}function m(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function d(s,e,t){var l=e.dir,c=t&&"parentNode"===l,u=H++;return e.first?function(e,t,i){for(;e=e[l];)if(1===e.nodeType||c)return s(e,t,i)}:function(e,t,i){var n,r,o,a=[z,u];if(i){for(;e=e[l];)if((1===e.nodeType||c)&&s(e,t,i))return!0}else for(;e=e[l];)if(1===e.nodeType||c){if((n=(r=(o=e[$]||(e[$]={}))[e.uniqueID]||(o[e.uniqueID]={}))[l])&&n[0]===z&&n[1]===u)return a[2]=n[2];if((r[l]=a)[2]=s(e,t,i))return!0}}}function h(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function y(e,t,i){for(var n=0,r=t.length;n<r;n++)b(e,t[n],i);return i}function _(e,t,i,n,r){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(i&&!i(o,n,r)||(a.push(o),c&&t.push(s)));return a}function w(p,f,g,m,v,e){return m&&!m[$]&&(m=w(m)),v&&!v[$]&&(v=w(v,e)),l(function(e,t,i,n){var r,o,a,s=[],l=[],c=t.length,u=e||y(f||"*",i.nodeType?[i]:i,[]),d=!p||!e&&f?u:_(u,s,p,i,n),h=g?v||(e?p:c||m)?[]:t:d;if(g&&g(d,h,i,n),m)for(r=_(h,l),m(r,[],i,n),o=r.length;o--;)(a=r[o])&&(h[l[o]]=!(d[l[o]]=a));if(e){if(v||p){if(v){for(r=[],o=h.length;o--;)(a=h[o])&&r.push(d[o]=a);v(null,h=[],r,n)}for(o=h.length;o--;)(a=h[o])&&-1<(r=v?ee(e,a):s[o])&&(e[r]=!(t[r]=a))}}else h=_(h===t?h.splice(c,h.length):h),v?v(null,t,h,n):Q.apply(t,h)})}function p(e){for(var r,t,i,n=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,l=d(function(e){return e===r},a,!0),c=d(function(e){return-1<ee(r,e)},a,!0),u=[function(e,t,i){var n=!o&&(i||t!==S)||((r=t).nodeType?l(e,t,i):c(e,t,i));return r=null,n}];s<n;s++)if(t=x.relative[e[s].type])u=[d(h(u),t)];else{if((t=x.filter[e[s].type].apply(null,e[s].matches))[$]){for(i=++s;i<n&&!x.relative[e[i].type];i++);return w(1<s&&h(u),1<s&&m(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),t,s<i&&p(e.slice(s,i)),i<n&&p(e=e.slice(i)),i<n&&m(e))}u.push(t)}return h(u)}function u(m,v){var y=0<v.length,w=0<m.length,e=function(e,t,i,n,r){var o,a,s,l=0,c="0",u=e&&[],d=[],h=S,p=e||w&&x.find.TAG("*",r),f=z+=null==h?1:Math.random()||.1,g=p.length;for(r&&(S=t===L||t||r);c!==g&&null!=(o=p[c]);c++){if(w&&o){for(a=0,t||o.ownerDocument===L||(R(o),i=!O);s=m[a++];)if(s(o,t||L,i)){n.push(o);break}r&&(z=f)}y&&((o=!s&&o)&&l--,e&&u.push(o))}if(l+=c,y&&c!==l){for(a=0;s=v[a++];)s(u,d,t,i);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=X.call(n));d=_(d)}Q.apply(n,d),r&&!e&&0<d.length&&1<l+v.length&&b.uniqueSort(n)}return r&&(z=f,S=h),u};return y?l(e):e}var f,v,x,k,j,T,E,C,S,P,A,R,L,I,O,M,D,N,B,$="sizzle"+1*new Date,F=i.document,z=0,H=0,W=e(),q=e(),U=e(),V=function(e,t){return e===t&&(A=!0),0},Y=1<<31,J={}.hasOwnProperty,G=[],X=G.pop,K=G.push,Q=G.push,Z=G.slice,ee=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ie+"*\\]",oe=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ie+"+","g"),se=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ue=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(oe),he=new RegExp("^"+ne+"$"),pe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),_e=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},xe=function(){R()};try{Q.apply(G=Z.call(F.childNodes),F.childNodes),G[F.childNodes.length].nodeType}catch(ke){Q={apply:G.length?function(e,t){K.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}for(f in v=b.support={},j=b.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},R=b.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:F;return n!==L&&9===n.nodeType&&n.documentElement&&(I=(L=n).documentElement,O=!j(L),(i=L.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",xe,!1):i.attachEvent&&i.attachEvent("onunload",xe)),v.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),v.getElementsByTagName=r(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),v.getElementsByClassName=me.test(L.getElementsByClassName),v.getById=r(function(e){return I.appendChild(e).id=$,!L.getElementsByName||!L.getElementsByName($).length}),v.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var i=t.getElementById(e);return i?[i]:[]}},x.filter.ID=function(e){var t=e.replace(be,_e);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var i=e.replace(be,_e);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===i}}),x.find.TAG=v.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):v.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;i=o[r++];)1===i.nodeType&&n.push(i);return n},x.find.CLASS=v.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&O)return t.getElementsByClassName(e)},D=[],M=[],(v.qsa=me.test(L.querySelectorAll))&&(r(function(e){I.appendChild(e).innerHTML="<a id='"+$+"'></a><select id='"+$+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+$+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+$+"+*").length||M.push(".#.+[+~]")}),r(function(e){var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(v.matchesSelector=me.test(N=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(e){v.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),D.push("!=",oe)}),M=M.length&&new RegExp(M.join("|")),D=D.length&&new RegExp(D.join("|")),t=me.test(I.compareDocumentPosition),B=t||me.test(I.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return A=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!v.sortDetached&&t.compareDocumentPosition(e)===i?e===L||e.ownerDocument===F&&B(F,e)?-1:t===L||t.ownerDocument===F&&B(F,t)?1:P?ee(P,e)-ee(P,t):0:4&i?-1:1)}:function(e,t){if(e===t)return A=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===L?-1:t===L?1:r?-1:o?1:P?ee(P,e)-ee(P,t):0;if(r===o)return c(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?c(a[n],s[n]):a[n]===F?-1:s[n]===F?1:0}),L},b.matches=function(e,t){return b(e,null,null,t)},b.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&R(e),t=t.replace(ue,"='$1']"),v.matchesSelector&&O&&!U[t+" "]&&(!D||!D.test(t))&&(!M||!M.test(t)))try{var i=N.call(e,t);if(i||v.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(ke){}return 0<b(t,L,null,[e]).length},b.contains=function(e,t){return(e.ownerDocument||e)!==L&&R(e),B(e,t)},b.attr=function(e,t){(e.ownerDocument||e)!==L&&R(e);var i=x.attrHandle[t.toLowerCase()],n=i&&J.call(x.attrHandle,t.toLowerCase())?i(e,t,!O):undefined;return n!==undefined?n:v.attributes||!O?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},b.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},b.uniqueSort=function(e){var t,i=[],n=0,r=0;if(A=!v.detectDuplicates,P=!v.sortStable&&e.slice(0),e.sort(V),A){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return P=null,e},k=b.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=k(t);return i},(x=b.selectors={cacheLength:50,createPseudo:l,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(be,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||b.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&b.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&de.test(i)&&(t=T(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(e){var t=b.attr(e,i);return null==t?"!="===n:!n||(t+="","="===n?t===r:"!="===n?t!==r:"^="===n?r&&0===t.indexOf(r):"*="===n?r&&-1<t.indexOf(r):"$="===n?r&&t.slice(-r.length)===r:"~="===n?-1<(" "+t.replace(ae," ")+" ").indexOf(r):"|="===n&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(f,e,t,g,m){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),w="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,i){var n,r,o,a,s,l,c=v!==y?"nextSibling":"previousSibling",u=e.parentNode,d=w&&e.nodeName.toLowerCase(),h=!i&&!w,p=!1;if(u){if(v){for(;c;){for(a=e;a=a[c];)if(w?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&h){for(p=(s=(n=(r=(o=(a=u)[$]||(a[$]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===z&&n[1])&&n[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(p=s=0)||l.pop();)if(1===a.nodeType&&++p&&a===e){r[f]=[z,s,p];break}}else if(h&&(p=s=(n=(r=(o=(a=e)[$]||(a[$]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===z&&n[1]),!1===p)for(;(a=++s&&a&&a[c]||(p=s=0)||l.pop())&&((w?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++p||(h&&((r=(o=a[$]||(a[$]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]=[z,p]),a!==e)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,o){var t,a=x.pseudos[e]||x.setFilters[e.toLowerCase()]||b.error("unsupported pseudo: "+e);return a[$]?a(o):1<a.length?(t=[e,e,"",o],x.setFilters.hasOwnProperty(e.toLowerCase())?l(function(e,t){for(var i,n=a(e,o),r=n.length;r--;)e[i=ee(e,n[r])]=!(t[i]=n[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:l(function(e){var n=[],r=[],s=E(e.replace(se,"$1"));return s[$]?l(function(e,t,i,n){for(var r,o=s(e,null,n,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,i){return n[0]=e,s(n,null,i,r),n[0]=null,!r.pop()}}),has:l(function(t){return function(e){return 0<b(t,e).length}}),contains:l(function(t){return t=t.replace(be,_e),function(e){return-1<(e.textContent||e.innerText||k(e)).indexOf(t)}}),lang:l(function(i){return he.test(i||"")||b.error("unsupported lang: "+i),i=i.replace(be,_e).toLowerCase(),function(e){var t;do{if(t=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===I},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,i){return[i<0?i+t:i]}),even:a(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:a(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:a(function(e,t,i){for(var n=i<0?i+t:i;0<=--n;)e.push(n);return e}),gt:a(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[f]=n(f);for(f in{submit:!0,reset:!0})x.pseudos[f]=o(f);return s.prototype=x.filters=x.pseudos,x.setFilters=new s,T=b.tokenize=function(e,t){var i,n,r,o,a,s,l,c=q[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=x.preFilter;a;){for(o in i&&!(n=le.exec(a))||(n&&(a=a.slice(n[0].length)||a),s.push(r=[])),i=!1,(n=ce.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(se," ")}),a=a.slice(i.length)),x.filter)!(n=pe[o].exec(a))||l[o]&&!(n=l[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?b.error(e):q(e,s).slice(0)},E=b.compile=function(e,t){var i,n=[],r=[],o=U[e+" "];if(!o){for(t||(t=T(e)),i=t.length;i--;)(o=p(
t[i]))[$]?n.push(o):r.push(o);(o=U(e,u(r,n))).selector=e}return o},C=b.select=function(e,t,i,n){var r,o,a,s,l,c="function"==typeof e&&e,u=!n&&T(e=c.selector||e);if(i=i||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&v.getById&&9===t.nodeType&&O&&x.relative[o[1].type]){if(!(t=(x.find.ID(a.matches[0].replace(be,_e),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=pe.needsContext.test(e)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((l=x.find[s])&&(n=l(a.matches[0].replace(be,_e),ye.test(o[0].type)&&g(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&m(o)))return Q.apply(i,n),i;break}}return(c||E(e,u))(n,t,!O,i,!t||ye.test(e)&&g(t.parentNode)||t),i},v.sortStable=$.split("").sort(V).join("")===$,v.detectDuplicates=!!A,R(),v.sortDetached=r(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||t("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),v.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||t("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||t(te,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),b}(k);pe.find=ye,pe.expr=ye.selectors,pe.expr[":"]=pe.expr.pseudos,pe.uniqueSort=pe.unique=ye.uniqueSort,pe.text=ye.getText,pe.isXMLDoc=ye.isXML,pe.contains=ye.contains;var we=function(e,t,i){for(var n=[],r=i!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&pe(e).is(i))break;n.push(e)}return n},be=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},_e=pe.expr.match.needsContext,xe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ke=/^.[^:#\[\.,]*$/;pe.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?pe.find.matchesSelector(n,e)?[n]:[]:pe.find.matches(e,pe.grep(t,function(e){return 1===e.nodeType}))},pe.fn.extend({find:function(e){var t,i=[],n=this,r=n.length;if("string"!=typeof e)return this.pushStack(pe(e).filter(function(){for(t=0;t<r;t++)if(pe.contains(n[t],this))return!0}));for(t=0;t<r;t++)pe.find(e,n[t],i);return(i=this.pushStack(1<r?pe.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&_e.test(e)?pe(e):e||[],!1).length}});var je,Te=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(pe.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||je,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):pe.isFunction(e)?"undefined"!=typeof i.ready?i.ready(e):e(pe):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),pe.makeArray(e,this));if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:Te.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof pe?t[0]:t,pe.merge(this,pe.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ne,!0)),xe.test(n[1])&&pe.isPlainObject(t))for(n in t)pe.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=ne.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return je.find(e);this.length=1,this[0]=r}return this.context=ne,this.selector=e,this}).prototype=pe.fn,je=pe(ne);var Ee=/^(?:parents|prev(?:Until|All))/,Ce={children:!0,contents:!0,next:!0,prev:!0};pe.fn.extend({has:function(e){var t,i=pe(e,this),n=i.length;return this.filter(function(){for(t=0;t<n;t++)if(pe.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,o=[],a=_e.test(e)||"string"!=typeof e?pe(e,t||this.context):0;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&pe.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(1<o.length?pe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?pe.inArray(this[0],pe(e)):pe.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(pe.uniqueSort(pe.merge(this.get(),pe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),pe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return we(e,"parentNode")},parentsUntil:function(e,t,i){return we(e,"parentNode",i)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return we(e,"nextSibling")},prevAll:function(e){return we(e,"previousSibling")},nextUntil:function(e,t,i){return we(e,"nextSibling",i)},prevUntil:function(e,t,i){return we(e,"previousSibling",i)},siblings:function(e){return be((e.parentNode||{}).firstChild,e)},children:function(e){return be(e.firstChild)},contents:function(e){return pe.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:pe.merge([],e.childNodes)}},function(n,r){pe.fn[n]=function(e,t){var i=pe.map(this,r,e);return"Until"!==n.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=pe.filter(t,i)),1<this.length&&(Ce[n]||(i=pe.uniqueSort(i)),Ee.test(n)&&(i=i.reverse())),this.pushStack(i)}});var Se,Pe,Ae=/\S+/g;for(Pe in pe.Callbacks=function(n){n="string"==typeof n?u(n):pe.extend({},n);var r,e,t,i,o=[],a=[],s=-1,l=function(){for(i=n.once,t=r=!0;a.length;s=-1)for(e=a.shift();++s<o.length;)!1===o[s].apply(e[0],e[1])&&n.stopOnFalse&&(s=o.length,e=!1);n.memory||(e=!1),r=!1,i&&(o=e?[]:"")},c={add:function(){return o&&(e&&!r&&(s=o.length-1,a.push(e)),function i(e){pe.each(e,function(e,t){pe.isFunction(t)?n.unique&&c.has(t)||o.push(t):t&&t.length&&"string"!==pe.type(t)&&i(t)})}(arguments),e&&!r&&l()),this},remove:function(){return pe.each(arguments,function(e,t){for(var i;-1<(i=pe.inArray(t,o,i));)o.splice(i,1),i<=s&&s--}),this},has:function(e){return e?-1<pe.inArray(e,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=e="",this},disabled:function(){return!o},lock:function(){return i=!0,e||c.disable(),this},locked:function(){return!!i},fireWith:function(e,t){return i||(t=[e,(t=t||[]).slice?t.slice():t],a.push(t),r||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!t}};return c},pe.extend({Deferred:function(e){var o=[["resolve","done",pe.Callbacks("once memory"),"resolved"],["reject","fail",pe.Callbacks("once memory"),"rejected"],["notify","progress",pe.Callbacks("memory")]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var r=arguments;return pe.Deferred(function(n){pe.each(o,function(e,t){var i=pe.isFunction(r[e])&&r[e];s[t[1]](function(){var e=i&&i.apply(this,arguments);e&&pe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this===a?n.promise():this,i?[e]:arguments)})}),r=null}).promise()},promise:function(e){return null!=e?pe.extend(e,a):a}},s={};return a.pipe=a.then,pe.each(o,function(e,t){var i=t[2],n=t[3];a[t[1]]=i.add,n&&i.add(function(){r=n},o[1^e][2].disable,o[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?a:this,arguments),this},s[t[0]+"With"]=i.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var r,t,i,n=0,o=re.call(arguments),a=o.length,s=1!==a||e&&pe.isFunction(e.promise)?a:0,l=1===s?e:pe.Deferred(),c=function(t,i,n){return function(e){i[t]=this,n[t]=1<arguments.length?re.call(arguments):e,n===r?l.notifyWith(i,n):--s||l.resolveWith(i,n)}};if(1<a)for(r=new Array(a),t=new Array(a),i=new Array(a);n<a;n++)o[n]&&pe.isFunction(o[n].promise)?o[n].promise().progress(c(n,t,r)).done(c(n,i,o)).fail(l.reject):--s;return s||l.resolveWith(i,o),l.promise()}}),pe.fn.ready=function(e){return pe.ready.promise().done(e),this},pe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?pe.readyWait++:pe.ready(!0)},ready:function(e){(!0===e?--pe.readyWait:pe.isReady)||(pe.isReady=!0)!==e&&0<--pe.readyWait||(Se.resolveWith(ne,[pe]),pe.fn.triggerHandler&&(pe(ne).triggerHandler("ready"),pe(ne).off("ready")))}}),pe.ready.promise=function(e){if(!Se)if(Se=pe.Deferred(),"complete"===ne.readyState||"loading"!==ne.readyState&&!ne.documentElement.doScroll)k.setTimeout(pe.ready);else if(ne.addEventListener)ne.addEventListener("DOMContentLoaded",o),k.addEventListener("load",o);else{ne.attachEvent("onreadystatechange",o),k.attachEvent("onload",o);var t=!1;try{t=null==k.frameElement&&ne.documentElement}catch(i){}t&&t.doScroll&&function n(){if(!pe.isReady){try{t.doScroll("left")}catch(i){return k.setTimeout(n,50)}r(),pe.ready()}}()}return Se.promise(e)},pe.ready.promise(),pe(de))break;de.ownFirst="0"===Pe,de.inlineBlockNeedsLayout=!1,pe(function(){var e,t,i,n;(i=ne.getElementsByTagName("body")[0])&&i.style&&(t=ne.createElement("div"),(n=ne.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",de.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(n))}),function(){var e=ne.createElement("div");de.deleteExpando=!0;try{delete e.test}catch(t){de.deleteExpando=!1}e=null}();var Re,Le=function(e){var t=pe.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return(1===i||9===i)&&(!t||!0!==t&&e.getAttribute("classid")===t)},Ie=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/([A-Z])/g;pe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?pe.cache[e[pe.expando]]:e[pe.expando])&&!c(e)},data:function(e,t,i){return n(e,t,i)},removeData:function(e,t){return a(e,t)},_data:function(e,t,i){return n(e,t,i,!0)},_removeData:function(e,t){return a(e,t,!0)}}),pe.fn.extend({data:function(e,t){var i,n,r,o=this[0],a=o&&o.attributes;if(e!==undefined)return"object"==typeof e?this.each(function(){pe.data(this,e)}):1<arguments.length?this.each(function(){pe.data(this,e,t)}):o?l(o,e,pe.data(o,e)):undefined;if(this.length&&(r=pe.data(o),1===o.nodeType&&!pe._data(o,"parsedAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&l(o,n=pe.camelCase(n.slice(5)),r[n]);pe._data(o,"parsedAttrs",!0)}return r},removeData:function(e){return this.each(function(){pe.removeData(this,e)})}}),pe.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=pe._data(e,t),i&&(!n||pe.isArray(i)?n=pe._data(e,t,pe.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=pe.queue(e,t),n=i.length,r=i.shift(),o=pe._queueHooks(e,t),a=function(){pe.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return pe._data(e,i)||pe._data(e,i,{empty:pe.Callbacks("once memory").add(function(){pe._removeData(e,t+"queue"),pe._removeData(e,i)})})}}),pe.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?pe.queue(this[0],t):i===undefined?this:this.each(function(){var e=pe.queue(this,t,i);pe._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&pe.dequeue(this,t)})},dequeue:function(e){return this.each(function(){pe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=pe.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";a--;)(i=pe._data(o[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}}),de.shrinkWrapBlocks=function(){return null!=Re?Re:(Re=!1,(t=ne.getElementsByTagName("body")[0])&&t.style?(e=ne.createElement("div"),(i=ne.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(i).appendChild(e),"undefined"!=typeof e.style.zoom&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(ne.createElement("div")).style.width="5px",Re=3!==e.offsetWidth),t.removeChild(i),Re):void 0);var e,t,i};var Me,De,Ne,Be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$e=new RegExp("^(?:([+-])=|)("+Be+")([a-z%]*)$","i"),Fe=["Top","Right","Bottom","Left"],ze=function(e,t){return e=t||e,"none"===pe.css(e,"display")||!pe.contains(e.ownerDocument,e)},He=function(e,t,i,n,r,o,a){var s=0,l=e.length,c=null==i;if("object"===pe.type(i))for(s in r=!0,i)He(e,t,s,i[s],!0,o,a);else if(n!==undefined&&(r=!0,pe.isFunction(n)||(a=!0),c&&(a?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(pe(e),i)})),t))for(;s<l;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return r?e:c?t.call(e):l?t(e[0],i):o},We=/^(?:checkbox|radio)$/i,qe=/<([\w:-]+)/,Ue=/^$|\/(?:java|ecma)script/i,Ve=/^\s+/,Ye="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";Me=ne.createElement("div"),De=ne.createDocumentFragment(),Ne=ne.createElement("input"),Me.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",de.leadingWhitespace=3===Me.firstChild.nodeType,de.tbody=!Me.getElementsByTagName("tbody").length,de.htmlSerialize=!!Me.getElementsByTagName("link").length,de.html5Clone="<:nav></:nav>"!==ne.createElement("nav").cloneNode(!0).outerHTML,Ne.type="checkbox",Ne.checked=!0,De.appendChild(Ne),de.appendChecked=Ne.checked,Me.innerHTML="<textarea>x</textarea>",de.noCloneChecked=!!Me.cloneNode(!0).lastChild.defaultValue,De.appendChild(Me),(Ne=ne.createElement("input")).setAttribute("type","radio"),Ne.setAttribute("checked","checked"),Ne.setAttribute("name","t"),Me.appendChild(Ne),de.checkClone=Me.cloneNode(!0).cloneNode(!0).lastChild.checked,de.noCloneEvent=!!Me.addEventListener,Me[pe.expando]=1,de.attributes=!Me.getAttribute(pe.expando);var Je={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:de.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Je.optgroup=Je.option,Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td;var Ge=/<|&#?\w+;/,Xe=/<tbody/i;!function(){var e,t,i=ne.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(de[e]=t in k)||(i.setAttribute(t,"t"),de[e]=!1===i.attributes[t].expando);i=null}();var Ke=/^(?:input|select|textarea)$/i,Qe=/^key/,Ze=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,et=/^(?:focusinfocus|focusoutblur)$/,tt=/^([^.]*)(?:\.(.+)|)/;pe.event={global:{},add:function(e,t,i,n,r){var o,a,s,l,c,u,d,h,p,f,g,m=pe._data(e);if(m){for(i.handler&&(i=(l=i).handler,r=l.selector),i.guid||(i.guid=pe.guid++),(a=m.events)||(a=m.events={}),(u=m.handle)||((u=m.handle=function(e){return void 0===pe||e&&pe.event.triggered===e.type?undefined:pe.event.dispatch.apply(u.elem,arguments)}).elem=e),s=(t=(t||"").match(Ae)||[""]).length;s--;)p=g=(o=tt.exec(t[s])||[])[1],f=(o[2]||"").split(".").sort(),p&&(c=pe.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,c=pe.event.special[p]||{},d=pe.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&pe.expr.match.needsContext.test(r),namespace:f.join(".")},l),(h=a[p])||((h=a[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,n,f,u)||(e.addEventListener?e.addEventListener(p,u,!1):e.attachEvent&&e.attachEvent("on"+p,u))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),pe.event.global[p]=!0);e=null}},remove:function(e,t,i,n,r){var o,a,s,l,c,u,d,h,p,f,g,m=pe.hasData(e)&&pe._data(e);if(m&&(u=m.events)){for(c=(t=(t||"").match(Ae)||[""]).length;c--;)if(p=g=(s=tt.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(d=pe.event.special[p]||{},h=u[p=(n?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)a=h[o],!r&&g!==a.origType||i&&i.guid!==a.guid||s&&!s.test(a.namespace)||n&&n!==a.selector&&("**"!==n||!a.selector)||(h.splice(o,1),a.selector&&h.delegateCount--,d.remove&&d.remove.call(e,a));l&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,m.handle)||pe.removeEvent(e,p,m.handle),delete u[p])}else for(p in u)pe.event.remove(e,p+t[c],i,n,!0);pe.isEmptyObject(u)&&(delete m.handle,pe._removeData(e,"events"))}},trigger:function(e,t,i,n){var r,o,a,s,l,c,u,d=[i||ne],h=ue.call(e,"type")?e.type:e,p=ue.call(e,"namespace")?e.namespace.split("."):[];if(a=c=i=i||ne,3!==i.nodeType&&8!==i.nodeType&&!et.test(h+pe.event.triggered)&&(-1<h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),o=h.indexOf(":")<0&&"on"+h,(e=e[pe.expando]?e:new pe.Event(h,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=i),t=null==t?[e]:pe.makeArray(t,[e]),l=pe.event.special[h]||{},n||!l.trigger||!1!==l.trigger.apply(i,t))){if(!n&&!l.noBubble&&!pe.isWindow(i)){for(s=l.delegateType||h,et.test(s+h)||(a=a.parentNode);a;a=a.parentNode)d.push(a),c=a;c===(i.ownerDocument||ne)&&d.push(c.defaultView||c.parentWindow||k)}for(u=0;(a=d[u++])&&!e.isPropagationStopped();)e.type=1<u?s:l.bindType||h,(r=(pe._data(a,"events")||{})[e.type]&&pe._data(a,"handle"))&&r.apply(a,t),(r=o&&a[o])&&r.apply&&Le(a)&&(e.result=r.apply(a,t),!1===e.result&&e.preventDefault());if(e.type=h,!n&&!e.isDefaultPrevented()&&(!l._default||!1===l._default.apply(d.pop(),t))&&Le(i)&&o&&i[h]&&!pe.isWindow(i)){(c=i[o])&&(i[o]=null),pe.event.triggered=h;try{i[h]()}catch(f){}pe.event.triggered=undefined,c&&(i[o]=c)}return e.result}},dispatch:function(e){e=pe.event.fix(e);var t,i,n,r,o,a=[],s=re.call(arguments),l=(pe._data(this,"events")||{})[e.type]||[],c=pe.event.special[e.type]||{};if((s[0]=e).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(a=pe.event.handlers.call(this,e,l),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,(n=((pe.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))!==undefined&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(n=[],i=0;i<s;i++)n[r=(o=t[i]).selector+" "]===undefined&&(n[r]=o.needsContext?-1<pe(r,this).index(l):pe.find(r,this,null,[l]).length),n[r]&&n.push(o);n.length&&a.push({elem:l,handlers:n})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[pe.expando])return e;var t,i,n,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ze.test(r)?this.mouseHooks:Qe.test(r)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,e=new pe.Event(o),t=n.length;t--;)e[i=n[t]]=o[i];return e.target||(e.target=o.srcElement||ne),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||ne).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||o===undefined||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===f()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(pe.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return pe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i){var n=pe.extend(new pe.Event,i,{type:e,isSimulated:!0});pe.event.trigger(n,null,t),n.isDefaultPrevented()&&i.preventDefault()}},pe.removeEvent=ne.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)}:function(e,t,i){var n="on"+t;e.detachEvent&&("undefined"==typeof e[n]&&(e[n]=null),e.detachEvent(n,i))},pe.Event=function(e,t){if(!(this instanceof pe.Event))return new pe.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?h:p):this.type=e,t&&pe.extend(this,t),this.timeStamp=e&&e.timeStamp||pe.now(),this[pe.expando]=!0},pe.Event.prototype={constructor:pe.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},pe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,o){pe.event.special[e]={delegateType:o,bindType:o,handle:function(e){var t,i=this,n=e.relatedTarget,r=e.handleObj;return n&&(n===i||pe.contains(i,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=o),t}}}),de.submit||(pe.event.special.submit={setup:function(){if(pe.nodeName(this,"form"))return!1;pe.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=pe.nodeName(t,"input")||pe.nodeName(t,"button")?pe.prop(t,"form"):undefined;i&&!pe._data(i,"submit")&&(pe.event.add(i,"submit._submit",function(e){e._submitBubble=!0}),pe._data(i,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&pe.event.simulate("submit",this.parentNode,e))},teardown:function(){if(pe.nodeName(this,"form"))return!1;pe.event.remove(this,"._submit")}}),de.change||(pe.event.special.change={setup:function(){if(Ke.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(pe.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),pe.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),pe.event.simulate("change",this,e)})),!1;pe.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ke.test(t.nodeName)&&!pe._data(t,"change")&&(pe.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||pe.event.simulate("change",this.parentNode,e)}),pe._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return pe.event.remove(this,"._change"),!Ke.test(this.nodeName)}}),de.focusin||pe.each({focus:"focusin",blur:"focusout"},function(i,n){var r=function(e){pe.event.simulate(n,e.target,pe.event.fix(e))};pe.event.special[n]={setup:function(){var e=this.ownerDocument||this,t=pe._data(e,n);t||e.addEventListener(i,r,!0),pe._data(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=pe._data(e,n)-1;t?pe._data(e,n,t):(e.removeEventListener(i,r,!0),pe._removeData(e,n))}}}),pe.fn.extend({on:function(e,t,i,n){return b(this,e,t,i,n)},one:function(e,t,i,n){return b(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,pe(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=undefined),!1===i&&(i=p),this.each(function(){pe.event.remove(this,e,i,t)});for(r in e)this.off(r,t,e[r]);return this},trigger:function(e,t){return this.each(function(){pe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return pe.event.trigger(e,t,i,!0)}});var it=/ jQuery\d+="(?:null|\d+)"/g,nt=new RegExp("<(?:"+Ye+")[\\s/>]","i"),rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ot=/<script|<style|<link/i,at=/checked\s*(?:[^=]|=\s*.checked.)/i,st=/^true\/(.*)/,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ct=m(ne).appendChild(ne.createElement("div"));pe.extend({htmlPrefilter:function(e){return e.replace(rt,"<$1></$2>")},clone:function(e,t,i){var n,r,o,a,s,l=pe.contains(e.ownerDocument,e);if(de.html5Clone||pe.isXMLDoc(e)||!nt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(ct.innerHTML=e.outerHTML,ct.removeChild(o=ct.firstChild)),!(de.noCloneEvent&&de.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||pe.isXMLDoc(e)))for(n=v(o),s=v(e),a=0;null!=(r=s[a]);++a)n[a]&&E(r,n[a]);if(t)if(i)for(s=s||v(e),n=n||v(o),a=0;null!=(r=s[a]);a++)T(r,n[a]);else T(e,o);return 0<(n=v(o,"script")).length&&y(n,!l&&v(e,"script")),n=s=r=null,o},cleanData:function(e,t){for(var i,n,r,o,a=0,s=pe.expando,l=pe.cache,c=de.attributes,u=pe.event.special;null!=(i=e[a]);a++)if((t||Le(i))&&(o=(r=i[s])&&l[r])){if(o.events)for(n in o.events)u[n]?pe.event.remove(i,n):pe.removeEvent(i,n,o.handle);l[r]&&(delete l[r],c||"undefined"==typeof i.removeAttribute?i[s]=undefined:i.removeAttribute(s),ie.push(r))}}}),pe.fn.extend({domManip:C,detach:function(e){return S(this,e,!0)},remove:function(e){return S(this,e)},text:function(e){return He(this,function(e){return e===undefined?pe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ne).createTextNode(e))},null,e,arguments.length)},append:function(){return C(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_(this,e).appendChild(e)})},prepend:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=_(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&pe.cleanData(v(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&pe.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return pe.clone(this,e,t)})},html:function(e){return He(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined)return 1===t.nodeType?t.innerHTML.replace(it,""):undefined;if("string"==typeof e&&!ot.test(e)&&(de.htmlSerialize||!nt.test(e))&&(de.leadingWhitespace||!Ve.test(e))&&!Je[(qe.exec(e)||["",""])[1].toLowerCase()]){e=pe.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(pe.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return C(this,arguments,function(e){var t=this.parentNode;pe.inArray(this,i)<0&&(pe.cleanData(v(this)),t&&t.replaceChild(e,this))},i)}}),pe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){pe.fn[e]=function(e){for(var t,i=0,n=[],r=pe(e),o=r.length-1;i<=o;i++)t=i===o?this:this.clone(!0),pe(r[i])[a](t),ae.apply(n,t.get());return this.pushStack(n)}});var ut,dt={HTML:"block",BODY:"block"},ht=/^margin/,pt=new RegExp("^("+Be+")(?!px)[a-z%]+$","i"),ft=function(e,t,i,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=i.apply(e,n||[]),t)e.style[o]=a[o];return r},gt=ne.documentElement;!function(){function e(){var e,t,i=ne.documentElement;i.appendChild(c),u.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",n=o=l=!1,r=s=!0,k.getComputedStyle&&(t=k.getComputedStyle(u),n="1%"!==(t||{}).top,l="2px"===(t||{}).marginLeft,o="4px"===(t||{width:"4px"}).width,u.style.marginRight="50%",r="4px"===(t||{marginRight:"4px"}).marginRight,(e=u.appendChild(ne.createElement("div"))).style.cssText=u.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",u.style.width="1px",s=!parseFloat((k.getComputedStyle(e)||{}).marginRight),u.removeChild(e)),u.style.display="none",(a=0===u.getClientRects().length)&&(u.style.display="",u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",u.childNodes[0].style.borderCollapse="separate",(e=u.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",a=0===e[0].offsetHeight)),i.removeChild(c)}var n,r,o,a,s,l,c=ne.createElement("div"),u=ne.createElement("div");u.style&&(u.style.cssText="float:left;opacity:.5",de.opacity="0.5"===u.style.opacity,de.cssFloat=!!u.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",de.clearCloneStyle="content-box"===u.style.backgroundClip,(c=ne.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",u.innerHTML="",c.appendChild(u),de.boxSizing=""===u.style.boxSizing||""===u.style.MozBoxSizing||""===u.style.WebkitBoxSizing,pe.extend(de,{reliableHiddenOffsets:function(){return null==n&&e(),a},boxSizingReliable:function(){return null==n&&e(),o},pixelMarginRight:function(){return null==n&&e(),r},pixelPosition:function(){return null==n&&e(),n},reliableMarginRight:function(){return null==n&&e(),s},reliableMarginLeft:function(){return null==n&&e(),l}}))}();var mt,vt,yt=/^(top|right|bottom|left)$/;k.getComputedStyle?(mt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=k),t.getComputedStyle(e)},vt=function(e,t,i){var n,r,o,a,s=e.style;return""!==(a=(i=i||mt(e))?i.getPropertyValue(t)||i[t]:undefined)&&a!==undefined||pe.contains(e.ownerDocument,e)||(a=pe.style(e,t)),i&&!de.pixelMarginRight()&&pt.test(a)&&ht.test(t)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o),a===undefined?a:a+""}):gt.currentStyle&&(mt=function(e){return e.currentStyle},vt=function(e,t,i){var n,r,o,a,s=e.style;return null==(a=(i=i||mt(e))?i[t]:undefined)&&s&&s[t]&&(a=s[t]),pt.test(a)&&!yt.test(t)&&(n=s.left,(o=(r=e.runtimeStyle)&&r.left)&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=n,o&&(r.left=o)),a===undefined?a:a+""||"auto"});var wt=/alpha\([^)]*\)/i,bt=/opacity\s*=\s*([^)]*)/i,_t=/^(none|table(?!-c[ea]).+)/,xt=new RegExp("^("+Be+")(.*)$","i"),kt={position:"absolute",visibility:"hidden",display:"block"},jt={letterSpacing:"0",fontWeight:"400"},Tt=["Webkit","O","Moz","ms"],Et=ne.createElement("div").style;pe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=vt(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":de.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=pe.camelCase(t),l=e.style;if(t=pe.cssProps[s]||(pe.cssProps[s]=L(s)||s),a=pe.cssHooks[t]||pe.cssHooks[s],i===undefined
)return a&&"get"in a&&(r=a.get(e,!1,n))!==undefined?r:l[t];if("string"===(o=typeof i)&&(r=$e.exec(i))&&r[1]&&(i=d(e,t,r),o="number"),null!=i&&i==i&&("number"===o&&(i+=r&&r[3]||(pe.cssNumber[s]?"":"px")),de.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&(i=a.set(e,i,n))===undefined)))try{l[t]=i}catch(c){}}},css:function(e,t,i,n){var r,o,a,s=pe.camelCase(t);return t=pe.cssProps[s]||(pe.cssProps[s]=L(s)||s),(a=pe.cssHooks[t]||pe.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,i)),o===undefined&&(o=vt(e,t,n)),"normal"===o&&t in jt&&(o=jt[t]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),pe.each(["height","width"],function(e,r){pe.cssHooks[r]={get:function(e,t,i){if(t)return _t.test(pe.css(e,"display"))&&0===e.offsetWidth?ft(e,kt,function(){return D(e,r,i)}):D(e,r,i)},set:function(e,t,i){var n=i&&mt(e);return O(e,t,i?M(e,r,i,de.boxSizing&&"border-box"===pe.css(e,"boxSizing",!1,n),n):0)}}}),de.opacity||(pe.cssHooks.opacity={get:function(e,t){return bt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,r=pe.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||i.filter||"";((i.zoom=1)<=t||""===t)&&""===pe.trim(o.replace(wt,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=wt.test(o)?o.replace(wt,r):o+" "+r)}}),pe.cssHooks.marginRight=R(de.reliableMarginRight,function(e,t){if(t)return ft(e,{display:"inline-block"},vt,[e,"marginRight"])}),pe.cssHooks.marginLeft=R(de.reliableMarginLeft,function(e,t){if(t)return(parseFloat(vt(e,"marginLeft"))||(pe.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-ft(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),pe.each({margin:"",padding:"",border:"Width"},function(r,o){pe.cssHooks[r+o]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+Fe[t]+o]=n[t]||n[t-2]||n[0];return i}},ht.test(r)||(pe.cssHooks[r+o].set=O)}),pe.fn.extend({css:function(e,t){return He(this,function(e,t,i){var n,r,o={},a=0;if(pe.isArray(t)){for(n=mt(e),r=t.length;a<r;a++)o[t[a]]=pe.css(e,t[a],!1,n);return o}return i!==undefined?pe.style(e,t,i):pe.css(e,t)},e,t,1<arguments.length)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ze(this)?pe(this).show():pe(this).hide()})}}),(pe.Tween=N).prototype={constructor:N,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||pe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(pe.cssNumber[i]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,i=N.propHooks[this.prop];return this.options.duration?this.pos=t=pe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=pe.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){pe.fx.step[e.prop]?pe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[pe.cssProps[e.prop]]&&!pe.cssHooks[e.prop]?e.elem[e.prop]=e.now:pe.style(e.elem,e.prop,e.now+e.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},pe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},pe.fx=N.prototype.init,pe.fx.step={};var Ct,St,Pt,At,Rt,Lt,It,Ot=/^(?:toggle|show|hide)$/,Mt=/queueHooks$/;pe.Animation=pe.extend(W,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return d(i.elem,e,$e.exec(t),i),i}]},tweener:function(e,t){pe.isFunction(e)?(t=e,e=["*"]):e=e.match(Ae);for(var i,n=0,r=e.length;n<r;n++)i=e[n],W.tweeners[i]=W.tweeners[i]||[],W.tweeners[i].unshift(t)},prefilters:[z],prefilter:function(e,t){t?W.prefilters.unshift(e):W.prefilters.push(e)}}),pe.speed=function(e,t,i){var n=e&&"object"==typeof e?pe.extend({},e):{complete:i||!i&&t||pe.isFunction(e)&&e,duration:e,easing:i&&t||t&&!pe.isFunction(t)&&t};return n.duration=pe.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in pe.fx.speeds?pe.fx.speeds[n.duration]:pe.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){pe.isFunction(n.old)&&n.old.call(this),n.queue&&pe.dequeue(this,n.queue)},n},pe.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ze).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){var r=pe.isEmptyObject(t),o=pe.speed(e,i,n),a=function(){var e=W(this,pe.extend({},t),o);(r||pe._data(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof r&&(o=e,e=r,r=undefined),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=pe.timers,n=pe._data(this);if(t)n[t]&&n[t].stop&&a(n[t]);else for(t in n)n[t]&&n[t].stop&&Mt.test(t)&&a(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(o),e=!1,i.splice(t,1));!e&&o||pe.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=pe._data(this),i=t[a+"queue"],n=t[a+"queueHooks"],r=pe.timers,o=i?i.length:0;for(t.finish=!0,pe.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),pe.each(["toggle","show","hide"],function(e,n){var r=pe.fn[n];pe.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate($(n,!0),e,t,i)}}),pe.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){pe.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),pe.timers=[],pe.fx.tick=function(){var e,t=pe.timers,i=0;for(Ct=pe.now();i<t.length;i++)(e=t[i])()||t[i]!==e||t.splice(i--,1);t.length||pe.fx.stop(),Ct=undefined},pe.fx.timer=function(e){pe.timers.push(e),e()?pe.fx.start():pe.timers.pop()},pe.fx.interval=13,pe.fx.start=function(){St||(St=k.setInterval(pe.fx.tick,pe.fx.interval))},pe.fx.stop=function(){k.clearInterval(St),St=null},pe.fx.speeds={slow:600,fast:200,_default:400},pe.fn.delay=function(n,e){return n=pe.fx&&pe.fx.speeds[n]||n,e=e||"fx",this.queue(e,function(e,t){var i=k.setTimeout(e,n);t.stop=function(){k.clearTimeout(i)}})},At=ne.createElement("input"),Rt=ne.createElement("div"),Lt=ne.createElement("select"),It=Lt.appendChild(ne.createElement("option")),(Rt=ne.createElement("div")).setAttribute("className","t"),Rt.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Pt=Rt.getElementsByTagName("a")[0],At.setAttribute("type","checkbox"),Rt.appendChild(At),(Pt=Rt.getElementsByTagName("a")[0]).style.cssText="top:1px",de.getSetAttribute="t"!==Rt.className,de.style=/top/.test(Pt.getAttribute("style")),de.hrefNormalized="/a"===Pt.getAttribute("href"),de.checkOn=!!At.value,de.optSelected=It.selected,de.enctype=!!ne.createElement("form").enctype,Lt.disabled=!0,de.optDisabled=!It.disabled,(At=ne.createElement("input")).setAttribute("value",""),de.input=""===At.getAttribute("value"),At.value="t",At.setAttribute("type","radio"),de.radioValue="t"===At.value;var Dt=/\r/g,Nt=/[\x20\t\r\n\f]+/g;pe.fn.extend({val:function(i){var n,e,r,t=this[0];return arguments.length?(r=pe.isFunction(i),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?i.call(this,e,pe(this).val()):i)?t="":"number"==typeof t?t+="":pe.isArray(t)&&(t=pe.map(t,function(e){return null==e?"":e+""})),(n=pe.valHooks[this.type]||pe.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&n.set(this,t,"value")!==undefined||(this.value=t))})):t?(n=pe.valHooks[t.type]||pe.valHooks[t.nodeName.toLowerCase()])&&"get"in n&&(e=n.get(t,"value"))!==undefined?e:"string"==typeof(e=t.value)?e.replace(Dt,""):null==e?"":e:void 0}}),pe.extend({valHooks:{option:{get:function(e){var t=pe.find.attr(e,"value");return null!=t?t:pe.trim(pe.text(e)).replace(Nt," ")}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,o="select-one"===e.type||r<0,a=o?null:[],s=o?r+1:n.length,l=r<0?s:o?r:0;l<s;l++)if(((i=n[l]).selected||l===r)&&(de.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!pe.nodeName(i.parentNode,"optgroup"))){if(t=pe(i).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var i,n,r=e.options,o=pe.makeArray(t),a=r.length;a--;)if(n=r[a],-1<pe.inArray(pe.valHooks.option.get(n),o))try{n.selected=i=!0}catch(s){n.scrollHeight}else n.selected=!1;return i||(e.selectedIndex=-1),r}}}}),pe.each(["radio","checkbox"],function(){pe.valHooks[this]={set:function(e,t){if(pe.isArray(t))return e.checked=-1<pe.inArray(pe(e).val(),t)}},de.checkOn||(pe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Bt,$t,Ft=pe.expr.attrHandle,zt=/^(?:checked|selected)$/i,Ht=de.getSetAttribute,Wt=de.input;pe.fn.extend({attr:function(e,t){return He(this,pe.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){pe.removeAttr(this,e)})}}),pe.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?pe.prop(e,t,i):(1===o&&pe.isXMLDoc(e)||(t=t.toLowerCase(),r=pe.attrHooks[t]||(pe.expr.match.bool.test(t)?$t:Bt)),i!==undefined?null===i?void pe.removeAttr(e,t):r&&"set"in r&&(n=r.set(e,i,t))!==undefined?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=pe.find.attr(e,t))?undefined:n)},attrHooks:{type:{set:function(e,t){if(!de.radioValue&&"radio"===t&&pe.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n,r=0,o=t&&t.match(Ae);if(o&&1===e.nodeType)for(;i=o[r++];)n=pe.propFix[i]||i,pe.expr.match.bool.test(i)?Wt&&Ht||!zt.test(i)?e[n]=!1:e[pe.camelCase("default-"+i)]=e[n]=!1:pe.attr(e,i,""),e.removeAttribute(Ht?i:n)}}),$t={set:function(e,t,i){return!1===t?pe.removeAttr(e,i):Wt&&Ht||!zt.test(i)?e.setAttribute(!Ht&&pe.propFix[i]||i,i):e[pe.camelCase("default-"+i)]=e[i]=!0,i}},pe.each(pe.expr.match.bool.source.match(/\w+/g),function(e,t){var o=Ft[t]||pe.find.attr;Wt&&Ht||!zt.test(t)?Ft[t]=function(e,t,i){var n,r;return i||(r=Ft[t],Ft[t]=n,n=null!=o(e,t,i)?t.toLowerCase():null,Ft[t]=r),n}:Ft[t]=function(e,t,i){if(!i)return e[pe.camelCase("default-"+t)]?t.toLowerCase():null}}),Wt&&Ht||(pe.attrHooks.value={set:function(e,t,i){if(!pe.nodeName(e,"input"))return Bt&&Bt.set(e,t,i);e.defaultValue=t}}),Ht||(Bt={set:function(e,t,i){var n=e.getAttributeNode(i);if(n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i))return t}},Ft.id=Ft.name=Ft.coords=function(e,t,i){var n;if(!i)return(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},pe.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);if(i&&i.specified)return i.value},set:Bt.set},pe.attrHooks.contenteditable={set:function(e,t,i){Bt.set(e,""!==t&&t,i)}},pe.each(["width","height"],function(e,i){pe.attrHooks[i]={set:function(e,t){if(""===t)return e.setAttribute(i,"auto"),t}}})),de.style||(pe.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var qt=/^(?:input|select|textarea|button|object)$/i,Ut=/^(?:a|area)$/i;pe.fn.extend({prop:function(e,t){return He(this,pe.prop,e,t,1<arguments.length)},removeProp:function(t){return t=pe.propFix[t]||t,this.each(function(){try{this[t]=undefined,delete this[t]}catch(e){}})}}),pe.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&pe.isXMLDoc(e)||(t=pe.propFix[t]||t,r=pe.propHooks[t]),i!==undefined?r&&"set"in r&&(n=r.set(e,i,t))!==undefined?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=pe.find.attr(e,"tabindex");return t?parseInt(t,10):qt.test(e.nodeName)||Ut.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),de.hrefNormalized||pe.each(["href","src"],function(e,t){pe.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),de.optSelected||(pe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),pe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pe.propFix[this.toLowerCase()]=this}),de.enctype||(pe.propFix.enctype="encoding");var Vt=/[\t\r\n\f]/g;pe.fn.extend({addClass:function(t){var e,i,n,r,o,a,s,l=0;if(pe.isFunction(t))return this.each(function(e){pe(this).addClass(t.call(this,e,q(this)))});if("string"==typeof t&&t)for(e=t.match(Ae)||[];i=this[l++];)if(r=q(i),n=1===i.nodeType&&(" "+r+" ").replace(Vt," ")){for(a=0;o=e[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r!==(s=pe.trim(n))&&pe.attr(i,"class",s)}return this},removeClass:function(t){var e,i,n,r,o,a,s,l=0;if(pe.isFunction(t))return this.each(function(e){pe(this).removeClass(t.call(this,e,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Ae)||[];i=this[l++];)if(r=q(i),n=1===i.nodeType&&(" "+r+" ").replace(Vt," ")){for(a=0;o=e[a++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");r!==(s=pe.trim(n))&&pe.attr(i,"class",s)}return this},toggleClass:function(r,t){var o=typeof r;return"boolean"==typeof t&&"string"===o?t?this.addClass(r):this.removeClass(r):pe.isFunction(r)?this.each(function(e){pe(this).toggleClass(r.call(this,e,q(this),t),t)}):this.each(function(){var e,t,i,n;if("string"===o)for(t=0,i=pe(this),n=r.match(Ae)||[];e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else r!==undefined&&"boolean"!==o||((e=q(this))&&pe._data(this,"__className__",e),pe.attr(this,"class",e||!1===r?"":pe._data(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+q(i)+" ").replace(Vt," ").indexOf(t))return!0;return!1}}),pe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,i){pe.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),pe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Yt=k.location,Jt=pe.now(),Gt=/\?/,Xt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;pe.parseJSON=function(e){if(k.JSON&&k.JSON.parse)return k.JSON.parse(e+"");var r,o=null,t=pe.trim(e+"");return t&&!pe.trim(t.replace(Xt,function(e,t,i,n){return r&&t&&(o=0),0===o?e:(r=i||t,o+=!n-!i,"")}))?Function("return "+t)():pe.error("Invalid JSON: "+e)},pe.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{k.DOMParser?t=(new k.DOMParser).parseFromString(e,"text/xml"):((t=new k.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(i){t=undefined}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||pe.error("Invalid XML: "+e),t};var Kt=/#.*$/,Qt=/([?&])_=[^&]*/,Zt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ei=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ti=/^(?:GET|HEAD)$/,ii=/^\/\//,ni=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ri={},oi={},ai="*/".concat("*"),si=Yt.href,li=ni.exec(si.toLowerCase())||[];pe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:si,type:"GET",isLocal:ei.test(li[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ai,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":pe.parseJSON,"text xml":pe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Y(Y(e,pe.ajaxSettings),t):Y(pe.ajaxSettings,e)},ajaxPrefilter:U(ri),ajaxTransport:U(oi),ajax:function(e,t){function i(e,t,i,n){var r,o,a,s,l,c=t;2!==_&&(_=2,h&&k.clearTimeout(h),f=undefined,d=n||"",x.readyState=0<e?4:0,r=200<=e&&e<300||304===e,i&&(s=J(g,x,i)),s=G(g,s,x,r),r?(g.ifModified&&((l=x.getResponseHeader("Last-Modified"))&&(pe.lastModified[u]=l),(l=x.getResponseHeader("etag"))&&(pe.etag[u]=l)),204===e||"HEAD"===g.type?c="nocontent":304===e?c="notmodified":(c=s.state,o=s.data,r=!(a=s.error))):(a=c,!e&&c||(c="error",e<0&&(e=0))),x.status=e,x.statusText=(t||c)+"",r?y.resolveWith(m,[o,c,x]):y.rejectWith(m,[x,c,a]),x.statusCode(b),b=undefined,p&&v.trigger(r?"ajaxSuccess":"ajaxError",[x,g,r?o:a]),w.fireWith(m,[x,c]),p&&(v.trigger("ajaxComplete",[x,g]),--pe.active||pe.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,r,u,d,h,p,f,o,g=pe.ajaxSetup({},t),m=g.context||g,v=g.context&&(m.nodeType||m.jquery)?pe(m):pe.event,y=pe.Deferred(),w=pe.Callbacks("once memory"),b=g.statusCode||{},a={},s={},_=0,l="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!o)for(o={};t=Zt.exec(d);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?d:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return _||(e=s[i]=s[i]||e,a[e]=t),this},overrideMimeType:function(e){return _||(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)b[t]=[b[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||l;return f&&f.abort(t),i(0,t),this}};if(y.promise(x).complete=w.add,x.success=x.done,x.error=x.fail,g.url=((e||g.url||si)+"").replace(Kt,"").replace(ii,li[1]+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=pe.trim(g.dataType||"*").toLowerCase().match(Ae)||[""],null==g.crossDomain&&(n=ni.exec(g.url.toLowerCase()),g.crossDomain=!(!n||n[1]===li[1]&&n[2]===li[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(li[3]||("http:"===li[1]?"80":"443")))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=pe.param(g.data,g.traditional)),V(ri,g,t,x),2===_)return x;for(r in(p=pe.event&&g.global)&&0==pe.active++&&pe.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!ti.test(g.type),u=g.url,g.hasContent||(g.data&&(u=g.url+=(Gt.test(u)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=Qt.test(u)?u.replace(Qt,"$1_="+Jt++):u+(Gt.test(u)?"&":"?")+"_="+Jt++)),g.ifModified&&(pe.lastModified[u]&&x.setRequestHeader("If-Modified-Since",pe.lastModified[u]),pe.etag[u]&&x.setRequestHeader("If-None-Match",pe.etag[u])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&x.setRequestHeader("Content-Type",g.contentType),x.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+ai+"; q=0.01":""):g.accepts["*"]),g.headers)x.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(m,x,g)||2===_))return x.abort();for(r in l="abort",{success:1,error:1,complete:1})x[r](g[r]);if(f=V(oi,g,t,x)){if(x.readyState=1,p&&v.trigger("ajaxSend",[x,g]),2===_)return x;g.async&&0<g.timeout&&(h=k.setTimeout(function(){x.abort("timeout")},g.timeout));try{_=1,f.send(a,i)}catch(c){if(!(_<2))throw c;i(-1,c)}}else i(-1,"No Transport");return x},getJSON:function(e,t,i){return pe.get(e,t,i,"json")},getScript:function(e,t){return pe.get(e,undefined,t,"script")}}),pe.each(["get","post"],function(e,r){pe[r]=function(e,t,i,n){return pe.isFunction(t)&&(n=n||i,i=t,t=undefined),pe.ajax(pe.extend({url:e,type:r,dataType:n,data:t,success:i},pe.isPlainObject(e)&&e))}}),pe._evalUrl=function(e){return pe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pe.fn.extend({wrapAll:function(t){if(pe.isFunction(t))return this.each(function(e){pe(this).wrapAll(t.call(this,e))});if(this[0]){var e=pe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(i){return pe.isFunction(i)?this.each(function(e){pe(this).wrapInner(i.call(this,e))}):this.each(function(){var e=pe(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=pe.isFunction(t);return this.each(function(e){pe(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){pe.nodeName(this,"body")||pe(this).replaceWith(this.childNodes)}).end()}}),pe.expr.filters.hidden=function(e){return de.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:K(e)},pe.expr.filters.visible=function(e){return!pe.expr.filters.hidden(e)};var ci=/%20/g,ui=/\[\]$/,di=/\r?\n/g,hi=/^(?:submit|button|image|reset|file)$/i,pi=/^(?:input|select|textarea|keygen)/i;pe.param=function(e,t){var i,n=[],r=function(e,t){t=pe.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=pe.ajaxSettings&&pe.ajaxSettings.traditional),pe.isArray(e)||e.jquery&&!pe.isPlainObject(e))pe.each(e,function(){r(this.name,this.value)});else for(i in e)Q(i,e[i],t,r);return n.join("&").replace(ci,"+")},pe.fn.extend({serialize:function(){return pe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=pe.prop(this,"elements");return e?pe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!pe(this).is(":disabled")&&pi.test(this.nodeName)&&!hi.test(e)&&(this.checked||!We.test(e))}).map(function(e,t){var i=pe(this).val();return null==i?null:pe.isArray(i)?pe.map(i,function(e){return{name:t.name,value:e.replace(di,"\r\n")}}):{name:t.name,value:i.replace(di,"\r\n")}}).get()}}),pe.ajaxSettings.xhr=k.ActiveXObject!==undefined?function(){return this.isLocal?ee():8<ne.documentMode?Z():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()||ee()}:Z;var fi=0,gi={},mi=pe.ajaxSettings.xhr();k.attachEvent&&k.attachEvent("onunload",function(){for(var e in gi)gi[e](undefined,!0)}),de.cors=!!mi&&"withCredentials"in mi,(mi=de.ajax=!!mi)&&pe.ajaxTransport(function(c){var u;if(!c.crossDomain||de.cors)return{send:function(e,a){var t,s=c.xhr(),l=++fi;if(s.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(t in c.xhrFields)s[t]=c.xhrFields[t];for(t in c.mimeType&&s.overrideMimeType&&s.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)e[t]!==undefined&&s.setRequestHeader(t,e[t]+"");s.send(c.hasContent&&c.data||null),u=function(e,t){var i,n,r;if(u&&(t||4===s.readyState))if(delete gi[l],u=undefined,s.onreadystatechange=pe.noop,t)4!==s.readyState&&s.abort();else{r={},i=s.status,"string"==typeof s.responseText&&(r.text=s.responseText);try{n=s.statusText}catch(o){n=""}i||!c.isLocal||c.crossDomain?1223===i&&(i=204):i=r.text?200:404}r&&a(i,n,r,s.getAllResponseHeaders())},c.async?4===s.readyState?k.setTimeout(u):s.onreadystatechange=gi[l]=u:u()},abort:function(){u&&u(undefined,!0)}}}),pe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return pe.globalEval(e),e}}}),pe.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),pe.ajaxTransport("script",function(t){if(t.crossDomain){var n,r=ne.head||pe("head")[0]||ne.documentElement;return{send:function(e,i){(n=ne.createElement("script")).async=!0,t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(undefined,!0)}}}});var vi=[],yi=/(=)\?(?=&|$)|\?\?/;pe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=vi.pop()||pe.expando+"_"+Jt++;return this[e]=!0,e}}),pe.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,o,a=!1!==e.jsonp&&(yi.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&yi.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=pe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(yi,"$1"+n):!1!==e.jsonp&&(e.url+=(Gt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||pe.error(n+" was not called"),o[0]},e.dataTypes[0]="json",r=k[n],k[n]=function(){o=arguments},i.always(function(){r===undefined?pe(k).removeProp(n):k[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,vi.push(n)),o&&pe.isFunction(r)&&r(o[0]),o=r=undefined}),"script"}),pe.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||ne;var n=xe.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=g([e],t,r),r&&r.length&&pe(r).remove(),pe.merge([],n.childNodes))};var wi=pe.fn.load;pe.fn.load=function(e,t,i){if("string"!=typeof e&&wi)return wi.apply(this,arguments);var n,r,o,a=this,s=e.indexOf(" ");return-1<s&&(n=pe.trim(e.slice(s,e.length)),e=e.slice(0,s)),pe.isFunction(t)?(i=t,t=undefined):t&&"object"==typeof t&&(r="POST"),0<a.length&&pe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?pe("<div>").append(pe.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},pe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){pe.fn[t]=function(e){return this.on(t,e)}}),pe.expr.filters.animated=function(t){return pe.grep(pe.timers,function(e){return t===e.elem}).length},pe.offset={setOffset:function(e,t,i){var n,r,o,a,s,l,c=pe.css(e,"position"),u=pe(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=pe.css(e,"top"),l=pe.css(e,"left"),("absolute"===c||"fixed"===c)&&-1<pe.inArray("auto",[o,l])?(a=(n=u.position()).top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),pe.isFunction(t)&&(t=t.call(e,i,pe.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):u.css(d)}},pe.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){pe.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},r=this[0],o=r&&r.ownerDocument;return o?(e=o.documentElement,pe.contains(e,r)?("undefined"!=typeof r.getBoundingClientRect&&(n=r.getBoundingClientRect()),i=te(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===pe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),pe.nodeName(e[0],"html")||(i=e.offset()),i.top+=pe.css(e[0],"borderTopWidth",!0),i.left+=pe.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-pe.css(n,"marginTop",!0),left:t.left-i.left-pe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!pe.nodeName(e,"html")&&"static"===pe.css(e,"position");)e=e.offsetParent;return e||gt})}}),pe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o=/Y/.test(r);pe.fn[t]=function(e){return He(this,function(e,t,i){var n=te(e);if(i===undefined)return n?r in n?n[r]:n.document.documentElement[t]:e[t];n?n.scrollTo(o?pe(n).scrollLeft():i,o?i:pe(n).scrollTop()):e[t]=i},t,e,arguments.length,null)}}),pe.each(["top","left"],function(e,i){pe.cssHooks[i]=R(de.pixelPosition,function(e,t){if(t)return t=vt(e,i),pt.test(t)?pe(e).position()[i]+"px":t})}),pe.each({Height:"height",Width:"width"},function(o,a){pe.each({padding:"inner"+o,content:a,"":"outer"+o},function(n,e){pe.fn[e]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return He(this,function(e,t,i){var n;return pe.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+o],n["scroll"+o],e.body["offset"+o],n["offset"+o],n["client"+o])):i===undefined?pe.css(e,t,r):pe.style(e,t,i,r)},a,i?e:undefined,i,null)}})}),pe.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),pe.fn.size=function(){return this.length},pe.fn.andSelf=pe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pe});var bi=k.jQuery,_i=k.$;return pe.noConflict=function(e){return k.$===pe&&(k.$=_i),e&&k.jQuery===pe&&(k.jQuery=bi),pe},e||(k.jQuery=k.$=pe),pe}),Blacklight=function(){var t=new Array;return{onLoad:function(e){t.push(e)},activate:function(){for(var e=0;e<t.length;e++)t[e].call()}}}(),"undefined"!=typeof Turbolinks&&Turbolinks.supported?Turbolinks.BrowserAdapter?$(document).on("turbolinks:load",function(){Blacklight.activate()}):($(document).on("page:load",function(){Blacklight.activate()}),$(document).ready(function(){Blacklight.activate()})):$(document).ready(function(){Blacklight.activate()}),Blacklight.onLoad(function(){"use strict";$('[data-autocomplete-enabled="true"]').each(function(){var e=$(this);if(!e.hasClass("tt-hint")){var t=e.data().autocompletePath,i=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:t+"?q=%QUERY",wildcard:"%QUERY"}});i.initialize(),e.typeahead({hint:!0,highlight:!0,minLength:2},{name:"terms",displayKey:"term",source:i.ttAdapter()})}})}),function(u){u.fn.bl_checkbox_submit=function(c){return this.each(function(){function n(e){s.prop("checked",e),l.toggleClass("checked",e),e?(o.find("input[name=_method]").val("delete"),t.text(o.attr("data-present"))):(o.find("input[name=_method]").val("put"),t.text(o.attr("data-absent")))}var r=u.extend({},u.fn.bl_checkbox_submit.defaults,c),o=u(this);o.children().hide(),o.find("input[type=submit]").remove(),o.addClass("form-horizontal");var e=o.attr("data-doc-id")||Math.random(),a=0!=o.find("input[name=_method][value=delete]").length,s=u('<input type="checkbox">').addClass(r.css_class).attr("id",r.css_class+"_"+e),l=u("<label>").addClass(r.css_class).attr("for",r.css_class+"_"+e).attr("title",o.attr("title")||""),t=u("<span>");l.append(s),l.append(" "),l.append(t);var i=u("<div class='checkbox' />").addClass(r.css_class).append(l);o.append(i),n(a),s.click(function(){return t.text(o.attr("data-inprogress")),l.attr("disabled","disabled"),s.attr("disabled","disabled"),u.ajax({url:o.attr("action"),dataType:"json",type:o.attr("method").toUpperCase(),data:o.serialize(),error:function(){l.removeAttr("disabled"),s.removeAttr("disabled"),r.error.call()},success:function(e,t,i){0!=i.status?(n(a=!a),l.removeAttr("disabled"),s.removeAttr("disabled"),r.success.call(o,a,i.responseJSON)):(l.removeAttr("disabled"),s.removeAttr("disabled"),r.error.call())}}),!1})}),this},u.fn.bl_checkbox_submit.defaults={css_class:"bl_checkbox_submit",error:function(){alert("Error")},success:function(){}}}(jQuery),function(i){Blacklight.do_bookmark_toggle_behavior=function(){i(Blacklight.do_bookmark_toggle_behavior.selector).bl_checkbox_submit({css_class:"toggle_bookmark",success:function(e,t){t.bookmarks&&i("[data-role=bookmark-counter]").text(t.bookmarks.count)}})},Blacklight.do_bookmark_toggle_behavior.selector="form.bookmark_toggle",Blacklight.onLoad(function(){Blacklight.do_bookmark_toggle_behavior()})}(jQuery),function(e){Blacklight.onLoad(function(){e(document).on("click","a[data-toggle=collapse][href='#'], [data-toggle=collapse] a[href='#']",function(e){e.preventDefault()})})}(jQuery),function(i){"use strict";Blacklight.doResizeFacetLabelsAndCounts=function(){function t(e,t){return t.textContent.length-e.textContent.length}i("ul.facet-values, ul.pivot-facet").each(function(){var e=i(this).find("span.facet-count").sort(t).first().clone(
).css("visibility","hidden").css("width","auto");i("body").append(e),i(this).find(".facet-count").first().width(e.width()),e.remove()})},Blacklight.onLoad(function(){Blacklight.doResizeFacetLabelsAndCounts()})}(jQuery),Blacklight.ajaxModal===undefined&&(Blacklight.ajaxModal={}),Blacklight.ajaxModal.modalSelector="#ajax-modal",Blacklight.ajaxModal.triggerLinkSelector="a[data-ajax-modal~=trigger], a.lightboxLink,a.more_facets_link,.ajax_modal_launch",Blacklight.ajaxModal.triggerFormSelector="form[data-ajax-modal~=trigger], form.ajax_form",Blacklight.ajaxModal.preserveLinkSelector=Blacklight.ajaxModal.modalSelector+" a[data-ajax-modal~=preserve]",Blacklight.ajaxModal.preserveFormSelector=Blacklight.ajaxModal.modalSelector+" form[data-ajax-modal~=preserve]",Blacklight.ajaxModal.containerSelector="[data-ajax-modal~=container]",Blacklight.ajaxModal.modalCloseSelector="[data-ajax-modal~=close], span.ajax-close-modal",Blacklight.ajaxModal.onFailure=function(){var e="<div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>\xd7</button>Network Error</div>";$(Blacklight.ajaxModal.modalSelector).find(".modal-content").html(e),$(Blacklight.ajaxModal.modalSelector).modal("show")},Blacklight.ajaxModal.receiveAjax=function(e){var t=$("<div>").append(jQuery.parseHTML(e)).find(Blacklight.ajaxModal.containerSelector).first();0!==t.length&&(e=t.html()),$(Blacklight.ajaxModal.modalSelector).find(".modal-content").html(e);var i=$.Event("loaded.blacklight.ajax-modal");$(Blacklight.ajaxModal.modalSelector).trigger(i),i.isDefaultPrevented()||$(Blacklight.ajaxModal.modalSelector).modal("show")},Blacklight.ajaxModal.modalAjaxLinkClick=function(e){e.preventDefault(),$.ajax({url:$(this).attr("href")}).fail(Blacklight.ajaxModal.onFailure).done(Blacklight.ajaxModal.receiveAjax)},Blacklight.ajaxModal.modalAjaxFormSubmit=function(e){e.preventDefault(),$.ajax({url:$(this).attr("action"),data:$(this).serialize(),type:$(this).attr("method")}).fail(Blacklight.ajaxModal.onFailure).done(Blacklight.ajaxModal.receiveAjax)},Blacklight.ajaxModal.setup_modal=function(){var e=$.Event("setup.blacklight.ajax-modal");$("body").trigger(e),e.isDefaultPrevented()||($("body").on("click",Blacklight.ajaxModal.triggerLinkSelector+", "+Blacklight.ajaxModal.preserveLinkSelector,Blacklight.ajaxModal.modalAjaxLinkClick),$("body").on("submit",Blacklight.ajaxModal.triggerFormSelector+", "+Blacklight.ajaxModal.preserveFormSelector,Blacklight.ajaxModal.modalAjaxFormSubmit),$("body").on("loaded.blacklight.ajax-modal",Blacklight.ajaxModal.check_close_ajax_modal),$("body ").on("click",Blacklight.ajaxModal.modalSelector+" a[data-dismiss~=modal]",function(e){e.preventDefault()}))},Blacklight.ajaxModal.check_close_ajax_modal=function(e){$(e.target).find(Blacklight.ajaxModal.modalCloseSelector).length&&(modal_flashes=$(this).find(".flash_messages"),$(e.target).modal("hide"),e.preventDefault(),main_flashes=$("#main-flashes"),main_flashes.append(modal_flashes),modal_flashes.fadeIn(500))},Blacklight.onLoad(function(){Blacklight.ajaxModal.setup_modal()}),function(u){Blacklight.do_search_context_behavior=function(){u("a[data-context-href]").on("click.search-context",Blacklight.handleSearchContextMethod)},Blacklight.handleSearchContextMethod=function(e){var t=u(this),i=t.data("context-href"),n="post",r=t.attr("target"),o=u("meta[name=csrf-token]").attr("content"),a=u("meta[name=csrf-param]").attr("content"),s=u('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+n+'" type="hidden" />',c='<input name="redirect" value="'+t.attr("href")+'" type="hidden" />';return(e.metaKey||e.ctrlKey)&&(r="_blank"),a!==undefined&&o!==undefined&&(l+='<input name="'+a+'" value="'+o+'" type="hidden" />'),r&&s.attr("target",r),s.hide().append(l).append(c).appendTo("body"),s.submit(),!1},Blacklight.onLoad(function(){Blacklight.do_search_context_behavior()})}(jQuery),function(e){Blacklight.do_search_autofocus_fallback=function(){"undefined"!=typeof Modernizer&&Modernizr.autofocus||e("input[autofocus]").focus()},Blacklight.onLoad(function(){Blacklight.do_search_autofocus_fallback()})}(jQuery),function(n){"use strict";function e(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(e.style[i]!==undefined)return{end:t[i]};return!1}n.fn.emulateTransitionEnd=function(e){var t=!1,i=this;return n(this).one("bsTransitionEnd",function(){t=!0}),setTimeout(function(){t||n(i).trigger(n.support.transition.end)},e),this},n(function(){n.support.transition=e(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(e){if(n(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(a){"use strict";function r(e){var t,i=e.attr("data-target")||(t=e.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return a(document).find(i)}function s(n){return this.each(function(){var e=a(this),t=e.data("bs.collapse"),i=a.extend({},l.DEFAULTS,e.data(),"object"==typeof n&&n);!t&&i.toggle&&/show|hide/.test(n)&&(i.toggle=!1),t||e.data("bs.collapse",t=new l(this,i)),"string"==typeof n&&t[n]()})}var l=function(e,t){this.$element=a(e),this.options=a.extend({},l.DEFAULTS,t),this.$trigger=a('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};l.VERSION="3.4.1",l.TRANSITION_DURATION=350,l.DEFAULTS={toggle:!0},l.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},l.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&(e=t.data("bs.collapse"))&&e.transitioning)){var i=a.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){t&&t.length&&(s.call(t,"hide"),e||t.data("bs.collapse",null));var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return r.call(this);var o=a.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",a.proxy(r,this)).emulateTransitionEnd(l.TRANSITION_DURATION)[n](this.$element[0][o])}}}},l.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=a.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!a.support.transition)return i.call(this);this.$element[t](0).one("bsTransitionEnd",a.proxy(i,this)).emulateTransitionEnd(l.TRANSITION_DURATION)}}},l.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},l.prototype.getParent=function(){return a(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(e,t){var i=a(t);this.addAriaAndCollapsedClass(r(i),i)},this)).end()},l.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var e=a.fn.collapse;a.fn.collapse=s,a.fn.collapse.Constructor=l,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var t=a(this);t.attr("data-target")||e.preventDefault();var i=r(t),n=i.data("bs.collapse")?"toggle":t.data();s.call(i,n)})}(jQuery),function(s){"use strict";function l(e){var t=e.attr("data-target");t||(t=(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""));var i="#"!==t?s(document).find(t):null;return i&&i.length?i:e.parent()}function o(n){n&&3===n.which||(s(t).remove(),s(c).each(function(){var e=s(this),t=l(e),i={relatedTarget:this};t.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&s.contains(t[0],n.target)||(t.trigger(n=s.Event("hide.bs.dropdown",i)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),t.removeClass("open").trigger(s.Event("hidden.bs.dropdown",i)))))}))}function e(i){return this.each(function(){var e=s(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new n(this)),"string"==typeof i&&t[i].call(e)})}var t=".dropdown-backdrop",c='[data-toggle="dropdown"]',n=function(e){s(e).on("click.bs.dropdown",this.toggle)};n.VERSION="3.4.1",n.prototype.toggle=function(e){var t=s(this);if(!t.is(".disabled, :disabled")){var i=l(t),n=i.hasClass("open");if(o(),!n){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&s(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(s(this)).on("click",o);var r={relatedTarget:this};if(i.trigger(e=s.Event("show.bs.dropdown",r)),e.isDefaultPrevented())return;t.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(s.Event("shown.bs.dropdown",r))}return!1}},n.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var t=s(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var i=l(t),n=i.hasClass("open");if(!n&&27!=e.which||n&&27==e.which)return 27==e.which&&i.find(c).trigger("focus"),t.trigger("click");var r=" li:not(.disabled):visible a",o=i.find(".dropdown-menu"+r);if(o.length){var a=o.index(e.target);38==e.which&&0<a&&a--,40==e.which&&a<o.length-1&&a++,~a||(a=0),o.eq(a).trigger("focus")}}}};var i=s.fn.dropdown;s.fn.dropdown=e,s.fn.dropdown.Constructor=n,s.fn.dropdown.noConflict=function(){return s.fn.dropdown=i,this},s(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",c,n.prototype.toggle).on("keydown.bs.dropdown.data-api",c,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(o){"use strict";function e(i){return this.each(function(){var e=o(this),t=e.data("bs.alert");t||e.data("bs.alert",t=new a(this)),"string"==typeof i&&t[i].call(e)})}var t='[data-dismiss="alert"]',a=function(e){o(e).on("click",t,this.close)};a.VERSION="3.4.1",a.TRANSITION_DURATION=150,a.prototype.close=function(e){function t(){r.detach().trigger("closed.bs.alert").remove()}var i=o(this),n=i.attr("data-target");n||(n=(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),n="#"===n?[]:n;var r=o(document).find(n);e&&e.preventDefault(),r.length||(r=i.closest(".alert")),r.trigger(e=o.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),o.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",t).emulateTransitionEnd(a.TRANSITION_DURATION):t())};var i=o.fn.alert;o.fn.alert=e,o.fn.alert.Constructor=a,o.fn.alert.noConflict=function(){return o.fn.alert=i,this},o(document).on("click.bs.alert.data-api",t,a.prototype.close)}(jQuery),function(a){"use strict";function s(n,r){return this.each(function(){var e=a(this),t=e.data("bs.modal"),i=a.extend({},o.DEFAULTS,e.data(),"object"==typeof n&&n);t||e.data("bs.modal",t=new o(this,i)),"string"==typeof n?t[n](r):i.show&&t.show(r)})}var o=function(e,t){this.options=t,this.$body=a(document.body),this.$element=a(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};o.VERSION="3.4.1",o.TRANSITION_DURATION=300,o.BACKDROP_TRANSITION_DURATION=150,o.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},o.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},o.prototype.show=function(i){var n=this,e=a.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){a(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),e&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var t=a.Event("shown.bs.modal",{relatedTarget:i});e?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(t)}).emulateTransitionEnd(o.TRANSITION_DURATION):n.$element.trigger("focus").trigger(t)}))},o.prototype.hide=function(e){e&&e.preventDefault(),e=a.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(o.TRANSITION_DURATION):this.hideModal())},o.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},o.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},o.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},o.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},o.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(e){var t=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=a.support.transition&&i;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){t.removeBackdrop(),e&&e()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},o.prototype.handleUpdate=function(){this.adjustDialog()},o.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},o.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},o.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},o.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var r=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",e+r),a(this.fixedContent).each(function(e,t){var i=t.style.paddingRight,n=a(t).css("padding-right");a(t).data("padding-right",i).css("padding-right",parseFloat(n)+r+"px")}))},o.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),a(this.fixedContent).each(function(e,t){var i=a(t).data("padding-right");a(t).removeData("padding-right"),t.style.paddingRight=i||""})},o.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var e=a.fn.modal;a.fn.modal=s,a.fn.modal.Constructor=o,a.fn.modal.noConflict=function(){return a.fn.modal=e,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var t=a(this),i=t.attr("href"),n=t.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""),r=a(document).find(n),o=r.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(i)&&i},r.data(),t.data());t.is("a")&&e.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})}),s.call(r,o,this)})}(jQuery),function(t,i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t.Bloodhound=i(e)}):"object"==typeof exports?module.exports=i(require("jquery")):t.Bloodhound=i(jQuery)}(this,function(p){var f=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:p.isArray,isFunction:p.isFunction,isObject:p.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(e){return e instanceof p},toStr:function t(e){return f.isUndefined(e)||null===e?"":e+""},bind:p.proxy,each:function(e,i){function t(e,t){return i(t,e)}p.each(e,t)},map:p.map,filter:p.grep,every:function(i,n){var r=!0;return i?(p.each(i,function(e,t){if(!(r=n.call(null,t,e,i)))return!1}),!!r):r},some:function(i,n){var r=!1;return i?(p.each(i,function(e,t){if(r=n.call(null,t,e,i))return!1}),!!r):r},mixin:p.extend,identity:function(e){return e},clone:function(e){return p.extend(!0,{},e)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function i(e){function t(){return String(e)}return p.isFunction(e)?e:t},defer:function(e){setTimeout(e,0)},debounce:function(r,o,a){var s,l;return function(){var e,t,i=this,n=arguments;return e=function(){s=null,a||(l=r.apply(i,n))},t=a&&!s,clearTimeout(s),s=setTimeout(e,o),t&&(l=r.apply(i,n)),l}},throttle:function(i,n){var r,o,a,s,l,c;return l=0,c=function(){l=new Date,a=null,s=i.apply(r,o)},function(){var e=new Date,t=n-(e-l);return r=this,o=arguments,t<=0?(clearTimeout(a),a=null,l=e,s=i.apply(r,o)):a||(a=setTimeout(c,t)),s}},stringify:function(e){return f.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),l="0.11.1",g=function(){"use strict";function e(e){return(e=f.toStr(e))?e.split(/\s+/):[]}function t(e){return(e=f.toStr(e))?e.split(/\W+/):[]}function i(r){return function t(e){return e=f.isArray(e)?e:[].slice.call(arguments,0),function n(t){var i=[];return f.each(e,function(e){i=i.concat(r(f.toStr(t[e])))}),i}}}return{nonword:t,whitespace:e,obj:{nonword:i(t),whitespace:i(e)}}}(),o=function(){"use strict";function e(e){this.maxSize=f.isNumber(e)?e:100,this.reset(),this.maxSize<=0&&(this.set=this.get=p.noop)}function t(){this.head=this.tail=null}function r(e,t){this.key=e,this.val=t,this.prev=this.next=null}return f.mixin(e.prototype,{set:function o(e,t){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[e])?(i.val=t,this.list.moveToFront(i)):(i=new r(e,t),this.list.add(i),this.hash[e]=i,this.size++)},get:function i(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function n(){this.size=0,this.hash={},this.list=new t}}),f.mixin(t.prototype,{add:function a(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function s(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),e}(),a=function(){"use strict";function e(e,t){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+f.escapeRegExChars(this.prefix)),this.ls=t||a,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function r(e){return JSON.stringify(f.isUndefined(e)?null:e)}function i(e){return p.parseJSON(e)}function o(e){var t,i,n=[],r=a.length;for(t=0;t<r;t++)(i=a.key(t)).match(e)&&n.push(i.replace(e,""));return n}var a;try{(a=window.localStorage).setItem("~~~","!"),a.removeItem("~~~")}catch(s){a=null}return f.mixin(e.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=f.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(s){"QuotaExceededError"===s.name&&(this.clear(),this._noop())}},get:function(e){return this.isExpired(e)&&this.remove(e),i(this.ls.getItem(this._prefix(e)))},set:function(e,t,i){return f.isNumber(i)?this._safeSet(this._ttlKey(e),r(n()+i)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),r(t))},remove:function(e){return this.ls.removeItem(this._ttlKey(e)),this.ls.removeItem(this._prefix(e)),this},clear:function(){var e,t=o(this.keyMatcher);for(e=t.length;e--;)this.remove(t[e]);return this},isExpired:function(e){var t=i(this.ls.getItem(this._ttlKey(e)));return!!(f.isNumber(t)&&n()>t)}}),e}(),m=function(){"use strict";function e(e){e=e||{},this.cancelled=!1,this.lastReq=null,this._send=e.transport,this._get=e.limiter?e.limiter(this._get):this._get,this._cache=!1===e.cache?new o(0):t}var l=0,c={},u=6,t=new o(10);return e.setMaxPendingRequests=function i(e){u=e},e.resetCache=function n(){t.reset()},f.mixin(e.prototype,{_fingerprint:function r(e){return(e=e||{}).url+e.type+p.param(e.data||{})},_get:function(e,t){function i(e){t(null,e),s._cache.set(o,e)}function n(){t(!0)}function r(){l--,delete c[o],s.onDeckRequestArgs&&(s._get.apply(s,s.onDeckRequestArgs),s.onDeckRequestArgs=null)}var o,a,s=this;o=this._fingerprint(e),this.cancelled||o!==this.lastReq||((a=c[o])?a.done(i).fail(n):l<u?(l++,c[o]=this._send(e).done(i).fail(n).always(r)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,t){var i,n;t=t||p.noop,e=f.isString(e)?{url:e}:e||{},n=this._fingerprint(e),this.cancelled=!1,this.lastReq=n,(i=this._cache.get(n))?t(null,i):this._get(e,t)},cancel:function(){this.cancelled=!0}}),e}(),v=window.SearchIndex=function(){"use strict";function e(e){(e=e||{}).datumTokenizer&&e.queryTokenizer||p.error("datumTokenizer and queryTokenizer are both required"),this.identify=e.identify||f.stringify,this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.matchAnyQueryToken=e.matchAnyQueryToken,this.reset()}function i(e){return e=f.filter(e,function(e){return!!e}),e=f.map(e,function(e){return e.toLowerCase()})}function a(){var e={};return e[c]=[],e[l]={},e}function n(e){for(var t={},i=[],n=0,r=e.length;n<r;n++)t[e[n]]||(t[e[n]]=!0,i.push(e[n]));return i}function s(e,t){var i=0,n=0,r=[];e=e.sort(),t=t.sort();for(var o=e.length,a=t.length;i<o&&n<a;)e[i]<t[n]?i++:(e[i]>t[n]||(r.push(e[i]),i++),n++);return r}var l="c",c="i";return f.mixin(e.prototype,{bootstrap:function t(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var o=this;e=f.isArray(e)?e:[e],f.each(e,function(e){var r,t;o.datums[r=o.identify(e)]=e,t=i(o.datumTokenizer(e)),f.each(t,function(e){var t,i,n;for(t=o.trie,i=e.split("");n=i.shift();)(t=t[l][n]||(t[l][n]=a()))[c].push(r)})})},get:function r(e){var t=this;return f.map(e,function(e){return t.datums[e]})},search:function u(e){var t,o,a=this;return t=i(this.queryTokenizer(e)),f.each(t,function(e){var t,i,n,r;if(o&&0===o.length&&!a.matchAnyQueryToken)return!1;for(t=a.trie,i=e.split("");t&&(n=i.shift());)t=t[l][n];if(t&&0===i.length)r=t[c].slice(0),o=o?s(o,r):r;else if(!a.matchAnyQueryToken)return!(o=[])}),o?f.map(n(o),function(e){return a.datums[e]}):[]},all:function o(){var e=[];for(var t in this.datums)e.push(this.datums[t]);return e},reset:function d(){this.datums={},this.trie=a()},serialize:function h(){return{datums:this.datums,trie:this.trie}}}),e}(),y=function(){"use strict";function e(e){this.url=e.url,this.ttl=e.ttl,this.cache=e.cache,this.prepare=e.prepare,this.transform=e.transform,this.transport=e.transport,this.thumbprint=e.thumbprint,this.storage=new a(e.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},f.mixin(e.prototype,{_settings:function t(){return{url:this.url,type:"GET",dataType:"json"}},store:function n(e){this.cache&&(this.storage.set(i.data,e,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function r(){var e,t={};return this.cache?(t.data=this.storage.get(i.data),t.protocol=this.storage.get(i.protocol),t.thumbprint=this.storage.get(i.thumbprint),e=t.thumbprint!==this.thumbprint||t.protocol!==location.protocol,t.data&&!e?t.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,r.transform(e))}var n,r=this;t&&(n=this.prepare(this._settings()),this.transport(n).fail(e).done(i))},clear:function o(){return this.storage.clear(),this}}),e}(),w=function(){"use strict";function e(e){this.url=e.url,this.prepare=e.prepare,this.transform=e.transform,this.indexResponse=e.indexResponse,this.transport=new m({cache:e.cache,limiter:e.limiter,transport:e.transport})}return f.mixin(e.prototype,{_settings:function t(){return{url:this.url,type:"GET",dataType:"json"}},get:function o(e,i){function t(e,t){i(e?[]:r.transform(t))}var n,r=this;if(i)return e=e||"",n=this.prepare(e,this._settings()),this.transport.get(n,t)},cancelLastRequest:function i(){this.transport.cancel()}}),e}(),b=function(){"use strict";function n(e){var t;return e?(t={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:f.identity,transform:f.identity,transport:null},e=f.isString(e)?{url:e}:e,!(e=f.mixin(t,e)).url&&p.error("prefetch requires url to be set"),e.transform=e.filter||e.transform,e.cacheKey=e.cacheKey||e.url,e.thumbprint=l+e.thumbprint,e.transport=e.transport?a(e.transport):p.ajax,e):null}function r(e){var t;if(e)return t={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:f.identity,transport:null},e=f.isString(e)?{url:e}:e,!(e=f.mixin(t,e)).url&&p.error("remote requires url to be set"),e.transform=e.filter||e.transform,e.prepare=i(e),e.limiter=o(e),e.transport=e.transport?a(e.transport):p.ajax,delete e.replace,delete e.wildcard,delete e.rateLimitBy,delete e.rateLimitWait,e}function i(e){function t(e,t){return t.url=o(t.url,e),t}function i(e,t){return t.url=t.url.replace(a,encodeURIComponent(e)),t}function n(e,t){return t}var r,o,a;return r=e.prepare,o=e.replace,a=e.wildcard,r||(r=o?t:e.wildcard?i:n)}function o(e){function t(t){return function i(e){return f.debounce(e,t)}}function i(t){return function i(e){return f.throttle(e,t)}}var n,r,o;return n=e.limiter,r=e.rateLimitBy,o=e.rateLimitWait,n||(n=/^throttle$/i.test(r)?i(o):t(o)),n}function a(r){return function o(e){function t(e){f.defer(function(){n.resolve(e)})}function i(e){f.defer(function(){n.reject(e)})}var n=p.Deferred();return r(e,t,i),n}}return function s(e){var t,i;return t={initialize:!0,identify:f.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},!(e=f.mixin(t,e||{})).datumTokenizer&&p.error("datumTokenizer is required"),!e.queryTokenizer&&p.error("queryTokenizer is required"),i=e.sorter,e.sorter=i?function(e){return e.sort(i)}:f.identity,e.local=f.isFunction(e.local)?e.local():e.local,e.prefetch=n(e.prefetch),e.remote=r(e.remote),e}}();return function(){"use strict";function e(e){e=b(e),this.sorter=e.sorter,this.identify=e.identify,this.sufficient=e.sufficient,this.indexRemote=e.indexRemote,this.local=e.local,this.remote=e.remote?new w(e.remote):null,this.prefetch=e.prefetch?new y(e.prefetch):null,this.index=new v({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),!1!==e.initialize&&this.initialize()}var t;return t=window&&window.Bloodhound,e.noConflict=function i(){return window&&(window.Bloodhound=t),e},e.tokenizers=g,f.mixin(e.prototype,{__ttAdapter:function r(){function e(e,t,i){return n.search(e,t,i)}function t(e,t){return n.search(e,t)}var n=this;return this.remote?e:t},_loadPrefetch:function o(){function e(e,t){if(e)return i.reject();n.add(t),n.prefetch.store(n.index.serialize()),i.resolve()}var i,t,n=this;return i=p.Deferred(),this.prefetch?(t=this.prefetch.fromCache())?(this.index.bootstrap(t),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function n(){function e(){t.add(t.local)}var t=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(e),this.initPromise},initialize:function n(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function a(e){return this.index.add(e),this},get:function s(e){return e=f.isArray(e)?e:[].slice.call(arguments),this.index.get(e)},search:function l(e,t,n){function i(e){var i=[];f.each(e,function(t){!f.some(r,function(e){return o.identify(t)===o.identify(e)})&&i.push(t)}),o.indexRemote&&o.add(i),n(i)}var r,o=this;return t=t||f.noop,n=n||f.noop,r=this.sorter(this.index.search(e)),t(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(e,i):this.remote&&this.remote.cancelLastRequest(),this},all:function c(){return this.index.all()},clear:function u(){return this.index.reset(),this},clearPrefetchCache:function d(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function h(){return m.resetCache(),this},ttAdapter:function r(){return this.__ttAdapter()}}),e}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function($){var F=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(e){return e instanceof $},toStr:function t(e){return F.isUndefined(e)||null===e?"":e+""},bind:$.proxy,each:function(e,i){function t(e,t){return i(t,e)}$.each(e,t)},map:$.map,filter:$.grep,every:function(i,n){var r=!0;return i?($.each(i,function(e,t){if(!(r=n.call(null,t,e,i)))return!1}),!!r):r},some:function(i,n){var r=!1;return i?($.each(i,function(e,t){if(r=n.call(null,t,e,i))return!1}),!!r):r},mixin:$.extend,identity:function(e){return e},clone:function(e){return $.extend(!0,{},e)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function i(e){function t(){return String(e)}return $.isFunction(e)?e:t},defer:function(e){setTimeout(e,0)},debounce:function(r,o,a){var s,l;return function(){var e,t,i=this,n=arguments;return e=function(){s=null,a||(l=r.apply(i,n))},t=a&&!s,clearTimeout(s),s=setTimeout(e,o),t&&(l=r.apply(i,n)),l}},throttle:function(i,n){
var r,o,a,s,l,c;return l=0,c=function(){l=new Date,a=null,s=i.apply(r,o)},function(){var e=new Date,t=n-(e-l);return r=this,o=arguments,t<=0?(clearTimeout(a),a=null,l=e,s=i.apply(r,o)):a||(a=setTimeout(c,t)),s}},stringify:function(e){return F.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),T=function(){"use strict";function e(e){var t,i;return i=F.mixin({},a,e),{css:(t={css:o(),classes:i,html:n(i),selectors:r(i)}).css,html:t.html,classes:t.classes,selectors:t.selectors,mixin:function(e){F.mixin(e,t)}}}function n(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div class="'+e.menu+'"></div>'}}function r(e){var i={};return F.each(e,function(e,t){i[t]="."+e}),i}function o(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return F.isMsie()&&F.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}var a={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return e}(),E=function(){"use strict";function e(e){e&&e.el||$.error("EventBus initialized without el"),this.$el=$(e.el)}var n,i;return n="typeahead:",i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},F.mixin(e.prototype,{_trigger:function(e,t){var i;return i=$.Event(n+e),(t=t||[]).unshift(i),this.$el.trigger.apply(this.$el,t),i},before:function(e){var t;return t=[].slice.call(arguments,1),this._trigger("before"+e,t).isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=i[e])&&this._trigger(t,[].slice.call(arguments,1))}}),e}(),S=function(){"use strict";function n(e,t,i,n){var r;if(!i)return this;for(t=t.split(l),i=n?s(i,n):i,this._callbacks=this._callbacks||{};r=t.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][e].push(i);return this}function e(e,t,i){return n.call(this,"async",e,t,i)}function t(e,t,i){return n.call(this,"sync",e,t,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(l);t=e.shift();)delete this._callbacks[t];return this}function r(e){var t,i,n,r,o;if(!this._callbacks)return this;for(e=e.split(l),n=[].slice.call(arguments,1);(t=e.shift())&&(i=this._callbacks[t]);)r=a(i.sync,this,[t].concat(n)),o=a(i.async,this,[t].concat(n)),r()&&c(o);return this}function a(n,r,o){function e(){for(var e,t=0,i=n.length;!e&&t<i;t+=1)e=!1===n[t].apply(r,o);return!e}return e}function o(){return window.setImmediate?function t(e){setImmediate(function(){e()})}:function i(e){setTimeout(function(){e()},0)}}function s(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var l=/\s+/,c=o();return{onSync:t,onAsync:e,off:i,trigger:r}}(),k=function(s){"use strict";function t(e,t,i){for(var n,r=[],o=0,a=e.length;o<a;o++)r.push(F.escapeRegExChars(e[o]));return n=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",t?new RegExp(n):new RegExp(n,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function n(r){function e(e){var t,i,n;return(t=a.exec(e.data))&&(n=s.createElement(r.tagName),r.className&&(n.className=r.className),(i=e.splitText(t.index)).splitText(t[0].length),n.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(n,i)),!!t}function o(e,t){for(var i,n=3,r=0;r<e.childNodes.length;r++)(i=e.childNodes[r]).nodeType===n?r+=t(i)?1:0:o(i,t)}var a;(r=F.mixin({},i,r)).node&&r.pattern&&(r.pattern=F.isArray(r.pattern)?r.pattern:[r.pattern],a=t(r.pattern,r.caseSensitive,r.wordsOnly),o(r.node,e))}}(window.document),z=function(){"use strict";function i(e,t){(e=e||{}).input||$.error("input is missing"),t.mixin(this),this.$hint=$(e.hint),this.$input=$(e.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=F.noop)}function n(e){return $('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(e,t){return i.normalizeQuery(e)===i.normalizeQuery(t)}function o(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(e){return F.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},F.mixin(i.prototype,S,{_onBlur:function e(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function t(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function s(e){var t=a[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function l(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function c(e,t){var i;switch(e){case"up":case"down":i=!o(t);break;default:i=!1}i&&t.preventDefault()},_shouldTrigger:function u(e,t){var i;switch(e){case"tab":i=!o(t);break;default:i=!0}return i},_checkLanguageDirection:function d(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function h(e,t){var i,n;n=!!(i=r(e,this.query))&&this.query.length!==e.length,this.query=e,t||i?!t&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var e,t,i,n,r=this;return e=F.bind(this._onBlur,this),t=F.bind(this._onFocus,this),i=F.bind(this._onKeydown,this),n=F.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",t).on("keydown.tt",i),!F.isMsie()||9<F.isMsie()?this.$input.on("input.tt",n):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){a[e.which||e.keyCode]||F.defer(F.bind(r._onInput,r,e))}),this},focus:function p(){this.$input.focus()},blur:function f(){this.$input.blur()},getLangDir:function g(){return this.dir},getQuery:function m(){return this.query||""},setQuery:function h(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function v(){return this.query!==this.queryWhenFocused},getInputValue:function y(){return this.$input.val()},setInputValue:function w(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function b(){this.setInputValue(this.query)},getHint:function _(){return this.$hint.val()},setHint:function x(e){this.$hint.val(e)},clearHint:function k(){this.setHint("")},clearHintIfInvalid:function j(){var e,t,i;i=(e=this.getInputValue())!==(t=this.getHint())&&0===t.indexOf(e),!(""!==e&&i&&!this.hasOverflow())&&this.clearHint()},hasFocus:function T(){return this.$input.is(":focus")},hasOverflow:function E(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,t,i;return e=this.$input.val().length,t=this.$input[0].selectionStart,F.isNumber(t)?t===e:!document.selection||((i=document.selection.createRange()).moveStart("character",-e),e===i.text.length)},destroy:function C(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=$("<div>")}}),i}(),_=function(){"use strict";function e(e,t){(e=e||{}).templates=e.templates||{},e.templates.notFound=e.templates.notFound||e.templates.empty,e.source||$.error("missing source"),e.node||$.error("missing node"),e.name&&!r(e.name)&&$.error("invalid dataset name: "+e.name),t.mixin(this),this.highlight=!!e.highlight,this.name=e.name||o(),this.limit=e.limit||5,this.displayFn=i(e.display||e.displayKey),this.templates=n(e.templates,this.displayFn),this.source=e.source.__ttAdapter?e.source.__ttAdapter():e.source,this.async=F.isUndefined(e.async)?2<this.source.length:!!e.async,this._resetLastSuggestion(),this.$el=$(e.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(t){function e(e){return e[t]}return t=t||F.stringify,F.isFunction(t)?t:e}function n(e,t){function i(e){return $("<div>").text(t(e))}return{notFound:e.notFound&&F.templatify(e.notFound),pending:e.pending&&F.templatify(e.pending),header:e.header&&F.templatify(e.header),footer:e.footer&&F.templatify(e.footer),suggestion:e.suggestion||i}}function r(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var s,o;return s={val:"tt-selectable-display",obj:"tt-selectable-object"},o=F.getIdGenerator(),e.extractData=function a(e){var t=$(e);return t.data(s.obj)?{val:t.data(s.val)||"",obj:t.data(s.obj)||null}:null},F.mixin(e.prototype,S,{_overwrite:function l(e,t){(t=t||[]).length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,t,!1)},_append:function c(e,t){(t=t||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,t,!0)},_renderSuggestions:function u(e,t){var i;i=this._getSuggestionsFragment(e,t),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function d(e,t){var i,n;n=(i=this._getSuggestionsFragment(e,t)).children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function h(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function p(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function t(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function f(n,e){var r,o=this;return r=document.createDocumentFragment(),F.each(e,function a(e){var t,i;i=o._injectQuery(n,e),t=$(o.templates.suggestion(i)).data(s.obj,e).data(s.val,o.displayFn(e)).addClass(o.classes.suggestion+" "+o.classes.selectable),r.appendChild(t[0])}),this.highlight&&k({className:this.classes.highlight,node:r,pattern:n}),$(r)},_getFooter:function g(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function m(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function v(){this.$lastSuggestion=$()},_injectQuery:function y(e,t){return F.isObject(t)?F.mixin({_query:e},t):t},update:function w(t){function e(e){o||(o=!0,e=(e||[]).slice(0,n.limit),a=e.length,n._overwrite(t,e),a<n.limit&&n.async&&n.trigger("asyncRequested",t))}function i(e){e=e||[],!r&&a<n.limit&&(n.cancel=$.noop,n._append(t,e.slice(0,n.limit-a)),a+=e.length,n.async&&n.trigger("asyncReceived",t))}var n=this,r=!1,o=!1,a=0;this.cancel(),this.cancel=function s(){r=!0,n.cancel=$.noop,n.async&&n.trigger("asyncCanceled",t)},this.source(t,e,i),!o&&e([])},cancel:$.noop,clear:function b(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function _(){return this.$el.is(":empty")},destroy:function x(){this.$el=$("<div>")}}),e}(),C=function(){"use strict";function e(e,i){function t(e){var t=n.$node.find(e.node).first();return e.node=t.length?t:$("<div>").appendTo(n.$node),new _(e,i)}var n=this;(e=e||{}).node||$.error("node is required"),i.mixin(this),this.$node=$(e.node),this.query=null,this.datasets=F.map(e.datasets,t)}return F.mixin(e.prototype,S,{_onSelectableClick:function t(e){this.trigger("selectableClicked",$(e.currentTarget))},_onRendered:function r(e,t,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,i,n)},_onCleared:function i(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function n(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function o(){function e(e){return e.isEmpty()}return F.every(this.datasets,e)},_getSelectables:function a(){return this.$node.find(this.selectors.selectable)},_removeCursor:function s(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function l(e){var t,i,n,r;i=(t=e.position().top)+e.outerHeight(!0),n=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),t<0?this.$node.scrollTop(n+t):r<i&&this.$node.scrollTop(n+(i-r))},bind:function(){var e,t=this;return e=F.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,e),F.each(this.datasets,function(e){e.onSync("asyncRequested",t._propagate,t).onSync("asyncCanceled",t._propagate,t).onSync("asyncReceived",t._propagate,t).onSync("rendered",t._onRendered,t).onSync("cleared",t._onCleared,t)}),this},isOpen:function c(){return this.$node.hasClass(this.classes.open)},open:function u(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function d(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function h(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function p(e){var t,i,n;return i=this.getActiveSelectable(),t=this._getSelectables(),-1===(n=(n=((n=(i?t.index(i):-1)+e)+1)%(t.length+1)-1)<-1?t.length-1:n)?null:t.eq(n)},setCursor:function f(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function g(e){return e&&e.length?_.extractData(e):null},getActiveSelectable:function m(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function v(){var e=this._getSelectables().first();return e.length?e:null},update:function y(t){function e(e){e.update(t)}var i=t!==this.query;return i&&(this.query=t,F.each(this.datasets,e)),i},empty:function w(){function e(e){e.clear()}F.each(this.datasets,e),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function b(){function e(e){e.destroy()}this.$node.off(".tt"),this.$node=$("<div>"),F.each(this.datasets,e)}}),e}(),P=function(){"use strict";function e(){C.apply(this,[].slice.call(arguments,0))}var t=C.prototype;return F.mixin(e.prototype,C.prototype,{open:function i(){return!this._allDatasetsEmpty()&&this._show(),t.open.apply(this,[].slice.call(arguments,0))},close:function n(){return this._hide(),t.close.apply(this,[].slice.call(arguments,0))},_onRendered:function r(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function o(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function a(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),t.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function s(){this.$node.hide()},_show:function l(){this.$node.css("display","block")}}),e}(),A=function(){"use strict";function e(e,t){var i,n,r,o,a,s,l,c,u,d,h;(e=e||{}).input||$.error("missing input"),e.menu||$.error("missing menu"),e.eventBus||$.error("missing event bus"),t.mixin(this),this.eventBus=e.eventBus,this.minLength=F.isNumber(e.minLength)?e.minLength:1,this.input=e.input,this.menu=e.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),i=p(this,"activate","open","_onFocused"),n=p(this,"deactivate","_onBlurred"),r=p(this,"isActive","isOpen","_onEnterKeyed"),o=p(this,"isActive","isOpen","_onTabKeyed"),a=p(this,"isActive","_onEscKeyed"),s=p(this,"isActive","open","_onUpKeyed"),l=p(this,"isActive","open","_onDownKeyed"),c=p(this,"isActive","isOpen","_onLeftKeyed"),u=p(this,"isActive","isOpen","_onRightKeyed"),d=p(this,"_openIfActive","_onQueryChanged"),h=p(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",i,this).onSync("blurred",n,this).onSync("enterKeyed",r,this).onSync("tabKeyed",o,this).onSync("escKeyed",a,this).onSync("upKeyed",s,this).onSync("downKeyed",l,this).onSync("leftKeyed",c,this).onSync("rightKeyed",u,this).onSync("queryChanged",d,this).onSync("whitespaceChanged",h,this).onSync("langDirChanged",this._onLangDirChanged,this)}function p(i){var e=[].slice.call(arguments,1);return function(){var t=[].slice.call(arguments);F.each(e,function(e){return i[e].apply(i,t)})}}return F.mixin(e.prototype,{_hacks:function t(){var r,o;r=this.input.$input||$("<div>"),o=this.menu.$node||$("<div>"),r.on("blur.tt",function(e){var t,i,n;t=document.activeElement,i=o.is(t),n=0<o.has(t).length,F.isMsie()&&(i||n)&&(e.preventDefault(),e.stopImmediatePropagation(),F.defer(function(){r.focus()}))}),o.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function i(e,t){this.select(t)},_onDatasetCleared:function n(){this._updateHint()},_onDatasetRendered:function r(e,t,i,n){this._updateHint(),this.eventBus.trigger("render",i,n,t)},_onAsyncRequested:function o(e,t,i){this.eventBus.trigger("asyncrequest",i,t)},_onAsyncCanceled:function a(e,t,i){this.eventBus.trigger("asynccancel",i,t)},_onAsyncReceived:function s(e,t,i){this.eventBus.trigger("asyncreceive",i,t)},_onFocused:function l(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function c(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function u(e,t){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&t.preventDefault()},_onTabKeyed:function d(e,t){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&t.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&t.preventDefault()},_onEscKeyed:function h(){this.close()},_onUpKeyed:function f(){this.moveCursor(-1)},_onDownKeyed:function g(){this.moveCursor(1)},_onLeftKeyed:function m(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function v(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function y(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function w(){this._updateHint()},_onLangDirChanged:function b(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function _(){this.isActive()&&this.open()},_minLengthMet:function x(e){return(e=F.isString(e)?e:this.input.getQuery()||"").length>=this.minLength},_updateHint:function k(){var e,t,i,n,r,o;e=this.menu.getTopSelectable(),t=this.menu.getSelectableData(e),i=this.input.getInputValue(),!t||F.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(n=z.normalizeQuery(i),r=F.escapeRegExChars(n),(o=new RegExp("^(?:"+r+")(.+$)","i").exec(t.val))&&this.input.setHint(i+o[1]))},isEnabled:function j(){return this.enabled},enable:function T(){this.enabled=!0},disable:function E(){this.enabled=!1},isActive:function C(){return this.active},activate:function S(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function P(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function A(){return this.menu.isOpen()},open:function R(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function L(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function I(e){this.input.setQuery(F.toStr(e))},getVal:function O(){return this.input.getQuery()},select:function M(e){var t=this.menu.getSelectableData(e);return!(!t||this.eventBus.before("select",t.obj))&&(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj),this.close(),!0)},autocomplete:function D(e){var t,i;return t=this.input.getQuery(),!(!((i=this.menu.getSelectableData(e))&&t!==i.val)||this.eventBus.before("autocomplete",i.obj))&&(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0)},moveCursor:function N(e){var t,i,n,r;return t=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(e),r=(n=this.menu.getSelectableData(i))?n.obj:null,!(this._minLengthMet()&&this.menu.update(t))&&!this.eventBus.before("cursorchange",r)&&(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function B(){this.input.destroy(),this.menu.destroy()}}),e}();!function(){"use strict";function n(e,i){e.each(function(){var e,t=$(this);(e=t.data(v.typeahead))&&i(e,t)})}function f(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(i(e)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function g(e,t){e.data(v.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(i){}return e}function i(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function r(i){var e,t;e=i.data(v.www),t=i.parent().filter(e.selectors.wrapper),F.each(i.data(v.attrs),function(e,t){F.isUndefined(e)?i.removeAttr(t):i.attr(t,e)}),i.removeData(v.typeahead).removeData(v.www).removeData(v.attr).removeClass(e.classes.input),t.length&&(i.detach().insertAfter(t),t.remove())}function m(e){var t;return(t=F.isJQuery(e)||F.isElement(e)?$(e).first():[]).length?t:null}var e,v,t;e=$.fn.typeahead,v={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},t={initialize:function o(d,h){function e(){var e,t,i,n,r,o,a,s,l,c,u;F.each(h,function(e){e.highlight=!!d.highlight}),e=$(this),t=$(p.html.wrapper),i=m(d.hint),n=m(d.menu),r=!1!==d.hint&&!i,o=!1!==d.menu&&!n,r&&(i=f(e,p)),o&&(n=$(p.html.menu).css(p.css.menu)),i&&i.val(""),e=g(e,p),(r||o)&&(t.css(p.css.wrapper),e.css(r?p.css.input:p.css.inputWithNoHint),e.wrap(t).parent().prepend(r?i:null).append(o?n:null)),u=o?P:C,a=new E({el:e}),s=new z({hint:i,input:e},p),l=new u({node:n,datasets:h},p),c=new A({input:s,menu:l,eventBus:a,minLength:d.minLength},p),e.data(v.www,p),e.data(v.typeahead,c)}var p;return h=F.isArray(h)?h:[].slice.call(arguments,1),p=T((d=d||{}).classNames),this.each(e)},isEnabled:function a(){var t;return n(this.first(),function(e){t=e.isEnabled()}),t},enable:function s(){return n(this,function(e){e.enable()}),this},disable:function l(){return n(this,function(e){e.disable()}),this},isActive:function c(){var t;return n(this.first(),function(e){t=e.isActive()}),t},activate:function u(){return n(this,function(e){e.activate()}),this},deactivate:function d(){return n(this,function(e){e.deactivate()}),this},isOpen:function h(){var t;return n(this.first(),function(e){t=e.isOpen()}),t},open:function p(){return n(this,function(e){e.open()}),this},close:function y(){return n(this,function(e){e.close()}),this},select:function w(e){var t=!1,i=$(e);return n(this.first(),function(e){t=e.select(i)}),t},autocomplete:function b(e){var t=!1,i=$(e);return n(this.first(),function(e){t=e.autocomplete(i)}),t},moveCursor:function _(t){var i=!1;return n(this.first(),function(e){i=e.moveCursor(t)}),i},val:function x(t){var i;return arguments.length?(n(this,function(e){e.setVal(F.toStr(t))}),this):(n(this.first(),function(e){i=e.getVal()}),i)},destroy:function k(){return n(this,function(e,t){r(t),e.destroy()}),this}},$.fn.typeahead=function(e){return t[e]?t[e].apply(this,[].slice.call(arguments,1)):t.initialize.apply(this,arguments)},$.fn.typeahead.noConflict=function j(){return $.fn.typeahead=e,this}}()}),$(".no-js").removeClass("no-js").addClass("js"),function(){function e(){}function o(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function t(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,n=this,r=n.EventEmitter;i.getListeners=function(e){var t,i,n=this._getEvents();if("object"==typeof e)for(i in t={},n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i]);else t=n[e]||(n[e]=[]);return t},i.flattenListeners=function(e){var t,i=[];for(t=0;e.length>t;t+=1)i.push(e[t].listener);return i},i.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&((t={})[e]=i),t||i},i.addListener=function(e,t){var i,n=this.getListenersAsObject(e),r="object"==typeof t;for(i in n)n.hasOwnProperty(i)&&-1===o(n[i],t)&&n[i].push(r?t:{listener:t,once:!1});return this},i.on=t("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=t("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,t){var i,n,r=this.getListenersAsObject(e);for(n in r)r.hasOwnProperty(n)&&(-1!==(i=o(r[n],t))&&r[n].splice(i,1));return this},i.off=t("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,i){var n,r,o=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)o.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(r=t[n])&&("function"==typeof r?o.call(this,n,r):a.call(this,n,r));return this},i.removeEvent=function(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if("object"===i)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},i.removeAllListeners=t("removeEvent"),i.emitEvent=function(e,t){var i,n,r,o=this.getListenersAsObject(e);for(r in o)if(o.hasOwnProperty(r))for(n=o[r].length;n--;)!0===(i=o[r][n]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},i.trigger=t("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return n.EventEmitter=r,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(i){function n(e){var t=i.event;return t.target=t.target||t.srcElement||e,t}var e=document.documentElement,r=function(){};e.addEventListener?r=function(e,t,i){e.addEventListener(t,i,!1)}:e.attachEvent&&(r=function(t,e,i){t[e+i]=i.handleEvent?function(){var e=n(t);i.handleEvent.call(i,e)}:function(){var e=n(t);i.call(t,e)},t.attachEvent("on"+e,t[e+i])});var t=function(){};e.removeEventListener?t=function(e,t,i){e.removeEventListener(t,i,!1)}:e.detachEvent&&(t=function(e,t,i){e.detachEvent("on"+t,e[t+i]);try{delete e[t+i]}catch(r){e[t+i]=void 0}});var o={bind:r,unbind:t};"function"==typeof define&&define.amd?define("eventie/eventie",o):i.eventie=o}(this),function(i,n){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(e,t){return n(i,e,t)}):"object"==typeof exports?module.exports=n(i,require("wolfy87-eventemitter"),require("eventie")):i.imagesLoaded=n(i,i.EventEmitter,i.eventie)}(window,function(e,t,i){function r(e,t){for(var i in t)e[i]=t[i];return e}function o(e){return"[object Array]"===h.call(e)}function a(e){var t=[];if(o(e))t=e;else if("number"==typeof e.length)for(var i=0,n=e.length;i<n;i++)t.push(e[i]);else t.push(e);return t}function s(e,t,i){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=a(e),this.options=r({},this.options),"function"==typeof t?i=t:r(this.options,t),i&&this.on("always",i),this.getImages(),c&&(this.jqDeferred=new c.Deferred);var n=this;setTimeout(function(){n.check()})}function n(e){this.img=e}function l(e){this.src=e,p[e]=this}var c=e.jQuery,u=e.console,d=void 0!==u,h=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;e<t;e++){var i=this.elements[e];"IMG"===i.nodeName&&this.addImage(i);var n=i.nodeType;if(n&&(1===n||9===n||11===n))for(var r=i.querySelectorAll("img"),o=0,a=r.length;o<a;o++){var s=r[o];this.addImage(s)}}},s.prototype.addImage=function(e){var t=new n(e);this.images.push(t)},s.prototype.check=function(){function e(e,t){return i.options.debug&&d&&u.log("confirm",e,t),i.progress(e),++n===r&&i.complete(),!0}var i=this,n=0,r=this.images.length;if(this.hasAnyBroken=!1,r)for(var t=0;t<r;t++){var o=this.images[t];o.on("confirm",e),o.check()}else this.complete()},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var i=this;setTimeout(function(){if(i.emit(t,i),i.emit("always",i),i.jqDeferred){var e=i.hasAnyBroken?"reject":"resolve";i.jqDeferred[e](i)}})},c&&(c.fn.imagesLoaded=function(e,t){return new s(this,e,t).jqDeferred.promise(c(this))}),n.prototype=new t,n.prototype.check=function(){var e=p[this.img.src]||new l(this.img.src);if(e.isConfirmed)this.confirm(e.isLoaded,"cached was confirmed");else if(this.img.complete&&void 0!==this.img.naturalWidth)this.confirm(0!==this.img.naturalWidth,"naturalWidth");else{var i=this;e.on("confirm",function(e,t){return i.confirm(e.isLoaded,t),!0}),e.check()}},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var p={};return l.prototype=new t,l.prototype.check=function(){if(!this.isChecked){var e=new Image;i.bind(e,"load",this),i.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},l.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},l.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},l.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},l.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},l.prototype.unbindProxyEvents=function(e){i.unbind(e.target,"load",this),i.unbind(e.target,"error",this)},s}),function(e){function t(){}function i(c){function i(e){e.prototype.option||(e.prototype.option=function(e){c.isPlainObject(e)&&(this.options=c.extend(!0,this.options,e))})}function n(s,l){c.fn[s]=function(t){if("string"!=typeof t)return this.each(function(){var e=c.data(this,s);e?(e.option(t),e._init()):(e=new l(this,t),c.data(this,s,e))});for(var e=d.call(arguments,1),i=0,n=this.length;i<n;i++){var r=this[i],o=c.data(r,s);if(o)if(c.isFunction(o[t])&&"_"!==t.charAt(0)){var a=o[t].apply(o,e);if(void 0!==a)return a}else u("no such method '"+t+"' for "+s+" instance");else u(
"cannot call methods on "+s+" prior to initialization; attempted to call '"+t+"'")}return this}}if(c){var u="undefined"==typeof console?t:function(e){console.error(e)};return c.bridget=function(e,t){i(t),n(e,t)},c.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i("object"==typeof exports?require("jquery"):e.jQuery)}(window),function(i){function n(e){var t=i.event;return t.target=t.target||t.srcElement||e,t}var e=document.documentElement,r=function(){};e.addEventListener?r=function(e,t,i){e.addEventListener(t,i,!1)}:e.attachEvent&&(r=function(t,e,i){t[e+i]=i.handleEvent?function(){var e=n(t);i.handleEvent.call(i,e)}:function(){var e=n(t);i.call(t,e)},t.attachEvent("on"+e,t[e+i])});var t=function(){};e.removeEventListener?t=function(e,t,i){e.removeEventListener(t,i,!1)}:e.detachEvent&&(t=function(e,t,i){e.detachEvent("on"+t,e[t+i]);try{delete e[t+i]}catch(r){e[t+i]=void 0}});var o={bind:r,unbind:t};"function"==typeof define&&define.amd?define("eventie/eventie",o):"object"==typeof exports?module.exports=o:i.eventie=o}(this),function(t){function i(e){"function"==typeof e&&(i.isReady?e():a.push(e))}function n(e){var t="readystatechange"===e.type&&"complete"!==o.readyState;i.isReady||t||r()}function r(){i.isReady=!0;for(var e=0,t=a.length;e<t;e++){(0,a[e])()}}function e(e){return"complete"===o.readyState?r():(e.bind(o,"DOMContentLoaded",n),e.bind(o,"readystatechange",n),e.bind(t,"load",n)),i}var o=t.document,a=[];i.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],e):"object"==typeof exports?module.exports=e(require("eventie")):t.docReady=e(t.eventie)}(window),function(){function e(){}function o(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function t(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,n=this,r=n.EventEmitter;i.getListeners=function(e){var t,i,n=this._getEvents();if(e instanceof RegExp)for(i in t={},n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i]);else t=n[e]||(n[e]=[]);return t},i.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},i.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&((t={})[e]=i),t||i},i.addListener=function(e,t){var i,n=this.getListenersAsObject(e),r="object"==typeof t;for(i in n)n.hasOwnProperty(i)&&-1===o(n[i],t)&&n[i].push(r?t:{listener:t,once:!1});return this},i.on=t("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=t("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,t){var i,n,r=this.getListenersAsObject(e);for(n in r)r.hasOwnProperty(n)&&(-1!==(i=o(r[n],t))&&r[n].splice(i,1));return this},i.off=t("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,i){var n,r,o=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)o.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(r=t[n])&&("function"==typeof r?o.call(this,n,r):a.call(this,n,r));return this},i.removeEvent=function(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},i.removeAllListeners=t("removeEvent"),i.emitEvent=function(e,t){var i,n,r,o=this.getListenersAsObject(e);for(r in o)if(o.hasOwnProperty(r))for(n=o[r].length;n--;)!0===(i=o[r][n]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},i.trigger=t("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return n.EventEmitter=r,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:n.EventEmitter=e}.call(this),function(e){function t(e){if(e){if("string"==typeof o[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,i=0,n=r.length;i<n;i++)if(t=r[i]+e,"string"==typeof o[t])return t}}var r="Webkit Moz ms Ms O".split(" "),o=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),function(s){function k(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!isNaN(t)&&t}function e(){}function j(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,i=T.length;t<i;t++){e[T[t]]=0}return e}function t(o){function y(){if(!a){a=!0;var t=s.getComputedStyle;if(r=t?function(e){return t(e,null)}:function(e){return e.currentStyle},b=function(e){var t=r(e);return t||l("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),t},_=o("boxSizing")){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[_]="border-box";var i=document.body||document.documentElement;i.appendChild(e);var n=b(e);x=200===k(n.width),i.removeChild(e)}}var r}function e(e){if(y(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var t=b(e);if("none"===t.display)return j();var i={};i.width=e.offsetWidth,i.height=e.offsetHeight;for(var n=i.isBorderBox=!(!_||!t[_]||"border-box"!==t[_]),r=0,o=T.length;r<o;r++){var a=T[r],s=t[a];s=w(e,s);var l=parseFloat(s);i[a]=isNaN(l)?0:l}var c=i.paddingLeft+i.paddingRight,u=i.paddingTop+i.paddingBottom,d=i.marginLeft+i.marginRight,h=i.marginTop+i.marginBottom,p=i.borderLeftWidth+i.borderRightWidth,f=i.borderTopWidth+i.borderBottomWidth,g=n&&x,m=k(t.width);!1!==m&&(i.width=m+(g?0:c+p));var v=k(t.height);return!1!==v&&(i.height=v+(g?0:u+f)),i.innerWidth=i.width-(c+p),i.innerHeight=i.height-(u+f),i.outerWidth=i.width+d,i.outerHeight=i.height+h,i}}function w(e,t){if(s.getComputedStyle||-1===t.indexOf("%"))return t;var i=e.style,n=i.left,r=e.runtimeStyle,o=r&&r.left;return o&&(r.left=e.currentStyle.left),i.left=t,t=i.pixelLeft,i.left=n,o&&(r.left=o),t}var b,_,x,a=!1;return e}var l="undefined"==typeof console?e:function(e){console.error(e)},T=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],t):"object"==typeof exports?module.exports=t(require("desandro-get-style-property")):s.getSize=t(s.getStyleProperty)}(window),function(r){function i(e,t){return e[a](t)}function o(e){e.parentNode||document.createDocumentFragment().appendChild(e)}function e(e,t){o(e);for(var i=e.parentNode.querySelectorAll(t),n=0,r=i.length;n<r;n++)if(i[n]===e)return!0;return!1}function t(e,t){return o(e),i(e,t)}var n,a=function(){if(r.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],t=0,i=e.length;t<i;t++){var n=e[t]+"MatchesSelector";if(r[n])return n}}();if(a){var s=i(document.createElement("div"),"div");n=s?i:t}else n=e;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return n}):"object"==typeof exports?module.exports=n:window.matchesSelector=n}(Element.prototype),function(e){function g(e,t){for(var i in t)e[i]=t[i];return e}function m(e){for(var t in e)return!1;return!null}function v(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function t(e,t,o){function i(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var n=o("transition"),r=o("transform"),a=n&&r,s=!!o("perspective"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[n],c=["transform","transition","transitionDuration","transitionProperty"],u=function(){for(var e={},t=0,i=c.length;t<i;t++){var n=c[t],r=o(n);r&&r!==n&&(e[n]=r)}return e}();g(i.prototype,e.prototype),i.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.getSize=function(){this.size=t(this.element)},i.prototype.css=function(e){var t=this.element.style;for(var i in e){t[u[i]||i]=e[i]}},i.prototype.getPosition=function(){var e=y(this.element),t=this.layout.options,i=t.isOriginLeft,n=t.isOriginTop,r=parseInt(e[i?"left":"right"],10),o=parseInt(e[n?"top":"bottom"],10);r=isNaN(r)?0:r,o=isNaN(o)?0:o;var a=this.layout.size;r-=i?a.paddingLeft:a.paddingRight,o-=n?a.paddingTop:a.paddingBottom,this.position.x=r,this.position.y=o},i.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,i={};t.isOriginLeft?(i.left=this.position.x+e.paddingLeft+"px",i.right=""):(i.right=this.position.x+e.paddingRight+"px",i.left=""),t.isOriginTop?(i.top=this.position.y+e.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+e.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var d=s?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};i.prototype._transitionTo=function(e,t){this.getPosition();var i=this.position.x,n=this.position.y,r=parseInt(e,10),o=parseInt(t,10),a=r===this.position.x&&o===this.position.y;if(this.setPosition(e,t),!a||this.isTransitioning){var s=e-i,l=t-n,c={},u=this.layout.options;s=u.isOriginLeft?s:-s,l=u.isOriginTop?l:-l,c.transform=d(s,l),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},i.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},i.prototype.moveTo=a?i.prototype._transitionTo:i.prototype.goTo,i.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},i.prototype._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},i.prototype._transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t=this._transn;for(var i in e.onTransitionEnd)t.onEnd[i]=e.onTransitionEnd[i];for(i in e.to)t.ingProperties[i]=!0,e.isCleaning&&(t.clean[i]=!0);if(e.from){this.css(e.from);this.element.offsetHeight;null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var h=r&&v(r)+",opacity";i.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:h,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(l,this,!1))},i.prototype.transition=i.prototype[n?"_transition":"_nonTransition"],i.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},i.prototype.onotransitionend=function(e){this.ontransitionend(e)};var p={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};i.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,i=p[e.propertyName]||e.propertyName;if(delete t.ingProperties[i],m(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[i]),i in t.onEnd)t.onEnd[i].call(this),delete t.onEnd[i];this.emitEvent("transitionEnd",[this])}},i.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(l,this,!1),this.isTransitioning=!1},i.prototype._removeStyles=function(e){var t={};for(var i in e)t[i]="";this.css(t)};var f={transitionProperty:"",transitionDuration:""};return i.prototype.removeTransitionStyles=function(){this.css(f)},i.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},i.prototype.remove=function(){if(n&&parseFloat(this.layout.options.transitionDuration)){var e=this;this.on("transitionEnd",function(){return e.removeElem(),!0}),this.hide()}else this.removeElem()},i.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options;this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0})},i.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options;this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},i.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},i}var i=e.getComputedStyle,y=i?function(e){return i(e,null)}:function(e){return e.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],t):"object"==typeof exports?module.exports=t(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(e.Outlayer={},e.Outlayer.Item=t(e.EventEmitter,e.getSize,e.getStyleProperty))}(window),function(l){function h(e,t){for(var i in t)e[i]=t[i];return e}function r(e){return"[object Array]"===t.call(e)}function c(e){var t=[];if(r(e))t=e;else if(e&&"number"==typeof e.length)for(var i=0,n=e.length;i<n;i++)t.push(e[i]);else t.push(e);return t}function u(e,t){var i=n(t,e);-1!==i&&t.splice(i,1)}function p(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()}function e(e,t,i,r,d,n){function o(e,t){if("string"==typeof e&&(e=f.querySelector(e)),e&&y(e)){this.element=e,this.options=h({},this.constructor.defaults),this.option(t);var i=++a;this.element.outlayerGUID=i,(s[i]=this)._create(),this.options.isInitLayout&&this.layout()}else g&&g.error("Bad "+this.constructor.namespace+" element: "+e)}var a=0,s={};return o.namespace="outlayer",o.Item=n,o.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},h(o.prototype,i.prototype),o.prototype.option=function(e){h(this.options,e)},o.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),h(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},o.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},o.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),i=this.constructor.Item,n=[],r=0,o=t.length;r<o;r++){var a=new i(t[r],this);n.push(a)}return n},o.prototype._filterFindItemElements=function(e){e=c(e);for(var t=this.options.itemSelector,i=[],n=0,r=e.length;n<r;n++){var o=e[n];if(y(o))if(t){d(o,t)&&i.push(o);for(var a=o.querySelectorAll(t),s=0,l=a.length;s<l;s++)i.push(a[s])}else i.push(o)}return i},o.prototype.getItemElements=function(){for(var e=[],t=0,i=this.items.length;t<i;t++)e.push(this.items[t].element);return e},o.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},o.prototype._init=o.prototype.layout,o.prototype._resetLayout=function(){this.getSize()},o.prototype.getSize=function(){this.size=r(this.element)},o.prototype._getMeasurement=function(e,t){var i,n=this.options[e];n?("string"==typeof n?i=this.element.querySelector(n):y(n)&&(i=n),this[e]=i?r(i)[t]:n):this[e]=0},o.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},o.prototype._getItemsForLayout=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];r.isIgnored||t.push(r)}return t},o.prototype._layoutItems=function(e,t){function i(){n.emitEvent("layoutComplete",[n,e])}var n=this;if(e&&e.length){this._itemsOn(e,"layout",i);for(var r=[],o=0,a=e.length;o<a;o++){var s=e[o],l=this._getItemLayoutPosition(s);l.item=s,l.isInstant=t||s.isLayoutInstant,r.push(l)}this._processLayoutQueue(r)}else i()},o.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},o.prototype._processLayoutQueue=function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t];this._positionItem(n.item,n.x,n.y,n.isInstant)}},o.prototype._positionItem=function(e,t,i,n){n?e.goTo(t,i):e.moveTo(t,i)},o.prototype._postLayout=function(){this.resizeContainer()},o.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},o.prototype._getContainerSize=v,o.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var i=this.size;i.isBorderBox&&(e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},o.prototype._itemsOn=function(e,t,i){function n(){return++r===o&&i.call(a),!0}for(var r=0,o=e.length,a=this,s=0,l=e.length;s<l;s++){e[s].on(t,n)}},o.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},o.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},o.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,i=e.length;t<i;t++){var n=e[t];this.ignore(n)}}},o.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,i=e.length;t<i;t++){var n=e[t];u(n,this.stamps),this.unignore(n)}},o.prototype._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=c(e)):void 0},o.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;e<t;e++){var i=this.stamps[e];this._manageStamp(i)}}},o.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},o.prototype._manageStamp=v,o.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),i=this._boundingRect,n=r(e);return{left:t.left-i.left-n.marginLeft,top:t.top-i.top-n.marginTop,right:i.right-t.right-n.marginRight,bottom:i.bottom-t.bottom-n.marginBottom}},o.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},o.prototype.bindResize=function(){this.isResizeBound||(e.bind(l,"resize",this),this.isResizeBound=!0)},o.prototype.unbindResize=function(){this.isResizeBound&&e.unbind(l,"resize",this),this.isResizeBound=!1},o.prototype.onresize=function(){function e(){t.resize(),delete t.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},o.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},o.prototype.needsResizeLayout=function(){var e=r(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},o.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},o.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},o.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var i=this.items.slice(0);this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i)}},o.prototype.reveal=function(e){var t=e&&e.length;if(t)for(var i=0;i<t;i++){e[i].reveal()}},o.prototype.hide=function(e){var t=e&&e.length;if(t)for(var i=0;i<t;i++){e[i].hide()}},o.prototype.getItem=function(e){for(var t=0,i=this.items.length;t<i;t++){var n=this.items[t];if(n.element===e)return n}},o.prototype.getItems=function(e){if(e&&e.length){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i],o=this.getItem(r);o&&t.push(o)}return t}},o.prototype.remove=function(e){e=c(e);var t=this.getItems(e);if(t&&t.length){this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])});for(var i=0,n=t.length;i<n;i++){var r=t[i];r.remove(),u(r,this.items)}}},o.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,i=this.items.length;t<i;t++){this.items[t].destroy()}this.unbindResize();var n=this.element.outlayerGUID;delete s[n],delete this.element.outlayerGUID,m&&m.removeData(this.element,this.constructor.namespace)},o.data=function(e){var t=e&&e.outlayerGUID;return t&&s[t]},o.create=function(c,e){function u(){o.apply(this,arguments)}return Object.create?u.prototype=Object.create(o.prototype):h(u.prototype,o.prototype),(u.prototype.constructor=u).defaults=h({},o.defaults),h(u.defaults,e),u.prototype.settings={},u.namespace=c,u.data=o.data,u.Item=function(){n.apply(this,arguments)},u.Item.prototype=new n,t(function(){for(var e=p(c),t=f.querySelectorAll(".js-"+e),i="data-"+e+"-options",n=0,r=t.length;n<r;n++){var o,a=t[n],s=a.getAttribute(i);try{o=s&&JSON.parse(s)}catch(d){g&&g.error("Error parsing "+i+" on "+a.nodeName.toLowerCase()+(a.id?"#"+a.id:"")+": "+d);continue}var l=new u(a,o);m&&m.data(a,c,l)}}),m&&m.bridget&&m.bridget(c,u),u},o.Item=n,o}var f=l.document,g=l.console,m=l.jQuery,v=function(){},t=Object.prototype.toString,y="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},n=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],e):"object"==typeof exports?module.exports=e(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):l.Outlayer=e(l.eventie,l.docReady,l.EventEmitter,l.getSize,l.matchesSelector,l.Outlayer.Item)}(window),function(e){function t(e,c){var t=e.create("masonry");return t.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.maxY=0},t.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],t=e&&e.element;this.columnWidth=t&&c(t).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},t.prototype.getContainerWidth=function(){var e=this.options.isFitWidth?this.element.parentNode:this.element,t=c(e);this.containerWidth=t&&t.innerWidth},t.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,i=Math[t&&t<1?"round":"ceil"](e.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var n=this._getColGroup(i),r=Math.min.apply(Math,n),o=u(n,r),a={x:this.columnWidth*o,y:r},s=r+e.size.outerHeight,l=this.cols+1-n.length,c=0;c<l;c++)this.colYs[o+c]=s;return a},t.prototype._getColGroup=function(e){if(e<2)return this.colYs;for(var t=[],i=this.cols+1-e,n=0;n<i;n++){var r=this.colYs.slice(n,n+e);t[n]=Math.max.apply(Math,r)}return t},t.prototype._manageStamp=function(e){var t=c(e),i=this._getElementOffset(e),n=this.options.isOriginLeft?i.left:i.right,r=n+t.outerWidth,o=Math.floor(n/this.columnWidth);o=Math.max(0,o);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var s=(this.options.isOriginTop?i.top:i.bottom)+t.outerHeight,l=o;l<=a;l++)this.colYs[l]=Math.max(s,this.colYs[l])},t.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},t.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},t.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},t}var u=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var i=0,n=e.length;i<n;i++){if(e[i]===t)return i}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],t):"object"==typeof exports?module.exports=t(require("outlayer"),require("get-size")):e.Masonry=t(e.Outlayer,e.getSize)}(window),function(r){var o=function(e,t){this.$element=r(e),this.options=t,this.paused=!1,this.activeIndex=0,this.init=function(){this.$items=this.$element.find(".item")},this.attachEvents(),this.init()};o.prototype={slide:function(e){var t=r(e),i=t.find(".frame");return this.$items.hide(),t.show(),Math.round(t.height()-i.height())/2,this.activeIndex=this.$items.index(e),this.options.autoPlay&&!this.paused&&this.play(),this},play:function(){this.paused=!1,this.interval&&clearInterval(this.interval),this.interval=setInterval(r.proxy(this.next,this),this.options.interval)},pause:function(){return this.paused=!0,this.interval=clearInterval(this.interval),this},startAt:function(e){this.to(e)},next:function(){return this.to("next")},to:function(e){return"next"===e&&(e=this.activeIndex+1),"prev"===e&&(e=this.activeIndex-1),this.slide(this.$items[this.getValidIndex(e)])},getValidIndex:function(e){return(void 0===e||e>this.$items.length-1)&&(e=0),e<0&&(e=this.$items.length-1),e},attachEvents:function(){var e=this.$element.find(".frame img"),t=this;e.on("mouseenter",function(){t.pause()}),e.on("mouseleave",function(){t.options.autoPlay&&t.play()}),r(document).on("click","[data-slide], [data-slide-to]",function(e){e.preventDefault(),pos=parseInt(r(this).attr("data-slide-to"),10)||r(this).attr("data-slide"),"next"!==pos&&"prev"!==pos||t.pause(),t.to(pos)}),r("#slideshow-modal").on("hidden.bs.modal",function(){t.pause()})}},o.DEFAULTS={autoPlay:!0,interval:5e3},r.fn.slideshow=function(n){return this.each(function(){var e=r(this),t=e.data("slideshow"),i=r.extend({},o.DEFAULTS,e.data(),"object"==typeof n&&n);t||e.data("slideshow",t=new o(this,i))})}}(jQuery),Blacklight.onLoad(function(){$("#slideshow").slideshow()}),function(o){o.fn.openseadragon=function(){function r(){return"Openseadragon"+ ++e}var e=0;return o(this).each(function(){var e=o(this);e.addClass("openseadragon-viewer"),void 0===e.attr("id")&&e.attr("id",r());var t=e.data("openseadragon"),i=e.find('source[media="openseadragon"]'),n=o.map(i,function(e){return o(e).data("openseadragon")?o(e).data("openseadragon"):o(e).attr("src")});e.css("height",e.css("height")),e.data("osdViewer",OpenSeadragon(o.extend({id:e.attr("id")},t,{tileSources:n})))}),this}}(jQuery),function(e){function t(){e("picture[data-openseadragon]").openseadragon()}var i="ready";"undefined"!=typeof Turbolinks&&Turbolinks.supported&&(i=Turbolinks.BrowserAdapter?"turbolinks:load":"page:load ready"),e(document).on(i,t)}(jQuery),jQuery.fn.BlacklightMasonry=function(){var e=this;0<e.length&&e.imagesLoaded(function(){e.masonry()})},Blacklight.onLoad(function(){$('[data-behavior="masonry-gallery"]').BlacklightMasonry()}),function(o){o.color={},o.color.make=function(e,t,i,n){var r={};return r.r=e||0,r.g=t||0,r.b=i||0,r.a=null!=n?n:1,r.add=function(e,t){for(var i=0;i<e.length;++i)r[e.charAt(i)]+=t;return r.normalize()},r.scale=function(e,t){for(var i=0;i<e.length;++i)r[e.charAt(i)]*=t;return r.normalize()},r.toString=function(){return 1<=r.a?"rgb("+[r.r,r.g,r.b].join(",")+")":"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"},r.normalize=function(){function e(e,t,i){return t<e?e:i<t?i:t}return r.r=e(0,parseInt(r.r),255),r.g=e(0,parseInt(r.g),255),r.b=e(0,parseInt(r.b),255),r.a=e(0,r.a,1),r},r.clone=function(){return o.color.make(r.r,r.b,r.g,r.a)},r.normalize()},o.color.extract=function(e,t){var i;do{if(""!=(i=e.css(t).toLowerCase())&&"transparent"!=i)break;e=e.parent()}while(e.length&&!o.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==i&&(i="transparent"),o.color.parse(i)},o.color.parse=function(e){var t,i=o.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return i(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return i(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return i(2.55*parseFloat(t[1]),2.55*parseFloat(t[2]),2.55*parseFloat(t[3]));if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return i(2.55*parseFloat(t[1]),2.55*parseFloat(t[2]),2.55*parseFloat(t[3]),parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return i(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return i(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var n=o.trim(e).toLowerCase();return"transparent"==n?i(255,255,255,0):i((t=r[n]||[0,0,0])[0],t[1],t[2])};var r={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(me){function ve(e,t){var i=t.children("."+e)[0];if(null==i&&((i=document.createElement("canvas")).className=e,me(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(t),!i.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");i=window.G_vmlCanvasManager.initElement(i)}this.element=i;var n=this.context=i.getContext("2d"),r=window.devicePixelRatio||1,o=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;this.pixelRatio=r/o,this.resize(t.width(),t.height()),this.textContainer=null,this.text={},this._textCache={}}function n(m,e,t,n){function j(e,t){t=[pe].concat(t);for(var i=0;i<e.length;++i)e[i].apply(this,t)}function i(){for(var e={Canvas:ve},t=0;t<n.length;++t){var i=n[t];i.init(pe,e),i.options&&me.extend(!0,te,i.options)}}function r(e){me.extend(!0,te,e),e&&e.colors&&(te.colors=e.colors),null==te.xaxis.color&&(te.xaxis.color=me.color.parse(te.grid.color).scale("a",.22).toString()),null==te.yaxis.color&&(te.yaxis.color=me.color.parse(te.grid.color).scale("a",.22).toString()),null==te.xaxis.tickColor&&(te.xaxis.tickColor=te.grid.tickColor||te.xaxis.color),null==te.yaxis.tickColor&&(te.yaxis.tickColor=te.grid.tickColor||te.yaxis.color),null==te.grid.borderColor&&(te.grid.borderColor=te.grid.color),null==te.grid.tickColor&&(te.grid.tickColor=me.color.parse(te.grid.color).scale("a",.22).toString());var t,i,n,r=m.css("font-size"),o=r?+r.replace("px",""):13,a={style:m.css("font-style"),size:Math.round(.8*o),variant:m.css("font-variant"),weight:m.css("font-weight"),family:m.css("font-family")};for(n=te.xaxes.length||1,t=0;t<n;++t)(i=te.xaxes[t])&&!i.tickColor&&(i.tickColor=i.color)
,i=me.extend(!0,{},te.xaxis,i),(te.xaxes[t]=i).font&&(i.font=me.extend({},a,i.font),i.font.color||(i.font.color=i.color),i.font.lineHeight||(i.font.lineHeight=Math.round(1.15*i.font.size)));for(n=te.yaxes.length||1,t=0;t<n;++t)(i=te.yaxes[t])&&!i.tickColor&&(i.tickColor=i.color),i=me.extend(!0,{},te.yaxis,i),(te.yaxes[t]=i).font&&(i.font=me.extend({},a,i.font),i.font.color||(i.font.color=i.color),i.font.lineHeight||(i.font.lineHeight=Math.round(1.15*i.font.size)));for(te.xaxis.noTicks&&null==te.xaxis.ticks&&(te.xaxis.ticks=te.xaxis.noTicks),te.yaxis.noTicks&&null==te.yaxis.ticks&&(te.yaxis.ticks=te.yaxis.noTicks),te.x2axis&&(te.xaxes[1]=me.extend(!0,{},te.xaxis,te.x2axis),te.xaxes[1].position="top"),te.y2axis&&(te.yaxes[1]=me.extend(!0,{},te.yaxis,te.y2axis),te.yaxes[1].position="right"),te.grid.coloredAreas&&(te.grid.markings=te.grid.coloredAreas),te.grid.coloredAreasColor&&(te.grid.markingsColor=te.grid.coloredAreasColor),te.lines&&me.extend(!0,te.series.lines,te.lines),te.points&&me.extend(!0,te.series.points,te.points),te.bars&&me.extend(!0,te.series.bars,te.bars),null!=te.shadowSize&&(te.series.shadowSize=te.shadowSize),null!=te.highlightColor&&(te.series.highlightColor=te.highlightColor),t=0;t<te.xaxes.length;++t)f(se,t+1).options=te.xaxes[t];for(t=0;t<te.yaxes.length;++t)f(le,t+1).options=te.yaxes[t];for(var s in he)te.hooks[s]&&te.hooks[s].length&&(he[s]=he[s].concat(te.hooks[s]));j(he.processOptions,[te])}function o(e){ee=a(e),l(),c()}function a(e){for(var t=[],i=0;i<e.length;++i){var n=me.extend(!0,{},te.series);null!=e[i].data?(n.data=e[i].data,delete e[i].data,me.extend(!0,n,e[i]),e[i].data=n.data):n.data=e[i],t.push(n)}return t}function p(e,t){var i=e[t+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function T(){return me.grep(se.concat(le),function(e){return e})}function u(e){var t,i,n={};for(t=0;t<se.length;++t)(i=se[t])&&i.used&&(n["x"+i.n]=i.c2p(e.left));for(t=0;t<le.length;++t)(i=le[t])&&i.used&&(n["y"+i.n]=i.c2p(e.top));return n.x1!==undefined&&(n.x=n.x1),n.y1!==undefined&&(n.y=n.y1),n}function s(e){var t,i,n,r={};for(t=0;t<se.length;++t)if((i=se[t])&&i.used&&(null==e[n="x"+i.n]&&1==i.n&&(n="x"),null!=e[n])){r.left=i.p2c(e[n]);break}for(t=0;t<le.length;++t)if((i=le[t])&&i.used&&(null==e[n="y"+i.n]&&1==i.n&&(n="y"),null!=e[n])){r.top=i.p2c(e[n]);break}return r}function f(e,t){return e[t-1]||(e[t-1]={n:t,direction:e==se?"x":"y",options:me.extend(!0,{},e==se?te.xaxis:te.yaxis)}),e[t-1]}function l(){var e,t=ee.length,i=-1;for(e=0;e<ee.length;++e){var n=ee[e].color;null!=n&&(t--,"number"==typeof n&&i<n&&(i=n))}t<=i&&(t=i+1);var r,o=[],a=te.colors,s=a.length,l=0;for(e=0;e<t;e++)r=me.color.parse(a[e%s]||"#666"),e%s==0&&e&&(l=0<=l?l<.5?-l-.2:0:-l),o[e]=r.scale("rgb",1+l);var c,u=0;for(e=0;e<ee.length;++e){if(null==(c=ee[e]).color?(c.color=o[u].toString(),++u):"number"==typeof c.color&&(c.color=o[c.color].toString()),null==c.lines.show){var d,h=!0;for(d in c)if(c[d]&&c[d].show){h=!1;break}h&&(c.lines.show=!0)}null==c.lines.zero&&(c.lines.zero=!!c.lines.fill),c.xaxis=f(se,p(c,"x")),c.yaxis=f(le,p(c,"y"))}}function c(){function e(e,t,i){t<e.datamin&&t!=-g&&(e.datamin=t),i>e.datamax&&i!=g&&(e.datamax=i)}var t,i,n,r,o,a,s,l,c,u,d,h,p=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.MAX_VALUE;for(me.each(T(),function(e,t){t.datamin=p,t.datamax=f,t.used=!1}),t=0;t<ee.length;++t)(o=ee[t]).datapoints={points:[]},j(he.processRawData,[o,o.data,o.datapoints]);for(t=0;t<ee.length;++t){if(d=(o=ee[t]).data,!(h=o.datapoints.format)){if((h=[]).push({x:!0,number:!0,required:!0}),h.push({y:!0,number:!0,required:!0}),o.bars.show||o.lines.show&&o.lines.fill){var m=!!(o.bars.show&&o.bars.zero||o.lines.show&&o.lines.zero);h.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:m}),o.bars.horizontal&&(delete h[h.length-1].y,h[h.length-1].x=!0)}o.datapoints.format=h}if(null==o.datapoints.pointsize){o.datapoints.pointsize=h.length,s=o.datapoints.pointsize,a=o.datapoints.points;var v=o.lines.show&&o.lines.steps;for(o.xaxis.used=o.yaxis.used=!0,i=n=0;i<d.length;++i,n+=s){var y=null==(u=d[i]);if(!y)for(r=0;r<s;++r)l=u[r],(c=h[r])&&(c.number&&null!=l&&(l=+l,isNaN(l)?l=null:l==Infinity?l=g:l==-Infinity&&(l=-g)),null==l&&(c.required&&(y=!0),null!=c.defaultValue&&(l=c.defaultValue))),a[n+r]=l;if(y)for(r=0;r<s;++r)null!=(l=a[n+r])&&!1!==(c=h[r]).autoscale&&(c.x&&e(o.xaxis,l,l),c.y&&e(o.yaxis,l,l)),a[n+r]=null;else if(v&&0<n&&null!=a[n-s]&&a[n-s]!=a[n]&&a[n-s+1]!=a[n+1]){for(r=0;r<s;++r)a[n+s+r]=a[n+r];a[n+1]=a[n-s+1],n+=s}}}}for(t=0;t<ee.length;++t)o=ee[t],j(he.processDatapoints,[o,o.datapoints]);for(t=0;t<ee.length;++t){a=(o=ee[t]).datapoints.points,s=o.datapoints.pointsize,h=o.datapoints.format;var w=p,b=p,_=f,x=f;for(i=0;i<a.length;i+=s)if(null!=a[i])for(r=0;r<s;++r)l=a[i+r],(c=h[r])&&!1!==c.autoscale&&l!=g&&l!=-g&&(c.x&&(l<w&&(w=l),_<l&&(_=l)),c.y&&(l<b&&(b=l),x<l&&(x=l)));if(o.bars.show){var k;switch(o.bars.align){case"left":k=0;break;case"right":k=-o.bars.barWidth;break;default:k=-o.bars.barWidth/2}o.bars.horizontal?(b+=k,x+=k+o.bars.barWidth):(w+=k,_+=k+o.bars.barWidth)}e(o.xaxis,w,_),e(o.yaxis,b,x)}me.each(T(),function(e,t){t.datamin==p&&(t.datamin=null),t.datamax==f&&(t.datamax=null)})}function d(){m.css("padding",0).children().filter(function(){return!me(this).hasClass("flot-overlay")&&!me(this).hasClass("flot-base")}).remove(),"static"==m.css("position")&&m.css("position","relative"),ie=new ve("flot-base",m),ne=new ve("flot-overlay",m),oe=ie.context,ae=ne.context,re=me(ne.element).unbind();var e=m.data("plot");e&&(e.shutdown(),ne.clear()),m.data("plot",pe)}function h(){te.grid.hoverable&&(re.mousemove(H),re.bind("mouseleave",W)),te.grid.clickable&&re.click(q),j(he.bindEvents,[re])}function g(){ge&&clearTimeout(ge),re.unbind("mousemove",H),re.unbind("mouseleave",W),re.unbind("click",q),j(he.shutdown,[re])}function v(e){function t(e){return e}var i,n,r=e.options.transform||t,o=e.options.inverseTransform;"x"==e.direction?(i=e.scale=ue/Math.abs(r(e.max)-r(e.min)),n=Math.min(r(e.max),r(e.min))):(i=-(i=e.scale=de/Math.abs(r(e.max)-r(e.min))),n=Math.max(r(e.max),r(e.min))),e.p2c=r==t?function(e){return(e-n)*i}:function(e){return(r(e)-n)*i},e.c2p=o?function(e){return o(n+e/i)}:function(e){return n+e/i}}function y(e){for(var t=e.options,i=e.ticks||[],n=t.labelWidth||0,r=t.labelHeight||0,o=n||("x"==e.direction?Math.floor(ie.width/(i.length||1)):null),a=e.direction+"Axis "+e.direction+e.n+"Axis",s="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+a,l=t.font||"flot-tick-label tickLabel",c=0;c<i.length;++c){var u=i[c];if(u.label){var d=ie.getTextInfo(s,u.label,l,null,o);n=Math.max(n,d.width),r=Math.max(r,d.height)}}e.labelWidth=t.labelWidth||n,e.labelHeight=t.labelHeight||r}function w(i){var e=i.labelWidth,t=i.labelHeight,n=i.options.position,r="x"===i.direction,o=i.options.tickLength,a=te.grid.axisMargin,s=te.grid.labelMargin,l=!0,c=!0,u=!0,d=!1;me.each(r?se:le,function(e,t){t&&t.reserveSpace&&(t===i?d=!0:t.options.position===n&&(d?c=!1:l=!1),d||(u=!1))}),c&&(a=0),null==o&&(o=u?"full":5),isNaN(+o)||(s+=+o),r?(t+=s,"bottom"==n?(ce.bottom+=t+a,i.box={top:ie.height-ce.bottom,height:t}):(i.box={top:ce.top+a,height:t},ce.top+=t+a)):(e+=s,"left"==n?(i.box={left:ce.left+a,width:e},ce.left+=e+a):(ce.right+=e+a,i.box={left:ie.width-ce.right,width:e})),i.position=n,i.tickLength=o,i.box.padding=s,i.innermost=l}function b(e){"x"==e.direction?(e.box.left=ce.left-e.labelWidth/2,e.box.width=ie.width-ce.left-ce.right+e.labelWidth):(e.box.top=ce.top-e.labelHeight/2,e.box.height=ie.height-ce.bottom-ce.top+e.labelHeight)}function _(){var e,t=te.grid.minBorderMargin;if(null==t)for(e=t=0;e<ee.length;++e)t=Math.max(t,2*(ee[e].points.radius+ee[e].points.lineWidth/2));var n={left:t,right:t,top:t,bottom:t};me.each(T(),function(e,t){if(t.reserveSpace&&t.ticks&&t.ticks.length){var i=t.ticks[t.ticks.length-1];"x"===t.direction?(n.left=Math.max(n.left,t.labelWidth/2),i.v<=t.max&&(n.right=Math.max(n.right,t.labelWidth/2))):(n.bottom=Math.max(n.bottom,t.labelHeight/2),i.v<=t.max&&(n.top=Math.max(n.top,t.labelHeight/2)))}}),ce.left=Math.ceil(Math.max(n.left,ce.left)),ce.right=Math.ceil(Math.max(n.right,ce.right)),ce.top=Math.ceil(Math.max(n.top,ce.top)),ce.bottom=Math.ceil(Math.max(n.bottom,ce.bottom))}function x(){var e,t=T(),i=te.grid.show;for(var n in ce){var r=te.grid.margin||0;ce[n]="number"==typeof r?r:r[n]||0}for(var n in j(he.processOffset,[ce]),ce)"object"==typeof te.grid.borderWidth?ce[n]+=i?te.grid.borderWidth[n]:0:ce[n]+=i?te.grid.borderWidth:0;if(me.each(t,function(e,t){t.show=t.options.show,null==t.show&&(t.show=t.used),t.reserveSpace=t.show||t.options.reserveSpace,k(t)}),i){var o=me.grep(t,function(e){return e.reserveSpace});for(me.each(o,function(e,t){E(t),C(t),S(t,t.ticks),y(t)}),e=o.length-1;0<=e;--e)w(o[e]);_(),me.each(o,function(e,t){b(t)})}ue=ie.width-ce.left-ce.right,de=ie.height-ce.bottom-ce.top,me.each(t,function(e,t){v(t)}),i&&I(),F()}function k(e){var t=e.options,i=+(null!=t.min?t.min:e.datamin),n=+(null!=t.max?t.max:e.datamax),r=n-i;if(0==r){var o=0==n?1:.01;null==t.min&&(i-=o),null!=t.max&&null==t.min||(n+=o)}else{var a=t.autoscaleMargin;null!=a&&(null==t.min&&(i-=r*a)<0&&null!=e.datamin&&0<=e.datamin&&(i=0),null==t.max&&0<(n+=r*a)&&null!=e.datamax&&e.datamax<=0&&(n=0))}e.min=i,e.max=n}function E(e){var t,i=e.options;t="number"==typeof i.ticks&&0<i.ticks?i.ticks:.3*Math.sqrt("x"==e.direction?ie.width:ie.height);var n=(e.max-e.min)/t,r=-Math.floor(Math.log(n)/Math.LN10),o=i.tickDecimals;null!=o&&o<r&&(r=o);var a,s=Math.pow(10,-r),l=n/s;if(l<1.5?a=1:l<3?(a=2,2.25<l&&(null==o||r+1<=o)&&(a=2.5,++r)):a=l<7.5?5:10,a*=s,null!=i.minTickSize&&a<i.minTickSize&&(a=i.minTickSize),e.delta=n,e.tickDecimals=Math.max(0,null!=o?o:r),e.tickSize=i.tickSize||a,"time"==i.mode&&!e.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(e.tickGenerator||(e.tickGenerator=function(e){for(var t,i=[],n=ye(e.min,e.tickSize),r=0,o=Number.NaN;t=o,o=n+r*e.tickSize,i.push(o),++r,o<e.max&&o!=t;);return i},e.tickFormatter=function(e,t){var i=t.tickDecimals?Math.pow(10,t.tickDecimals):1,n=""+Math.round(e*i)/i;if(null!=t.tickDecimals){var r=n.indexOf("."),o=-1==r?0:n.length-r-1;if(o<t.tickDecimals)return(o?n:n+".")+(""+i).substr(1,t.tickDecimals-o)}return n}),me.isFunction(i.tickFormatter)&&(e.tickFormatter=function(e,t){return""+i.tickFormatter(e,t)}),null!=i.alignTicksWithAxis){var c=("x"==e.direction?se:le)[i.alignTicksWithAxis-1];if(c&&c.used&&c!=e){var u=e.tickGenerator(e);if(0<u.length&&(null==i.min&&(e.min=Math.min(e.min,u[0])),null==i.max&&1<u.length&&(e.max=Math.max(e.max,u[u.length-1]))),e.tickGenerator=function(e){var t,i,n=[];for(i=0;i<c.ticks.length;++i)t=(c.ticks[i].v-c.min)/(c.max-c.min),t=e.min+t*(e.max-e.min),n.push(t);return n},!e.mode&&null==i.tickDecimals){var d=Math.max(0,1-Math.floor(Math.log(e.delta)/Math.LN10)),h=e.tickGenerator(e);1<h.length&&/\..*0$/.test((h[1]-h[0]).toFixed(d))||(e.tickDecimals=d)}}}}function C(e){var t,i,n=e.options.ticks,r=[];for(null==n||"number"==typeof n&&0<n?r=e.tickGenerator(e):n&&(r=me.isFunction(n)?n(e):n),e.ticks=[],t=0;t<r.length;++t){var o=null,a=r[t];"object"==typeof a?(i=+a[0],1<a.length&&(o=a[1])):i=+a,null==o&&(o=e.tickFormatter(i,e)),isNaN(i)||e.ticks.push({v:i,label:o})}}function S(e,t){e.options.autoscaleMargin&&0<t.length&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v)),null==e.options.max&&1<t.length&&(e.max=Math.max(e.max,t[t.length-1].v)))}function P(){ie.clear(),j(he.drawBackground,[oe]);var e=te.grid;e.show&&e.backgroundColor&&R(),e.show&&!e.aboveData&&L();for(var t=0;t<ee.length;++t)j(he.drawSeries,[oe,ee[t]]),O(ee[t]);j(he.draw,[oe]),e.show&&e.aboveData&&L(),ie.render(),V()}function A(e,t){for(var i,n,r,o,a=T(),s=0;s<a.length;++s)if((i=a[s]).direction==t&&(e[o=t+i.n+"axis"]||1!=i.n||(o=t+"axis"),e[o])){n=e[o].from,r=e[o].to;break}if(e[o]||(i="x"==t?se[0]:le[0],n=e[t+"1"],r=e[t+"2"]),null!=n&&null!=r&&r<n){var l=n;n=r,r=l}return{from:n,to:r,axis:i}}function R(){oe.save(),oe.translate(ce.left,ce.top),oe.fillStyle=Z(te.grid.backgroundColor,de,0,"rgba(255, 255, 255, 0)"),oe.fillRect(0,0,ue,de),oe.restore()}function L(){var e,t,i,n;oe.save(),oe.translate(ce.left,ce.top);var r=te.grid.markings;if(r)for(me.isFunction(r)&&((t=pe.getAxes()).xmin=t.xaxis.min,t.xmax=t.xaxis.max,t.ymin=t.yaxis.min,t.ymax=t.yaxis.max,r=r(t)),e=0;e<r.length;++e){var o=r[e],a=A(o,"x"),s=A(o,"y");null==a.from&&(a.from=a.axis.min),null==a.to&&(a.to=a.axis.max),null==s.from&&(s.from=s.axis.min),null==s.to&&(s.to=s.axis.max),a.to<a.axis.min||a.from>a.axis.max||s.to<s.axis.min||s.from>s.axis.max||(a.from=Math.max(a.from,a.axis.min),a.to=Math.min(a.to,a.axis.max),s.from=Math.max(s.from,s.axis.min),s.to=Math.min(s.to,s.axis.max),a.from==a.to&&s.from==s.to||(a.from=a.axis.p2c(a.from),a.to=a.axis.p2c(a.to),s.from=s.axis.p2c(s.from),s.to=s.axis.p2c(s.to),a.from==a.to||s.from==s.to?(oe.beginPath(),oe.strokeStyle=o.color||te.grid.markingsColor,oe.lineWidth=o.lineWidth||te.grid.markingsLineWidth,oe.moveTo(a.from,s.from),oe.lineTo(a.to,s.to),oe.stroke()):(oe.fillStyle=o.color||te.grid.markingsColor,oe.fillRect(a.from,s.to,a.to-a.from,s.from-s.to))))}t=T(),i=te.grid.borderWidth;for(var l=0;l<t.length;++l){var c,u,d,h,p=t[l],f=p.box,g=p.tickLength;if(p.show&&0!=p.ticks.length){for(oe.lineWidth=1,"x"==p.direction?(c=0,u="full"==g?"top"==p.position?0:de:f.top-ce.top+("top"==p.position?f.height:0)):(u=0,c="full"==g?"left"==p.position?0:ue:f.left-ce.left+("left"==p.position?f.width:0)),p.innermost||(oe.strokeStyle=p.options.color,oe.beginPath(),d=h=0,"x"==p.direction?d=ue+1:h=de+1,1==oe.lineWidth&&("x"==p.direction?u=Math.floor(u)+.5:c=Math.floor(c)+.5),oe.moveTo(c,u),oe.lineTo(c+d,u+h),oe.stroke()),oe.strokeStyle=p.options.tickColor,oe.beginPath(),e=0;e<p.ticks.length;++e){var m=p.ticks[e].v;d=h=0,isNaN(m)||m<p.min||m>p.max||"full"==g&&("object"==typeof i&&0<i[p.position]||0<i)&&(m==p.min||m==p.max)||("x"==p.direction?(c=p.p2c(m),h="full"==g?-de:g,"top"==p.position&&(h=-h)):(u=p.p2c(m),d="full"==g?-ue:g,"left"==p.position&&(d=-d)),1==oe.lineWidth&&("x"==p.direction?c=Math.floor(c)+.5:u=Math.floor(u)+.5),oe.moveTo(c,u),oe.lineTo(c+d,u+h))}oe.stroke()}}i&&(n=te.grid.borderColor,"object"==typeof i||"object"==typeof n?("object"!=typeof i&&(i={top:i,right:i,bottom:i,left:i}),"object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),0<i.top&&(oe.strokeStyle=n.top,oe.lineWidth=i.top,oe.beginPath(),oe.moveTo(0-i.left,0-i.top/2),oe.lineTo(ue,0-i.top/2),oe.stroke()),0<i.right&&(oe.strokeStyle=n.right,oe.lineWidth=i.right,oe.beginPath(),oe.moveTo(ue+i.right/2,0-i.top),oe.lineTo(ue+i.right/2,de),oe.stroke()),0<i.bottom&&(oe.strokeStyle=n.bottom,oe.lineWidth=i.bottom,oe.beginPath(),oe.moveTo(ue+i.right,de+i.bottom/2),oe.lineTo(0,de+i.bottom/2),oe.stroke()),0<i.left&&(oe.strokeStyle=n.left,oe.lineWidth=i.left,oe.beginPath(),oe.moveTo(0-i.left/2,de+i.bottom),oe.lineTo(0-i.left/2,0),oe.stroke())):(oe.lineWidth=i,oe.strokeStyle=te.grid.borderColor,oe.strokeRect(-i/2,-i/2,ue+i,de+i))),oe.restore()}function I(){me.each(T(),function(e,t){var i,n,r,o,a,s=t.box,l=t.direction+"Axis "+t.direction+t.n+"Axis",c="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+l,u=t.options.font||"flot-tick-label tickLabel";if(ie.removeText(c),t.show&&0!=t.ticks.length)for(var d=0;d<t.ticks.length;++d)!(i=t.ticks[d]).label||i.v<t.min||i.v>t.max||("x"==t.direction?(o="center",n=ce.left+t.p2c(i.v),"bottom"==t.position?r=s.top+s.padding:(r=s.top+s.height-s.padding,a="bottom")):(a="middle",r=ce.top+t.p2c(i.v),"left"==t.position?(n=s.left+s.width-s.padding,o="right"):n=s.left+s.padding),ie.addText(c,n,r,i.label,u,null,null,o,a))})}function O(e){e.lines.show&&M(e),e.bars.show&&B(e),e.points.show&&D(e)}function M(e){function t(e,t,i,n,r){var o=e.points,a=e.pointsize,s=null,l=null;oe.beginPath();for(var c=a;c<o.length;c+=a){var u=o[c-a],d=o[c-a+1],h=o[c],p=o[c+1];if(null!=u&&null!=h){if(d<=p&&d<r.min){if(p<r.min)continue;u=(r.min-d)/(p-d)*(h-u)+u,d=r.min}else if(p<=d&&p<r.min){if(d<r.min)continue;h=(r.min-d)/(p-d)*(h-u)+u,p=r.min}if(p<=d&&d>r.max){if(p>r.max)continue;u=(r.max-d)/(p-d)*(h-u)+u,d=r.max}else if(d<=p&&p>r.max){if(d>r.max)continue;h=(r.max-d)/(p-d)*(h-u)+u,p=r.max}if(u<=h&&u<n.min){if(h<n.min)continue;d=(n.min-u)/(h-u)*(p-d)+d,u=n.min}else if(h<=u&&h<n.min){if(u<n.min)continue;p=(n.min-u)/(h-u)*(p-d)+d,h=n.min}if(h<=u&&u>n.max){if(h>n.max)continue;d=(n.max-u)/(h-u)*(p-d)+d,u=n.max}else if(u<=h&&h>n.max){if(u>n.max)continue;p=(n.max-u)/(h-u)*(p-d)+d,h=n.max}u==s&&d==l||oe.moveTo(n.p2c(u)+t,r.p2c(d)+i),s=h,l=p,oe.lineTo(n.p2c(h)+t,r.p2c(p)+i)}}oe.stroke()}function i(e,t,i){for(var n=e.points,r=e.pointsize,o=Math.min(Math.max(0,i.min),i.max),a=0,s=!1,l=1,c=0,u=0;!(0<r&&a>n.length+r);){var d=n[(a+=r)-r],h=n[a-r+l],p=n[a],f=n[a+l];if(s){if(0<r&&null!=d&&null==p){u=a,r=-r,l=2;continue}if(r<0&&a==c+r){oe.fill(),s=!1,l=1,a=c=u+(r=-r);continue}}if(null!=d&&null!=p){if(d<=p&&d<t.min){if(p<t.min)continue;h=(t.min-d)/(p-d)*(f-h)+h,d=t.min}else if(p<=d&&p<t.min){if(d<t.min)continue;f=(t.min-d)/(p-d)*(f-h)+h,p=t.min}if(p<=d&&d>t.max){if(p>t.max)continue;h=(t.max-d)/(p-d)*(f-h)+h,d=t.max}else if(d<=p&&p>t.max){if(d>t.max)continue;f=(t.max-d)/(p-d)*(f-h)+h,p=t.max}if(s||(oe.beginPath(),oe.moveTo(t.p2c(d),i.p2c(o)),s=!0),h>=i.max&&f>=i.max)oe.lineTo(t.p2c(d),i.p2c(i.max)),oe.lineTo(t.p2c(p),i.p2c(i.max));else if(h<=i.min&&f<=i.min)oe.lineTo(t.p2c(d),i.p2c(i.min)),oe.lineTo(t.p2c(p),i.p2c(i.min));else{var g=d,m=p;h<=f&&h<i.min&&f>=i.min?(d=(i.min-h)/(f-h)*(p-d)+d,h=i.min):f<=h&&f<i.min&&h>=i.min&&(p=(i.min-h)/(f-h)*(p-d)+d,f=i.min),f<=h&&h>i.max&&f<=i.max?(d=(i.max-h)/(f-h)*(p-d)+d,h=i.max):h<=f&&f>i.max&&h<=i.max&&(p=(i.max-h)/(f-h)*(p-d)+d,f=i.max),d!=g&&oe.lineTo(t.p2c(g),i.p2c(h)),oe.lineTo(t.p2c(d),i.p2c(h)),oe.lineTo(t.p2c(p),i.p2c(f)),p!=m&&(oe.lineTo(t.p2c(p),i.p2c(f)),oe.lineTo(t.p2c(m),i.p2c(f)))}}}}oe.save(),oe.translate(ce.left,ce.top),oe.lineJoin="round";var n=e.lines.lineWidth,r=e.shadowSize;if(0<n&&0<r){oe.lineWidth=r,oe.strokeStyle="rgba(0,0,0,0.1)";var o=Math.PI/18;t(e.datapoints,Math.sin(o)*(n/2+r/2),Math.cos(o)*(n/2+r/2),e.xaxis,e.yaxis),oe.lineWidth=r/2,t(e.datapoints,Math.sin(o)*(n/2+r/4),Math.cos(o)*(n/2+r/4),e.xaxis,e.yaxis)}oe.lineWidth=n,oe.strokeStyle=e.color;var a=$(e.lines,e.color,0,de);a&&(oe.fillStyle=a,i(e.datapoints,e.xaxis,e.yaxis)),0<n&&t(e.datapoints,0,0,e.xaxis,e.yaxis),oe.restore()}function D(e){function t(e,t,i,n,r,o,a,s){for(var l=e.points,c=e.pointsize,u=0;u<l.length;u+=c){var d=l[u],h=l[u+1];null==d||d<o.min||d>o.max||h<a.min||h>a.max||(oe.beginPath(),d=o.p2c(d),h=a.p2c(h)+n,"circle"==s?oe.arc(d,h,t,0,r?Math.PI:2*Math.PI,!1):s(oe,d,h,t,r),oe.closePath(),i&&(oe.fillStyle=i,oe.fill()),oe.stroke())}}oe.save(),oe.translate(ce.left,ce.top);var i=e.points.lineWidth,n=e.shadowSize,r=e.points.radius,o=e.points.symbol;if(0==i&&(i=1e-4),0<i&&0<n){var a=n/2;oe.lineWidth=a,oe.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,r,null,a+a/2,!0,e.xaxis,e.yaxis,o),oe.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,r,null,a/2,!0,e.xaxis,e.yaxis,o)}oe.lineWidth=i,oe.strokeStyle=e.color,t(e.datapoints,r,$(e.points,e.color),0,!1,e.xaxis,e.yaxis,o),oe.restore()}function N(e,t,i,n,r,o,a,s,l,c,u){var d,h,p,f,g,m,v,y,w;c?(y=m=v=!0,g=!1,f=t+n,p=t+r,(h=e)<(d=i)&&(w=h,h=d,d=w,m=!(g=!0))):(g=m=v=!0,y=!1,d=e+n,h=e+r,(f=t)<(p=i)&&(w=f,f=p,p=w,v=!(y=!0))),h<a.min||d>a.max||f<s.min||p>s.max||(d<a.min&&(d=a.min,g=!1),h>a.max&&(h=a.max,m=!1),p<s.min&&(p=s.min,y=!1),f>s.max&&(f=s.max,v=!1),d=a.p2c(d),p=s.p2c(p),h=a.p2c(h),f=s.p2c(f),o&&(l.fillStyle=o(p,f),l.fillRect(d,f,h-d,p-f)),0<u&&(g||m||v||y)&&(l.beginPath(),l.moveTo(d,p),g?l.lineTo(d,f):l.moveTo(d,f),v?l.lineTo(h,f):l.moveTo(h,f),m?l.lineTo(h,p):l.moveTo(h,p),y?l.lineTo(d,p):l.moveTo(d,p),l.stroke()))}function B(c){function e(e,t,i,n,r,o){for(var a=e.points,s=e.pointsize,l=0;l<a.length;l+=s)null!=a[l]&&N(a[l],a[l+1],a[l+2],t,i,n,r,o,oe,c.bars.horizontal,c.bars.lineWidth)}var t;switch(oe.save(),oe.translate(ce.left,ce.top),oe.lineWidth=c.bars.lineWidth,oe.strokeStyle=c.color,c.bars.align){case"left":t=0;break;case"right":t=-c.bars.barWidth;break;default:t=-c.bars.barWidth/2}var i=c.bars.fill?function(e,t){return $(c.bars,c.color,e,t)}:null;e(c.datapoints,t,t+c.bars.barWidth,i,c.xaxis,c.yaxis),oe.restore()}function $(e,t,i,n){var r=e.fill;if(!r)return null;if(e.fillColor)return Z(e.fillColor,i,n,t);var o=me.color.parse(t);return o.a="number"==typeof r?r:.4,o.normalize(),o.toString()}function F(){if(null!=te.legend.container?me(te.legend.container).html(""):m.find(".legend").remove(),te.legend.show){for(var e,t,i=[],n=[],r=!1,o=te.legend.labelFormatter,a=0;a<ee.length;++a)(e=ee[a]).label&&(t=o?o(e.label,e):e.label)&&n.push({label:t,color:e.color});if(te.legend.sorted)if(me.isFunction(te.legend.sorted))n.sort(te.legend.sorted);else if("reverse"==te.legend.sorted)n.reverse();else{var s="descending"!=te.legend.sorted;n.sort(function(e,t){return e.label==t.label?0:e.label<t.label!=s?1:-1})}for(a=0;a<n.length;++a){var l=n[a];a%te.legend.noColumns==0&&(r&&i.push("</tr>"),i.push("<tr>"),r=!0),i.push('<td class="legendColorBox"><div style="border:1px solid '+te.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+l.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+l.label+"</td>")}if(r&&i.push("</tr>"),0!=i.length){var c='<table style="font-size:smaller;color:'+te.grid.color+'">'+i.join("")+"</table>";if(null!=te.legend.container)me(te.legend.container).html(c);else{var u="",d=te.legend.position,h=te.legend.margin;null==h[0]&&(h=[h,h]),"n"==d.charAt(0)?u+="top:"+(h[1]+ce.top)+"px;":"s"==d.charAt(0)&&(u+="bottom:"+(h[1]+ce.bottom)+"px;"),"e"==d.charAt(1)?u+="right:"+(h[0]+ce.right)+"px;":"w"==d.charAt(1)&&(u+="left:"+(h[0]+ce.left)+"px;");var p=me('<div class="legend">'+c.replace('style="','style="position:absolute;'+u+";")+"</div>").appendTo(m);if(0!=te.legend.backgroundOpacity){var f=te.legend.backgroundColor;null==f&&((f=(f=te.grid.backgroundColor)&&"string"==typeof f?me.color.parse(f):me.color.extract(p,"background-color")).a=1,f=f.toString());var g=p.children();me('<div style="position:absolute;width:'+g.width()+"px;height:"+g.height()+"px;"+u+"background-color:"+f+';"> </div>').prependTo(p).css("opacity",te.legend.backgroundOpacity)}}}}}function z(e,t,i){var n,r,o,a=te.grid.mouseActiveRadius,s=a*a+1,l=null;for(n=ee.length-1;0<=n;--n)if(i(ee[n])){var c=ee[n],u=c.xaxis,d=c.yaxis,h=c.datapoints.points,p=u.c2p(e),f=d.c2p(t),g=a/u.scale,m=a/d.scale;if(o=c.datapoints.pointsize,u.options.inverseTransform&&(g=Number.MAX_VALUE),d.options.inverseTransform&&(m=Number.MAX_VALUE),c.lines.show||c.points.show)for(r=0;r<h.length;r+=o){var v=h[r],y=h[r+1];if(null!=v&&!(g<v-p||v-p<-g||m<y-f||y-f<-m)){var w=Math.abs(u.p2c(v)-e),b=Math.abs(d.p2c(y)-t),_=w*w+b*b;_<s&&(s=_,l=[n,r/o])}}if(c.bars.show&&!l){var x,k;switch(c.bars.align){case"left":x=0;break;case"right":x=-c.bars.barWidth;break;default:x=-c.bars.barWidth/2}for(k=x+c.bars.barWidth,r=0;r<h.length;r+=o){v=h[r],y=h[r+1];var j=h[r+2];null!=v&&((ee[n].bars.horizontal?p<=Math.max(j,v)&&p>=Math.min(j,v)&&y+x<=f&&f<=y+k:v+x<=p&&p<=v+k&&f>=Math.min(j,y)&&f<=Math.max(j,y))&&(l=[n,r/o]))}}}return l?(n=l[0],r=l[1],o=ee[n].datapoints.pointsize,{datapoint:ee[n].datapoints.points.slice(r*o,(r+1)*o),dataIndex:r,series:ee[n],seriesIndex:n}):null}function H(e){te.grid.hoverable&&U("plothover",e,function(e){return 0!=e.hoverable})}function W(e){te.grid.hoverable&&U("plothover",e,function(){return!1})}function q(e){U("plotclick",e,function(e){return 0!=e.clickable})}function U(e,t,i){var n=re.offset(),r=t.pageX-n.left-ce.left,o=t.pageY-n.top-ce.top,a=u({left:r,top:o});a.pageX=t.pageX,a.pageY=t.pageY;var s=z(r,o,i);if(s&&(s.pageX=parseInt(s.series.xaxis.p2c(s.datapoint[0])+n.left+ce.left,10),s.pageY=parseInt(s.series.yaxis.p2c(s.datapoint[1])+n.top+ce.top,10)),te.grid.autoHighlight){for(var l=0;l<fe.length;++l){var c=fe[l];c.auto!=e||s&&c.series==s.series&&c.point[0]==s.datapoint[0]&&c.point[1]==s.datapoint[1]||G(c.series,c.point)}s&&J(s.series,s.datapoint,e)}m.trigger(e,[a,s])}function V(){var e=te.interaction.redrawOverlayInterval;-1!=e?ge||(ge=setTimeout(Y,e)):Y()}function Y(){var e,t;for(ge=null,ae.save(),ne.clear(),ae.translate(ce.left,ce.top),e=0;e<fe.length;++e)(t=fe[e]).series.bars.show?Q(t.series,t.point):K(t.series,t.point);ae.restore(),j(he.drawOverlay,[ae])}function J(e,t,i){if("number"==typeof e&&(e=ee[e]),"number"==typeof t){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var r=X(e,t);-1==r?(fe.push({series:e,point:t,auto:i}),V()):i||(fe[r].auto=!1)}function G(e,t){if(null==e&&null==t)return fe=[],void V();if("number"==typeof e&&(e=ee[e]),"number"==typeof t){var i=e.datapoints.pointsize;t=e.datapoints.points.slice(i*t,i*(t+1))}var n=X(e,t);-1!=n&&(fe.splice(n,1),V())}function X(e,t){for(var i=0;i<fe.length;++i){var n=fe[i];if(n.series==e&&n.point[0]==t[0]&&n.point[1]==t[1])return i}return-1}function K(e,t){var i=t[0],n=t[1],r=e.xaxis,o=e.yaxis,a="string"==typeof e.highlightColor?e.highlightColor:me.color.parse(e.color).scale("a",.5).toString();if(!(i<r.min||i>r.max||n<o.min||n>o.max)){var s=e.points.radius+e.points.lineWidth/2;ae.lineWidth=s,ae.strokeStyle=a;var l=1.5*s;i=r.p2c(i),n=o.p2c(n),ae.beginPath(),"circle"==e.points.symbol?ae.arc(i,n,l,0,2*Math.PI,!1):e.points.symbol(ae,i,n,l,!1),ae.closePath(),ae.stroke()}}function Q(e,t){var i,n="string"==typeof e.highlightColor?e.highlightColor:me.color.parse(e.color).scale("a",.5).toString(),r=n;switch(e.bars.align){case"left":i=0;break;case"right":i=-e.bars.barWidth;break;default:i=-e.bars.barWidth/2}ae.lineWidth=e.bars.lineWidth,ae.strokeStyle=n,N(t[0],t[1],t[2]||0,i,i+e.bars.barWidth,function(){return r},e.xaxis,e.yaxis,ae,e.bars.horizontal,e.bars.lineWidth)}function Z(e,t,i,n){if("string"==typeof e)return e;for(var r=oe.createLinearGradient(0,i,0,t),o=0,a=e.colors.length;o<a;++o){var s=e.colors[o];if("string"!=typeof s){var l=me.color.parse(n);null!=s.brightness&&(l=l.scale("rgb",s.brightness)),null!=s.opacity&&(l.a*=s.opacity),s=l.toString()}r.addColorStop(o/(a-1),s)}return r}var ee=[],te={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},ie=null,ne=null,re=null,oe=null,ae=null,se=[],le=[],ce={left:0,right:0,top:0,bottom:0},ue=0,de=0,he={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},pe=this;pe.setData=o,pe.setupGrid=x,pe.draw=P,pe.getPlaceholder=function(){return m},pe.getCanvas=function(){return ie.element},pe.getPlotOffset=function(){return ce},pe.width=function(){return ue},pe.height=function(){return de},pe.offset=function(){var e=re.offset();return e.left+=ce.left,e.top+=ce.top,e},pe.getData=function(){return ee},pe.getAxes=function(){var i={};return me.each(se.concat(le),function(e,t){t&&(i[t.direction+(1!=t.n?t.n:"")+"axis"]=t)}),i},pe.getXAxes=function(){return se},pe.getYAxes=function(){return le},pe.c2p=u,pe.p2c=s,pe.getOptions=function(){return te},pe.highlight=J,pe.unhighlight=G,pe.triggerRedrawOverlay=V,pe.pointOffset=function(e){return{left:parseInt(se[p(e,"x")-1].p2c(+e.x)+ce.left,10),top:parseInt(le[p(e,"y")-1].p2c(+e.y)+ce.top,10)}},pe.shutdown=g,pe.destroy=function(){g(),m.removeData("plot").empty(),ee=[],se=[],le=[],fe=[],pe=he=ae=oe=re=ne=ie=te=null},pe.resize=function(){var e=m.width(),t=m.height();ie.resize(e,t),ne.resize(e,t)},pe.hooks=he,i(pe),r(t),d(),o(e),x(),P(),h();var fe=[],ge=null}function ye(e,t){return t*Math.floor(e/t)}var p=Object.prototype.hasOwnProperty;ve.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var i=this.element,n=this.context,r=this.pixelRatio;this.width!=e&&(i.width=e*r,i.style.width=e+"px",this.width=e),this.height!=t&&(i.height=t*r,i.style.height=t+"px",this.height=t),n.restore(),n.save(),n.scale(r,r)},ve.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},ve.prototype.render=function(){var e=this._textCache;for(var t in e)if(p.call(e,t)){var i=this.getTextLayer(t),n=e[t];for(var r in i.hide(),n)if(p.call(n,r)){var o=n[r];for(var a in o)if(p.call(o,a)){for(var s,l=o[a].positions,c=0;s=l[c];c++)s.active?s.rendered||(i.append(s.element),s.rendered=!0):(l.splice(c--,1),s.rendered&&s.element.detach());0==l.length&&delete o[a]}}i.show()}},ve.prototype.getTextLayer=function(e){var t=this.text[e];return null==t&&(null==this.textContainer&&(this.textContainer=me("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),t=this.text[e]=me("<div></div>").addClass(e).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),t},ve.prototype.getTextInfo=function(e,t,i,n,r){var o,a,s,l;if(t=""+t,o="object"==typeof i?i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:i,null==(a=this._textCache[e])&&(a=this._textCache[e]={}),null==(s=a[o])&&(s=a[o]={}),null==(l=s[t])){var c=me("<div></div>").html(t).css({position:"absolute","max-width":r,top:-9999}).appendTo(this.getTextLayer(e));"object"==typeof i?c.css({font:o,color:i.color}):"string"==typeof i&&c.addClass(i),l=s[t]={width:c.outerWidth(!0),height:c.outerHeight(!0),element:c,positions:[]},c.detach()}return l},ve.prototype.addText=function(e,t,i,n,r,o,a,s,l){var c=this.getTextInfo(e,n,r,o,a),u=c.positions;"center"==s?t-=c.width/2:"right"==s&&(t-=c.width),"middle"==l?i-=c.height/2:"bottom"==l&&(i-=c.height);for(var d,h=0;d=u[h];h++)if(d.x==t&&d.y==i)return void(d.active=!0);d={active:!0,rendered:!1,element:u.length?c.element.clone():c.element,x:t,y:i},u.push(d),d.element.css({top:Math.round(i),left:Math.round(t),"text-align":s})},ve.prototype.removeText=function(e,t,i,n,r,o){if(null==n){var a=this._textCache[e];if(null!=a)for(var s in a)if(p.call(a,s)){var l=a[s];for(var c in l)if(p.call(l,c))for(var u=l[c].positions,d=0;h=u[d];d++)h.active=!1}}else{var h;for(u=this.getTextInfo(e,n,r,o).positions,d=0;h=u[d];d++)h.x==t&&h.y==i&&(h.active=!1)}},me.plot=function(e,t,i){return new n(me(e),t,i,me.plot.plugins)},me.plot.version="0.8.2",me.plot.plugins=[],me.fn.plot=function(e,t){return this.each(function(){me.plot(this,e,t)})}}(jQuery),function(m){function e(c){function i(e){p.active&&(l(e),c.getPlaceholder().trigger("plotselecting",[r()]))}function n(e){1==e.which&&(document.body.focus(),document.onselectstart!==undefined&&null==f.onselectstart&&(f.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==undefined&&null==f.ondrag&&(f.ondrag=document.ondrag,document.ondrag=function(){return!1}),s(p.first,e),p.active=!0,g=function(e){t(e)},m(document).one("mouseup",g))}function t(e){return g=null,document.onselectstart!==undefined&&(document.onselectstart=f.onselectstart),document.ondrag!==undefined&&(document.ondrag=f.ondrag),p.active=!1,l(e),h()?o():(c.getPlaceholder().trigger("plotunselected",[]),c.getPlaceholder().trigger("plotselecting",[null])),!1}function r(){if(!h())return null;if(!p.show)return null;var r={},o=p.first,a=p.second;return m.each(c.getAxes(),function(e,t){if(t.used){var i=t.c2p(o[t.direction]),n=t.c2p(a[t.direction]);r[e]={from:Math.min(i,n),to:Math.max(i,n)}}}),r}function o(){var e=r();c.getPlaceholder().trigger("plotselected",[e]),e.xaxis&&e.yaxis&&c.getPlaceholder().trigger("selected",[{x1:e.xaxis.from,y1:e.yaxis.from,x2:e.xaxis.to,y2:e.yaxis.to}])}function a(e,t,i){return t<e?e:i<t?i:t}function s(e,t){var i=c.getOptions(),n=c.getPlaceholder().offset(),r=c.getPlotOffset();e.x=a(0,
t.pageX-n.left-r.left,c.width()),e.y=a(0,t.pageY-n.top-r.top,c.height()),"y"==i.selection.mode&&(e.x=e==p.first?0:c.width()),"x"==i.selection.mode&&(e.y=e==p.first?0:c.height())}function l(e){null!=e.pageX&&(s(p.second,e),h()?(p.show=!0,c.triggerRedrawOverlay()):u(!0))}function u(e){p.show&&(p.show=!1,c.triggerRedrawOverlay(),e||c.getPlaceholder().trigger("plotunselected",[]))}function d(e,t){var i,n,r,o,a=c.getAxes();for(var s in a)if((i=a[s]).direction==t&&(e[o=t+i.n+"axis"]||1!=i.n||(o=t+"axis"),e[o])){n=e[o].from,r=e[o].to;break}if(e[o]||(i="x"==t?c.getXAxes()[0]:c.getYAxes()[0],n=e[t+"1"],r=e[t+"2"]),null!=n&&null!=r&&r<n){var l=n;n=r,r=l}return{from:n,to:r,axis:i}}function e(e,t){var i,n=c.getOptions();"y"==n.selection.mode?(p.first.x=0,p.second.x=c.width()):(i=d(e,"x"),p.first.x=i.axis.p2c(i.from),p.second.x=i.axis.p2c(i.to)),"x"==n.selection.mode?(p.first.y=0,p.second.y=c.height()):(i=d(e,"y"),p.first.y=i.axis.p2c(i.from),p.second.y=i.axis.p2c(i.to)),p.show=!0,c.triggerRedrawOverlay(),!t&&h()&&o()}function h(){var e=c.getOptions().selection.minSize;return Math.abs(p.second.x-p.first.x)>=e&&Math.abs(p.second.y-p.first.y)>=e}var p={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},f={},g=null;c.clearSelection=u,c.setSelection=e,c.getSelection=r,c.hooks.bindEvents.push(function(e,t){null!=e.getOptions().selection.mode&&(t.mousemove(i),t.mousedown(n))}),c.hooks.drawOverlay.push(function(e,t){if(p.show&&h()){var i=e.getPlotOffset(),n=e.getOptions();t.save(),t.translate(i.left,i.top);var r=m.color.parse(n.selection.color);t.strokeStyle=r.scale("a",.8).toString(),t.lineWidth=1,t.lineJoin=n.selection.shape,t.fillStyle=r.scale("a",.4).toString();var o=Math.min(p.first.x,p.second.x)+.5,a=Math.min(p.first.y,p.second.y)+.5,s=Math.abs(p.second.x-p.first.x)-1,l=Math.abs(p.second.y-p.first.y)-1;t.fillRect(o,a,s,l),t.strokeRect(o,a,s,l),t.restore()}}),c.hooks.shutdown.push(function(e,t){t.unbind("mousemove",i),t.unbind("mousedown",n),g&&m(document).unbind("mouseup",g)})}m.plot.plugins.push({init:e,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})}(jQuery),function(o){var a=function(e,t){this.element=o(e),this.picker=o('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element),this.id=this.element.data("slider-id")||t.id,this.id&&(this.picker[0].id=this.id),"undefined"!=typeof Modernizr&&Modernizr.touch&&(this.touchCapable=!0);var i=this.element.data("slider-tooltip")||t.tooltip;switch(this.tooltip=this.picker.find(".tooltip"),this.tooltipInner=this.tooltip.find("div.tooltip-inner"),this.orientation=this.element.data("slider-orientation")||t.orientation,this.orientation){case"vertical":this.picker.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight",this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",this.element.outerWidth()),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px"}switch(this.min=this.element.data("slider-min")||t.min,this.max=this.element.data("slider-max")||t.max,this.step=this.element.data("slider-step")||t.step,this.value=this.element.data("slider-value")||t.value,this.value[1]&&(this.range=!0),this.selection=this.element.data("slider-selection")||t.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,this.element.data("slider-handle")||t.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"==this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=t.formater,this.layout(),this.touchCapable?this.picker.on({touchstart:o.proxy(this.mousedown,this)}):this.picker.on({mousedown:o.proxy(this.mousedown,this)}),"show"===i?this.picker.on({mouseenter:o.proxy(this.showTooltip,this),mouseleave:o.proxy(this.hideTooltip,this)}):this.tooltip.addClass("hide")};a.prototype={constructor:a,over:!1,inDrag:!1,showTooltip:function(){this.tooltip.addClass("in"),this.over=!0},hideTooltip:function(){!1===this.inDrag&&this.tooltip.removeClass("in"),this.over=!1},layout:function(){this.handle1Stype[this.stylePos]=this.percentage[0]+"%",this.handle2Stype[this.stylePos]=this.percentage[1]+"%","vertical"==this.orientation?(this.selectionElStyle.top=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.height=Math.abs(this.percentage[0]-this.percentage[1])+"%"):(this.selectionElStyle.left=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.width=Math.abs(this.percentage[0]-this.percentage[1])+"%"),this.range?(this.tooltipInner.text(this.formater(this.value[0])+" : "+this.formater(this.value[1])),this.tooltip[0].style[this.stylePos]=this.size*(this.percentage[0]+(this.percentage[1]-this.percentage[0])/2)/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"):(this.tooltipInner.text(this.formater(this.value[0])),this.tooltip[0].style[this.stylePos]=this.size*this.percentage[0]/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px")},mousedown:function(e){this.touchCapable&&"touchstart"===e.type&&(e=e.originalEvent),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var t=this.getPercentage(e);if(this.range){var i=Math.abs(this.percentage[0]-t),n=Math.abs(this.percentage[1]-t);this.dragged=i<n?0:1}else this.dragged=0;this.percentage[this.dragged]=t,this.layout(),this.touchCapable?o(document).on({touchmove:o.proxy(this.mousemove,this),touchend:o.proxy(this.mouseup,this)}):o(document).on({mousemove:o.proxy(this.mousemove,this),mouseup:o.proxy(this.mouseup,this)}),this.inDrag=!0;var r=this.calculateValue();return this.element.trigger({type:"slideStart",value:r}).trigger({type:"slide",value:r}),!1},mousemove:function(e){this.touchCapable&&"touchmove"===e.type&&(e=e.originalEvent);var t=this.getPercentage(e);this.range&&(0===this.dragged&&this.percentage[1]<t?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>t&&(this.percentage[1]=this.percentage[0],this.dragged=0)),this.percentage[this.dragged]=t,this.layout();var i=this.calculateValue();return this.element.trigger({type:"slide",value:i}).data("value",i).prop("value",i),!1},mouseup:function(){this.touchCapable?o(document).off({touchmove:this.mousemove,touchend:this.mouseup}):o(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1,0==this.over&&this.hideTooltip(),this.element;var e=this.calculateValue();return this.element.trigger({type:"slideStop",value:e}).data("value",e).prop("value",e),!1},calculateValue:function(){var e;return this.range?(e=[this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step],this.value=e):(e=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.value=[e,this.value[1]]),e},getPercentage:function(e){this.touchCapable&&(e=e.touches[0]);var t=100*(e[this.mousePos]-this.offset[this.stylePos])/this.size;return t=Math.round(t/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,t))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(e){this.value=e,this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"==this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.layout()}},o.fn.slider=function(n,r){return this.each(function(){var e=o(this),t=e.data("slider"),i="object"==typeof n&&n;t||e.data("slider",t=new a(this,o.extend({},o.fn.slider.defaults,i))),"string"==typeof n&&t[n](r)})},o.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",formater:function(e){return e}},o.fn.slider.Constructor=a}(window.jQuery),function(g){"use strict";function f(e,t){var i=e.nodeName.toLowerCase();if(-1!==g.inArray(i,t))return-1===g.inArray(i,a)||Boolean(e.nodeValue.match(s)||e.nodeValue.match(l));for(var n=g(t).filter(function(e,t){return t instanceof RegExp}),r=0,o=n.length;r<o;r++)if(i.match(n[r]))return!0;return!1}function n(e,t,i){if(0===e.length)return e;if(i&&"function"==typeof i)return i(e);if(!document.implementation||!document.implementation.createHTMLDocument)return e;var n=document.implementation.createHTMLDocument("sanitization");n.body.innerHTML=e;for(var r=g.map(t,function(e,t){return t}),o=g(n.body).find("*"),a=0,s=o.length;a<s;a++){var l=o[a],c=l.nodeName.toLowerCase();if(-1!==g.inArray(c,r))for(var u=g.map(l.attributes,function(e){return e}),d=[].concat(t["*"]||[],t[c]||[]),h=0,p=u.length;h<p;h++)f(u[h],d)||l.removeAttribute(u[h].nodeName);else l.parentNode.removeChild(l)}return n.body.innerHTML}function e(n){return this.each(function(){var e=g(this),t=e.data("bs.tooltip"),i="object"==typeof n&&n;!t&&/destroy|hide/.test(n)||(t||e.data("bs.tooltip",t=new m(this,i)),"string"==typeof n&&t[n]())})}var r=["sanitize","whiteList","sanitizeFn"],a=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],t={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},s=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,l=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,m=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};m.VERSION="3.4.1",m.TRANSITION_DURATION=150,m.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:t},m.prototype.init=function(e,t,i){if(this.enabled=!0,this.type=e,this.$element=g(t),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&g(document).find(g.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),r=n.length;r--;){var o=n[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",s="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},m.prototype.getDefaults=function(){return m.DEFAULTS},m.prototype.getOptions=function(e){var t=this.$element.data();for(var i in t)t.hasOwnProperty(i)&&-1!==g.inArray(i,r)&&delete t[i];return(e=g.extend({},this.getDefaults(),t,e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e.sanitize&&(e.template=n(e.template,e.whiteList,e.sanitizeFn)),e},m.prototype.getDelegateOptions=function(){var i={},n=this.getDefaults();return this._options&&g.each(this._options,function(e,t){n[e]!=t&&(i[e]=t)}),i},m.prototype.enter=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t)),e instanceof g.Event&&(t.inState["focusin"==e.type?"focus":"hover"]=!0),t.tip().hasClass("in")||"in"==t.hoverState)t.hoverState="in";else{if(clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)}},m.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},m.prototype.leave=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t)),e instanceof g.Event&&(t.inState["focusout"==e.type?"focus":"hover"]=!1),!t.isInStateTrue()){if(clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)}},m.prototype.show=function(){var e=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var t=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!t)return;var i=this,n=this.tip(),r=this.getUID(this.type);this.setContent(),n.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&n.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,s=a.test(o);s&&(o=o.replace(a,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?n.appendTo(g(document).find(this.options.container)):n.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),c=n[0].offsetWidth,u=n[0].offsetHeight;if(s){var d=o,h=this.getPosition(this.$viewport);o="bottom"==o&&l.bottom+u>h.bottom?"top":"top"==o&&l.top-u<h.top?"bottom":"right"==o&&l.right+c>h.width?"left":"left"==o&&l.left-c<h.left?"right":o,n.removeClass(d).addClass(o)}var p=this.getCalculatedOffset(o,l,c,u);this.applyPlacement(p,o);var f=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};g.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",f).emulateTransitionEnd(m.TRANSITION_DURATION):f()}},m.prototype.applyPlacement=function(e,t){var i=this.tip(),n=i[0].offsetWidth,r=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top+=o,e.left+=a,g.offset.setOffset(i[0],g.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),i.addClass("in");var s=i[0].offsetWidth,l=i[0].offsetHeight;"top"==t&&l!=r&&(e.top=e.top+r-l);var c=this.getViewportAdjustedDelta(t,e,s,l);c.left?e.left+=c.left:e.top+=c.top;var u=/top|bottom/.test(t),d=u?2*c.left-n+s:2*c.top-r+l,h=u?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][h],u)},m.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},m.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();this.options.html?(this.options.sanitize&&(t=n(t,this.options.whiteList,this.options.sanitizeFn)),e.find(".tooltip-inner").html(t)):e.find(".tooltip-inner").text(t),e.removeClass("fade in top bottom left right")},m.prototype.hide=function(e){function t(){"in"!=i.hoverState&&n.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),e&&e()}var i=this,n=g(this.$tip),r=g.Event("hide.bs."+this.type);if(this.$element.trigger(r),!r.isDefaultPrevented())return n.removeClass("in"),g.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",t).emulateTransitionEnd(m.TRANSITION_DURATION):t(),this.hoverState=null,this},m.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},m.prototype.hasContent=function(){return this.getTitle()},m.prototype.getPosition=function(e){var t=(e=e||this.$element)[0],i="BODY"==t.tagName,n=t.getBoundingClientRect();null==n.width&&(n=g.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var r=window.SVGElement&&t instanceof window.SVGElement,o=i?{top:0,left:0}:r?null:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=i?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},n,a,s,o)},m.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},m.prototype.getViewportAdjustedDelta=function(e,t,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+n;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var c=t.left-o,u=t.left+o+i;c<a.left?r.left=a.left-c:u>a.right&&(r.left=a.left+a.width-u)}return r},m.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},m.prototype.getUID=function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},m.prototype.tip=function(){if(!this.$tip&&(this.$tip=g(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},m.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},m.prototype.enable=function(){this.enabled=!0},m.prototype.disable=function(){this.enabled=!1},m.prototype.toggleEnabled=function(){this.enabled=!this.enabled},m.prototype.toggle=function(e){var t=this;e&&((t=g(e.currentTarget).data("bs."+this.type))||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t))),e?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(t):t.leave(t)):t.tip().hasClass("in")?t.leave(t):t.enter(t)},m.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})},m.prototype.sanitizeHtml=function(e){return n(e,this.options.whiteList,this.options.sanitizeFn)};var i=g.fn.tooltip;g.fn.tooltip=e,g.fn.tooltip.Constructor=m,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=i,this}}(jQuery),Blacklight.onLoad(function(){function i(e){if(e&&0<e.width()){e.height(e.width()*o);var t=e.data("plot");if(t)t.resize(),t.setupGrid(),t.draw(),$(e).closest(".limit_content").find("form.range_limit").find("input.range_begin").trigger("change"),$(e).trigger(a)}}function n(e,t){if(0<e.width()){var i=e.width()*o;e.height(i),r($(e)),$(e).trigger(a)}else 0<t&&setTimeout(function(){n(e,t-50)},50)}function r(a){if(g()){var r=new Array,o=new Array,s=new Array,e=BlacklightRangeLimit.parseNum($(a).find("ul li:first-child span.from").text()),t=BlacklightRangeLimit.parseNum($(a).find("ul li:last-child span.to").text());$(a).find("ul li").each(function(){var e=BlacklightRangeLimit.parseNum($(this).find("span.from").text()),t=BlacklightRangeLimit.parseNum($(this).find("span.to").text()),i=BlacklightRangeLimit.parseNum($(this).find("span.count").text()),n=i/(t-e+1);r.push([e,n]),r.push([t+1,n]),s.push(e),o.push({from:e,to:t,count:i,label:$(this).find(".facet_select").text()})});var i,n=BlacklightRangeLimit.parseNum($(a).find("ul li:last-child span.to").text())+1;s.push(n);var l=$(a).closest(".facet_limit").data("plot-config")||{};try{i=$.plot($(a),[r],$.extend(!0,l,{yaxis:{ticks:[],min:0,autoscaleMargin:.1},xaxis:{tickDecimals:0},series:{lines:{fill:!0,steps:!0}},grid:{clickable:!0,hoverable:!0,autoHighlight:!1},selection:{mode:"x"}}))}catch(d){alert(d)}find_segment_for=f(o);var c=null;$(".distribution").tooltip({placement:"bottom",trigger:"manual",delay:{show:0,hide:100}}),$(a).bind("plothover",function(e,t){if(segment=find_segment_for(t.x),segment!=c){var i=find_segment_for(t.x).label+" ("+BlacklightRangeLimit.parseNum(segment.count)+")";$(".distribution").attr("title",i).tooltip("fixTitle").tooltip("show"),c=segment}}),$(a).bind("mouseout",function(){c=null,$(".distribution").tooltip("hide")}),$(a).bind("plotclick",function(e,t){null==i.getSelection()&&(segment=find_segment_for(t.x),i.setSelection(h(segment.from,segment.to)))}),$(a).bind("plotselected plotselecting",function(e,t){if(null!=t){var i=Math.floor(t.xaxis.from),n=Math.floor(t.xaxis.to),r=$(a).closest(".limit_content").find("form.range_limit");r.find("input.range_begin").val(i),r.find("input.range_end").val(n);var o=$(a).closest(".limit_content").find("[data-slider-placeholder]");o&&o.slider("setValue",[i,n+1])}});var u=$(a).closest(".limit_content").find("form.range_limit");u.find("input.range_begin, input.range_end").change(function(){i.setSelection(p(u,e,t),!0)}),$(a).closest(".limit_content").find(".profile .range").on("slide",function(e){var t=$(e.target).data("slider").getValue();u.find("input.range_begin").val(t[0]),u.find("input.range_end").val(t[1]),i.setSelection(h(t[0],Math.max(t[0],t[1]-1)),!0)}),i.setSelection({xaxis:{from:e,to:t+.9999}})}}function h(e,t){return{xaxis:{from:e,to:t+=.99999}}}function p(e,t,i){var n=BlacklightRangeLimit.parseNum($(e).find("input.range_begin").val());(isNaN(n)||n<t)&&(n=t);var r=BlacklightRangeLimit.parseNum($(e).find("input.range_end").val());return(isNaN(r)||i<r)&&(r=i),h(n,r)}function f(n){return function(e){for(var t=n.length-1;0<=t;t--){var i=n[t];if(e>=i.from)return i}return n[0]}}function g(){var e="undefined"!=typeof $.plot,t="undefined"!=typeof document.createElement("canvas").getContext||"undefined"!=typeof window.CanvasRenderingContext2D||"undefined"!=typeof G_vmlCanvasManager;return e&&t}var o=1/3.236,a="plotDrawn.blacklight.rangeLimit";$(".range_limit .profile .distribution.chart_js ul").each(function(){n($(this).parent())}),$(".range_limit .profile .distribution a.load_distribution").each(function(){var i=$(this).parent("div.distribution");$(i).load($(this).attr("href"),function(e,t){$(i).hasClass("chart_js")&&"success"==t&&n(i)})}),$("body").on("show.bs.collapse",function(e){var t=$(e.target).filter(".facet-content").find(".chart_js");t&&0==t.find("canvas").length&&n(t,1100)}),$("body").on("shown.bs.collapse",function(e){i($(e.target).filter(".facet-content").find(".chart_js"))}),debounce=function(r,o,a){var s;return function(){var e=this,t=arguments,i=function(){s=null,a||r.apply(e,t)},n=a&&!s;clearTimeout(s),s=setTimeout(i,o),n&&r.apply(e,t)}},$(window).on("resize",debounce(function(){$(".chart_js").each(function(e,t){i($(t))})},350))}),function(e){"use strict";function t(e){this.options=e||{}}var i=e.BlacklightRangeLimit;t.noConflict=function n(){return e.BlacklightRangeLimit=i,t},t.parseNum=function r(e){return e=String(e).replace(/[^0-9]/g,""),parseInt(e,10)},e.BlacklightRangeLimit=t}(this),Blacklight.onLoad(function(){function h(e){var t=$(e).closest(".limit_content.range_limit").find(".current"),i=max=BlacklightRangeLimit.parseNum(t.find(".single").text());return isNaN(i)&&(i=BlacklightRangeLimit.parseNum(t.find(".from").first().text()),max=BlacklightRangeLimit.parseNum(t.find(".to").first().text())),(isNaN(i)||isNaN(max))&&(i=BlacklightRangeLimit.parseNum($(e).find(".min").first().text()),max=BlacklightRangeLimit.parseNum($(e).find(".max").first().text())),[i,max]}function p(e){return e%1==0}$(".range_limit .profile .range.slider_js").each(function(){var e=$(this),t=h(this),i=t[0],n=t[1];if(p(i)&&p(n)){$(this).contents().wrapAll('<div style="display:none" />');e=$(this);var r=(d=$(e).closest(".range_limit").find("form.range_limit")).find("input.range_begin"),o=d.find("input.range_end"),a=$('<input type="text" data-slider-placeholder="true" style="width:100%;">').appendTo(e);if(a.slider!==undefined){a.slider({min:i,max:n+1,value:[i,n+1],tooltip:"hide"});var s=e.closest(".range_limit"),l=s.find(".chart_js").data("plot"),c=s.find(".slider");l&&c?(c.width(l.width()),c.css("display","block"),c.css("margin-right","auto"),c.css("margin-left","auto")):c&&c.css("width","100%")}var u=$(this).parent(),d=$(u).closest(".limit_content").find("form.range_limit");$(u).closest(".limit_content").find(".profile .range").on("slide",function(e){var t=$(e.target).data("slider").getValue();d.find("input.range_begin").val(t[0]),d.find("input.range_end").val(t[1])})}r.val(i),o.val(n),r.change(function(){var e=BlacklightRangeLimit.parseNum($(this).val());(isNaN(e)||e<i)&&(e=i);var t=a.data("slider").getValue();t[0]=e,a.slider("setValue",t)}),o.change(function(){var e=BlacklightRangeLimit.parseNum($(this).val());(isNaN(e)||n<e)&&(e=n);var t=a.data("slider").getValue();t[1]=e,a.slider("setValue",t)})}),$("body").on("plotDrawn.blacklight.rangeLimit",function(e){var t=$(e.target).closest(".limit_content.range_limit"),i=t.find(".chart_js").data("plot"),n=t.find(".slider");i&&n&&(n.width(i.width()),n.css("display","block"),n.css("margin-right","auto"),n.css("margin-left","auto"))})}),function(l){"use strict";function i(n){return this.each(function(){var e=l(this),t=e.data("bs.affix"),i="object"==typeof n&&n;t||e.data("bs.affix",t=new c(this,i)),"string"==typeof n&&t[n]()})}var c=function(e,t){this.options=l.extend({},c.DEFAULTS,t);var i=this.options.target===c.DEFAULTS.target?l(this.options.target):l(document).find(this.options.target);this.$target=i.on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.4.1",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(e,t,i,n){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return r<i&&"top";if("bottom"==this.affixed)return null!=i?!(r+this.unpin<=o.top)&&"bottom":!(r+a<=e-n)&&"bottom";var s=null==this.affixed,l=s?r:o.top;return null!=i&&r<=i?"top":null!=n&&e-n<=l+(s?a:t)&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},c.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),t=this.options.offset,i=t.top,n=t.bottom,r=Math.max(l(document).height(),l(document.body).height());"object"!=typeof t&&(n=i=t),"function"==typeof i&&(i=t.top(this.$element)),"function"==typeof n&&(n=t.bottom(this.$element));var o=this.getState(r,e,i,n);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var a="affix"+(o?"-"+o:""),s=l.Event(a+".bs.affix");if(this.$element.trigger(s),s.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:r-e-n})}};var e=l.fn.affix;l.fn.affix=i,l.fn.affix.Constructor=c,l.fn.affix.noConflict=function(){return l.fn.affix=e,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var e=l(this),t=e.data();t.offset=t.offset||{},null!=t.offsetBottom&&(t.offset.bottom=t.offsetBottom),null!=t.offsetTop&&(t.offset.top=t.offsetTop),i.call(e,t)})})}(jQuery),function(o){"use strict";function i(n){return this.each(function(){var e=o(this),t=e.data("bs.button"),i="object"==typeof n&&n;t||e.data("bs.button",t=new r(this,i)),"toggle"==n?t.toggle():n&&t.setState(n)})}var r=function(e,t){this.$element=o(e),this.options=o.extend({},r.DEFAULTS,t),this.isLoading=!1};r.VERSION="3.4.1",r.DEFAULTS={loadingText:"loading..."},r.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.is("input")?"val":"html",r=i.data();e+="Text",null==r.resetText&&i.data("resetText",i[n]()),setTimeout(o.proxy(function(){i[n](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(t).attr(t,t).prop(t,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(t).removeAttr(t).prop(t,!1))},this),0)},r.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var e=o.fn.button;o.fn.button=i,o.fn.button.Constructor=r,o.fn.button.noConflict=function(){return o.fn.button=e,this},o(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var t=o(e.target).closest(".btn");i.call(t,"toggle"),o(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),t.is("input,button")?t.trigger("focus"):t.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){o(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(d){"use strict";function s(r){return this.each(function(){var e=d(this),t=e.data("bs.carousel"),i=d.extend({},h.DEFAULTS,e.data(),"object"==typeof r&&r),n="string"==typeof r?r:i.slide;t||e.data("bs.carousel",t=new h(this,i)),"number"==typeof r?t.to(r):n?t[n]():i.interval&&t.pause().cycle()})}var h=function(e,t){this.$element=d(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",d.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",d.proxy(this.pause,this)).on("mouseleave.bs.carousel",d.proxy(this.cycle,this))};h.VERSION="3.4.1",h.TRANSITION_DURATION=600,h.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},h.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},h.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this},h.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},h.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);if((
"prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap)return t;var n=(i+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(n)},h.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(i<e?"next":"prev",this.$items.eq(e))},h.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition&&(this.$element.trigger(d.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},h.prototype.next=function(){if(!this.sliding)return this.slide("next")},h.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},h.prototype.slide=function(e,t){var i=this.$element.find(".item.active"),n=t||this.getItemForDirection(e,i),r=this.interval,o="next"==e?"left":"right",a=this;if(n.hasClass("active"))return this.sliding=!1;var s=n[0],l=d.Event("slide.bs.carousel",{relatedTarget:s,direction:o});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=d(this.$indicators.children()[this.getItemIndex(n)]);c&&c.addClass("active")}var u=d.Event("slid.bs.carousel",{relatedTarget:s,direction:o});return d.support.transition&&this.$element.hasClass("slide")?(n.addClass(e),"object"==typeof n&&n.length&&n[0].offsetWidth,i.addClass(o),n.addClass(o),i.one("bsTransitionEnd",function(){n.removeClass([e,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(u)},0)}).emulateTransitionEnd(h.TRANSITION_DURATION)):(i.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(u)),r&&this.cycle(),this}};var e=d.fn.carousel;d.fn.carousel=s,d.fn.carousel.Constructor=h,d.fn.carousel.noConflict=function(){return d.fn.carousel=e,this};var t=function(e){var t=d(this),i=t.attr("href");i&&(i=i.replace(/.*(?=#[^\s]+$)/,""));var n=t.attr("data-target")||i,r=d(document).find(n);if(r.hasClass("carousel")){var o=d.extend({},r.data(),t.data()),a=t.attr("data-slide-to");a&&(o.interval=!1),s.call(r,o),a&&r.data("bs.carousel").to(a),e.preventDefault()}};d(document).on("click.bs.carousel.data-api","[data-slide]",t).on("click.bs.carousel.data-api","[data-slide-to]",t),d(window).on("load",function(){d('[data-ride="carousel"]').each(function(){var e=d(this);s.call(e,e.data())})})}(jQuery),function(o){"use strict";function r(e,t){this.$body=o(document.body),this.$scrollElement=o(e).is(document.body)?o(window):o(e),this.options=o.extend({},r.DEFAULTS,t),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",o.proxy(this.process,this)),this.refresh(),this.process()}function t(n){return this.each(function(){var e=o(this),t=e.data("bs.scrollspy"),i="object"==typeof n&&n;t||e.data("bs.scrollspy",t=new r(this,i)),"string"==typeof n&&t[n]()})}r.VERSION="3.4.1",r.DEFAULTS={offset:10},r.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},r.prototype.refresh=function(){var e=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),o.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=o(this),t=e.data("target")||e.attr("href"),i=/^#./.test(t)&&o(t);return i&&i.length&&i.is(":visible")&&[[i[n]().top+r,t]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},r.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),n<=t)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)a!=o[e]&&t>=r[e]&&(r[e+1]===undefined||t<r[e+1])&&this.activate(o[e])},r.prototype.activate=function(e){this.activeTarget=e,this.clear();var t=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=o(t).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},r.prototype.clear=function(){o(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var e=o.fn.scrollspy;o.fn.scrollspy=t,o.fn.scrollspy.Constructor=r,o.fn.scrollspy.noConflict=function(){return o.fn.scrollspy=e,this},o(window).on("load.bs.scrollspy.data-api",function(){o('[data-spy="scroll"]').each(function(){var e=o(this);t.call(e,e.data())})})}(jQuery),function(s){"use strict";function t(i){return this.each(function(){var e=s(this),t=e.data("bs.tab");t||e.data("bs.tab",t=new a(this)),"string"==typeof i&&t[i]()})}var a=function(e){this.element=s(e)};a.VERSION="3.4.1",a.TRANSITION_DURATION=150,a.prototype.show=function(){var e=this.element,t=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=t.find(".active:last a"),r=s.Event("hide.bs.tab",{relatedTarget:e[0]}),o=s.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(r),e.trigger(o),!o.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=s(document).find(i);this.activate(e.closest("li"),t),this.activate(a,a.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},a.prototype.activate=function(e,t,i){function n(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var r=t.find("> .active"),o=i&&s.support.transition&&(r.length&&r.hasClass("fade")||!!t.find("> .fade").length);r.length&&o?r.one("bsTransitionEnd",n).emulateTransitionEnd(a.TRANSITION_DURATION):n(),r.removeClass("in")};var e=s.fn.tab;s.fn.tab=t,s.fn.tab.Constructor=a,s.fn.tab.noConflict=function(){return s.fn.tab=e,this};var i=function(e){e.preventDefault(),t.call(s(this),"show")};s(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(r){"use strict";function e(n){return this.each(function(){var e=r(this),t=e.data("bs.popover"),i="object"==typeof n&&n;!t&&/destroy|hide/.test(n)||(t||e.data("bs.popover",t=new o(this,i)),"string"==typeof n&&t[n]())})}var o=function(e,t){this.init("popover",e,t)};if(!r.fn.tooltip)throw new Error("Popover requires tooltip.js");o.VERSION="3.4.1",o.DEFAULTS=r.extend({},r.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),o.prototype=r.extend({},r.fn.tooltip.Constructor.prototype),(o.prototype.constructor=o).prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();if(this.options.html){var n=typeof i;this.options.sanitize&&(t=this.sanitizeHtml(t),"string"===n&&(i=this.sanitizeHtml(i))),e.find(".popover-title").html(t),e.find(".popover-content").children().detach().end()["string"===n?"html":"append"](i)}else e.find(".popover-title").text(t),e.find(".popover-content").children().detach().end().text(i);e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},o.prototype.hasContent=function(){return this.getTitle()||this.getContent()},o.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var t=r.fn.popover;r.fn.popover=e,r.fn.popover.Constructor=o,r.fn.popover.noConflict=function(){return r.fn.popover=t,this}}(jQuery),function(b){"use strict";function n(e,t){return-1<e.toUpperCase().indexOf(t.toUpperCase())}function m(e){var t=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return b.each(t,function(){e=e.replace(this.re,this.ch)}),e}function s(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+Object.keys(t).join("|")+")",n=new RegExp(i),r=new RegExp(i,"g"),o=null==e?"":""+e;return n.test(o)?o.replace(r,function(e){return t[e]}):o}function t(o,a){var s,l=arguments,e=o;o=l[0],a=l[1];[].shift.apply(l),void 0===o&&(o=e);var t=this.each(function(){var e=b(this);if(e.is("select")){var t=e.data("selectpicker"),i="object"==typeof o&&o;if(t){if(i)for(var n in i)i.hasOwnProperty(n)&&(t.options[n]=i[n])}else{var r=b.extend({},c.DEFAULTS,b.fn.selectpicker.defaults||{},e.data(),i);e.data("selectpicker",t=new c(this,r,a))}"string"==typeof o&&(s=t[o]instanceof Function?t[o].apply(t,l):t.options[o])}});return void 0!==s?s:t}b.expr[":"].icontains=function(e,t,i){return n(b(e).text(),i[3])},b.expr[":"].aicontains=function(e,t,i){return n(b(e).data("normalizedText")||b(e).text(),i[3])};var c=function(e,t,i){i&&(i.stopPropagation(),i.preventDefault()),this.$element=b(e),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=t,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=c.prototype.val,this.render=c.prototype.render,this.refresh=c.prototype.refresh,this.setStyle=c.prototype.setStyle,this.selectAll=c.prototype.selectAll,this.deselectAll=c.prototype.deselectAll,this.destroy=c.prototype.remove,this.remove=c.prototype.remove,this.show=c.prototype.show,this.hide=c.prototype.hide,this.init()};c.VERSION="1.6.3",c.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:function(e){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){var i=[];return i[0]=1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",i[1]=1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)",i},selectAllText:"Select All",deselectAllText:"Deselect All",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,searchAccentInsensitive:!1},c.prototype={constructor:c,init:function(){var t=this,e=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),void 0!==e&&(this.$button.attr("data-id",e),b('label[for="'+e+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile()},createDropdown:function(){var e=this.multiple?" show-tick":"",t=this.$element.parent().hasClass("input-group")?" input-group-btn":"",i=this.autofocus?" autofocus":"",n=this.$element.parents().hasClass("form-group-lg")?" btn-lg":this.$element.parents().hasClass("form-group-sm")?" btn-sm":"",r=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",o=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+s(this.options.liveSearchPlaceholder)+'"')+"></div>":"",a=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">'+this.options.selectAllText+'</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">'+this.options.deselectAllText+"</button></div></div>":"";return b('<div class="btn-group bootstrap-select'+e+t+'"><button type="button" class="btn dropdown-toggle form-control selectpicker'+n+'" data-toggle="dropdown"'+i+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+r+o+a+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>')},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul").append(t),e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menu.find("ul").append(e)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var u=this,d=[],h=0,p=function(e,t,i){return"<li"+(void 0!==i?' class="'+i+'"':"")+(void 0!==t|null===t?' data-original-index="'+t+'"':"")+">"+e+"</li>"},f=function(e,t,i,n){return'<a tabindex="0"'+(void 0!==t?' class="'+t+'"':"")+(void 0!==i?' style="'+i+'"':"")+(void 0!==n?'data-optgroup="'+n+'"':"")+' data-normalized-text="'+m(s(e))+'">'+e+'<span class="'+u.options.iconBase+" "+u.options.tickIcon+' check-mark"></span></a>'};return this.$element.find("option").each(function(){var e=b(this),t=e.attr("class")||"",i=e.attr("style"),n=e.data("content")?e.data("content"):e.html(),r=void 0!==e.data("subtext")?'<small class="muted text-muted">'+e.data("subtext")+"</small>":"",o=void 0!==e.data("icon")?'<span class="'+u.options.iconBase+" "+e.data("icon")+'"></span> ':"",a=e.is(":disabled")||e.parent().is(":disabled"),s=e.index();if(""!==o&&a&&(o="<span>"+o+"</span>"),e.data("content")||(n=o+'<span class="text">'+n+r+"</span>"),!u.options.hideDisabled||!a)if(e.parent().is("optgroup")&&!0!==e.data("divider")){if(0===e.index()){h+=1;var l=e.parent().attr("label"),c=void 0!==e.parent().data("subtext")?'<small class="muted text-muted">'+e.parent().data("subtext")+"</small>":"";l=(e.parent().data("icon")?'<span class="'+u.options.iconBase+" "+e.parent().data("icon")+'"></span> ':"")+'<span class="text">'+l+c+"</span>",0!==s&&0<d.length&&d.push(p("",null,"divider")),d.push(p(l,null,"dropdown-header"))}d.push(p(f(n,"opt "+t,i,h),s))}else!0===e.data("divider")?d.push(p("",s,"divider")):!0===e.data("hidden")?d.push(p(f(n,t,i),s,"hidden is-hidden")):d.push(p(f(n,t,i),s))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),b(d.join(""))},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(e){var n=this;!1!==e&&this.$element.find("option").each(function(e){n.setDisabled(e,b(this).is(":disabled")||b(this).parent().is(":disabled")),n.setSelected(e,b(this).is(":selected"))}),this.tabIndex();var t=this.options.hideDisabled?":not([disabled])":"",i=this.$element.find("option:selected"+t).map(function(){var e,t=b(this),i=t.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+t.data("icon")+'"></i> ':"";return e=n.options.showSubtext&&t.attr("data-subtext")&&!n.multiple?' <small class="muted text-muted">'+t.data("subtext")+"</small>":"",t.data("content")&&n.options.showContent?t.data("content"):void 0!==t.attr("title")?t.attr("title"):i+t.html()+e}).toArray(),r=this.multiple?i.join(this.options.multipleSeparator):i[0];if(this.multiple&&-1<this.options.selectedTextFormat.indexOf("count")){var o=this.options.selectedTextFormat.split(">");if(1<o.length&&i.length>o[1]||1==o.length&&2<=i.length){t=this.options.hideDisabled?", [disabled]":"";var a=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+t).length;r=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(i.length,a):this.options.countSelectedText).replace("{0}",i.length.toString()).replace("{1}",a.toString())}}this.options.title=this.$element.attr("title"),"static"==this.options.selectedTextFormat&&(r=this.options.title),r||(r="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",b.trim(r.replace(/<[^>]*>?/g,""))),this.$newElement.find(".filter-option").html(r)},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var i=e||this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(!1!==this.options.size){var e=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),t=e.addClass("open").find("> .dropdown-menu"),i=t.find("li").not(".divider").not(".dropdown-header").filter(":visible").children("a").outerHeight(),n=this.options.header?t.find(".popover-title").outerHeight():0,r=this.options.liveSearch?t.find(".bs-searchbox").outerHeight():0,o=this.options.actionsBox?t.find(".bs-actionsbox").outerHeight():0;e.remove(),this.$newElement.data("liHeight",i).data("headerHeight",n).data("searchHeight",r).data("actionsHeight",o)}},setSize:function(){this.findLis();var i,n,r,o=this,a=this.$menu,s=a.find(".inner"),e=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),c=this.$newElement.data("headerHeight"),u=this.$newElement.data("searchHeight"),d=this.$newElement.data("actionsHeight"),t=this.$lis.filter(".divider").outerHeight(!0),h=parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom"))+parseInt(a.css("border-top-width"))+parseInt(a.css("border-bottom-width")),p=this.options.hideDisabled?", .disabled":"",f=b(window),g=h+parseInt(a.css("margin-top"))+parseInt(a.css("margin-bottom"))+2,m=function(){n=o.$newElement.offset().top-f.scrollTop(),r=f.height()-n-e};if(m(),this.options.header&&a.css("padding-top",0),"auto"==this.options.size){var v=function(){var e,t=o.$lis.not(".hidden");m(),i=r-g,o.options.dropupAuto&&o.$newElement.toggleClass("dropup",r<n&&i-g<a.height()),o.$newElement.hasClass("dropup")&&(i=n-g),e=3<t.length+t.filter(".dropdown-header").length?3*l+g-2:0,a.css({"max-height":i+"px",overflow:"hidden","min-height":e+c+u+d+"px"}),s.css({"max-height":i-c-u-d-h+"px","overflow-y":"auto","min-height":Math.max(e-h,0)+"px"})};v(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",v),b(window).off("resize.getSize").on("resize.getSize",v),b(window).off("scroll.getSize").on("scroll.getSize",v)}else if(this.options.size&&"auto"!=this.options.size&&a.find("li"+p).length>this.options.size){var y=this.$lis.not(".divider"+p).find(" > *").slice(0,this.options.size).last().parent().index(),w=this.$lis.slice(0,y+1).filter(".divider").length;i=l*this.options.size+w*t+h,o.options.dropupAuto&&this.$newElement.toggleClass("dropup",r<n&&i<a.height()),a.css({"max-height":i+c+u+d+"px",overflow:"hidden"}),s.css({"max-height":i-h+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var e=this.$newElement.clone().appendTo("body"),t=e.find("> .dropdown-menu").css("width"),i=e.css("width","auto").find("> button").css("width");e.remove(),this.$newElement.css("width",Math.max(parseInt(t),parseInt(i))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var t,i,n=this,r=b("<div />"),e=function(e){r.addClass(e.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),i=e.hasClass("dropup")?0:e[0].offsetHeight,r.css({top:t.top+i,left:t.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){n.isDisabled()||(e(b(this)),r.appendTo(n.options.container),r.toggleClass("open",!b(this).hasClass("open")),r.append(n.$menu))}),b(window).resize(function(){e(n.$newElement)}),b(window).on("scroll",function(){e(n.$newElement)}),b("html").on("click",function(e){b(e.target).closest(n.$newElement).length<1&&r.removeClass("open")})},setSelected:function(e,t){this.findLis(),this.$lis.filter('[data-original-index="'+e+'"]').toggleClass("selected",t)},setDisabled:function(e,t){this.findLis(),t?this.$lis.filter('[data-original-index="'+e+'"]').addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+e+'"]').removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var e=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var y=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),this.$newElement.on("click",function(){y.setSize(),y.options.liveSearch||y.multiple||setTimeout(function(){y.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(e){var t=b(this),i=t.parent().data("originalIndex"),n=y.$element.val(),r=y.$element.prop("selectedIndex");if(y.multiple&&e.stopPropagation(),e.preventDefault(),!y.isDisabled()&&!t.parent().hasClass("disabled")){var o=y.$element.find("option"),a=o.eq(i),s=a.prop("selected"),l=a.parent("optgroup"),c=y.options.maxOptions,u=l.data("maxOptions")||!1;if(y.multiple){if(a.prop("selected",!s),y.setSelected(i,!s),t.blur(),!1!==c||!1!==u){var d=c<o.filter(":selected").length,h=u<l.find("option:selected").length;if(c&&d||u&&h)if(c&&1==c)o.prop("selected",!1),a.prop("selected",!0),y.$menu.find(".selected").removeClass("selected"),y.setSelected(i,!0);else if(u&&1==u){l.find("option:selected").prop("selected",!1),a.prop("selected",!0);var p=t.data("optgroup");y.$menu.find(".selected").has('a[data-optgroup="'+p+'"]').removeClass("selected"),y.setSelected(i,!0)}else{var f="function"==typeof y.options.maxOptionsText?y.options.maxOptionsText(c,u):y.options.maxOptionsText,g=f[0].replace("{n}",c),m=f[1].replace("{n}",u),v=b('<div class="notify"></div>');f[2]&&(g=g.replace("{var}",f[2][1<c?0:1]),m=m.replace("{var}",f[2][1<u?0:1])),a.prop("selected",!1),y.$menu.append(v),c&&d&&(v.append(b("<div>"+g+"</div>")),y.$element.trigger("maxReached.bs.select")),u&&h&&(v.append(b("<div>"+m+"</div>")),y.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){y.setSelected(i,!1)},10),v.delay(750).fadeOut(300,function(){b(this).remove()})}}}else o.prop("selected",!1),a.prop("selected",!0),y.$menu.find(".selected").removeClass("selected"),y.setSelected(i,!0);y.multiple?y.options.liveSearch&&y.$searchbox.focus():y.$button.focus(),(n!=y.$element.val()&&y.multiple||r!=y.$element.prop("selectedIndex")&&!y.multiple)&&y.$element.change()}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(e){e.currentTarget==this&&(e.preventDefault(),e.stopPropagation(),y.options.liveSearch?y.$searchbox.focus():y.$button.focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),y.options.liveSearch?y.$searchbox.focus():y.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){y.$button.focus()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(e){y.options.liveSearch?y.$searchbox.focus():y.$button.focus(),e.preventDefault(),e.stopPropagation(),b(this).is(".bs-select-all")?y.selectAll():y.deselectAll(),y.$element.change()}),this.$element.change(function(){y.render(!1)})},liveSearchListener:function(){var e=this,t=b('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){e.$menu.find(".active").removeClass("active"),e.$searchbox.val()&&(e.$searchbox.val(""),e.$lis.not(".is-hidden").removeClass("hidden"),t.parent().length&&t.remove()),e.multiple||e.$menu.find(".selected").addClass("active"),setTimeout(function(){e.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){e.$searchbox.val()?(e.options.searchAccentInsensitive?e.$lis.not(".is-hidden").removeClass("hidden").find("a").not(":aicontains("+m(e.$searchbox.val())+")").parent().addClass("hidden"):e.$lis.not(".is-hidden").removeClass("hidden").find("a").not(":icontains("+e.$searchbox.val()+")").parent().addClass("hidden"),e.$menu.find("li").filter(":visible:not(.no-results)").length?t.parent().length&&t.remove():(t.parent().length&&t.remove(),t.html(e.options.noneResultsText+' "'+s(e.$searchbox.val())+'"').show(),e.$menu.find("li").last().after(t))):(e.$lis.not(".is-hidden").removeClass("hidden"),t.parent().length&&t.remove()),e.$menu.find("li.active").removeClass("active"),e.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),b(this).focus()})},val:function(e){return void 0!==e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").not(".selected").filter(":visible").find("a").click()},deselectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").filter(".selected").filter(":visible").find("a").click()},keydown:function(e){var t,i,n,r,o,a,s,l,c,u=b(this),d=u.is("input")?u.parent().parent():u.parent(),h=d.data("this"),p={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(h.options.liveSearch&&(d=u.parent().parent()),h.options.container&&(d=h.$menu),t=b("[role=menu] li a",d),!(c=h.$menu.parent().hasClass("open"))&&/([0-9]|[A-z])/.test(String.fromCharCode(e.keyCode))&&(h.options.container?h.$newElement.trigger("click"):(h.setSize(),h.$menu.parent().addClass("open"),c=!0),h.$searchbox.focus()),h.options.liveSearch&&(/(^9$|27)/.test(e.keyCode.toString(10))&&c&&0===h.$menu.find(".active").length&&(e.preventDefault(),h.$menu.parent().removeClass("open"),h.$button.focus()),t=b("[role=menu] li:not(.divider):not(.dropdown-header):visible",d),u.val()||/(38|40)/.test(e.keyCode.toString(10))||0===t.filter(".active").length&&(t=h.options.searchAccentInsensitive?h.$newElement.find("li").filter(":aicontains("+m(p[e.keyCode])+")"):h.$newElement.find("li").filter(":icontains("+p[e.keyCode]+")"))),t.length){if(/(38|40)/.test(e.keyCode.toString(10)))i=t.index(t.filter(":focus")),r=t.parent(":not(.disabled):visible").first().index(),o=t.parent(":not(.disabled):visible").last().index(),n=t.eq(i).parent().nextAll(":not(.disabled):visible").eq(0).index(),a=t.eq(i).parent().prevAll(":not(.disabled):visible").eq(0).index(),s=t.eq(n).parent().prevAll(":not(.disabled):visible").eq(0).index(),h.options.liveSearch&&(t.each(function(e){b(this).is(":not(.disabled)")&&b(this).data("index",e)}),i=t.index(t.filter(".active")),r=t.filter(":not(.disabled):visible").first().data("index"),o=t.filter(":not(.disabled):visible").last().data("index"),n=t.eq(i).nextAll(":not(.disabled):visible").eq(0).data("index"),a=t.eq(i).prevAll(":not(.disabled):visible").eq(0).data("index"),s=t.eq(n).prevAll(":not(.disabled):visible").eq(0).data("index")),l=u.data("prevIndex"),38==e.keyCode&&(h.options.liveSearch&&(i-=1),i!=s&&a<i&&(i=a),i<r&&(i=r),i==l&&(i=o)),40==e.keyCode&&(h.options.liveSearch&&(i+=1),-1==i&&(i=0),i!=s&&i<n&&(i=n),o<i&&(i=o),i==l&&(i=r)),u.data("prevIndex",i),h.options.liveSearch?(e.preventDefault(),u.is(".dropdown-toggle")||(t.removeClass("active"),t.eq(i).addClass("active").find("a").focus(),u.focus())):t.eq(i).focus();else if(!u.is("input")){var f,g=[];t.each(function(){b(this).parent().is(":not(.disabled)")&&b.trim(b(this).text().toLowerCase()).substring(0,1)==p[e.keyCode]&&g.push(b(this).parent().index())}),f=b(document).data("keycount"),f++,b(document).data("keycount",f),b.trim(b(":focus").text().toLowerCase()).substring(0,1)!=p[e.keyCode]?(f=1,b(document).data("keycount",f)):f>=g.length&&(b(document).data("keycount",0),f>g.length&&(f=1)),t.eq(g[f-1]).focus()}(/(13|32)/.test(e.keyCode.toString(10))||/(^9$)/.test(e.keyCode.toString(10))&&h.options.selectOnTab)&&c&&(/(32)/.test(e.keyCode.toString(10))||e.preventDefault(),h.options.liveSearch?/(32)/.test(e.keyCode.toString(10))||(h.$menu.find(".active a").click(),u.focus()):b(":focus").click(),b(document).data("keycount",0)),(/(^9$|27)/.test(e.keyCode.toString(10))&&c&&(h.multiple||h.options.liveSearch)||/(27)/.test(e.keyCode.toString(10))&&!c)&&(h.$menu.parent().removeClass("open"),h.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var e=b.fn.selectpicker;b.fn.selectpicker=t,b.fn.selectpicker.Constructor=c,b.fn.selectpicker.noConflict=function(){return b.fn.selectpicker=e,this},b(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",c.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(e){e.stopPropagation()}),b(window).on("load.bs.select.data-api",function(){b(".selectpicker").each(function(){var e=b(this);t.call(e,e.data())})})}(jQuery),function(u,l){"use strict";var c;u.rails!==l&&u.error("jquery-ujs has already been loaded!");var e=u(document);u.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",
enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return u("meta[name=csrf-token]").attr("content")},csrfParam:function(){return u("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=c.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){u('form input[name="'+c.csrfParam()+'"]').val(c.csrfToken())},fire:function(e,t,i){var n=u.Event(t);return e.trigger(n,i),!1!==n.result},confirm:function(e){return confirm(e)},ajax:function(e){return u.ajax(e)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==l&&!1!==e.data("remote")},handleRemote:function(n){var e,t,i,r,o,a;if(c.fire(n,"ajax:before")){if(r=n.data("with-credentials")||null,o=n.data("type")||u.ajaxSettings&&u.ajaxSettings.dataType,n.is("form")){e=n.data("ujs:submit-button-formmethod")||n.attr("method"),t=n.data("ujs:submit-button-formaction")||n.attr("action"),i=u(n[0]).serializeArray();var s=n.data("ujs:submit-button");s&&(i.push(s),n.data("ujs:submit-button",null)),n.data("ujs:submit-button-formmethod",null),n.data("ujs:submit-button-formaction",null)}else n.is(c.inputChangeSelector)?(e=n.data("method"),t=n.data("url"),i=n.serialize(),n.data("params")&&(i=i+"&"+n.data("params"))):n.is(c.buttonClickSelector)?(e=n.data("method")||"get",t=n.data("url"),i=n.serialize(),n.data("params")&&(i=i+"&"+n.data("params"))):(e=n.data("method"),t=c.href(n),i=n.data("params")||null);return a={type:e||"GET",data:i,dataType:o,beforeSend:function(e,t){if(t.dataType===l&&e.setRequestHeader("accept","*/*;q=0.5, "+t.accepts.script),!c.fire(n,"ajax:beforeSend",[e,t]))return!1;n.trigger("ajax:send",e)},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},crossDomain:c.isCrossDomain(t)},r&&(a.xhrFields={withCredentials:r}),t&&(a.url=t),c.ajax(a)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var i=document.createElement("a");try{return i.href=e,i.href=i.href,!((!i.protocol||":"===i.protocol)&&!i.host||t.protocol+"//"+t.host==i.protocol+"//"+i.host)}catch(n){return!0}},handleMethod:function(e){var t=c.href(e),i=e.data("method"),n=e.attr("target"),r=c.csrfToken(),o=c.csrfParam(),a=u('<form method="post" action="'+t+'"></form>'),s='<input name="_method" value="'+i+'" type="hidden" />';o===l||r===l||c.isCrossDomain(t)||(s+='<input name="'+o+'" value="'+r+'" type="hidden" />'),n&&a.attr("target",n),a.hide().append(s).appendTo("body"),a.submit()},formElements:function(e,t){return e.is("form")?u(e[0].elements).filter(t):e.find(t)},disableFormElements:function(e){c.formElements(e,c.disableSelector).each(function(){c.disableFormElement(u(this))})},disableFormElement:function(e){var t,i;t=e.is("button")?"html":"val",(i=e.data("disable-with"))!==l&&(e.data("ujs:enable-with",e[t]()),e[t](i)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(e){c.formElements(e,c.enableSelector).each(function(){c.enableFormElement(u(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")!==l&&(e[t](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,i=e.data("confirm"),n=!1;if(!i)return!0;if(c.fire(e,"confirm")){try{n=c.confirm(i)}catch(r){(console.error||console.log).call(console,r.stack||r)}t=c.fire(e,"confirm:complete",[n])}return n&&t},blankInputs:function(e,t,i){var n,r,o,a=u(),s=t||"input,textarea",l=e.find(s),c={};return l.each(function(){(n=u(this)).is("input[type=radio]")?(o=n.attr("name"),c[o]||(0===e.find('input[type=radio]:checked[name="'+o+'"]').length&&(r=e.find('input[type=radio][name="'+o+'"]'),a=a.add(r)),c[o]=o)):(n.is("input[type=checkbox],input[type=radio]")?n.is(":checked"):!!n.val())===i&&(a=a.add(n))}),!!a.length&&a},nonBlankInputs:function(e,t){return c.blankInputs(e,t,!0)},stopEverything:function(e){return u(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(e){var t=e.data("disable-with");t!==l&&(e.data("ujs:enable-with",e.html()),e.html(t)),e.bind("click.railsDisable",function(e){return c.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==l&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},c.fire(e,"rails:attachBindings")&&(u.ajaxPrefilter(function(e,t,i){e.crossDomain||c.CSRFProtection(i)}),u(window).on("pageshow.rails",function(){u(u.rails.enableSelector).each(function(){var e=u(this);e.data("ujs:disabled")&&u.rails.enableFormElement(e)}),u(u.rails.linkDisableSelector).each(function(){var e=u(this);e.data("ujs:disabled")&&u.rails.enableElement(e)})}),e.on("ajax:complete",c.linkDisableSelector,function(){c.enableElement(u(this))}),e.on("ajax:complete",c.buttonDisableSelector,function(){c.enableFormElement(u(this))}),e.on("click.rails",c.linkClickSelector,function(e){var t=u(this),i=t.data("method"),n=t.data("params"),r=e.metaKey||e.ctrlKey;if(!c.allowAction(t))return c.stopEverything(e);if(!r&&t.is(c.linkDisableSelector)&&c.disableElement(t),c.isRemote(t)){if(r&&(!i||"GET"===i)&&!n)return!0;var o=c.handleRemote(t);return!1===o?c.enableElement(t):o.fail(function(){c.enableElement(t)}),!1}return i?(c.handleMethod(t),!1):void 0}),e.on("click.rails",c.buttonClickSelector,function(e){var t=u(this);if(!c.allowAction(t)||!c.isRemote(t))return c.stopEverything(e);t.is(c.buttonDisableSelector)&&c.disableFormElement(t);var i=c.handleRemote(t);return!1===i?c.enableFormElement(t):i.fail(function(){c.enableFormElement(t)}),!1}),e.on("change.rails",c.inputChangeSelector,function(e){var t=u(this);return c.allowAction(t)&&c.isRemote(t)?(c.handleRemote(t),!1):c.stopEverything(e)}),e.on("submit.rails",c.formSubmitSelector,function(e){var t,i,n=u(this),r=c.isRemote(n);if(!c.allowAction(n))return c.stopEverything(e);if(n.attr("novalidate")===l)if(n.data("ujs:formnovalidate-button")===l){if((t=c.blankInputs(n,c.requiredInputSelector,!1))&&c.fire(n,"ajax:aborted:required",[t]))return c.stopEverything(e)}else n.data("ujs:formnovalidate-button",l);if(r){if(i=c.nonBlankInputs(n,c.fileInputSelector)){setTimeout(function(){c.disableFormElements(n)},13);var o=c.fire(n,"ajax:aborted:file",[i]);return o||setTimeout(function(){c.enableFormElements(n)},13),o}return c.handleRemote(n),!1}setTimeout(function(){c.disableFormElements(n)},13)}),e.on("click.rails",c.formInputClickSelector,function(e){var t=u(this);if(!c.allowAction(t))return c.stopEverything(e);var i=t.attr("name"),n=i?{name:i,value:t.val()}:null,r=t.closest("form");0===r.length&&(r=u("#"+t.attr("form"))),r.data("ujs:submit-button",n),r.data("ujs:formnovalidate-button",t.attr("formnovalidate")),r.data("ujs:submit-button-formaction",t.attr("formaction")),r.data("ujs:submit-button-formmethod",t.attr("formmethod"))}),e.on("ajax:send.rails",c.formSubmitSelector,function(e){this===e.target&&c.disableFormElements(u(this))}),e.on("ajax:complete.rails",c.formSubmitSelector,function(e){this===e.target&&c.enableFormElements(u(this))}),u(function(){c.refreshCSRFTokens()}))}(jQuery),window.jwplayer=function(a){function s(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return a[e].call(t.exports,t,t.exports,s),t.loaded=!0,t.exports}var l=window.webpackJsonpjwplayer;window.webpackJsonpjwplayer=function(e,t){for(var i,n,r=0,o=[];r<e.length;r++)n=e[r],c[n]&&o.push.apply(o,c[n]),c[n]=0;for(i in t)a[i]=t[i];for(l&&l(e,t);o.length;)o.shift().call(null,s)};var i={},c={0:0};return s.e=function(e,t){if(0===c[e])return t.call(null,s);if(void 0!==c[e])c[e].push(t);else{c[e]=[t];var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.async=!0,n.src=s.p+""+({1:"jwplayer.controls",2:"provider.hlsjs",3:"provider.shaka",4:"provider.cast",5:"provider.html5",6:"provider.flash",7:"polyfills.intersection-observer",8:"provider.airplay",9:"provider.youtube",10:"polyfills.vttrenderer",11:"polyfills.promise",12:"polyfills.base64",13:"vttparser"}[e]||e)+".js",i.appendChild(n)}},s.m=a,s.c=i,s.p="",s(0)}([function(e,t,i){e.exports=i(162)},function(e,t){var i,n;i=[],void 0===(n=function(){var a={},r=Array.prototype,e=Object.prototype,t=Function.prototype,s=r.slice,o=r.concat,i=e.toString,n=e.hasOwnProperty,l=r.map,c=r.reduce,u=r.forEach,d=r.filter,h=r.every,p=r.some,f=r.indexOf,g=Array.isArray,m=Object.keys,v=t.bind,y=function E(e){return e instanceof E?e:this instanceof E?void 0:new E(e)},w=y.each=y.forEach=function(e,t,i){var n,r;if(null==e)return e;if(u&&e.forEach===u)e.forEach(t,i);else if(e.length===+e.length){for(n=0,r=e.length;n<r;n++)if(t.call(i,e[n],n,e)===a)return}else{var o=y.keys(e);for(n=0,r=o.length;n<r;n++)if(t.call(i,e[o[n]],o[n],e)===a)return}return e};y.map=y.collect=function(e,n,r){var o=[];return null==e?o:l&&e.map===l?e.map(n,r):(w(e,function(e,t,i){o.push(n.call(r,e,t,i))}),o)};var b="Reduce of empty array with no initial value";y.reduce=y.foldl=y.inject=function(e,n,r,o){var a=2<arguments.length;if(null==e&&(e=[]),c&&e.reduce===c)return o&&(n=y.bind(n,o)),a?e.reduce(n,r):e.reduce(n);if(w(e,function(e,t,i){a?r=n.call(o,r,e,t,i):(r=e,a=!0)}),!a)throw new TypeError(b);return r},y.find=y.detect=function(e,n,r){var o;return _(e,function(e,t,i){if(n.call(r,e,t,i))return o=e,!0}),o},y.filter=y.select=function(e,n,r){var o=[];return null==e?o:d&&e.filter===d?e.filter(n,r):(w(e,function(e,t,i){n.call(r,e,t,i)&&o.push(e)}),o)},y.reject=function(e,n,r){return y.filter(e,function(e,t,i){return!n.call(r,e,t,i)},r)},y.compact=function(e){return y.filter(e,y.identity)},y.every=y.all=function(e,n,r){n||(n=y.identity);var o=!0;return null==e?o:h&&e.every===h?e.every(n,r):(w(e,function(e,t,i){if(!(o=o&&n.call(r,e,t,i)))return a}),!!o)};var _=y.some=y.any=function(e,n,r){n||(n=y.identity);var o=!1;return null==e?o:p&&e.some===p?e.some(n,r):(w(e,function(e,t,i){if(o||(o=n.call(r,e,t,i)))return a}),!!o)};y.size=function(e){return null==e?0:e.length===+e.length?e.length:y.keys(e).length},y.last=function(e,t,i){if(null!=e)return null==t||i?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var i;return function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}};var x=function(e){return null==e?y.identity:y.isFunction(e)?e:y.property(e)},k=function(s){return function(n,r,o){var a={};return r=x(r),w(n,function(e,t){var i=r.call(o,e,t,n);s(a,i,e)}),a}};y.groupBy=k(function(e,t,i){y.has(e,t)?e[t].push(i):e[t]=[i]}),y.indexBy=k(function(e,t,i){e[t]=i}),y.sortedIndex=function(e,t,i,n){for(var r=(i=x(i)).call(n,t),o=0,a=e.length;o<a;){var s=o+a>>>1;i.call(n,e[s])<r?o=s+1:a=s}return o},y.contains=y.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=y.values(e)),0<=y.indexOf(e,t))},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matches(t))},y.findWhere=function(e,t){return y.find(e,y.matches(t))},y.max=function(e,r,o){if(!r&&y.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var a=-1/0,s=-1/0;return w(e,function(e,t,i){var n=r?r.call(o,e,t,i):e;s<n&&(a=e,s=n)}),a},y.difference=function(e){var t=o.apply(r,s.call(arguments,1));return y.filter(e,function(e){return!y.contains(t,e)})},y.without=function(e){return y.difference(e,s.call(arguments,1))},y.indexOf=function(e,t,i){if(null==e)return-1;var n=0,r=e.length;if(i){if("number"!=typeof i)return e[n=y.sortedIndex(e,t)]===t?n:-1;n=i<0?Math.max(0,r+i):i}if(f&&e.indexOf===f)return e.indexOf(t,i);for(;n<r;n++)if(e[n]===t)return n;return-1};var j=function(){};y.bind=function(i,n){var r,o;if(v&&i.bind===v)return v.apply(i,s.call(arguments,1));if(!y.isFunction(i))throw new TypeError;return r=s.call(arguments,2),o=function(){if(!(this instanceof o))return i.apply(n,r.concat(s.call(arguments)));j.prototype=i.prototype;var e=new j;j.prototype=null;var t=i.apply(e,r.concat(s.call(arguments)));return Object(t)===t?t:e}},y.partial=function(r){var o=s.call(arguments,1);return function(){for(var e=0,t=o.slice(),i=0,n=t.length;i<n;i++)t[i]===y&&(t[i]=arguments[e++]);for(;e<arguments.length;)t.push(arguments[e++]);return r.apply(this,t)}},y.once=y.partial(y.before,2),y.memoize=function(t,i){var n={};return i||(i=y.identity),function(){var e=i.apply(this,arguments);return y.has(n,e)?n[e]:n[e]=t.apply(this,arguments)}},y.delay=function(e,t){var i=s.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},y.defer=function(e){return y.delay.apply(y,[e,1].concat(s.call(arguments,1)))},y.throttle=function(i,n,r){var o,a,s,l=null,c=0;r||(r={});var u=function(){c=!1===r.leading?0:y.now(),l=null,s=i.apply(o,a),o=a=null};return function(){var e=y.now();c||!1!==r.leading||(c=e);var t=n-(e-c);return o=this,a=arguments,t<=0?(clearTimeout(l),l=null,c=e,s=i.apply(o,a),o=a=null):l||!1===r.trailing||(l=setTimeout(u,t)),s}},y.keys=function(e){if(!y.isObject(e))return[];if(m)return m(e);var t=[];for(var i in e)y.has(e,i)&&t.push(i);return t},y.invert=function(e){for(var t={},i=y.keys(e),n=0,r=i.length;n<r;n++)t[e[i[n]]]=i[n];return t},y.defaults=function(i){return w(s.call(arguments,1),function(e){if(e)for(var t in e)void 0===i[t]&&(i[t]=e[t])}),i},y.extend=function(i){return w(s.call(arguments,1),function(e){if(e)for(var t in e)i[t]=e[t]}),i},y.pick=function(t){var i={},e=o.apply(r,s.call(arguments,1));return w(e,function(e){e in t&&(i[e]=t[e])}),i},y.omit=function(e){var t={},i=o.apply(r,s.call(arguments,1));for(var n in e)y.contains(i,n)||(t[n]=e[n]);return t},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.isArray=g||function(e){return"[object Array]"==i.call(e)},y.isObject=function(e){return e===Object(e)},w(["Arguments","Function","String","Number","Date","RegExp"],function(t){y["is"+t]=function(e){return i.call(e)=="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return!(!e||!y.has(e,"callee"))}),y.isFunction=function(e){return"function"==typeof e},y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!=+e},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==i.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return n.call(e,t)},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.property=function(t){return function(e){return e[t]}},y.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},y.matches=function(i){return function(e){if(e===i)return!0;for(var t in i)if(i[t]!==e[t])return!1;return!0}},y.now=Date.now||function(){return(new Date).getTime()},y.result=function(e,t){if(null!=e){var i=e[t];return y.isFunction(i)?i.call(e):i}};var T=0;return y.uniqueId=function(e){var t=++T+"";return e?e+t:t},y}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r,g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(7),i(1),i(27),i(14),i(23),i(38),i(11),i(63),i(40),i(66),i(39),i(119),i(118),i(67)],void 0===(r=function(e,t,i,n,r,o,a,s,l,c,u,d,h,p){var f={log:function(){window.console&&("object"===g(console.log)?console.log(Array.prototype.slice.call(arguments,0)):console.log.apply(console,arguments))},between:function(e,t,i){return Math.max(Math.min(e,i),t)},foreach:function(e,t){var i;for(i in e)"function"===f.typeOf(e.hasOwnProperty)?e.hasOwnProperty(i)&&t(i,e[i]):t(i,e[i])}};return f.indexOf=t.indexOf,f.noop=function(){},f.seconds=e.seconds,f.prefix=e.prefix,f.suffix=e.suffix,f.Timer=u,t.extend(f,o,a,l,i,s,n,r,c,d,h,p),f}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(1)],void 0===(r=function(d){var r=[].slice,e={on:function(e,t,i){return h(this,"on",e,[t,i])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:i})),this},once:function e(t,i,n){if(!h(this,"once",t,[i,n])||!i)return this;var r=this,e=d.once(function(){r.off(t,e),i.apply(this,arguments)});return e._callback=i,this.on(t,e,n)},off:function(e,t,i){var n,r,o,a,s,l,c,u;if(!this._events||!h(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(s=0,l=(a=e?[e]:d.keys(this._events)).length;s<l;s++)if(e=a[s],o=this._events[e]){if(this._events[e]=n=[],t||i)for(c=0,u=o.length;c<u;c++)r=o[c],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&n.push(r);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!h(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&s(i,t,this),n&&s(n,arguments,this),this},triggerSafe:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!h(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&o(i,t,this,e),n&&o(n,arguments,this,e),this}},l=/\s+/,h=function(e,t,i,n){if(!i)return!0;if("object"===(void 0===i?"undefined":c(i))){for(var r in i)e[t].apply(e,[r,i[r]].concat(n));return!1}if(l.test(i)){for(var o=i.split(l),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(n));return!1}return!0},s=function(e,t,i){var n,r=-1,o=e.length,a=t[0],s=t[1],l=t[2];switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.context||i);return;case 1:for(;++r<o;)(n=e[r]).callback.call(n.context||i,a);return;case 2:for(;++r<o;)(n=e[r]).callback.call(n.context||i,a,s);return;case 3:for(;++r<o;)(n=e[r]).callback.call(n.context||i,a,s,l);return;default:for(;++r<o;)(n=e[r]).callback.apply(n.context||i,t);return}},o=function(e,t,i,n){for(var r,o=-1,a=e.length;++o<a;)try{(r=e[o]).callback.apply(r.context||i,t)}catch(s){console.log('Error in "'+n+'" event handler:',s)}};return e}.apply(t,n))||(e.exports=r)},function(e,t){var i,n;i=[],void 0===(n=function(){var e={DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",CLICK:"click",DOUBLE_CLICK:"doubleClick",TAP:"tap",DOUBLE_TAP:"doubleTap",OVER:"over",MOVE:"move",OUT:"out"},t={COMPLETE:"complete",ERROR:"error",JWPLAYER_AD_CLICK:"adClick",JWPLAYER_AD_COMPANIONS:"adCompanions",JWPLAYER_AD_COMPLETE:"adComplete",JWPLAYER_AD_ERROR:"adError",JWPLAYER_AD_IMPRESSION:"adImpression",JWPLAYER_AD_META:"adMeta",JWPLAYER_AD_PAUSE:"adPause",JWPLAYER_AD_PLAY:"adPlay",JWPLAYER_AD_SKIPPED:"adSkipped",JWPLAYER_AD_TIME:"adTime",JWPLAYER_CAST_AD_CHANGED:"castAdChanged",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_READY:"ready",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_BEFOREPLAY:"beforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_DISPLAY_CLICK:"displayClick",JWPLAYER_PLAYLIST_COMPLETE:"playlistComplete",JWPLAYER_CAST_SESSION:"cast",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_FIRST_FRAME:"firstFrame",JWPLAYER_MEDIA_PLAY_ATTEMPT:"playAttempt",JWPLAYER_MEDIA_LOADED:"loaded",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_SETUP_ERROR:"setupError",JWPLAYER_ERROR:"error",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_CAST_AVAILABLE:"castAvailable",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_MEDIA_VOLUME:"volume",JWPLAYER_MEDIA_MUTE:"mute",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_CONTROLS:"controls",JWPLAYER_FULLSCREEN:"fullscreen",JWPLAYER_RESIZE:"resize",JWPLAYER_PLAYLIST_ITEM:"playlistItem",JWPLAYER_PLAYLIST_LOADED:"playlist",JWPLAYER_AUDIO_TRACKS:"audioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"audioTrackChanged",JWPLAYER_PLAYBACK_RATE_CHANGED:"playbackRateChanged",JWPLAYER_LOGO_CLICK:"logoClick",JWPLAYER_CAPTIONS_LIST:"captionsList",JWPLAYER_CAPTIONS_CHANGED:"captionsChanged",JWPLAYER_PROVIDER_CHANGED:"providerChanged",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame",JWPLAYER_USER_ACTION:"userAction",JWPLAYER_PROVIDER_CLICK:"providerClick",JWPLAYER_VIEW_TAB_FOCUS:"tabFocus",JWPLAYER_CONTROLBAR_DRAGGING:"scrubbing",JWPLAYER_INSTREAM_CLICK:"instreamClick",JWPLAYER_BREAKPOINT:"breakpoint"};return t.touchEvents=e,t}.apply(t,i))||(e.exports=n)},function(e,t){var i,n;i=[],void 0===(n=function(){return{BUFFERING:"buffering",IDLE:"idle",COMPLETE:"complete",PAUSED:"paused",PLAYING:"playing",ERROR:"error",LOADING:"loading",STALLED:"stalled"}}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r;n=[i(3),i(4),i(1),i(2)],void 0===(r=function(e,t,w,i){function b(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]}function _(e){var t=e||window.event;return e instanceof MouseEvent&&("which"in t?3===t.which:"button"in t&&2===t.button)}function x(e,t,i){var n;return n=t instanceof MouseEvent||!t.touches&&!t.changedTouches?t:t.touches&&t.touches.length?t.touches[0]:t.changedTouches[0],{type:e,sourceEvent:t,target:t.target,currentTarget:i,pageX:n.pageX,pageY:n.pageY}}function k(e){(e instanceof MouseEvent||e instanceof window.TouchEvent)&&(e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault())}var j=t.touchEvents,T="PointerEvent"in window,n="ontouchstart"in window,E=!(T||n&&i.isMobile()),C=i.isFF()&&i.isOSX(),r=function(i,a){function e(e){"touch"!==e.pointerType&&c(j.OVER,e)}function t(e){"touch"!==e.pointerType&&c(j.MOVE,e)}function n(e){(E||T&&"touch"!==e.pointerType&&!i.contains(document.elementFromPoint(e.x,e.y)))&&c(j.OUT,e)}function r(e,t,i){e.removeEventListener(t,i),e.addEventListener(t,i)}function o(e){u=e.target,f=b(e,"X"),g=b(e,"Y"),_(e)||("pointerdown"===e.type&&e.isPrimary?(a.preventScrolling&&(d=e.pointerId,i.setPointerCapture(d)),r(i,"pointermove",s),r(i,"pointercancel",l),"mouse"===e.pointerType&&"OBJECT"===u.nodeName?r(document,"mouseup",l):r(i,"pointerup",l)):"mousedown"===e.type?(r(document,"mousemove",s),C&&"object"===e.target.nodeName.toLowerCase()?r(i,"click",l):r(document,"mouseup",l)):"touchstart"===e.type&&(r(u,"touchmove",s),r(u,"touchcancel",l),r(u,"touchend",l)),a.preventScrolling&&k(e))}function s(e){var t=6;if(p)c(j.DRAG,e);else{var i=b(e,"X"),n=b(e,"Y"),r=i-f,o=n-g;t*t<r*r+o*o&&(c(j.DRAG_START,e),p=!0,c(j.DRAG,e))}a.preventScrolling&&k(e)}function l(e){var t="pointerup"===e.type||"pointercancel"===e.type;t&&a.preventScrolling&&i.releasePointerCapture(d),i.removeEventListener("pointermove",s),i.removeEventListener("pointercancel",l),i.removeEventListener("pointerup",l),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",l),u&&(u.removeEventListener("touchmove",s),u.removeEventListener("touchcancel",l),u.removeEventListener("touchend",l)),p?c(j.DRAG_END,e):a.directSelect&&e.target!==i||-1!==e.type.indexOf("cancel")||("mouseup"===e.type||"click"===e.type||t&&"mouse"===e.pointerType?c(j.CLICK,e):(c(j.TAP,e),"touchend"===e.type&&k(e))),u=null,p=!1}function c(e,t){var i;if(a.enableDoubleTap&&(e===j.CLICK||e===j.TAP))if(w.now()-m<v){var n=e===j.CLICK?j.DOUBLE_CLICK:j.DOUBLE_TAP;i=x(n,t,h),y.trigger(n,i),m=0}else m=w.now();i=x(e,t,h),y.trigger(e,i)}var u,d,h=i,p=!1,f=0,g=0,m=0,v=300;a=a||{},T?(i.addEventListener("pointerdown",o),a.useHover&&(i.addEventListener("pointerover",e),i.addEventListener("pointerout",n)),a.useMove&&i.addEventListener("pointermove",t)):(E&&(i.addEventListener("mousedown",o),a.useHover&&(i.addEventListener("mouseover",e),i.addEventListener("mouseout",n)),a.useMove&&i.addEventListener("mousemove",t)),i.addEventListener("touchstart",o));var y=this;return this.triggerEvent=c,this.destroy=function(){this.off(),i.removeEventListener("touchstart",o),i.removeEventListener("mousedown",o),u&&(u.removeEventListener("touchmove",s),u.removeEventListener("touchcancel",l),u.removeEventListener("touchend",l),u=null),T&&(a.preventScrolling&&i.releasePointerCapture(d),i.removeEventListener("pointerover",e),i.removeEventListener("pointerdown",o),i.removeEventListener("pointermove",s),i.removeEventListener("pointermove",t),i.removeEventListener("pointercancel",l),i.removeEventListener("pointerout",n),i.removeEventListener("pointerup",l)),i.removeEventListener("click",l),i.removeEventListener("mouseover",e),i.removeEventListener("mousemove",t),i.removeEventListener("mouseout",n),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",l)},this};return r.getPointerType=function(e){return T&&e instanceof window.PointerEvent?"touch"===e.pointerType?"touch":"mouse":n&&e instanceof window.TouchEvent?"touch":"mouse"},w.extend(r.prototype,e),r}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1)],void 0===(r=function(a){function i(e){return/[\(,]format=m3u8-/i.test(e)?"m3u8":!!/[\(,]format=mpd-/i.test(e)&&"mpd"}var r=function(e,t,i){for(e=""+e,i=i||"0";e.length<t;)e=i+e;return e},e=function(e){var t=parseInt(e/3600),i=parseInt(e/60)%60,n=e%60;return r(t,2)+":"+r(i,2)+":"+r(n.toFixed(3),6)};return{trim:function(e){return e.replace(/^\s+|\s+$/g,"")},pad:r,xmlAttribute:function(e,t){for(var i=0;i<e.attributes.length;i++)if(e.attributes[i].name&&e.attributes[i].name.toLowerCase()===t.toLowerCase())return e.attributes[i].value.toString();return""},extension:function(e){if(!e||"rtmp"===e.substr(0,4))return"";var t=i(e);return t||(-1<(e=e.split("?")[0].split("#")[0]).lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0)},hms:e,seconds:function(e,t){if(a.isNumber(e))return e;var i=(e=e.replace(",",".")).split(":"),n=i.length,r=0;if("s"===e.slice(-1))r=parseFloat(e);else if("m"===e.slice(-1))r=60*parseFloat(e);else if("h"===e.slice(-1))r=3600*parseFloat(e);else if(1<n){var o=n-1;4===n&&(t&&(r=parseFloat(i[o])/t),o-=1),r+=parseFloat(i[o]),r+=60*parseFloat(i[o-1]),3<=n&&(r+=3600*parseFloat(i[o-2]))}else r=parseFloat(e);return r},suffix:function(e,t){return a.map(e,function(e){return e+t})},prefix:function(e,t){return a.map(e,function(e){return t+e})}}}.apply(t,n))||(e.exports=r)},,,function(e,t,i){var n,r;n=[i(2),i(4),i(5),i(1)],void 0===(r=function(e,n,i,t){var r=e.noop,o=t.constant(!1);return{supports:o,play:r,load:r,stop:r,volume:r,mute:r,seek:r,resize:r,remove:r,destroy:r,setVisibility:r,setFullscreen:o,getFullscreen:r,getContainer:r,setContainer:o,getName:r,getQualityLevels:r,getCurrentQuality:r,setCurrentQuality:r,getAudioTracks:r,getCurrentAudioTrack:r,setCurrentAudioTrack:r,setPlaybackRate:r,getPlaybackRate:function(){return 1},checkComplete:r,setControls:r,attachMedia:r,detachMedia:r,setState:function(e){var t=this.state||i.IDLE;(this.state=e)!==t&&this.trigger(n.JWPLAYER_PLAYER_STATE,{newstate:e})},sendMediaType:function(e){var t=e[0].type,i="oga"===t||"aac"===t||"mp3"===t||"mpeg"===t||"vorbis"===t;this.trigger(n.JWPLAYER_MEDIA_TYPE,{mediaType:i?"audio":"video"})}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1)],void 0===(r=function(f){var g={},m={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"};return g.utf8ArrayToStr=function(e,t){var i,n,r,o,a,s;for(i="",r=e.length,n=t||0;n<r;)if(0!==(o=e[n++])&&3!==o)switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(o);break;case 12:case 13:a=e[n++],i+=String.fromCharCode((31&o)<<6|63&a);break;case 14:a=e[n++],s=e[n++],i+=String.fromCharCode((15&o)<<12|(63&a)<<6|(63&s)<<0)}return i},g.utf16BigEndianArrayToStr=function(e,t){var i,n,r;for(i="",r=e.length-1,n=t||0;n<r;)254===e[n]&&255===e[n+1]||(i+=String.fromCharCode((e[n]<<8)+e[n+1])),n+=2;return i},g.syncSafeInt=function(e){var t=g.arrayToInt(e);return 127&t|(32512&t)>>1|(8323072&t)>>2|(2130706432&t)>>3},g.arrayToInt=function(e){for(var t="0x",i=0;i<e.length;i++)e[i]<16&&(t+="0"),t+=e[i].toString(16);return parseInt(t)},g.parseID3=function(e){return f.reduce(e,function(e,t){if(!("value"in t)&&"data"in t&&t.data instanceof ArrayBuffer){var i=new Uint8Array(t.data),n=i.length;t={value:{key:"",data:""}};for(var r=10;r<14&&r<i.length&&0!==i[r];)t.value.key+=String.fromCharCode(i[r]),r++;var o=19,a=i[o];3!==a&&0!==a||(a=i[++o],n--);var s=0;if(1!==a&&2!==a)for(var l=o+1;l<n;l++)if(0===i[l]){s=l-o;break}if(0<s){var c=g.utf8ArrayToStr(i.subarray(o,o+=s),0);if("PRIV"===t.value.key){if("com.apple.streaming.transportStreamTimestamp"===c){var u=1&g.syncSafeInt(i.subarray(o,o+=4)),d=g.syncSafeInt(i.subarray(o,o+=4));u&&(d+=4294967296),t.value.data=d}else t.value.data=g.utf8ArrayToStr(i,o+1);t.value.info=c}else t.value.info=c,t.value.data=g.utf8ArrayToStr(i,o+1)}else{var h=i[o];t.value.data=1===h||2===h?g.utf16BigEndianArrayToStr(i,o+1):g.utf8ArrayToStr(i,o+1)}}if(m.hasOwnProperty(t.value.key)&&(e[m[t.value.key]]=t.value.data),t.value.info){var p=e[t.value.key];f.isObject(p)||(p={},e[t.value.key]=p),p[t.value.info]=t.value.data}else e[t.value.key]=t.value.data;return e},{})},g}.apply(t,n))||(e.exports=r)},function(e,t){var i,n;i=[],void 0===(n=function(){return{createId:function(e,t){var i=e.kind||"cc";return e["default"]||e.defaulttrack?"default":e._id||e.file||i+t},createLabel:function(e,t){var i=e.label||e.name||e.language;return i||(i="Unknown CC",1<(t+=1)&&(i+=" ["+t+"]")),{label:i,unknownCount:t}}}}.apply(t,i))||(e.exports=n)},function(e,t,a){var i,n;i=[a(1),a(2),a(20),a(35),a(103),a(36)],void 0===(n=function(t,e,c,u,d,i){function r(e,t,i,n){var r,o,a=e.responseXML?e.responseXML.firstChild:null;if(a)for("xml"===c.localName(a)&&(a=a.nextSibling);a.nodeType===a.COMMENT_NODE;)a=a.nextSibling;try{if(a&&"tt"===c.localName(a))r=d(e.responseXML),o=this.convertToVTTCues(r),delete t.xhr,i(o);else{var s=e.responseText;0<=s.indexOf("WEBVTT")?h(s,t,i,n):(r=u(s),o=this.convertToVTTCues(r),delete t.xhr,i(o))}}catch(l){delete t.xhr,n(l)}}function h(i,n,r,o){a.e(13,function(){var e=new(a(25))(window),t=[];e.oncue=function(e){t.push(e)},e.onflush=function(){delete n.xhr,r(t)};try{e.parse(i)}catch(h){delete n.xhr,o(h)}})}var o={loadFile:function(t,i,n){t.xhr=e.ajax(t.file,function(e){r.call(o,e,t,i,n)},n)},cancelXhr:function(e){t.each(e,function(e){var t=e.xhr;t&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()),delete e.xhr})},convertToVTTCues:function(e){return t.map(e,function(e){return new i(e.begin,e.end,e.text)})}};return o}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r;n=[i(7),i(1),i(115)],void 0===(r=function(i,r,e){var o={createElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},styleDimension:function(e){return e+(0<e.toString().indexOf("%")?"":"px")}},a=function(e){return r.isString(e.className)?e.className.split(" "):[]},s=function(e,t){t=i.trim(t),e.className!==t&&(e.className=t)};return o.classList=function(e){return e.classList?e.classList:a(e)},o.hasClass=e.hasClass,o.addClass=function(e,t){var i=a(e),n=r.isArray(t)?t:t.split(" ");r.each(n,function(e){r.contains(i,e)||i.push(e)}),s(e,i.join(" "))},o.removeClass=function(e,t){var i=a(e),n=r.isArray(t)?t:t.split(" ");s(e,r.difference(i,n).join(" "))},o.replaceClass=function(e,t,i){var n=e.className||"";t.test(n)?n=n.replace(t,i):i&&(n+=" "+i),s(e,n)},o.toggleClass=function(e,t,i){var n=o.hasClass(e,t);(i=r.isBoolean(i)?i:!n)!==n&&(i?o.addClass(e,t):o.removeClass(e,t))},o.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},o.addStyleSheet=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},o.empty=function(e){if(e)for(;0<e.childElementCount;)e.removeChild(e.children[0])},o.bounds=function(e){var t={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!e||!document.body.contains(e))return t;var i=e.getBoundingClientRect(),n=window.pageYOffset,r=window.pageXOffset;return(i.width||i.height||i.left||i.top)&&(t.left=i.left+r,t.right=i.right+r,t.top=i.top+n,t.bottom=i.bottom+n,t.width=i.right-i.left,t.height=i.bottom-i.top),t},o}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(4),i(3),i(1)],void 0===(r=function(c,e,i){var u={},d={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},t=function(r,o){function a(e){l=d.ERROR,
t.trigger(c.ERROR,e)}function s(e){l=d.COMPLETE,t.trigger(c.COMPLETE,e)}var t=i.extend(this,e),l=d.NEW;this.addEventListener=this.on,this.removeEventListener=this.off,this.makeStyleLink=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},this.makeScriptTag=function(e){var t=document.createElement("script");return t.src=e,t},this.makeTag=o?this.makeStyleLink:this.makeScriptTag,this.load=function(){if(l===d.NEW){var e=u[r];if(e&&(l=e.getStatus())<2)return e.on(c.ERROR,a),void e.on(c.COMPLETE,s);var t=document.getElementsByTagName("head")[0]||document.documentElement,i=this.makeTag(r),n=!1;i.onload=i.onreadystatechange=function(e){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,s(e),i.onload=i.onreadystatechange=null,t&&i.parentNode&&!o&&t.removeChild(i))},i.onerror=a,t.insertBefore(i,t.firstChild),l=d.LOADING,u[r]=this}},this.getStatus=function(){return l}};return t.loaderstatus=d,t}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1)],void 0===(r=function(i){var e="free",t="premium",n="enterprise",r="platinum",o="ads",a="unlimited",s="trial",l={setup:[e,t,n,o,a,s,r],dash:[t,n,o,a,s,r],drm:[n,o,a,s],hls:[t,o,n,a,s,r],ads:[o,a,s,r,n],casting:[t,n,o,a,s,r],jwpsrv:[e,t,n,o,s,r]};return function(t){return function(e){return i.contains(l[e],t)}}}.apply(t,n))||(e.exports=r)},,,,function(e,t,i){var n,r;n=[i(7)],void 0===(r=function(i){return{localName:function e(t){var e="";return t&&(t.localName?e=t.localName:t.baseName&&(e=t.baseName)),e},textContent:function e(t){var e="";return t&&(t.textContent?e=i.trim(t.textContent):t.text&&(e=i.trim(t.text))),e},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(107),i(108),i(55),i(26)],void 0===(r=function(i,n,o,a){var s={},r={};return{loadPlugins:function(e,t){return r[e]=new i(new n(s),t),r[e]},registerPlugin:function(e,t,i,n){var r=a.getPluginName(e);s[r]||(s[r]=new o(e)),s[r].registerPlugin(e,t,i,n)}}}.apply(t,n))||(e.exports=r)},function(e,t){var i,n;i=[],void 0===(n=function(){return{repo:"http://ssl.p.jwpcdn.com/player/v/",SkinsIncluded:["seven"],SkinsLoadable:["beelden","bekle","five","glow","roundster","six","stormtrooper","vapor"],dvrSeekLimit:-25}}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(7),i(49)],void 0===(r=function(i,s){function l(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}function c(e,t){return""===t||null==t?"":"string"==typeof t&&isNaN(t)?/png|gif|jpe?g/i.test(t)&&t.indexOf("url")<0?"url("+t+")":t:0===t||"z-index"===e||"opacity"===e?""+t:/color/i.test(e)?"#"+i.pad(t.toString(16).replace(/^0x/i,""),6):Math.ceil(t)+"px"}var a,e=function(e,t,i,n){i=i||"all-players";var r="";if("object"===(void 0===t?"undefined":d(t))){var o=document.createElement("div");u(o,t);var a=o.style.cssText;n&&a&&(a=a.replace(/;/g," !important;")),r="{"+a+"}"}else"string"==typeof t&&(r=t);return""===r||"{}"===r?void s.clear(i,e):void s.style([[e,e+r]],i)},u=function(e,t){if(null!=e){void 0===e.length&&(e=[e]);var i,n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=c(i,t[i]));for(var r=0;r<e.length;r++){var o,a=e[r];if(null!=a)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o=l(i),a.style[o]!==n[i]&&(a.style[o]=n[i]))}}},t=function(e,t){u(e,{transform:t,webkitTransform:t,msTransform:t,mozTransform:t,oTransform:t})},n=function(e,t){var i="rgb",n=void 0!==t&&100!==t;if(n&&(i+="a"),!a){var r=document.createElement("canvas");r.height=1,r.width=1,a=r.getContext("2d")}e?isNaN(parseInt(e,16))||(e="#"+e):e="#000000",a.clearRect(0,0,1,1),a.fillStyle=e,a.fillRect(0,0,1,1);var o=a.getImageData(0,0,1,1).data;return i+="("+o[0]+", "+o[1]+", "+o[2],n&&(i+=", "+t/100),i+")"};return{css:e,style:u,clearCss:s.clear,transform:t,hexToRgba:n,getRgba:n}}.apply(t,n))||(e.exports=r)},,,function(e,t,i){var n,r;n=[i(7)],void 0===(r=function(r){var e={},o=e.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};return e.getPluginPathType=function(e){if("string"==typeof e){var t=(e=e.split("?")[0]).indexOf("://");if(0<t)return o.ABSOLUTE;var i=e.indexOf("/"),n=r.extension(e);return!(t<0&&i<0)||n&&isNaN(n)?o.RELATIVE:o.CDN}},e.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},e.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},e}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1)],void 0===(r=function(e){function t(e){return function(){return n(e)}}var i={},n=e.memoize(function(e){return null!==navigator.userAgent.toLowerCase().match(e)}),r=i.isInt=function(e){return parseFloat(e)%1==0};i.isFlashSupported=function(){var e=i.flashVersion();return e&&18<=e},i.isFF=t(/gecko\//i),i.isIPod=t(/iP(hone|od)/i),i.isIPad=t(/iPad/i),i.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),i.isOSX=t(/Mac OS X/i),i.isFacebook=t(/FBAV/i);var o=i.isEdge=function(e){return n(e?new RegExp("\\sedge\\/"+e,"i"):/\sEdge\/\d+/i)},a=i.isIETrident=t(/trident\/.+rv:\s*11/i),s=i.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),n(new RegExp("msie\\s*"+e,"i"))):n(/msie/i)};i.isChrome=function(){return n(/\s(?:Chrome|CriOS)\//i)&&!i.isEdge()},i.isIE=function(e){return e?12<=(e=parseFloat(e).toFixed(1))?o(e):11<=e?a():s(e):o()||a()||s()},i.isSafari=function(){return n(/safari/i)&&!n(/chrome/i)&&!n(/crios/i)&&!n(/chromium/i)&&!n(/android/i)};var l=i.isIOS=function(e){return n(e?new RegExp("iP(hone|ad|od).+\\s(OS\\s"+e+"|.*\\sVersion/"+e+")","i"):/iP(hone|ad|od)/i)};i.isAndroidNative=function(e){return c(e,!0)};var c=i.isAndroid=function(e,t){return!(t&&n(/chrome\/[123456789]/i)&&!n(/chrome\/18/))&&(e?(r(e)&&!/\./.test(e)&&(e+="."),n(new RegExp("Android\\s*"+e,"i"))):n(/Android/i))};return i.isMobile=function(){return l()||c()},i.isIframe=function(){try{return window.self!==window.top}catch(e){return!0}},i.flashVersion=function(){if(i.isAndroid())return 0;var e,t=navigator.plugins;if(t&&((e=t["Shockwave Flash"])&&e.description))return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if("undefined"==typeof window.ActiveXObject)return 0;try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(n){return 0}return e},i}.apply(t,n))||(e.exports=r)},function(e,t){var i,n;i=[],void 0===(n=function(){return"7.12.1+commercial_v7-12-1.187.commercial.d1b078.jwplayer.70bb93.freewheel.a63b67.googima.dc161b.vast.67ee7c.analytics.212a6c.plugin-gapro.7e936b.plugin-related.7adae3.plugin-sharing.586630.vr-plugin.d532d3.hls.js."}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r;n=[i(1),i(16)],void 0===(r=function(n,i){var r,t=[{configName:"clearkey",keyName:"org.w3.clearkey"},{configName:"widevine",keyName:"com.widevine.alpha"},{configName:"playready",keyName:"com.microsoft.playready"}],o=[],a={},s=function(n){return new Promise(function(e,t){var i;try{i=new window.MSMediaKeys(n)}catch(o){}i?e():t()})},l=function(e){var i=s;return navigator.requestMediaKeySystemAccess&&(i=navigator.requestMediaKeySystemAccess.bind(navigator)),r?r.then(e):(n.forEach(t,function(e){var t=i(e.keyName,[{initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.4d401e"'}],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}]}]).then(function(){a[e.configName]=!0})["catch"](function(){a[e.configName]=!1});o.push(t)}),r=Promise.all(o).then(e))},c=function(){return!!navigator.requestMediaKeySystemAccess&&!!MediaKeySystemAccess.prototype.getConfiguration||!!window.MSMediaKeys},u=function(e){return a[e]};return{containsDrm:function(e){var t=e.get("playlist");return!!e.get("drm")||n.some(t,function(e){return!!e.drm||n.some(e.sources,function(e){return!!e.drm})})},probe:function(e,t){c()&&i(t)("drm")?l(e):e()},anySupported:function(e){r||console.error('DRM only supported with "drm" block in initial setup.',e);var t=n.keys(e);return n.some(t,function(e){return u(e)})},isSupported:u}}.apply(t,n))||(e.exports=r)},,,,function(e,t,i){var n,r;n=[i(2),i(45),i(99),i(1),i(3),i(117),i(4),i(5)],void 0===(r=function(s,n,r,d,h,e,p,f){var t=function(){function i(e,t){var i=d.extend({},t,{type:e}),n=this.mediaModel;switch(e){case"flashThrottle":var r="resume"!==t.state;this.set("flashThrottle",r),this.set("flashBlocked",r);break;case"flashBlocked":return void this.set("flashBlocked",!0);case"flashUnblocked":return void this.set("flashBlocked",!1);case"volume":return void this.set(e,t[e]);case"mute":return void(this.get("autostartMuted")||this.set(e,t[e]));case"ratechange":var o=t.playbackRate;return void(0<o&&this.set("playbackRate",o));case p.JWPLAYER_MEDIA_TYPE:return void(n.get("mediaType")!==t.mediaType&&(n.set("mediaType",t.mediaType),this.mediaController.trigger(e,i)));case p.JWPLAYER_PLAYER_STATE:return void n.set("state",t.newstate);case p.JWPLAYER_MEDIA_BUFFER:this.set("buffer",t.bufferPercent);case p.JWPLAYER_MEDIA_META:var a=t.duration;d.isNumber(a)&&!d.isNaN(a)&&(n.set("duration",a),this.set("duration",a));break;case p.JWPLAYER_MEDIA_BUFFER_FULL:n.get("playAttempt")?this.playVideo():n.on("change:playAttempt",function(){this.playVideo()},this),this.setPlaybackRate(this.get("defaultPlaybackRate"));break;case p.JWPLAYER_MEDIA_TIME:n.set("position",t.position),this.set("position",t.position),d.isNumber(t.duration)&&(n.set("duration",t.duration),this.set("duration",t.duration));break;case p.JWPLAYER_PROVIDER_CHANGED:this.set("provider",l.getName());break;case p.JWPLAYER_MEDIA_LEVELS:this.setQualityLevel(t.currentQuality,t.levels),n.set("levels",t.levels);break;case p.JWPLAYER_MEDIA_LEVEL_CHANGED:this.setQualityLevel(t.currentQuality,t.levels),this.persistQualityLevel(t.currentQuality,t.levels);break;case p.JWPLAYER_MEDIA_COMPLETE:return c=!0,this.mediaController.trigger(p.JWPLAYER_MEDIA_BEFORECOMPLETE,i),void(u&&this.playbackComplete());case p.JWPLAYER_AUDIO_TRACKS:this.setCurrentAudioTrack(t.currentTrack,t.tracks),n.set("audioTracks",t.tracks);break;case p.JWPLAYER_AUDIO_TRACK_CHANGED:this.setCurrentAudioTrack(t.currentTrack,t.tracks);break;case"subtitlesTrackChanged":this.persistVideoSubtitleTrack(t.currentTrack,t.tracks);break;case"visualQuality":var s=d.extend({},t);n.set("visualQuality",s);break;case"autoplayFailed":this.set("autostartFailed",!0),n.get("state")===f.PLAYING&&n.set("state",f.PAUSED)}this.mediaController.trigger(e,i)}function o(){return!!s.isIOS()&&!(s.isIOS(6)||s.isIOS(7)||s.isIOS(8)||s.isIOS(9))}function e(){var e=!a.get("advertising")||a.get("advertising").autoplayadsmuted,t=o()&&(s.isSafari()||s.isChrome()||s.isFacebook()),i=s.isAndroid()&&s.isChrome(),n=t||i,r=1===a.get("sdkplatform");return!a.get("sdkplatform")&&e&&n||r}var t,l,a=this,c=!1,u=!0;this.mediaController=d.extend({},h),this.mediaModel=new g,r.model(this),this.set("mediaModel",this.mediaModel),this.setup=function(e){return d.extend(this.attributes,e,{item:0,itemMeta:{},playlistItem:void 0,state:f.IDLE,flashBlocked:!1,provider:void 0,duration:0,position:0,buffer:0}),this.updateProviders(),this},this.getConfiguration=function(){return d.omit(this.clone(),["mediaModel"])},this.updateProviders=function(){t=new n(this.getConfiguration())},this.setQualityLevel=function(e,t){-1<e&&1<t.length&&"youtube"!==l.getName().name&&this.mediaModel.set("currentLevel",parseInt(e))},this.persistQualityLevel=function(e,t){var i=(t[e]||{}).label;this.set("qualityLabel",i)},this.setCurrentAudioTrack=function(e,t){-1<e&&0<t.length&&e<t.length&&this.mediaModel.set("currentAudioTrack",parseInt(e))},this.onMediaContainer=function(){var e=this.get("mediaContainer");l.setContainer(e)},this.changeVideoProvider=function(e){if(this.off("change:mediaContainer",this.onMediaContainer),l&&(l.off(null,null,this),l.getContainer()&&l.remove(),delete l.instreamMode),!e)return this.resetProvider(),void this.set("provider",void 0);l=new e(a.get("id"),a.getConfiguration());var t=this.get("mediaContainer");t?l.setContainer(t):this.once("change:mediaContainer",this.onMediaContainer),-1===l.getName().name.indexOf("flash")&&(this.set("flashThrottle",void 0),this.set("flashBlocked",!1)),l.volume(a.get("volume")),l.mute(this.autoStartOnMobile()||a.get("mute")),l.on("all",i,this),this.setPlaybackRate(this.get("defaultPlaybackRate")),this.set("playbackRate",l.getPlaybackRate()),!0===this.get("instreamMode")&&(l.instreamMode=!0),this.set("renderCaptionsNatively",l.renderNatively)},this.checkComplete=function(){return c},this.detachMedia=function(){return u=!1,l.off("all",i,this),l.detachMedia()},this.attachMedia=function(){u=!0,l.off("all",i,this),l.on("all",i,this),c&&this.playbackComplete(),l.attachMedia(),this.setPlaybackRate(this.get("defaultPlaybackRate"))},this.playbackComplete=function(){c=!1,l.setState(f.COMPLETE),this.mediaController.trigger(p.JWPLAYER_MEDIA_COMPLETE,{})},this.destroy=function(){this.off(),l&&(l.off(null,null,this),l.destroy())},this.getVideo=function(){return l},this.setFullscreen=function(e){(e=!!e)!==a.get("fullscreen")&&a.set("fullscreen",e)},this.chooseProvider=function(e){return t.choose(e).provider},this.setItemIndex=function(e){var t=this.get("playlist");e=((e=parseInt(e,10)||0)+t.length)%t.length,this.set("item",e),this.set("playlistItem",t[e]),this.setActiveItem(t[e])},this.setActiveItem=function(e){this.mediaModel.off(),this.mediaModel=new g,this.set("itemMeta",{}),this.set("mediaModel",this.mediaModel),this.set("position",e.starttime||0),this.set("minDvrWindow",e.minDvrWindow),this.set("duration",e.duration&&s.seconds(e.duration)||0),this.setProvider(e)},this.setProvider=function(e){var t=e&&e.sources&&e.sources[0];if(void 0!==t){var i=this.chooseProvider(t);i&&l instanceof i||a.changeVideoProvider(i),l&&(l.init&&l.init(e),this.set("provider",l.getName()),this.trigger("itemReady",e))}},this.getProviders=function(){return t},this.resetProvider=function(){l=null},this.setVolume=function(e){e=Math.round(e),this.set("volume",e),l&&l.volume(e);var t=0===e;t!==this.getMute()&&this.setMute(t)},this.getMute=function(){return this.get("autostartMuted")||this.get("mute")},this.setMute=function(e){if(s.exists(e)||(e=!this.getMute()),this.set("mute",e),l&&l.mute(e),!e){var t=Math.max(10,this.get("volume"));this.set("autostartMuted",!1),this.setVolume(t)}},this.setStreamType=function(e){this.set("streamType",e),"LIVE"===e&&this.setPlaybackRate(1)},this.setPlaybackRate=function(e){u&&d.isNumber(e)&&(e=s.between(e,.25,4),"LIVE"===this.get("streamType")&&(e=1),this.set("defaultPlaybackRate",e),l&&l.setPlaybackRate&&l.setPlaybackRate(e))},this.loadVideo=function(e){e||(e=this.get("playlist")[this.get("item")]),this.set("position",e.starttime||0),this.set("duration",e.duration&&s.seconds(e.duration)||0),this.mediaModel.set("playAttempt",!0),this.mediaController.trigger(p.JWPLAYER_MEDIA_PLAY_ATTEMPT,{playReason:this.get("playReason")}),l.load(e)},this.stopVideo=function(){l&&l.stop()},this.playVideo=function(){l.play()},this.persistCaptionsTrack=function(){var e=this.get("captionsTrack");e?this.set("captionLabel",e.name):this.set("captionLabel","Off")},this.setVideoSubtitleTrack=function(e,t){this.set("captionsIndex",e),e&&t&&e<=t.length&&t[e-1].data&&this.set("captionsTrack",t[e-1]),l&&l.setSubtitlesTrack&&l.setSubtitlesTrack(e)},this.persistVideoSubtitleTrack=function(e,t){this.setVideoSubtitleTrack(e,t),this.persistCaptionsTrack()},this.autoStartOnMobile=function(){return this.get("autostart")&&e()},this.setAutoStart=function(e){d.isUndefined(e)||this.set("autostart",e);var t=this.autoStartOnMobile();t&&this.set("autostartMuted",!0),this.set("playOnViewable",t||"viewable"===this.get("autostart"))}},g=t.MediaModel=function(){this.set("state",f.IDLE)};return d.extend(t.prototype,e),d.extend(g.prototype,e),t}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(5)],void 0===(r=function(t){function o(e){return e===t.COMPLETE||e===t.ERROR?t.IDLE:e}return function(e,t,i){if((t=o(t))!==(i=o(i))){var n=t.replace(/(?:ing|d)$/,""),r={type:n,newstate:t,oldstate:i,reason:e.mediaModel.get("state")};"play"===n?r.playReason=e.get("playReason"):"pause"===n&&(r.pauseReason=e.get("pauseReason")),this.trigger(n,r)}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(2),i(7)],void 0===(r=function(e,o){function a(e){var t={},i=e.split("\r\n");1===i.length&&(i=e.split("\n"));var n=1;if(0<i[0].indexOf(" --> ")&&(n=0),i.length>n+1&&i[n+1]){var r=i[n],o=r.indexOf(" --> ");0<o&&(t.begin=s(r.substr(0,o)),t.end=s(r.substr(o+5)),t.text=i.slice(n+1).join("\r\n"))}return t}var s=e.seconds;return function(e){var t=[],i=(e=o.trim(e)).split("\r\n\r\n");1===i.length&&(i=e.split("\n\n"));for(var n=0;n<i.length;n++)if("WEBVTT"!==i[n]){var r=a(i[n]);r.text&&t.push(r)}return t}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n;void 0===(n=function(){function y(e){return"string"==typeof e&&(!!t[e.toLowerCase()]&&e.toLowerCase())}function w(e){return"string"==typeof e&&(!!i[e.toLowerCase()]&&e.toLowerCase())}function e(e,t,i){var n=this;n.hasBeenReset=!1;var r="",o=!1,a=e,s=t,l=i,c=null,u="",d=!0,h="auto",p="start",f=50,g="middle",m=50,v="middle";Object.defineProperty(n,"id",{enumerable:!0,get:function(){return r},set:function(e){r=""+e}}),Object.defineProperty(n,"pauseOnExit",{enumerable:!0,get:function(){return o},set:function(e){o=!!e}}),Object.defineProperty(n,"startTime",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}}),Object.defineProperty(n,"endTime",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}}),Object.defineProperty(n,"text",{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}}),Object.defineProperty(n,"region",{enumerable:!0,get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}}),Object.defineProperty(n,"vertical",{enumerable:!0,get:function(){return u},set:function(e){var t=y(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");u=t,this.hasBeenReset=!0}}),Object.defineProperty(n,"snapToLines",{enumerable:!0,get:function(){return d},set:function(e){d=!!e,this.hasBeenReset=!0}}),Object.defineProperty(n,"line",{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e&&e!==b)throw new SyntaxError("An invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}}),Object.defineProperty(n,"lineAlign",{enumerable:!0,get:function(){return p},set:function(e){var t=w(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}}),Object.defineProperty(n,"position",{enumerable:!0,get:function(){return f},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");f=e,this.hasBeenReset=!0}}),Object.defineProperty(n,"positionAlign",{enumerable:!0,get:function(){return g},set:function(e){var t=w(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}),Object.defineProperty(n,"size",{enumerable:!0,get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}}),Object.defineProperty(n,"align",{enumerable:!0,get:function(){return v},set:function(e){var t=w(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}}),n.displayState=void 0}if(window.VTTCue)return window.VTTCue;var b="auto",t={"":!0,lr:!0,rl:!0},i={start:!0,middle:!0,end:!0,left:!0,right:!0};return e.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},e}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n,r;n=[i(1),i(54),i(106)],void 0===(r=function(o,a,s){var l={sources:[],tracks:[],minDvrWindow:120};return function(e){e=e||{},o.isArray(e.tracks)||delete e.tracks;var t=o.extend({},l,e);o.isObject(t.sources)&&!o.isArray(t.sources)&&(t.sources=[a(t.sources)]),o.isArray(t.sources)&&0!==t.sources.length||(e.levels?t.sources=e.levels:t.sources=[a(e)]);for(var i=0;i<t.sources.length;i++){var n=t.sources[i];if(n){var r=n["default"];n["default"]=!!r&&"true"===r.toString(),t.sources[i].label||(t.sources[i].label=i.toString()),t.sources[i]=a(t.sources[i])}}return t.sources=o.compact(t.sources),o.isArray(t.tracks)||(t.tracks=[]),o.isArray(t.captions)&&(t.tracks=t.tracks.concat(t.captions),delete t.captions),t.tracks=o.compact(o.map(t.tracks,s)),t}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1),i(40)],void 0===(r=function(a,l){function c(e){return/^(?:(?:https?|file)\:)?\/\//.test(e)}function i(e){return a.some(e,function(e){return"parsererror"===e.nodeName})}var e={getAbsolutePath:function(e,t){if(l.exists(t)||(t=document.location.href),l.exists(e)){if(c(e))return e;var i,n=t.substring(0,t.indexOf("://")+3),r=t.substring(n.length,t.indexOf("/",n.length+1));if(0===e.indexOf("/"))i=e.split("/");else{var o=t.split("?")[0];i=(o=o.substring(n.length+r.length+1,o.lastIndexOf("/"))).split("/").concat(e.split("/"))}for(var a=[],s=0;s<i.length;s++)i[s]&&l.exists(i[s])&&"."!==i[s]&&(".."===i[s]?a.pop():a.push(i[s]));return n+r+"/"+a.join("/")}}};return e.getScriptPath=a.memoize(function(e){for(var t=document.getElementsByTagName("script"),i=0;i<t.length;i++){var n=t[i].src;if(n){var r=n.indexOf("/"+e);if(0<=r)return n.substr(0,r+1)}}return""}),e.parseXML=function(e){var t=null;try{"DOMParser"in window?(i((t=(new window.DOMParser).parseFromString(e,"text/xml")).childNodes)||t.childNodes&&i(t.childNodes[0].childNodes))&&(t=null):((t=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(c){}return t},e.serialize=function(e){if(void 0===e)return null;if("string"==typeof e&&e.length<6){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(e))&&!isNaN(parseFloat(e)))return Number(e)}return e},e.parseDimension=function(e){return"string"==typeof e?""===e?0:-1<e.lastIndexOf("%")?e:parseInt(e.replace("px",""),10):e},e.timeFormat=function(e,t){if(e<=0&&!t||a.isNaN(parseInt(e)))return"00:00";var i=e<0?"-":"";e=Math.abs(e);var n=Math.floor(e/3600),r=Math.floor((e-3600*n)/60),o=Math.floor(e%60);return i+(n?n+":":"")+(r<10?"0":"")+r+":"+(o<10?"0":"")+o},e}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(113),i(1)],void 0===(r=function(l,c){return function(){var n={},r={},o={},a={},s=Math.max(1,(new Date).getTime());return{start:function(e){n[e]=s+l.now(),o[e]=o[e]+1||1},end:function(e){if(n[e]){var t=s+l.now()-n[e];delete n[e],r[e]=r[e]+t||t}},dump:function(){var e=c.extend({},r);for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t)){var i=s+l.now()-n[t];e[t]=e[t]+i||i}return{counts:c.extend({},o),sums:e,events:c.extend({},a)}},tick:function(e){a[e]=s+l.now()},between:function(e,t){return a[t]&&a[e]?a[t]-a[e]:null}}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(1)],void 0===(r=function(i){var e={exists:function(e){switch(void 0===e?"undefined":o(e)){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1;default:return!0}},isHTTPS:function(){return 0===window.location.href.indexOf("https")},isRtmp:function(e,t){return 0===e.indexOf("rtmp")||"rtmp"===t},isYouTube:function(e,t){return"youtube"===t||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},youTubeID:function(e){var t=/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e);return t?t.slice(1).join("").replace("?",""):""},typeOf:function(e){if(null===e)return"null";var t=void 0===e?"undefined":o(e);return"object"===t&&i.isArray(e)?"array":t}};return e}.apply(t,n))||(e.exports=r)},,,,function(e,t,i){var n,r;n=[i(27),i(16),i(1),i(111),i(29)],void 0===(r=function(a,s,r,e,o){function l(){return!!window.MediaSource&&!!window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function t(e,t){if(a.isSafari())return!1;if(!s(t)("dash"))return!1;if(e.drm&&!o.anySupported(e.drm))return!1;var i=window.MediaSource;if(!window.HTMLVideoElement||!i)return!1;var n=!0;return e.mediaTypes&&(n=r.all(e.mediaTypes,function(e){return i.isTypeSupported(e)})),n&&("dash"===e.type||"mpd"===e.type||-1<(e.file||"").indexOf("mpd-time-csf"))}var i=r.find(e,r.matches({name:"flash"})),n=i.supports;i.supports=function(e,t){if(!a.isFlashSupported()||e.drm)return!1;var i=e&&e.type;return"hls"!==i&&"m3u8"!==i?n.apply(this,arguments):s(t)("hls")};var c=r.find(e,r.matches({name:"html5"})),u=c.supports;return c.supports=function(e,t){var i=u.apply(this,arguments);if(i&&e.drm&&"hls"===e.type){var n=s(t)("drm");if(n&&e.drm.fairplay){var r=window.WebKitMediaKeys;return r&&r.isTypeSupported&&r.isTypeSupported("com.apple.fps.1_0","video/mp4")}return n}return i},e.push({name:"shaka",supports:t}),e.splice(1,0,{name:"hlsjs",supports:function e(t,i){var n=a.isChrome()||a.isFF()||a.isIE(11)||a.isEdge(),r=a.isAndroid()&&t.hlsjsdefault;if(n&&l()&&(!a.isMobile()||r)&&!t.drm){var o=t&&t.type;if(-1<(t&&t.file).indexOf(".m3u8")||"hls"===o||"m3u8"===o){var e=s(i);return e("hls")}}}}),e}.apply(t,n))||(e.exports=r)},function(e,t,s){var i,n;i=[s(112),s(1),s(44)],void 0===(n=function(e,a){function i(e,t,i){var n=a.indexOf(e,a.findWhere(e,{name:i})),r=a.indexOf(e,a.findWhere(e,{name:t}));if(!(r<n)){var o=e.splice(r,1)[0];e.splice(n,0,o)}}var n,r=e.registerProvider,o=e.prototype.reorderProviders;return a.extend(e.loaders,{shaka:function(t){s.e(3,function(){var e=s(78);r(e),t(e)})},hlsjs:function(t){s.e(2,function(){var e=s(76);e["default"]&&(e=e["default"]),e.setEdition&&e.setEdition(n),r(e),t(e)})}}),a.extend(e.prototype,{reorderProviders:function(e){var t=o.call(this,e);return"flash"!==e?i(t,"hlsjs","flash"):(i(t,"flash","hlsjs"),i(t,"hlsjs","html5")),t},providerSupports:function(e,t){return n=this.config.edition,e.supports(t,n)}}),e}.apply(t,i))||(e.exports=n)},,,,function(e,t,i){var n;void 0===(n=function(e,t,i){function n(e,t){o(t,a(e))}function r(e,t){var i=d[e];if(i)if(t){var n=i[t];if(n)for(var r=0;r<n.parts.length;r+=1)n.parts[r]()}else{for(var o=Object.keys(i),a=0;a<o.length;a+=1)for(var s=i[o[a]],l=0;l<s.parts.length;l+=1)s.parts[l]();delete d[e]}}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=(d[e]||{})[n.id];if(r){for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(c(e,n.parts[o]))}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(c(e,n.parts[o]));d[e]=d[e]||{},d[e][n.id]={id:n.id,parts:a}}}}function a(e){for(var t=[],i={},n=0;n<e.length;n++){var r=e[n],o=r[0],a={css:r[1],media:r[2]};i[o]?i[o].parts.push(a):t.push(i[o]={id:o,parts:[a]})}return t}function s(e){p().appendChild(e)}function l(e){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-jwplayer-id",e),s(t),t}function c(e,t){var i,n,r,o=h[e];o||(o=h[e]={element:l(e),counter:0});var a=o.counter++;return i=o.element,n=u.bind(null,i,a,!1),r=u.bind(null,i,a,!0),n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media)return;n(t=e)}else r()}}function u(e,t,i,n){var r=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,r);else{var o=document.createTextNode(r),a=e.childNodes[t];a?e.replaceChild(o,a):e.appendChild(o)}}var d={},h={},p=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return document.head||document.getElementsByTagName("head")[0]});i.exports={style:n,clear:r};var f,g=(f=[],function(e,t){return f[e]=t,f.filter(Boolean).join("\n")})}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n,r;n=[],void 0===(r=function(){function e(){return t||(t=new Promise(function(t){i.e(1,function(){var e=i(72);t(e)})})),t}var t=null;return{load:e}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(7),i(20),i(104),i(105),i(37)],void 0===(r=function(o,e,a,s,l){function c(e){for(var t={},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i],r=p(n);if(r)switch(r.toLowerCase()){case"enclosure":t.file=o.xmlAttribute(n,"url");break;case"title":t.title=u(n);break;case"guid":t.mediaid=u(n);break;case"pubdate":t.date=u(n);break;case"description":t.description=u(n);break;case"link":t.link=u(n);break;case"category":t.tags?t.tags+=u(n):t.tags=u(n)}}return t=s(e,t),t=a(e,t),new l(t)}var u=e.textContent,d=e.getChildNode,h=e.numChildren,p=e.localName,t={parse:function(e){var t=[];t.feedData={};for(var i=0;i<h(e);i++){var n=d(e,i);if("channel"===p(n).toLowerCase())for(var r=0;r<h(n);r++){var o=d(n,r),a=p(o).toLowerCase();"item"===a?t.push(c(o)):a&&(t.feedData[a]=u(o))}}return t}};return t}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(20),i(51),i(2),i(4),i(3),i(1)],void 0===(r=function(u,d,n,h,e,p){return function(){function t(s){n.tryCatch(function(){var e,t=s.responseXML?s.responseXML.childNodes:null,i="";if(t){for(var n=0;n<t.length&&8===(i=t[n]).nodeType;n++);if("xml"===u.localName(i)&&(i=i.nextSibling),"rss"===u.localName(i)){var r=d.parse(i);e=p.extend({playlist:r},r.feedData)}}if(!e)try{var o=JSON.parse(s.responseText);if(p.isArray(o))e={playlist:o};else{if(!p.isArray(o.playlist))throw Error;e=o}}catch(a){return void l("Not a valid RSS/JSON feed")}c.trigger(h.JWPLAYER_PLAYLIST_LOADED,e)})instanceof n.Error&&l()}function i(e){l("Playlist load error: "+e)}function l(e){c.trigger(h.JWPLAYER_ERROR,{message:e||"Error loading file"})}var c=p.extend(this,e);this.load=function(e){n.ajax(e,t,i)},this.destroy=function(){this.off()}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(37),i(54),i(1),i(45)],void 0===(r=function(t,l,c,o){function a(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=t.choose(n);if(r)return{type:n.type,provider:r.providerToCheck}}return null}function u(e,t){return c.isUndefined(e)?t:e}var e=function(e){return e=c.isArray(e)?e:[e],c.compact(c.map(e,t))};e.filterPlaylist=function(e,t,i){var n=[],r=t.getProviders(),o=t.get("preload"),a=c.extend({},i);return delete a.playlist,c.each(e,function(e){(e=c.extend({},e)).allSources=s(e,t),e.sources=d(e.allSources,r),e.sources.length&&(e.file=e.sources[0].file,o&&(e.preload=e.preload||o),i&&(e.feedData=a),n.push(e))}),n};var s=function(e,t){var i=e.sources,n=t.get("androidhls"),r=e.drm||t.get("drm"),o=e.preload||t.get("preload"),a=u(e.withCredentials,t.get("withCredentials")),s=t.get("hlsjsdefault");return c.compact(c.map(i,function(e){if(!c.isObject(e))return null;null!=n&&(e.androidhls=n),(e.drm||r)&&(e.drm=e.drm||r),(e.preload||o)&&(e.preload=e.preload||o);var t=u(e.withCredentials,a);return c.isUndefined(t)||(e.withCredentials=t),s&&(e.hlsjsdefault=s),l(e)}))},d=function(e,t){t&&t.choose||(t=new o({primary:t?"flash":null}));var i=a(e,t);if(!i)return[];var n=i.provider,r=i.type;return c.filter(e,function(e){return e.type===r&&t.providerSupports(n,e)})};return e}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(2),i(7),i(1)],void 0===(r=function(n,r,o){var a={"default":!1};return function(e){if(e&&e.file){var i=o.extend({},a,e);i.file=r.trim(""+i.file);var t=/^[^\/]+\/(?:x-)?([^\/]+)$/;if(t.test(i.type)&&(i.mimeType=i.type,i.type=i.type.replace(t,"$1")),n.isYouTube(i.file)?i.type="youtube":n.isRtmp(i.file)?i.type="rtmp":i.type||(i.type=r.extension(i.file)),i.type){switch(i.type){case"m3u8":case"vnd.apple.mpegurl":i.type="hls";break;case"dash+xml":i.type="dash";break;case"smil":i.type="rtmp";break;case"m4a":i.type="aac"}return o.each(i,function(e,t){""===e&&delete i[t]}),i}}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r,v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(2),i(26),i(4),i(3),i(15),i(1)],void 0===(r=function(e,d,h,p,f,g){var m={FLASH:0,JAVASCRIPT:1,HYBRID:2};return function(t){function i(){switch(d.getPluginPathType(t)){case d.pluginPathType.ABSOLUTE:return t;case d.pluginPathType.RELATIVE:return e.getAbsolutePath(t,window.location.href)}}function n(){g.defer(function(){u=f.loaderstatus.COMPLETE,c.trigger(h.COMPLETE)})}function r(){u=f.loaderstatus.ERROR,c.trigger(h.ERROR,{url:t})}var o,a,s,l,c=g.extend(this,p),u=f.loaderstatus.NEW;this.load=function(){if(u===f.loaderstatus.NEW){if(0<t.lastIndexOf(".swf"))return o=t,u=f.loaderstatus.COMPLETE,void c.trigger(h.COMPLETE);if(d.getPluginPathType(t)===d.pluginPathType.CDN
)return u=f.loaderstatus.COMPLETE,void c.trigger(h.COMPLETE);u=f.loaderstatus.LOADING;var e=new f(i());e.on(h.COMPLETE,n),e.on(h.ERROR,r),e.load()}},this.registerPlugin=function(e,t,i,n){l&&(clearTimeout(l),l=void 0),s=t,i&&n?(o=n,a=i):"string"==typeof i?o=i:"function"==typeof i?a=i:i||n||(o=e),u=f.loaderstatus.COMPLETE,c.trigger(h.COMPLETE)},this.getStatus=function(){return u},this.getPluginName=function(){return d.getPluginName(t)},this.getFlashPath=function(){if(o)switch(d.getPluginPathType(o)){case d.pluginPathType.ABSOLUTE:return o;case d.pluginPathType.RELATIVE:return 0<t.lastIndexOf(".swf")?e.getAbsolutePath(o,window.location.href):e.getAbsolutePath(o,i())}return null},this.getJS=function(){return a},this.getTarget=function(){return s},this.getPluginmode=function(){return void 0!==(void 0===o?"undefined":v(o))&&void 0!==(void 0===a?"undefined":v(a))?m.HYBRID:void 0!==(void 0===o?"undefined":v(o))?m.FLASH:void 0!==(void 0===a?"undefined":v(a))?m.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,i){return new a(e,t,i)},this.getURL=function(){return t}}}.apply(t,n))||(e.exports=r)},,,,,function(e,t,i){var n,r;n=[i(27)],void 0===(r=function(i){return function(e){if("hls"===e.type){if(!1===e.androidhls&&i.isAndroid())return!1;var t=i.isAndroidNative;if(t(2)||t(3)||t("4.0"))return!1;if(i.isAndroid()&&!i.isFF())return!0}return null}}.apply(t,n))||(e.exports=r)},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]="hidden"in document?function(){return!document.hidden}:"webkitHidden"in document?function(){return!document.webkitHidden}:function(){return!0}},function(e,t,i){var n,r;n=[i(1),i(38)],void 0===(r=function(l,o){function c(e){e.onload=null,e.onprogress=null,e.onreadystatechange=null,e.onerror=null,"abort"in e&&e.abort()}function u(n,r){return function(e){var t=e.currentTarget||r.xhr;if(clearTimeout(r.timeoutId),r.retryWithoutCredentials&&r.xhr.withCredentials){c(t);var i=l.extend({},r,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1});m(i)}else r.onerror(n,r.url,t)}}function d(n){return function(e){var t=e.currentTarget||n.xhr;if(4===t.readyState){var i;if(clearTimeout(n.timeoutId),400<=t.status)return i=404===t.status?"File not found":t.status+"("+t.statusText+")",n.onerror(i,n.url,t);if(200===t.status)return h(n)(e)}}}function h(r){return function(e){var t=e.currentTarget||r.xhr;if(clearTimeout(r.timeoutId),r.responseType){if("json"===r.responseType)return a(t,r)}else{var i,n=t.responseXML;if(n)try{i=n.firstChild}catch(p){}if(n&&i)return s(t,n,r);if(f&&t.responseText&&!n&&((n=o.parseXML(t.responseText))&&n.firstChild))return s(t,n,r);if(r.requireValidXML)return void r.onerror("Invalid XML",r.url,t)}r.oncomplete(t)}}function a(e,t){if(!e.response||l.isString(e.response)&&'"'!==e.responseText.substr(1))try{e=l.extend({},e,{response:JSON.parse(e.responseText)})}catch(u){return void t.onerror("Invalid JSON",t.url,e)}return t.oncomplete(e)}function s(e,t,i){var n=t.documentElement;return i.requireValidXML&&("parsererror"===n.nodeName||n.getElementsByTagName("parsererror").length)?void i.onerror("Invalid XML",i.url,e):(e.responseXML||(e=l.extend({},e,{responseXML:t})),i.oncomplete(e))}var p=function(){},f=!1,g=function(e){var t=document.createElement("a"),i=document.createElement("a");t.href=location.href;try{return i.href=e,i.href=i.href,t.protocol+"//"+t.host!=i.protocol+"//"+i.host}catch(u){}return!0},m=function(e,t,i,n){l.isObject(e)&&(e=(n=e).url);var r,o=l.extend({xhr:null,url:e,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:t||p,onerror:i||p,mimeType:n&&!n.responseType?"text/xml":"",requireValidXML:!1,responseType:n&&n.plainText?"text":""},n);if("XDomainRequest"in window&&g(e))(r=o.xhr=new window.XDomainRequest).onload=h(o),r.ontimeout=r.onprogress=p,f=!0;else{if(!("XMLHttpRequest"in window))return void o.onerror("",e);(r=o.xhr=new window.XMLHttpRequest).onreadystatechange=d(o)}var a=u("Error loading file",o);r.onerror=a,"overrideMimeType"in r?o.mimeType&&r.overrideMimeType(o.mimeType):f=!0;try{e=e.replace(/#.*$/,""),r.open("GET",e,!0)}catch(s){return a(s),r}if(o.responseType)try{r.responseType=o.responseType}catch(s){}o.timeout&&(o.timeoutId=setTimeout(function(){c(r),o.onerror("Timeout",e,r)},o.timeout),r.onabort=function(){clearTimeout(o.timeoutId)});try{o.withCredentials&&"withCredentials"in r&&(r.withCredentials=!0),r.send()}catch(s){a(s)}return r};return{ajax:m,crossdomain:g}}.apply(t,n))||(e.exports=r)},,function(e,t,i){var n,r,v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(2),i(3),i(1)],void 0===(r=function(u,d,h){function p(e,t,i){var n=document.createElement("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function f(e,t,i){Object.defineProperty(e,t,{get:function(){return i}})}function e(e,t,i,n){var o,a=!0;if(n=n||"opaque",u.isMSIE()){var r=document.createElement("div");t.appendChild(r),r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+i+'" name="'+i+'" tabindex="0"><param name="movie" value="'+e+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="wmode" value="'+n+'"><param name="bgcolor" value="'+m+'"><param name="menu" value="false"></object>';for(var s=t.getElementsByTagName("object"),l=s.length;l--;)s[l].id===i&&(o=s[l])}else(o=document.createElement("object")).setAttribute("type","application/x-shockwave-flash"),o.setAttribute("data",e),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("bgcolor",m),o.setAttribute("id",i),o.setAttribute("name",i),p(o,"allowfullscreen","true"),p(o,"allowscriptaccess","always"),p(o,"wmode",n),p(o,"menu","false"),t.appendChild(o,t);o.className="jw-swf jw-reset",o.style.display="block",o.style.position="absolute",o.style.left=0,o.style.right=0,o.style.top=0,o.style.bottom=0,u.isIE()&&"PointerEvent"in window&&(o.style.pointerEvents="none");var c=-1;return f(o,"on",d.on),f(o,"once",d.once),f(o,"_eventQueue",[]),f(o,"off",function(){var e=Array.prototype.slice.call(arguments);return e.length||(o._eventQueue.length=0,clearTimeout(c)),d.off.apply(o,e)}),f(o,"trigger",function(e,t){var n=o._eventQueue;n.push({type:e,json:t}),-1<c||(c=setTimeout(function(){var e=n.length;for(c=-1;e--;){var t=n.shift();if(t.json){var i=JSON.parse(decodeURIComponent(t.json));d.trigger.call(o,t.type,i)}else d.trigger.call(o,t.type)}}))}),f(o,"_events",{}),f(o,"triggerFlash",function(i){if("setupCommandQueue"===i&&(a=!1),"setup"!==i&&a||!o.__externalCall){for(var e=o.__commandQueue,t=e.length;t--;)e[t][0]===i&&e.splice(t,1);return e.push(Array.prototype.slice.call(arguments)),o}var n=Array.prototype.slice.call(arguments,1),r=u.tryCatch(function(){if(n.length){for(var e=n.length;e--;)"object"===v(n[e])&&h.each(n[e],g);var t=JSON.stringify(n);o.__externalCall(i,t)}else o.__externalCall(i)});return r instanceof u.Error&&(console.error(i,r),"setup"===i)?(r.name="Failed to setup flash",r):o}),f(o,"__commandQueue",[]),o}function t(e){e&&e.parentNode&&(e.style.display="none",e.parentNode.removeChild(e),e=null)}function g(e,t,i){e instanceof window.HTMLElement&&delete i[t]}var m="#000000";return{embed:e,remove:t}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(22),i(1),i(40),i(38),i(28)],void 0===(r=function(i,e,n,t,o){var r={};return r.repo=e.memoize(function(){var e=o.split("+")[0],t=i.repo+e+"/";return n.isHTTPS()?t.replace(/^http:/,"https:"):t}),r.versionCheck=function(e){var t=("0"+e).split(/\W/),i=o.split(/\W/),n=parseFloat(t[0]),r=parseFloat(i[0]);return!(r<n||n===r&&parseFloat("0"+t[1])>parseFloat(i[1]))},r.loadFrom=function(){return r.repo()},r}.apply(t,n))||(e.exports=r)},function(e,t,i){"use strict";function n(e,t,i){if(!e)return"";var n=e.bitrate||e.bandwidth;return o(t,n)||e.label||r(e.height,n,i)}function r(e,t,i){if(!e&&!t)return"";var n=s(t)+" kbps",r=n;return e&&(r=e+"p",t&&i&&(r+=" ("+n+")")),r}function o(e,t){var i=null,n=c.keys(e);if(t&&e&&n.length){var r=parseFloat(t);isNaN(r)||(i=e[a(n,s(r))])}return i}function a(e,t){var i=null,n=1/0,r=void 0;return c.isArray(e)&&c.forEach(e,function(e){(r=Math.abs(e-t))<n&&(i=e,n=r)}),i}function s(e){return Math.floor(e/1e3)}function l(e){return!!c.isArray(e)&&c.some(e,function(e){var t=e.height||e.bitrate||e.bandwidth,i=this[t];return this[t]=1,i},{})}Object.defineProperty(t,"__esModule",{value:!0});var c=i(1);t.generateLabel=n,t.createLabel=r,t.getCustomLabel=o,t.findClosestBandwidth=a,t.toKbps=s,t.hasRedundantLevels=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestAnimationFrame=window.requestAnimationFrame||function(e){return setTimeout(e,17)},t.cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout},function(e,t){var i,n;i=[],void 0===(n=function(){return document.createElement("video")}.apply(t,i))||(e.exports=n)},,,,,function(e,t,i){var n,r;n=[i(90),i(21),i(1)],void 0===(r=function(e,n,t){var i=e.selectPlayer,r=function(){var e=i.apply(this,arguments);return e||{registerPlugin:function(e,t,i){"jwpsrv"!==e&&n.registerPlugin(e,t,i)}}};return t.extend(e,{selectPlayer:r})}.apply(t,n))||(e.exports=r)},,,,,function(e,t,i){var n,r;n=[i(2),i(80),i(16)],void 0===(r=function(l,c,u){var d="invalid",h="RnXcsftYjWRDA^Uy";return function(e){function t(e){l.exists(e)||(e="");try{var t=(e=c.decrypt(e,h)).split("/");"pro"===(o=t[0])&&(o="premium");var i=u(o);if(2<t.length&&i("setup")){a=t[1];var n=parseInt(t[2]);0<n&&(s=new Date).setTime(n)}else o=d}catch(r){o=d}}var o,a,s;this.edition=function(){return s&&s.getTime()<(new Date).getTime()?d:o},this.token=function(){return a},this.expiration=function(){return s},t(e)}}.apply(t,n))||(e.exports=r)},function(e,t){var i,n;i=[],void 0===(n=function(){var p=function(e){return window.atob(e)},f=function(e){return unescape(encodeURIComponent(e))},g=function(e){try{return decodeURIComponent(escape(e))}catch(f){return e}},m=function(e){for(var t=new Array(Math.ceil(e.length/4)),i=0;i<t.length;i++)t[i]=e.charCodeAt(4*i)+(e.charCodeAt(4*i+1)<<8)+(e.charCodeAt(4*i+2)<<16)+(e.charCodeAt(4*i+3)<<24);return t},v=function(e){for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=String.fromCharCode(255&e[i],e[i]>>>8&255,e[i]>>>16&255,e[i]>>>24&255);return t.join("")};return{decrypt:function(e,t){if(e=String(e),t=String(t),0==e.length)return"";for(var i,n,r=m(p(e)),o=m(f(t).slice(0,16)),a=r.length,s=r[a-1],l=r[0],c=2654435769,u=Math.floor(6+52/a)*c;0!=u;){n=u>>>2&3;for(var d=a-1;0<=d;d--)i=((s=r[0<d?d-1:a-1])>>>5^l<<2)+(l>>>3^s<<4)^(u^l)+(o[3&d^n]^s),l=r[d]-=i;u-=c}var h=v(r);return h=h.replace(/\0+$/,""),g(h)}}}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r;n=[i(2),i(152),i(4),i(174),i(1)],void 0===(r=function(o,a,s,l,c){return function(e,t){var i=new a(e,t),n=i.setup;i.setup=function(){n.call(this),t.on("change:skipButton",this.onSkipButton,this),t.change("castAvailable",this.onCastAvailable,this),t.change("castActive",this.onCastActive,this)};var r=i.addControls;return i.addControls=function(e){r.call(this,e);var t=this.controlsContainer();t&&this._skipButton&&t.appendChild(this._skipButton.element())},i.addSkipButton=function(){this._skipButton=new l(this.instreamModel),this._skipButton.on(s.JWPLAYER_AD_SKIPPED,function(){this.api.skipAd()},this);var e=this.controlsContainer();e&&e.appendChild(this._skipButton.element())},i.onSkipButton=function(e,t){t?this.addSkipButton():this._skipButton&&(this._skipButton.destroy(),this._skipButton=null)},i.onCastActive=function(e,t){t=t||!1;var i=e.get("airplayActive")||!1;o.toggleClass(this.getContainer(),"jw-flag-casting",t),o.toggleClass(this.getContainer(),"jw-flag-airplay-casting",i)},i.onCastAvailable=function(e,t){var i=e.get("cast");c.isObject(i)&&o.toggleClass(this.getContainer(),"jw-flag-cast-available",t)},i}}.apply(t,n))||(e.exports=r)},function(e){e.exports=function(){var a=[];return a.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},a.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(i[r]=!0)}for(n=0;n<e.length;n++){var o=e[n];"number"==typeof o[0]&&i[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),a.push(o))}},a}},,,function(e,t,i){var n,r;n=[i(21),i(1)],void 0===(r=function(n,r){return function(t,i){var e=["skipAd","stop","resize","addButton","removeButton","registerPlugin","attachMedia","next"];r.each(e,function(e){t[e]=function(){return i[e].apply(i,arguments),t}}),t.registerPlugin=n.registerPlugin}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1)],void 0===(r=function(o){return function(i,n){var e=["buffer","controls","position","duration","fullscreen","volume","item","stretching","playbackRate","playlist","captions","viewable"];o.each(e,function(e){var t=e.slice(0,1).toUpperCase()+e.slice(1);i["get"+t]=function(){return n._model.get(e)}});var t=["getAudioTracks","getCaptionsList","getWidth","getHeight","getCurrentAudioTrack","setCurrentAudioTrack","getCurrentCaptions","setCurrentCaptions","getCurrentQuality","setCurrentQuality","getQualityLevels","getVisualQuality","getConfig","getState","getSafeRegion","isBeforeComplete","isBeforePlay","getProvider","detachMedia"],r=["setConfig","setControls","setFullscreen","setVolume","setMute","setPlaybackRate","setCues","setCaptions"];o.each(t,function(e){i[e]=function(){return n[e]?n[e].apply(n,arguments):null}}),o.each(r,function(e){i[e]=function(){return n[e].apply(n,arguments),i}}),i.getPlaylistIndex=i.getItem}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(4),i(5),i(3),i(2),i(39),i(1),i(160),i(85),i(86),i(88),i(28)],void 0===(r=function(s,l,c,u,d,h,p,f,g,m,v){return function(e,t){var n,r=this;h.extend(this,c),this.utils=u,this._=h,this.Events=c,this.version=v,this.trigger=function(e,t){(t=h.isObject(t)?h.extend({},t):{}).type=e;var i=window.jwplayer;return i&&i.debug?c.trigger.call(r,e,t):c.triggerSafe.call(r,e,t)},this.dispatchEvent=this.trigger,this.removeEventListener=this.off.bind(this);var i=function(){n=new p(e),f(r,n),g(r,n),n.on(s.JWPLAYER_MEDIA_META,function(e){var t=n._model.get("itemMeta");h.extend(t,e.metadata)}),n.on(s.JWPLAYER_READY,function(e){o.tick("ready"),e.setupTime=o.between("setup","ready")}),n.on("all",r.trigger)};i(),m(this),this.id=e.id;var o=this._qoe=new d;o.tick("init");var a=function(){r.off(),n&&n.off(),n&&n.playerDestroy&&n.playerDestroy()};return this.getPlugin=function(e){return r.plugins&&r.plugins[e]},this.addPlugin=function(e,t){this.plugins=this.plugins||{},this.plugins[e]=t,this.onReady(t.addToPlayer),t.resize&&this.onResize(t.resizeHandler)},this.setup=function(e){return o.tick("setup"),a(),i(),u.foreach(e.events,function(e,t){var i=r[e];"function"==typeof i&&i.call(r,t)}),e.id=r.id,n.setup(e,this),r},this.qoe=function(){var e=n.getItemQoe();return{setupTime:o.between("setup","ready"),firstFrame:e.getFirstFrame(),player:o.dump(),item:e.dump()}},this.getContainer=function(){return n.getContainer?n.getContainer():e},this.getMeta=this.getItemMeta=function(){return n._model.get("itemMeta")||{}},this.getPlaylistItem=function(e){if(!u.exists(e))return n._model.get("playlistItem");var t=r.getPlaylist();return t?t[e]:null},this.getRenderingMode=function(){return"html5"},this.getMute=function(){return n._model.getMute()},this.load=function(e,t){return n.load(e,t),r},this.play=function(e,t){if(h.isObject(e)&&e.reason&&(t=e),t||(t={reason:"external"}),!0===e)return n.play(t),r;if(!1===e)return n.pause(t),r;switch(e=r.getState()){case l.PLAYING:case l.BUFFERING:n.pause(t);break;default:n.play(t)}return r},this.pause=function(e,t){return h.isBoolean(e)?this.play(!e,t):this.play(t)},this.seek=function(e,t){var i=1<arguments.length&&void 0!==t?t:{reason:"external"};return n.seek(e,i),r},this.playlistNext=function(e){var t=0<arguments.length&&void 0!==e?e:{reason:"external"};return n.playlistNext(t),r},this.playlistPrev=function(e){var t=0<arguments.length&&void 0!==e?e:{reason:"external"};return n.playlistPrev(t),r},this.playlistItem=function(e,t){var i=1<arguments.length&&void 0!==t?t:{reason:"external"};return n.playlistItem(e,i),r},this.createInstream=function(){return n.createInstream()},this.castToggle=function(){n&&n.castToggle&&n.castToggle()},this.playAd=this.pauseAd=u.noop,this.remove=function(){return t(r),r.trigger("remove"),a(),r},this}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1),i(4)],void 0===(r=function(n,r){return function(i){var e={onBufferChange:r.JWPLAYER_MEDIA_BUFFER,onBufferFull:r.JWPLAYER_MEDIA_BUFFER_FULL,onError:r.JWPLAYER_ERROR,onSetupError:r.JWPLAYER_SETUP_ERROR,onFullscreen:r.JWPLAYER_FULLSCREEN,onMeta:r.JWPLAYER_MEDIA_META,onMute:r.JWPLAYER_MEDIA_MUTE,onPlaylist:r.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:r.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:r.JWPLAYER_PLAYLIST_COMPLETE,onReady:r.JWPLAYER_READY,onResize:r.JWPLAYER_RESIZE,onComplete:r.JWPLAYER_MEDIA_COMPLETE,onSeek:r.JWPLAYER_MEDIA_SEEK,onTime:r.JWPLAYER_MEDIA_TIME,onVolume:r.JWPLAYER_MEDIA_VOLUME,onBeforePlay:r.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:r.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:r.JWPLAYER_DISPLAY_CLICK,onControls:r.JWPLAYER_CONTROLS,onQualityLevels:r.JWPLAYER_MEDIA_LEVELS,onQualityChange:r.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:r.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:r.JWPLAYER_CAPTIONS_CHANGED,onAdError:r.JWPLAYER_AD_ERROR,onAdClick:r.JWPLAYER_AD_CLICK,onAdImpression:r.JWPLAYER_AD_IMPRESSION,onAdTime:r.JWPLAYER_AD_TIME,onAdComplete:r.JWPLAYER_AD_COMPLETE,onAdCompanions:r.JWPLAYER_AD_COMPANIONS,onAdSkipped:r.JWPLAYER_AD_SKIPPED,onAdPlay:r.JWPLAYER_AD_PLAY,onAdPause:r.JWPLAYER_AD_PAUSE,onAdMeta:r.JWPLAYER_AD_META,onCast:r.JWPLAYER_CAST_SESSION,onAudioTrackChange:r.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:r.JWPLAYER_AUDIO_TRACKS},t={onBuffer:"buffer",onPause:"pause",onPlay:"play",onIdle:"idle"};n.each(t,function(e,t){i[t]=n.partial(i.on,e,n)}),n.each(e,function(e,t){i[t]=n.partial(i.on,e,n)})}}.apply(t,n))||(e.exports=r)},function(e,t,m){var i,n;i=[m(2),m(1)],void 0===(n=function(u,d){function h(i){d.each(i,function(e,t){i[t]=u.serialize(e)})}function p(e){return e.slice&&"px"===e.slice(-2)&&(e=e.slice(0,-2)),e}function f(e,t){if(-1===t.toString().indexOf("%"))return 0;if("string"!=typeof e||!u.exists(e))return 0;if(/^\d*\.?\d+%$/.test(e))return e;var i=e.indexOf(":");if(-1===i)return 0;var n=parseFloat(e.substr(0,i)),r=parseFloat(e.substr(i+1));return n<=0||r<=0?0:r/n*100+"%"}var g={autostart:!1,controls:!0,displaytitle:!0,displaydescription:!0,mobilecontrols:!1,defaultPlaybackRate:1,playbackRateControls:!1,repeat:!1,castAvailable:!1,skin:"seven",stretching:"uniform",mute:!1,volume:90,width:480,height:270,audioMode:!1,localization:{player:"Video Player",play:"Play",playback:"Start playback",pause:"Pause",volume:"Volume",prev:"Previous",next:"Next",cast:"Chromecast",airplay:"Airplay",fullscreen:"Fullscreen",playlist:"Playlist",hd:"Quality",cc:"Closed captions",audioTracks:"Audio tracks",playbackRates:"Playback rates",replay:"Replay",buffer:"Loading",more:"More",liveBroadcast:"Live broadcast",loadingAd:"Loading ad",rewind:"Rewind 10s",nextUp:"Next Up",nextUpClose:"Next Up Close",related:"Discover",close:"Close"},renderCaptionsNatively:!0,nextUpDisplay:!0};return function(e,t){var i=t&&t.getAllItems(),n=d.extend({},(window.jwplayer||{}).defaults,i,e);h(n),n.localization=d.extend({},g.localization,n.localization);var r=d.extend({},g,n);"."===r.base&&(r.base=u.getScriptPath("jwplayer.js")),r.base=(r.base||u.loadFrom()).replace(/\/?$/,"/"),m.p=r.base,r.width=p(r.width),r.height=p(r.height);var o=u.getScriptPath("jwplayer.js")||r.base;r.flashplayer=r.flashplayer||o+"jwplayer.flash.swf",r.flashloader=r.flashloader||o+"jwplayer.loader.swf","http:"===window.location.protocol&&(r.flashplayer=r.flashplayer.replace("https","http"),r.flashloader=r.flashloader.replace("https","http")),r.aspectratio=f(r.aspectratio,r.width),d.isObject(r.skin)&&(r.skinUrl=r.skin.url,r.skinColorInactive=r.skin.inactive,r.skinColorActive=r.skin.active,r.skinColorBackground=r.skin.background,r.skin=d.isString(r.skin.name)?r.skin.name:g.skin),d.isString(r.skin)&&0<r.skin.indexOf(".xml")&&(console.warn("JW Player does not support XML skins, please update your config"),r.skin=r.skin.replace(".xml",""));var a=r.playbackRateControls;if(a){var s=[.5,1,1.25,1.5,2];d.isArray(a)&&((s=a.filter(function(e){return d.isNumber(e)&&.25<=e&&e<=4}).map(function(e){return Math.round(4*e)/4})).indexOf(1)<0&&s.push(1),s.sort()),r.playbackRateControls=s}(!r.playbackRateControls||r.playbackRateControls.indexOf(r.defaultPlaybackRate)<0)&&(r.defaultPlaybackRate=1),r.playbackRate=r.defaultPlaybackRate,r.aspectratio||delete r.aspectratio;var l=r.playlist;if(l)d.isArray(l.playlist)&&(r.feedData=l,r.playlist=l.playlist);else{var c=d.pick(r,["title","description","type","mediaid","image","file","sources","tracks","preload"]);r.playlist=[c]}return r.qualityLabels=r.qualityLabels||r.hlslabels,r}}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r;n=[i(87),i(1),i(45),i(44),i(21)],void 0===(r=function(n,e,t,i,r){var o=[],a=0,s=function(e){var t,i;return e?"string"==typeof e?(t=l(e))||(i=document.getElementById(e)):"number"==typeof e?t=o[e]:e.nodeType&&(t=l((i=e).id)):t=o[0],t||(i?c(new n(i,u)):{registerPlugin:r.registerPlugin})},l=function(e){for(var t=0;t<o.length;t++)if(o[t].id===e)return o[t];return null},c=function(e){return a++,e.uniqueId=a,o.push(e),e},u=function(e){for(var t=o.length;t--;)if(o[t].uniqueId===e.uniqueId){o.splice(t,1);break}},d={selectPlayer:s,registerProvider:t.registerProvider,availableProviders:i,registerPlugin:r.registerPlugin};return s.api=d}.apply(t,n))||(e.exports=r)},function(e,t,i){"use strict";function o(e,t,i){e.setAutoStart(i),"idle"===e.get("state")&&!0===i&&t.play({reason:"autostart"})}Object.defineProperty(t,"__esModule",{value:!0});var a=i(1),s=["repeat","volume","mute","autostart"];t["default"]=function(i,n){var r=i._model;a.size(n)&&s.forEach(function(e){var t=n[e];if(!a.isUndefined(t))switch(e){case"mute":i.setMute(t);break;case"volume":i.setVolume(t);break;case"autostart":o(r,i,t);break;default:r.set(e,t)}})}},function(e,t,i){var n,r;n=[i(161),i(3),i(1),i(4)],void 0===(r=function(f,e,g,m){var t=function(i,n,r,o){function e(){u("Setup Timeout Error","Setup took longer than "+t+" seconds to complete.")}function a(){for(var e in p)if(Object.prototype.hasOwnProperty.call(p,e)){var t=p[e];!t.complete&&!t.running&&i&&l(t.depends)&&(t.running=!0,s(t))}}function s(t){var e=function(e){c(t,e=e||{})};t.method(e,n,i,r,o)}function l(e){return g.all(e,function(e){return p[e].complete})}function c(e,t){"error"===t.type?u(t.msg,t.reason):"complete"===t.type?(clearTimeout(d),h.trigger(m.JWPLAYER_READY)):(e.complete=!0,a())}function u(e,t){clearTimeout(d),h.trigger(m.JWPLAYER_SETUP_ERROR,{message:e+": "+t}),h.destroy()}var d,h=this,p=f.getQueue(),t=30;this.start=function(){d=setTimeout(e,1e3*t),a()},this.destroy=function(){clearTimeout(d),this.off(),p.length=0,r=n=i=null}};return t.prototype=e,t}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(2),i(13),i(12)],void 0===(r=function(g,m,v){return function(a){function e(e){if(e.tracks.length){for(var t=e.tracks||[],i=0;i<t.length;i++)d(t[i]);o=Object.keys(f).map(function(e){return f[e]});var n=h();p(),this.setCaptionsList(n)}}function s(){o=[],f={},n=0}function t(e){s(a,e);var t,i,n=e.tracks,r=n&&n.length;if(!a.get("renderCaptionsNatively")&&r)for(t=0;t<r;t++)l((i=n[t]).kind)&&!f[i._id]&&(d(i),m.loadFile(i,c.bind(null,i),u));var o=h();p(),this.setCaptionsList(o)}function l(e){return"subtitles"===e||"captions"===e}function c(e,t){e.data=t}function u(e){g.log("CAPTIONS("+e+")")}function i(e,t){var i=null;0!==t&&(i=o[t-1]),e.set("captionsTrack",i)}function d(e){if(e.data=e.data||[],e.name=e.label||e.name||e.language,e._id=v.createId(e,o.length),!e.name){var t=v.createLabel(e,n);e.name=t.label,n=t.unknownCount}f[e._id]=e,o.push(e)}function h(){for(var e=[{id:"off",label:"Off"}],t=0;t<o.length;t++)e.push({id:o[t]._id,label:o[t].name||"Unknown CC"});return e}function p(){var e=0,t=a.get("captionLabel");if("Off"!==t){for(var i=0;i<o.length;i++){var n=o[i];if(t&&t===n.name){e=i+1;break}n["default"]||n.defaulttrack||"default"===n._id?e=i+1:n.autoselect}r(e)}else a.set("captionsIndex",0)}function r(e){o.length?a.setVideoSubtitleTrack(e,o):a.set("captionsIndex",e)}a.on("change:playlistItem",s,this),a.on("change:captionsIndex",i,this),a.on("itemReady",t,this),a.mediaController.on("subtitlesTracks",e,this);var o=[],f={},n=0;this.getCurrentIndex=function(){return a.get("captionsIndex")},this.getCaptionsList=function(){return a.get("captionsList")},this.setCaptionsList=function(e){a.set("captionsList",e)}}}.apply(t,n))||(e.exports=r)},function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,o,ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we=n(i(91));r=[i(89),i(96),i(1),i(92),i(93),i(33),i(101),i(53),i(52),i(2),i(81),i(3),i(34),i(5),i(4),i(141),i(95)],void 0===(o=function(ie,ne,re,oe,ae,t,se,le,ce,ue,de,he,pe,fe,ge,a,me){function e(t){return function(){var e=Array.prototype.slice.call(arguments,0);this._model.getVideo()?this["_"+t].apply(this,e):this.eventsQueue.push([t,e])}}function ve(e){return e===fe.LOADING||e===fe.STALLED?fe.BUFFERING:e}var i=function(e){this.originalContainer=this.currentContainer=e,this.eventsQueue=[],re.extend(this,he),this._model=new t};return i.prototype={play:e("play"),pause:e("pause"),seek:e("seek"),stop:e("stop"),load:e("load"),playlistNext:e("next"),playlistPrev:e("prev"),playlistItem:e("item"),setCurrentCaptions:e("setCurrentCaptions"),setCurrentQuality:e("setCurrentQuality"),setFullscreen:e("setFullscreen"),setPlaybackRate:e("setPlaybackRate"),setup:function(e,r){function t(e,t){K.triggerAfterReady(e,t)}function i(e,t){K.trigger(ge.JWPLAYER_CONTROLS,{controls:t})}function n(){U=null,W.on("all",t,K);var e=r.getPlugin("related");e&&e.on("nextUp",function(e){J.set("nextUp",e)}),W.once(ge.JWPLAYER_RESIZE,o),W.init()}function o(){J.change("visibility",a),J.on("change:controls",i),K.trigger(ge.JWPLAYER_READY,{setupTime:0}),K.triggerAfterReady=K.trigger;for(var e=0;e<te.length;e++){var t=te[e];G=t.type===ge.JWPLAYER_MEDIA_BEFOREPLAY,K.trigger(t.type,t.args),G=!1}s(),J.change("viewable",l)}function a(e,t){re.isUndefined(t)||J.set("viewable",Math.round(t))}function s(){ue.isMobile()||!0!==J.get("autostart")||v()}function l(e,t){K.trigger("viewable",{viewable:t}),c(e,t)}function c(e,t){J.get("playOnViewable")&&(t?v():ue.isMobile()&&K.pause({reason:"autostart"}))}function u(e){var t=J.getProviders(),i=t.required(e,J.get("primary"));return t.load(i).then(function(){K.getProvider()||(J.setProvider(J.get("playlistItem")),d())})}function d(){for(;0<K.eventsQueue.length;){var e=K.eventsQueue.shift(),t=e[0],i=e[1]||[];K["_"+t].apply(K,i)}}function h(e,t){switch(J.get("state")===fe.ERROR&&J.set("state",fe.IDLE),J.set("preInstreamState","instream-idle"),K.trigger("destroyPlugin",{}),y(!0),J.once("itemReady",s),void 0===e?"undefined":ye(e)){case"string":p(e);break;case"object":k(e,t)&&j(0);break;case"number":j(e)}}function p(e){var t=new ce;t.on(ge.JWPLAYER_PLAYLIST_LOADED,function(e){h(e.playlist,e)}),t.on(ge.JWPLAYER_ERROR,function(e){e.message="Error loading playlist: "+e.message,this.triggerError(e)},this),t.load(e)}function f(){return K._instreamAdapter&&K._instreamAdapter.getState()}function g(){var e=f();return re.isString(e)?e:J.get("state")}function m(e){var t=0<arguments.length&&void 0!==e?e:{};if(J.set("playReason",t.reason),J.get("state")!==fe.ERROR){var i,n=f();if(re.isString(n))return void r.pauseAd(!1);if(J.get("state")===fe.COMPLETE&&(y(!0),j(0)),!G&&(G=!0,K.triggerAfterReady(ge.JWPLAYER_MEDIA_BEFOREPLAY,{playReason:J.get("playReason")}),G=!1,Y))return Y=!1,void(V=null);if(b()){if(0===J.get("playlist").length)return;i=ue.tryCatch(function(){J.loadVideo()})}else J.get("state")===fe.PAUSED&&(i=ue.tryCatch(function(){J.playVideo()}));i instanceof ue.Error&&(K.triggerError(i),V=null)}}function v(){var e=J.get("state");e!==fe.IDLE&&e!==fe.PAUSED||m({reason:"autostart"})}function y(e){J.off("itemReady",s);var t=!e;V=null;var i=ue.tryCatch(function(){J.stopVideo()},K);return i instanceof ue.Error?(K.triggerError(i),!1):(t&&(X=!0),G&&(Y=!0),!0)}function w(e){var t=0<arguments.length&&void 0!==e?e:{};V=null,J.set("pauseReason",t.reason),"interaction"!==t.reason&&"external"!==t.reason||J.set("playOnViewable",!1);var i=f();if(re.isString(i))r.pauseAd(!0);else switch(J.get("state")){case fe.ERROR:return;case fe.PLAYING:case fe.BUFFERING:var n=ue.tryCatch(function(){Q().pause()},this);if(n instanceof ue.Error)return void K.triggerError(n);break;default:G&&(Y=!0)}}function b(){var e=J.get("state");return e===fe.IDLE||e===fe.COMPLETE||e===fe.ERROR}function _(e,t){J.get("state")!==fe.ERROR&&(J.get("scrubbing")||J.get("state")===fe.PLAYING||m(t),Q().seek(e))}function x(e,t){y(!0),J.get("state")===fe.ERROR&&J.set("state",fe.IDLE),j(e),m(t)}function k(e,t){J.set("feedData",t);var i=le(e);return i=le.filterPlaylist(i,J,t),J.set("playlist",i),re.isArray(i)&&0!==i.length?(u(i),!0):(K.triggerError({message:"Error loading playlist: No playable sources found"}),!1)}function j(e){J.setItemIndex(e)}function T(e){x(J.get("item")-1,e)}function E(e){x(J.get("item")+1,e)}function C(){if(b())return X?void(X=!1):(V=C,J.get("item")===J.get("playlist").length-1?void(J.get("repeat")?E({reason:"repeat"}):(ue.isIOS()&&z(!1),J.set("playOnViewable",!1),J.set("state",fe.COMPLETE),K.trigger(ge.JWPLAYER_PLAYLIST_COMPLETE,{}))):void E({reason:"playlist"}))}function S(e){Q()&&(e=parseInt(e,10)||0,Q().setCurrentQuality(e))}function P(){return Q()?Q().getCurrentQuality():-1}function A(){return this._model?this._model.getConfiguration():void 0}function R(){if(this._model.mediaModel)return this._model.mediaModel.get("visualQuality");var e=L();if(e){var t=P(),i=e[t];if(i)return{level:re.extend({index:t},i),mode:"",reason:""}}return null}function L(){return Q()?Q().getQualityLevels():null}function I(e){Q()&&(e=parseInt(e,10)||0,Q().setCurrentAudioTrack(e))}function O(){return Q()?Q().getCurrentAudioTrack():-1}function M(){return Q()?Q().getAudioTracks():null}function D(e){e=parseInt(e,10)||0,J.persistVideoSubtitleTrack(e),K.trigger(ge.JWPLAYER_CAPTIONS_CHANGED,{tracks:B(),track:e})}function N(){return q.getCurrentIndex()}function B(){return q.getCaptionsList()}function $(){return J.detachMedia()}function F(){var e=ue.tryCatch(function(){J.attachMedia()});return e instanceof ue.Error?void ue.log("Error calling _attachMedia",e):void("function"==typeof V&&V())}function z(e){re.isBoolean(e)||(e=!J.get("fullscreen")),J.set("fullscreen",e),this._instreamAdapter&&this._instreamAdapter._adModel&&this._instreamAdapter._adModel.set("fullscreen",e)}function H(){var e=r.getPlugin("related");if(e){var t=J.get("nextUp");t&&K.trigger("nextClick",{mode:t.mode,ui:"nextup",target:t,itemsShown:[t],feedData:t.feedData}),e.next()}}var W,q,U,V,Y,J=this._model,G=!1,X=!1,K=this,Q=function(){return J.getVideo()},Z=new se;Z.track(J);var ee=new ie(e,Z),te=[];J.setup(ee,Z),W=this._view=new de(r,J),(U=new oe(r,J,W,k)).on(ge.JWPLAYER_READY,n,this),U.on(ge.JWPLAYER_SETUP_ERROR,this.setupError,this),J.mediaController.on("all",t,this),J.mediaController.on(ge.JWPLAYER_MEDIA_COMPLETE,function(){re.defer(C)}),J.mediaController.on(ge.JWPLAYER_MEDIA_ERROR,this.triggerError,this),J.on("change:flashBlocked",function(e,t){if(t){var i=!!e.get("flashThrottle"),n={message:i?"Click to run Flash":"Flash plugin failed to load"};i||this.trigger(ge.JWPLAYER_ERROR,n),this._model.set("errorEvent",n)}else this._model.set("errorEvent",void 0)},this),J.on("change:state",pe,this),J.on("change:duration",function(e,t){var i=e.get("minDvrWindow"),n=ue.streamType(t,i);e.setStreamType(n)}),J.on("change:castState",function(e,t){K.trigger(ge.JWPLAYER_CAST_SESSION,t)}),J.on("change:fullscreen",function(e,t){K.trigger(ge.JWPLAYER_FULLSCREEN,{fullscreen:t}),t&&e.set("playOnViewable",!1)}),J.on("itemReady",function(){K.triggerAfterReady(ge.JWPLAYER_PLAYLIST_ITEM,{index:J.get("item"),item:J.get("playlistItem")})}),J.on("change:playlist",function(e,t){if(t.length){var i={playlist:t},n=J.get("feedData");if(n){var r=re.extend({},n);delete r.playlist,i.feedData=r}K.triggerAfterReady(ge.JWPLAYER_PLAYLIST_LOADED,i)}}),J.on("change:volume",function(e,t){K.trigger(ge.JWPLAYER_MEDIA_VOLUME,{volume:t})}),J.on("change:mute",function(e,t){
K.trigger(ge.JWPLAYER_MEDIA_MUTE,{mute:t})}),J.on("change:playbackRate",function(e,t){K.trigger(ge.JWPLAYER_PLAYBACK_RATE_CHANGED,{playbackRate:t,position:e.get("position")})}),J.on("change:scrubbing",function(e,t){t?w():m({reason:"interaction"})}),J.on("change:captionsList",function(e,t){K.triggerAfterReady(ge.JWPLAYER_CAPTIONS_LIST,{tracks:t,track:J.get("captionsIndex")||0})}),J.on("change:mediaModel",function(i){i.mediaModel.on("change:state",function(e,t){i.set("state",ve(t))})}),q=new ae(J),J.on("change:viewSetup",function(e,t){if(t){var i=this.currentContainer.querySelector("video, audio");if(K.showView(W.element()),i)J.get("mediaContainer").appendChild(i)}},this),this.triggerAfterReady=function(e,t){te.push({type:e,args:t})},this._play=m,this._pause=w,this._seek=_,this._stop=y,this._load=h,this._next=E,this._prev=T,this._item=x,this._setCurrentCaptions=D,this._setCurrentQuality=S,this._setFullscreen=z,this.detachMedia=$,this.attachMedia=F,this.getCurrentQuality=P,this.getQualityLevels=L,this.setCurrentAudioTrack=I,this.getCurrentAudioTrack=O,this.getAudioTracks=M,this.getCurrentCaptions=N,this.getCaptionsList=B,this.getVisualQuality=R,this.getConfig=A,this.getState=g,this.setVolume=J.setVolume.bind(J),this.setMute=J.setMute.bind(J),this.setPlaybackRate=J.setPlaybackRate.bind(J),this.getProvider=function(){return J.get("provider")},this.getWidth=function(){return J.get("containerWidth")},this.getHeight=function(){return J.get("containerHeight")},this.getContainer=function(){return this.currentContainer},this.resize=W.resize,this.getSafeRegion=W.getSafeRegion,this.setCues=W.addCues,this.setCaptions=W.setCaptions,this.next=H,this.setConfig=function(e){return(0,we["default"])(K,e)},this.addButton=function(e,t,i,n,r){var o={img:e,tooltip:t,callback:i,id:n,btnClass:r},a=!1,s=re.map(J.get("dock"),function(e){return e!==o&&e.id===o.id?(a=!0,o):e});a||s.push(o),J.set("dock",s)},this.removeButton=function(e){var t=J.get("dock")||[];t=re.reject(t,re.matches({id:e})),J.set("dock",t)},this.checkBeforePlay=function(){return G},this.getItemQoe=function(){return J._qoeItem},this.setControls=function(e){re.isBoolean(e)||(e=!J.get("controls")),J.set("controls",e);var t=J.getVideo();t&&t.setControls(e)},this.playerDestroy=function(){this.stop(),this.showView(this.originalContainer),W&&W.destroy(),J&&J.destroy(),U&&(U.destroy(),U=null)},this.isBeforePlay=this.checkBeforePlay,this.isBeforeComplete=function(){return J.checkComplete()},this.createInstream=function(){return this.instreamDestroy(),this._instreamAdapter=new ne(this,J,W),this._instreamAdapter},this.skipAd=function(){this._instreamAdapter&&this._instreamAdapter.skipAd()},this.instreamDestroy=function(){K._instreamAdapter&&K._instreamAdapter.destroy()},this.trigger=function(e,t){var i=me(J,e,t);return he.trigger.call(this,e,i)},U.start()},showView:function(e){if(!document.body.contains(this.currentContainer)){var t=document.getElementById(this._model.get("id"));t&&(this.currentContainer=t)}this.currentContainer.parentElement&&this.currentContainer.parentElement.replaceChild(e,this.currentContainer),this.currentContainer=e},triggerError:function(e){this._model.set("errorEvent",e),this._model.set("state",fe.ERROR),this._model.once("change:state",function(){this._model.set("errorEvent",void 0)},this),this.trigger(ge.JWPLAYER_ERROR,e)},setupError:function(e){var t=e.message,i=ue.createElement(a(this._model.get("id"),this._model.get("skin"),t)),n=this._model.get("width"),r=this._model.get("height");ue.style(i,{width:0<n.toString().indexOf("%")?n:n+"px",height:0<r.toString().indexOf("%")?r:r+"px"}),this.showView(i);var o=this;re.defer(function(){o.trigger(ge.JWPLAYER_SETUP_ERROR,{message:t})})}},i}.apply(t,r))||(e.exports=o)},function(e,t,i){var n,r;n=[i(1),i(4)],void 0===(r=function(o,a){return function(e,t,i){var n=i;switch(t){case a.JWPLAYER_MEDIA_TIME:case"beforePlay":case"pause":case"play":case"ready":var r=e.get("viewable");o.isUndefined(r)||(n=o.extend({},i,{viewable:r}))}return n}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(98),i(97),i(4),i(5),i(2),i(3),i(1)],void 0===(r=function(n,b,_,x,k,e,j){function T(e){var t="",i=e.get("provider");return i&&(t=i.name),0<=t.indexOf("flash")?b:n}var E={skipoffset:null,tag:null},t=function(i,a,n){function r(){g._adModel.set("state","buffering"),a.set("skipButton",!1);var e,t=c[++m];u&&(e=u[m]),y.loadItem(t,e)}function o(e,t){"complete"!==e&&(t=t||{},v.tag&&!t.tag&&(t.tag=v.tag),this.trigger(e,t),"mediaError"!==e&&"error"!==e||c&&m+1<c.length&&r())}function s(e){g._adModel.set("duration",e.duration),g._adModel.set("position",e.position)}function l(e){var t={};v.tag&&(t.tag=v.tag),this.trigger(_.JWPLAYER_MEDIA_COMPLETE,t),w.call(this,e)}var c,u,d,h,p,f=T(a),g=new f(i,a),m=0,v={},y=this,e=j.bind(function(e){(e=e||{}).hasControls=!!a.get("controls"),this.trigger(_.JWPLAYER_INSTREAM_CLICK,e),g&&g._adModel&&(g._adModel.get("state")===x.PAUSED?e.hasControls&&g.instreamPlay():g.instreamPause())},this),t=j.bind(function(){g&&g._adModel&&g._adModel.get("state")===x.PAUSED&&a.get("controls")&&(i.setFullscreen(),i.play())},this);this.type="instream",this.init=function(e){d=a.getVideo(),h=a.get("position"),p=a.get("playlist")[a.get("item")],d.setPlaybackRate(1),g.on("all",o,this),g.on(_.JWPLAYER_MEDIA_TIME,s,this),g.on(_.JWPLAYER_MEDIA_COMPLETE,l,this),g.init(),i.detachMedia(),a.mediaModel.set("state",x.BUFFERING),i.checkBeforePlay()||0===h&&!a.checkComplete()?(h=0,a.set("preInstreamState","instream-preroll")):d&&a.checkComplete()||a.get("state")===x.COMPLETE?a.set("preInstreamState","instream-postroll"):a.set("preInstreamState","instream-midroll");var t=a.get("state");return e||t!==x.PLAYING&&t!==x.BUFFERING||d.pause(),n.setupInstream(g._adModel),g._adModel.set("state",x.BUFFERING),n.clickHandler()&&n.clickHandler().setAlternateClickHandlers(k.noop,null),this.setText(a.get("localization").loadingAd),this};var w=function(e){c&&m+1<c.length?r():(this.trigger("adBreakEnd",{}),e.type===_.JWPLAYER_MEDIA_COMPLETE&&this.trigger(_.JWPLAYER_PLAYLIST_COMPLETE,{}),this.destroy())};this.loadItem=function(t,i){if(k.isAndroid(2.3))this.trigger({type:_.JWPLAYER_ERROR,message:"Error loading instream: Cannot play instream on Android 2.3"});else{var e=t;j.isArray(t)?(u=i,t=(c=t)[m],u&&(i=u[m])):e=[t];var n=a.getProviders(),r=f===b?"flash":void 0,o=n.required(e,r);a.set("hideAdsControls",!1),n.load(o).then(function(){if(null!==g){y.trigger(_.JWPLAYER_PLAYLIST_ITEM,{index:m,item:t}),v=j.extend({},E,i),g.load(t),y.addClickHandler();var e=t.skipoffset||v.skipoffset;e&&y.setupSkipButton(e,v)}})}},this.setupSkipButton=function(e,t,i){a.set("skipButton",!1),i&&(w=i),g._adModel.set("skipMessage",t.skipMessage),g._adModel.set("skipText",t.skipText),g._adModel.set("skipOffset",e),a.set("skipButton",!0)},this.applyProviderListeners=function(e){g.applyProviderListeners(e),this.addClickHandler()},this.play=function(){g.instreamPlay()},this.pause=function(){g.instreamPause()},this.addClickHandler=function(){n.clickHandler()&&n.clickHandler().setAlternateClickHandlers(e,t),g.on(_.JWPLAYER_MEDIA_META,this.metaHandler,this)},this.skipAd=function(e){var t=_.JWPLAYER_AD_SKIPPED;this.trigger(t,e),w.call(this,{type:t})},this.metaHandler=function(e){e.width&&e.height&&n.resizeMedia()},this.destroy=function(){if(this.off(),a.set("skipButton",!1),g)switch(n.clickHandler()&&n.clickHandler().revertAlternateClickHandlers(),a.off(null,null,g),g.off(null,null,y),g.instreamDestroy(),n.destroyInstream(),g=null,i.attachMedia(),a.get("preInstreamState")){case"instream-preroll":case"instream-midroll":var e=j.extend({},p);e.starttime=h,a.loadVideo(e),k.isMobile()&&a.mediaModel.get("state")===x.BUFFERING&&d.setState(x.BUFFERING),d.play();break;case"instream-postroll":case"instream-idle":d.stop()}},this.getState=function(){return!(!g||!g._adModel)&&g._adModel.get("state")},this.setText=function(e){n.setAltText(e||"")},this.hide=function(){a.set("hideAdsControls",!0)}};return j.extend(t.prototype,e),t}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(3),i(33),i(34),i(4),i(5),i(2),i(1)],void 0===(r=function(e,n,r,t,o,a,i){var s=function(e,t){this.model=t,this._adModel=(new n).setup({id:t.get("id"),volume:t.get("volume"),fullscreen:t.get("fullscreen"),mute:t.get("mute")}),this._adModel.on("change:state",r,this);var i=e.getContainer();this.swf=i.querySelector("object")};return s.prototype=i.extend({init:function(){if(a.isChrome()){var i=-1,n=!1;this.swf.on("throttle",function(e){if(clearTimeout(i),"resume"===e.state)n&&(n=!1,this.instreamPlay());else{var t=this;i=setTimeout(function(){t._adModel.get("state")===o.PLAYING&&(n=!0,t.instreamPause())},250)}},this)}this.swf.on("instream:state",this.stateHandler,this).on("instream:time",function(e){this._adModel.set("position",e.position),this._adModel.set("duration",e.duration),this.trigger(t.JWPLAYER_MEDIA_TIME,e)},this).on("instream:complete",function(e){this.trigger(t.JWPLAYER_MEDIA_COMPLETE,e)},this).on("instream:error",function(e){this.trigger(t.JWPLAYER_MEDIA_ERROR,e)},this),this.swf.triggerFlash("instream:init"),this.applyProviderListeners=function(i){i&&(this.model.on("change:volume",function(e,t){i.volume(t)},this),this.model.on("change:mute",function(e,t){i.mute(t)},this),i.volume(this.model.get("volume")),i.mute(this.model.get("mute")),i.off(),i.on(t.JWPLAYER_PLAYER_STATE,this.stateHandler,this),i.on(t.JWPLAYER_MEDIA_TIME,function(e){this.trigger(t.JWPLAYER_MEDIA_TIME,e)},this))}},stateHandler:function(e){switch(e.newstate){case o.PLAYING:case o.PAUSED:this._adModel.set("state",e.newstate)}},instreamDestroy:function(){this._adModel&&(this.off(),this.swf.off(null,null,this),this.swf.triggerFlash("instream:destroy"),this.swf=null,this._adModel.off(),this._adModel=null,this.model=null)},load:function(e){this.swf.triggerFlash("instream:load",e)},instreamPlay:function(){this.swf.triggerFlash("instream:play")},instreamPause:function(){this.swf.triggerFlash("instream:pause")}},e),s}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1),i(3),i(34),i(4),i(5),i(33)],void 0===(r=function(c,u,d,h,p,f){return function(e,n){function t(e){var t=e||a.getVideo();if(s!==t){if(!(s=t))return;var i="vpaid"===t.type;t.off(),t.on("all",function(e,t){i&&e===h.JWPLAYER_MEDIA_COMPLETE||this.trigger(e,c.extend({},t,{type:e}))},l),t.on(h.JWPLAYER_MEDIA_BUFFER_FULL,o),t.on(h.JWPLAYER_PLAYER_STATE,r),t.attachMedia(),t.volume(n.get("volume")),t.mute(n.get("mute")||n.get("autostartMuted")),a.on("change:state",d,l)}}function r(e){switch(e.newstate){case p.PLAYING:case p.PAUSED:a.set("state",e.newstate)}}function i(e){n.trigger(e.type,e),l.trigger(h.JWPLAYER_FULLSCREEN,{fullscreen:e.jwstate})}function o(){a.getVideo().play()}var a,s,l=c.extend(this,u);return e.on(h.JWPLAYER_FULLSCREEN,function(e){this.trigger(h.JWPLAYER_FULLSCREEN,e)},l),this.init=function(){(a=(new f).setup({id:n.get("id"),volume:n.get("volume"),fullscreen:n.get("fullscreen"),mute:n.get("mute")||n.get("autostartMuted"),instreamMode:!0})).on("fullscreenchange",i),this._adModel=a},l.load=function(e){a.set("item",0),a.set("playlistItem",e),a.setActiveItem(e),t(),a.off(h.JWPLAYER_ERROR),a.on(h.JWPLAYER_ERROR,function(e){this.trigger(h.JWPLAYER_ERROR,e)},l),a.loadVideo(e)},l.applyProviderListeners=function(e){t(e),e&&(e.off(h.JWPLAYER_ERROR),e.on(h.JWPLAYER_ERROR,function(e){this.trigger(h.JWPLAYER_ERROR,e)},l),n.on("change:volume",function(e,t){s.volume(t)},l),n.on("change:mute",function(e,t){s.mute(t)},l),n.on("change:autostartMuted",function(e,t){t||s.mute(n.get("mute"))},l))},this.instreamDestroy=function(){a&&(a.off(),this.off(),s&&(s.detachMedia(),s.off(),a.getVideo()&&s.destroy()),a=null,e.off(null,null,this),e=null)},l.instreamPlay=function(){a.getVideo()&&a.getVideo().play(!0)},l.instreamPause=function(){a.getVideo()&&a.getVideo().pause(!0)},l}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(39),i(1)],void 0===(r=function(i,e){function n(e){e.mediaController.off(a,e._onPlayAttempt),e.mediaController.off(s,e._triggerFirstFrame),e.mediaController.off(c,e._onTime),e.off("change:activeTab",e._onTabVisible)}function r(i){i._onTabVisible&&n(i),i._triggerFirstFrame=e.once(function(){var e=i._qoeItem;e.tick(l);var t=e.getFirstFrame();i.mediaController.trigger(l,{loadTime:t}),n(i)}),i._onTime=h(i._triggerFirstFrame),i._onPlayAttempt=function(){i._qoeItem.tick(a)},i._onTabVisible=function(e,t){t?i._qoeItem.tick(d):i._qoeItem.tick(u)},i.on("change:activeTab",i._onTabVisible),i.mediaController.on(a,i._onPlayAttempt),i.mediaController.once(s,i._triggerFirstFrame),i.mediaController.on(c,i._onTime)}function t(e){function t(n,e,t){n._qoeItem&&t&&n._qoeItem.end(t.get("state")),n._qoeItem=new i,n._qoeItem.getFirstFrame=function(){var e=this.between(a,l),t=this.between(d,l);return 0<t&&t<e?t:e},n._qoeItem.tick(o),n._qoeItem.start(e.get("state")),r(n),e.on("change:state",function(e,t,i){n._qoeItem.end(i),n._qoeItem.start(t)})}e.on("change:mediaModel",t)}var o="playlistItem",a="playAttempt",s="providerFirstFrame",l="firstFrame",c="time",u="tabHidden",d="tabVisible",h=function(i){var n=0;return function(e){var t=e.position;n<t&&i(),n=t}};return{model:t}}.apply(t,n))||(e.exports=r)},function(e,t,R){var i,n;i=[R(21),R(52),R(15),R(65),R(22),R(1),R(2),R(4),R(50)],void 0===(n=function(i,n,o,p,a,s,f,l,r){function e(){return{LOAD_PROMISE_POLYFILL:{method:c,depends:[]},LOAD_BASE64_POLYFILL:{method:u,depends:[]},LOAD_PLUGINS:{method:h,depends:["LOAD_PROMISE_POLYFILL"]},LOAD_XO_POLYFILL:{method:d,depends:[]},LOAD_SKIN:{method:k,depends:[]},LOAD_PLAYLIST:{method:v,depends:[]},LOAD_CONTROLS:{method:C,depends:["LOAD_PROMISE_POLYFILL"]},SETUP_VIEW:{method:j,depends:["LOAD_SKIN","LOAD_XO_POLYFILL","LOAD_PROMISE_POLYFILL"]},INIT_PLUGINS:{method:g,depends:["LOAD_PLUGINS","SETUP_VIEW"]},CHECK_FLASH:{method:y,depends:["SETUP_VIEW"]},FILTER_PLAYLIST:{method:w,depends:["LOAD_PLAYLIST","CHECK_FLASH"]},SET_ITEM:{method:T,depends:["INIT_PLUGINS","FILTER_PLAYLIST"]},DEFERRED:{method:t,depends:[]},SEND_READY:{method:E,depends:["LOAD_CONTROLS","SET_ITEM","DEFERRED"]}}}function t(e){setTimeout(e,0)}function c(e){window.Promise?e():R.e(11,function(){R(57),e()})}function u(e){window.btoa&&window.atob?e():R.e(12,function(){R(56),e()})}function d(e){"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?e():R.e(7,function(){R(83),e()})}function h(e,t){window.jwplayerPluginJsonp=i.registerPlugin,(P=i.loadPlugins(t.get("id"),t.get("plugins"))).on(l.COMPLETE,e),P.on(l.ERROR,s.partial(m,e)),P.load()}function g(e,t,i){delete window.jwplayerPluginJsonp,P.setupPlugins(i,t),e()}function m(e,t){S(e,"Could not load plugin",t.message)}function v(t,i){var e=i.get("playlist");s.isString(e)?((A=new n).on(l.JWPLAYER_PLAYLIST_LOADED,function(e){i.attributes.feedData=e,i.attributes.playlist=e.playlist,t()}),A.on(l.JWPLAYER_ERROR,s.partial(b,t)),A.load(e)):t()}function y(e,t,i,n){var r="flash"===t.get("primary"),o=f.flashVersion();if(r&&o){var a,s=function(){-1!==a&&(clearTimeout(a),a=-1,setTimeout(function(){p.remove(u.querySelector("#"+d)),e()},0))},l=function(){t.set("primary",void 0),t.updateProviders(),s()},c=n.element(),u=c.querySelector(".jw-media");c.parentElement||l();var d=t.get("id")+"-"+Math.random().toString(16).substr(2),h=t.get("flashloader");Object.defineProperty(p.embed(h,u,d,null),"embedCallback",{get:function(){return s}}),a=setTimeout(l,3e3)}else e()}function w(e,t,i,n,r){r(t.get("playlist"),t.get("feedData"))?e():b(e)}function b(e,t){t&&t.message?S(e,"Error loading playlist",t.message):S(e,"Error loading player","No playable sources found")}function _(e,t){var i;return s.contains(a.SkinsLoadable,e)&&(i=t+"skins/"+e+".css"),i}function x(e){for(var t=document.styleSheets,i=0,n=t.length;i<n;i++)if(t[i].href===e)return!0;return!1}function k(e,t){var i=t.get("skin"),n=t.get("skinUrl");if(s.contains(a.SkinsIncluded,i))e();else{if(n||(n=_(i,t.get("base"))),s.isString(n)&&!x(n)){t.set("skin-loading",!0);var r=new o(n,!0);r.addEventListener(l.COMPLETE,function(){t.set("skin-loading",!1)}),r.addEventListener(l.ERROR,function(){t.set("skin","seven"),t.set("skin-loading",!1)}),r.load()}e()}}function j(e,t,i,n){t.setAutoStart(),n.setup(),e()}function T(e,t){t.once("itemReady",e),t.setItemIndex(t.get("item"))}function E(e){e({type:"complete"})}function C(t,e,i,n){return e.get("controls")?void r.load().then(function(e){n.setControlsModule(e),t()})["catch"](function(e){S(t,"Failed to load controls",e)}):void t()}function S(e,t,i){e({type:"error",msg:t,reason:i})}var P,A;return{getQueue:e,error:S}}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r;n=[i(1),i(2)],void 0===(r=function(t,n){function r(e){return"jwplayer."+e}function o(){return t.reduce(this.persistItems,function(e,t){var i=l[r(t)];return i&&(e[t]=n.serialize(i)),e},{})}function a(e,t){try{l[r(e)]=t}catch(o){var i=window.jwplayer;i&&i.debug&&console.error(o)}}function e(){t.each(this.persistItems,function(e){l.removeItem(r(e))})}function i(){this.persistItems=["volume","mute","captionLabel","qualityLabel"]}function s(e){t.each(this.persistItems,function(i){e.on("change:"+i,function(e,t){a(i,t)})})}var l={removeItem:n.noop};try{l=window.localStorage}catch(c){}return t.extend(i.prototype,{getAllItems:o,track:s,clear:e}),i}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(74),i(2)],void 0===(r=function(e,t){return i.p=t.loadFrom(),e.selectPlayer}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(7)],void 0===(r=function(v){function y(e){e||w()}function w(){throw new Error("Invalid DFXP file")}var b=v.seconds;return function(e){y(e);var t=[],i=e.getElementsByTagName("p"),n=30,r=e.getElementsByTagName("tt");if(r&&r[0]){var o=parseFloat(r[0].getAttribute("ttp:frameRate"));isNaN(o)||(n=o)}y(i),i.length||((i=e.getElementsByTagName("tt:p")).length||(i=e.getElementsByTagName("tts:p")));for(var a=0;a<i.length;a++){for(var s=i[a],l=s.getElementsByTagName("br"),c=0;c<l.length;c++){var u=l[c];u.parentNode.replaceChild(e.createTextNode("\r\n"),u)}var d=s.innerHTML||s.textContent||s.text||"",h=v.trim(d).replace(/>\s+</g,"><").replace(/(<\/?)tts?:/g,"$1").replace(/<br.*?\/>/g,"\r\n");if(h){var p=s.getAttribute("begin"),f=s.getAttribute("dur"),g=s.getAttribute("end"),m={begin:b(p,n),text:h};g?m.end=b(g,n):f&&(m.end=m.begin+b(f,n)),t.push(m)}}return t.length||w(),t}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(20),i(7),i(2)],void 0===(r=function(h,p,f){var g="jwplayer";return function(e,t){for(var i=[],n=[],r=p.xmlAttribute,o="default",a="label",s="file",l="type",c=0;c<e.childNodes.length;c++){var u=e.childNodes[c];if(u.prefix===g){var d=h.localName(u);"source"===d?(delete t.sources,i.push({file:r(u,s),"default":r(u,o),label:r(u,a),type:r(u,l)})):"track"===d?(delete t.tracks,n.push({file:r(u,s),"default":r(u,o),kind:r(u,"kind"),label:r(u,a)})):(t[d]=f.serialize(h.textContent(u)),"file"===d&&t.sources&&delete t.sources)}t[s]||(t[s]=t.link)}if(i.length)for(t.sources=[],c=0;c<i.length;c++)0<i[c].file.length&&(i[c][o]="true"===i[c][o],i[c].label.length||delete i[c].label,t.sources.push(i[c]));if(n.length)for(t.tracks=[],c=0;c<n.length;c++)0<n[c].file.length&&(n[c][o]="true"===n[c][o],n[c].kind=n[c].kind.length?n[c].kind:"captions",n[c].label.length||delete n[c].label,t.tracks.push(n[c]));return t}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(20),i(7),i(2)],void 0===(r=function(e,t,u){function d(e){for(var t=[],i=0;i<g(e);i++){var n=e.childNodes[i];"jwplayer"===n.prefix&&"mediatypes"===p(n).toLowerCase()&&t.push(f(n))}return t}var h=t.xmlAttribute,p=e.localName,f=e.textContent,g=e.numChildren,m="media";return function v(e,t){function i(e){var t={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};return t[e]?t[e]:e}var n,r,o="tracks",a=[];for(r=0;r<g(e);r++)if((n=e.childNodes[r]).prefix===m){if(!p(n))continue;switch(p(n).toLowerCase()){case"content":if(h(n,"duration")&&(t.duration=u.seconds(h(n,"duration"))),h(n,"url")){t.sources||(t.sources=[]);var s={file:h(n,"url"),type:h(n,"type"),width:h(n,"width"),label:h(n,"label")},l=d(n);l.length&&(s.mediaTypes=l),t.sources.push(s)}0<g(n)&&(t=v(n,t));break;case"title":t.title=f(n);break;case"description":t.description=f(n);break;case"guid":t.mediaid=f(n);break;case"thumbnail":t.image||(t.image=h(n,"url"));break;case"group":v(n,t);break;case"subtitle":var c={};c.file=h(n,"url"),c.kind="captions",0<h(n,"lang").length&&(c.label=i(h(n,"lang"))),a.push(c)}}for(t.hasOwnProperty(o)||(t[o]=[]),r=0;r<a.length;r++)t[o].push(a[r]);return t}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1)],void 0===(r=function(t){var i={kind:"captions","default":!1};return function(e){if(e&&e.file)return t.extend({},i,e)}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(26),i(2),i(4),i(3),i(1),i(15)],void 0===(r=function(h,p,f,s,g,m){function v(t,i,n){return function(){var e=t.getContainer().getElementsByClassName("jw-overlays")[0];e&&(n.left=e.style.left,n.top=e.style.top,e.appendChild(n),i.displayArea=e)}}function y(t){function e(){var e=t.displayArea;e&&t.resize(e.clientWidth,e.clientHeight)}return function(){e(),setTimeout(e,400)}}return function(n,t){function e(){a||(a=!0,i=m.loaderstatus.COMPLETE,c.trigger(f.COMPLETE))}function r(){if(!d&&(t&&0!==g.keys(t).length||e(),!a)){var s=n.getPlugins();l=g.after(u,e),g.each(t,function(e,t){var i=h.getPluginName(t),n=s[i],r=n.getJS(),o=n.getTarget(),a=n.getStatus();a!==m.loaderstatus.LOADING&&a!==m.loaderstatus.NEW&&(r&&!p.versionCheck(o)&&c.trigger(f.ERROR,{message:"Incompatible player version"}),l())})}}function o(e){if(!d){var t="File not found";e.url&&p.log(t,e.url),this.off(),this.trigger(f.ERROR,{message:t}),r()}}var l,c=g.extend(this,s),i=m.loaderstatus.NEW,a=!1,u=g.size(t),d=!1;this.setupPlugins=function(l,e){var c=[],u=n.getPlugins(),d=e.get("plugins");g.each(d,function(e,t){var r=h.getPluginName(t),o=u[r],i=o.getFlashPath(),a=o.getJS(),s=o.getURL();if(i){var n=g.extend({name:r,swf:i,pluginmode:o.getPluginmode()},e);c.push(n)}p.tryCatch(function(){if(a){var e=d[s];if(!e)return void p.log("JW Plugin already loaded",r,s);var t=document.createElement("div");t.id=l.id+"_"+r,t.className="jw-plugin jw-reset";var i=g.extend({},e),n=o.getNewInstance(l,i,t);n.addToPlayer=v(l,n,t),n.resizeHandler=y(n),l.addPlugin(r,n,t)}})instanceof p.Error&&p.log("ERROR: Failed to load "+r+".")}),e.set("flashPlugins",c)},this.load=function(){if(p.exists(t)&&"object"!==p.typeOf(t))r();else{i=m.loaderstatus.LOADING,g.each(t,function(e,t){if(p.exists(t)){var i=n.addPlugin(t);i.on(f.COMPLETE,r),i.on(f.ERROR,o)}});var e=n.getPlugins();g.each(e,function(e){e.load()}),r()}},this.destroy=function(){d=!0,this.off()},this.getStatus=function(){return i}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(26),i(55)],void 0===(r=function(n,r){return function(i){this.addPlugin=function(e){var t=n.getPluginName(e);return i[t]||(i[t]=new r(e)),i[t]},this.getPlugins=function(){return i}}}.apply(t,n))||(e.exports=r)},,function(e,t){var i,n;i=[],void 0===(n=function(){return{}}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r;n=[i(60),i(2),i(1),i(69)],void 0===(r=function(o,a,s,l){return[{name:"youtube",supports:function(e){return a.isYouTube(e.file,e.type)}},{name:"html5",supports:function(e){var t={aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"},i=e.file,n=e.type,r=o(e);return null!==r?r:!a.isRtmp(i,n)&&(!!t[n]&&(!!l.canPlayType&&!!l.canPlayType(t[n])))}},{name:"flash",supports:function(e){var t={flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",mpeg:"sound",smil:"rtmp"},i=s.keys(t);if(!a.isFlashSupported())return!1;var n=e.file,r=e.type;return!!a.isRtmp(n,r)||s.contains(i,r)}}]}.apply(t,n))||(e.exports=r)},function(e,t,c){var i,n;i=[c(10),c(44),c(110),c(1),c(114)],void 0===(n=function(i,o,r,s,n){function a(e){this.config=e||{},this.providers=this.reorderProviders(this.config.primary)}a.loaders={html5:function(t){c.e(5,function(){var e=c(77);l(e),t(e)})},flash:function(t){c.e(6,function(){var e=c(59);l(e),t(e)})},youtube:function(t){c.e(9,function(){var e=c(61);l(e),t(e)})}};var l=a.registerProvider=function(e){var t=e.getName().name;if(!r[t]){if(!s.find(o,s.matches({name:t}))){if(!s.isFunction(e.supports))throw new Error("Tried to register a provider with an invalid object");o.unshift({name:t,supports:e.supports})}n(e.prototype,i),r[t]=e}};return s.extend(a.prototype,{load:function(e){return Promise.all(s.map(e,function(i){return new Promise(function(e){var t=a.loaders[i.name];t?t(e):e()})}))},reorderProviders:function(e){var t=s.clone(o);if("flash"===e){var i=s.indexOf(t,s.findWhere(t,{name:"flash"})),n=t.splice(i,1)[0],r=s.indexOf(t,s.findWhere(t,{name:"html5"}));t.splice(r,0,n)}return t},providerSupports:function(e,t){return e.supports(t)},required:function(o,e){var a=this,t=this.reorderProviders(e);return o=o.slice(),s.compact(s.map(t,function(e){for(var t=!1,i=o.length;i--;){var n=o[i],r=a.providerSupports(e,n.sources[0]);r&&o.splice(i,1),t=t||r}if(t)return e}))},choose:function(e){e=s.isObject(e)?e:{};for(var t=this.providers.length,i=0;i<t;i++){var n=this.providers[i];if(this.providerSupports(n,e))return{priority:t-i-1,name:n.name,type:e.type,providerToCheck:n,provider:r[n.name]}}return null}}),a}.apply(t,i))||(e.exports=n)},function(e,t){var i,n;i=[],void 0===(n=function(){var e=window.performance,t=!(!e||!e.now),n=1e4,r=function(){return t?e.now():(new Date).getTime()},i=function(){var e=r(),t=e,i=function(){var e=r()-t;n<e?e=n:e<0&&(e=0),t+=e};setInterval(i,1e3),Object.defineProperty(this,"currentTime",{get:function(){return i(),t-e}})};return i.prototype.now=function(){return this.currentTime},new i}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r;n=[i(1)],void 0===(r=function(e){return function(i){return e.each(Array.prototype.slice.call(arguments,1),function(e){if(e)for(var t in e)t in i||(i[t]=e[t])}),i}}.apply(t,n))||(e.exports=r)},function(e,t){var i,n;i=[],void 0===(n=function(){return{hasClass:function(e,t){var i=" "+t+" ";return 1===e.nodeType&&0<=(" "+e.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(i)}}}.apply(t,i))||(e.exports=n)},,function(e,t,i){var n,r;n=[i(1),i(3)],void 0===(r=function(e,t){return e.extend({get:function(e){return this.attributes=this.attributes||{},this.attributes[e]},set:function(e,t){if(this.attributes=this.attributes||{},this.attributes[e]!==t){var i=this.attributes[e];this.attributes[e]=t,this.trigger("change:"+e,this,t,i)}},clone:function(){return e.clone(this.attributes)},change:function(e,n,r){var o=this;return e.split(" ").forEach(function(e){var t="change:"+e,i=o.get(e);o.on(t,n,r),n.call(r,o,i,i)}),this}},t)}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1)],void 0===(r=function(r){var o={isDvr:function(e,t){return Math.abs(e)>=Math.max(t,0)},streamType:function(e,t){var i=r.isUndefined(t)?120:t,n="VOD";return e===1/0?n="LIVE":e<0&&(n=o.isDvr(e,i)?"DVR":"LIVE"),n}};return o}.apply(t,n))||(e.exports=r)},function(e,t){var i,n;i=[],void 0===(n=function(){var e=function(e,t,i){t=t||this,i=i||[];var n=window.jwplayer;if(n&&n.debug)return e.apply(t,i);try{return e.apply(t,i)}catch(r){return new o(e.name,r)}},o=function(e,t){this.name=e,this.message=t.message||t.toString(),this.error=t};return{tryCatch:e,Error:o}}.apply(t,i))||(e.exports=n)},function(e,t,C){var i,n;i=[C(2),C(23),C(14),C(5),C(1)],void 0===(n=function(_,x,k,e,j){var T=x.style,E={back:!0,backgroundOpacity:50,edgeStyle:null,fontSize:14,fontOpacity:100,fontScale:.05,preprocessor:j.identity,windowOpacity:0};return function(a){function s(){if(j.isFinite(b.fontSize))return a.get("containerHeight")?void(y=E.fontScale*b.fontSize/E.fontSize):void a.once("change:containerHeight",s)}function i(){var e=a.get("containerHeight");if(e){var t=Math.round(e*y);a.get("renderCaptionsNatively")?o(a.get("id"),t):T(f,{fontSize:t+"px"})}}function l(e,t){i(),r(e,t),n(e,t)}function n(e,t){x.css("#"+e+" .jw-text-track-display",w,e),x.css("#"+e+" .jw-text-track-cue",t,e)}function r(e,t){_.isSafari()&&x.css("#"+e+" .jw-video::-webkit-media-text-track-display-backdrop",{backgroundColor:t.backgroundColor},e,!0),x.css("#"+e+" .jw-video::-webkit-media-text-track-display",w,e,!0),x.css("#"+e+" .jw-video::cue",t,e,!0)}function o(e,t){w.fontSize=t+"px",x.css("#"+e+" .jw-video::-webkit-media-text-track-display",w,e,!0)}function c(e,t){var i=t.color,n=t.fontOpacity;if((i||n!==E.fontOpacity)&&(e.color=x.hexToRgba(i||"#ffffff",n)),t.back){var r=t.backgroundColor,o=t.backgroundOpacity;r===E.backgroundColor&&o===E.backgroundOpacity||(e.backgroundColor=x.hexToRgba(r,o))}else e.background="transparent";t.fontFamily&&(e.fontFamily=t.fontFamily),t.fontStyle&&(e.fontStyle=t.fontStyle),t.fontWeight&&(e.fontWeight=t.fontWeight),t.textDecoration&&(e.textDecoration=t.textDecoration)}function u(e,t,i){var n=x.hexToRgba("#000000",i);"dropshadow"===e?t.textShadow="0 2px 1px "+n:"raised"===e?t.textShadow="0 0 5px "+n+", 0 1px 5px "+n+", 0 2px 5px "+n:"depressed"===e?t.textShadow="0 -2px 1px "+n:"uniform"===e&&(t.textShadow="-2px 0 1px "+n+",2px 0 1px "+n+",0 -2px 1px "+n+",0 2px 1px "+n+",-1px 1px 1px "+n+",1px 1px 1px "+n+",1px -1px 1px "+n+",1px 1px 1px "+n)}function e(e){a.get("renderCaptionsNatively")||(p=e,this.selectCues(d,p))}function t(){a.get("renderCaptionsNatively")||C.e(10,function(){C(58),v=window.WebVTT})}var d,h,p,f,g,m,v,y,w,b={};(f=document.createElement("div")).className="jw-captions jw-reset",this.show=function(){k.addClass(f,"jw-captions-enabled")},this.hide=function(){k.removeClass(f,"jw-captions-enabled")},this.populate=function(e){if(!a.get("renderCaptionsNatively"))return h=[],(d=e)?void this.selectCues(e,p):(h=[],void this.renderCues())},this.resize=function(){i(),this.renderCues(!0)},this.renderCues=function(e){e=!!e,v&&v.processCues(window,h,f,e)},this.selectCues=function(e,t){var i,n;e&&e.data&&t&&(!1!==(n=this.getAlignmentPosition(e,t))&&(i=this.getCurrentCues(e.data,n),this.updateCurrentCues(i),this.renderCues(!0)))},this.getCurrentCues=function(e,t){return j.filter(e,function(e){return t>=e.startTime&&(!e.endTime||t<=e.endTime)})},this.updateCurrentCues=function(e){return e.length?j.difference(e,h).length&&(k.addClass(g,"jw-captions-window-active"),h=e):h=[],h},this.getAlignmentPosition=function(e,t){var i=e.source,n=t.metadata;return i?n&&j.isNumber(n[i])?n[i]:void 0:e.embedded&&t.duration<0?t.position-t.duration:t.position},this.clear=function(){_.empty(f)},this.setup=function(e,t){g=document.createElement("div"),m=document.createElement("span"),g.className="jw-captions-window jw-reset",m.className="jw-captions-text jw-reset",b=j.extend({},E,t),y=E.fontScale,s(b.fontSize);var i=b.windowColor,n=b.windowOpacity,r=b.edgeStyle;w={};var o={};c(o,b),(i||n!==E.windowOpacity)&&(w.backgroundColor=x.hexToRgba(i||"#000000",n)),u(r,o,b.fontOpacity),b.back||null!==r||u("uniform",o),T(g,w),T(m,o),l(e,o),g.appendChild(m),f.appendChild(g),this.populate(a.get("captionsTrack")),a.set("captions",b)},this.element=function(){return f},a.on("change:playlistItem",function(){p=null,h=[]},this),a.on("change:captionsTrack",function(e,t){this.populate(t)},this),a.mediaController.on("seek",function(){h=[]},this),a.mediaController.on("time seek",e,this),a.mediaController.on("subtitlesTrackData",function(){this.selectCues(d,p)},this),a.on("itemReady",t,this)}}.apply(t,i))||(e.exports=n)},,,,,,,,,,,,,,,,,,,,,function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,o,a=n(i(153));r=[],void 0===(o=function(){function e(e,t,i,n){return(0,a["default"])(e,t,i,n)}return e}.apply(t,r))||(e.exports=o)},function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,o,h=n(i(154));r=[i(6),i(2),i(4),i(1),i(3)],void 0===(o=function(o,a,s,l,c){var u=a.style,d={linktarget:"_blank",margin:8,hide:!1,position:"top-right"};return function(i){function e(){var e=i.get("dock"),t=!!(e&&e.length&&"top-right"===r.position&&i.get("controls"));a.toggleClass(n,"jw-below",t)}l.extend(this,c);var n,r,t=new Image;return this.setup=function(){(r=l.extend({},d,i.get("logo"))).file&&(r.position=r.position||d.position,r.hide="true"===r.hide.toString(),n||(n=a.createElement((0,h["default"])(r.position,r.hide))),i.set("logo",r),i.change("dock",e),i.on("change:controls",e),t.onload=function(){var e={backgroundImage:'url("'+this.src+'")',width:this.width,height:this.height};if(r.margin!==d.margin){var t=/(\w+)-(\w+)/.exec(r.position);3===t.length&&(
e["margin-"+t[1]]=r.margin,e["margin-"+t[2]]=r.margin)}u(n,e),i.set("logoWidth",e.width)},t.src=r.file,new o(n).on("click tap",function(e){a.exists(e)&&e.stopPropagation&&e.stopPropagation(),this.trigger(s.JWPLAYER_LOGO_CLICK,{link:r.link,linktarget:r.linktarget})},this))},this.setContainer=function(e){if(n){var t=e.querySelector(".jw-dock");t?e.insertBefore(n,t):e.appendChild(n)}},this.element=function(){return n},this.position=function(){return r.position},this.destroy=function(){i.off("change:dock",e),i.off("change:controls",e),t.onload=null},this}}.apply(t,r))||(e.exports=o)},function(e,t,i){var n,r;n=[i(1),i(2)],void 0===(r=function(n,s){function t(i,e){e.off("change:mediaType",null,this),e.on("change:mediaType",function(e,t){"audio"===t&&this.setImage(i.get("playlistItem").image)},this)}function i(e,i){return e.get("autostart")&&!s.isMobile()||0<e.get("item")?(this.setImage(null),e.off("change:state",null,this),void e.on("change:state",function(e,t){"complete"!==t&&"idle"!==t&&"error"!==t||(this.setImage(i.image),this.resize(null,null,e.get("stretching")))},this)):void this.setImage(i.image)}var e=function(e){(this.model=e).on("change:playlistItem",i,this),e.on("change:mediaModel",t,this)};return n.extend(e.prototype,{setup:function(e){this.el=e;var t=this.model.get("playlistItem");t&&this.setImage(t.image)},setImage:function(e){var t=this.image;t&&(t.onload=null,this.image=null),this.model.off("change:state",null,this);var i="";n.isString(e)&&(i='url("'+e+'")',(t=this.image=new Image).src=e),s.style(this.el,{backgroundImage:i})},resize:function(e,t,i){if("uniform"===i){if(e&&(this.playerAspectRatio=e/t),!this.playerAspectRatio)return;var n=this.image,r=null;if(n){if(0===n.width){var o=this;return void(n.onload=function(){o.resize(e,t,i)})}var a=n.width/n.height;Math.abs(this.playerAspectRatio-a)<.09&&(r="cover")}s.style(this.el,{backgroundSize:r})}},element:function(){return this.el}}),e}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(1),i(2)],void 0===(r=function(e,l){var t=function(e){this.model=e,this.model.on("change:playlistItem",this.playlistItem,this)};return e.extend(t.prototype,{hide:function(){this.el.style.display="none"},show:function(){this.el.style.display=""},setup:function(e){this.el=e;var t=this.el.getElementsByTagName("div");this.title=t[0],this.description=t[1],this.model.get("playlistItem")&&this.playlistItem(this.model,this.model.get("playlistItem")),this.model.on("change:logoWidth",this.update,this),this.model.on("change:dock",this.update,this)},update:function(e){var t={paddingLeft:0,paddingRight:0},i=e.get("controls"),n=e.get("dock"),r=e.get("logo");if(r){var o=1*(""+r.margin).replace("px",""),a=e.get("logoWidth")+(isNaN(o)?0:o);"top-left"===r.position?t.paddingLeft=a:"top-right"===r.position&&(t.paddingRight=a)}if(i&&n&&n.length){var s=56*n.length;t.paddingRight=Math.max(t.paddingRight,s)}l.style(this.el,t)},playlistItem:function(e,t){if(e.get("displaytitle")||e.get("displaydescription")){var i="",n="";t.title&&e.get("displaytitle")&&(i=t.title),t.description&&e.get("displaydescription")&&(n=t.description),this.updateText(i,n)}else this.hide()},updateText:function(e,t){this.title.innerHTML=e,this.description.innerHTML=t,this.title.firstChild||this.description.firstChild?this.show():this.hide()},element:function(){return this.el}}),t}.apply(t,n))||(e.exports=r)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.CONTROLBAR_ONLY_HEIGHT=44;t.isAudioMode=function(e){var t=e.get("height");if(e.get("aspectratio"))return!1;if("string"==typeof t&&-1<t.indexOf("%"))return!1;var i=1*t||NaN;return!!(i=isNaN(i)?e.get("containerHeight"):i)&&i&&i<=n}},function(e,t,i){"use strict";function n(e){var t=0;return 1280<=e?t=7:960<=e?t=6:800<=e?t=5:640<=e?t=4:540<=e?t=3:420<=e?t=2:320<=e&&(t=1),t}function r(e,t){var i="jw-breakpoint-"+t;o.replaceClass(e,/jw-breakpoint-\d+/,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.getBreakpoint=n,t.setBreakpoint=r;var o=i(14)},function(e,t,i){function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,l=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();n=[i(6),i(4),i(3),i(1)],void 0===(r=function(r,t,o,a){return function(){function n(e,t){s(this,n),a.extend(this,o),this.revertAlternateClickHandlers(),this.domElement=t,this.model=e;var i={enableDoubleTap:!0,useMove:!0};this.ui=new r(t,a.extend(i,i)).on({"click tap":this.clickHandler,"doubleClick doubleTap":function(){return this.alternateDoubleClickHandler?void this.alternateDoubleClickHandler():void this.trigger("doubleClick")},move:function(){this.trigger("move")},over:function(){this.trigger("over")},out:function(){this.trigger("out")}},this)}return l(n,[{key:"destroy",value:function(){this.ui&&(this.ui.destroy(),this.ui=this.domElement=this.model=null,this.revertAlternateClickHandlers())}},{key:"clickHandler",value:function(e){if(!this.model.get("flashBlocked"))return this.alternateClickHandler?void this.alternateClickHandler(e):void this.trigger(e.type===t.touchEvents.CLICK?"click":"tap")}},{key:"element",value:function(){return this.domElement}},{key:"setAlternateClickHandlers",value:function(e,t){this.alternateClickHandler=e,this.alternateDoubleClickHandler=t||null}},{key:"revertAlternateClickHandlers",value:function(){this.alternateClickHandler=null,this.alternateDoubleClickHandler=null}}]),n}()}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(14)],void 0===(r=function(a){return function(e){var t=!1,i=function(){t=!1,a.removeClass(e,"jw-no-focus")},n=function(e){e.target&&e.target.blur&&e.target.blur()},r=function(){t=!0,a.addClass(e,"jw-no-focus")},o=function(){t||i()};return e.addEventListener("focus",o),e.addEventListener("blur",i),e.addEventListener("mousedown",r),e.addEventListener("mouseup",n),{destroy:function(){e.removeEventListener("focus",o),e.removeEventListener("blur",i),e.removeEventListener("mousedown",r),e.removeEventListener("mouseup",n)}}}}.apply(t,n))||(e.exports=r)},function(e,t){var i,n;i=[],void 0===(n=function(){var s=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];return function(e,t,i){for(var n=e.requestFullscreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen,r=t.exitFullscreen||t.webkitExitFullscreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.msExitFullscreen,o=!(!n||!r),a=s.length;a--;)t.addEventListener(s[a],i);return{events:s,supportsDomFullscreen:function(){return o},requestFullscreen:function(){n.apply(e)},exitFullscreen:function(){r.apply(t)},fullscreenElement:function(){return t.fullscreenElement||t.webkitCurrentFullScreenElement||t.mozFullScreenElement||t.msFullscreenElement},destroy:function(){for(a=s.length;a--;)t.removeEventListener(s[a],i)}}}}.apply(t,i))||(e.exports=n)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=window.IntersectionObserver;window.IntersectionObserver&&!u&&(u=new e(function(e){if(e&&e.length)for(var t=e.length;t--;)for(var i=e[t],n=c.length;n--;){var r=c[n];if(i.target===r.getContainer()){r.model.set("intersectionRatio",i.intersectionRatio);break}}},{threshold:[0,.25,.5,.75,1]}))}function o(){(0,l.cancelAnimationFrame)(d),d=(0,l.requestAnimationFrame)(function(){c.forEach(function(e){e.updateBounds()}),c.forEach(function(e){e.model.get("visibility")&&e.updateStyles()}),c.forEach(function(e){e.checkResized()})})}function a(){c.forEach(function(e){e.model.set("activeTab",(0,s["default"])())})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(i(62)),l=i(68),c=[],u=void 0,d=-1;document.addEventListener("visibilitychange",a),document.addEventListener("webkitvisibilitychange",a),window.addEventListener("resize",o),window.addEventListener("orientationchange",o),window.addEventListener("beforeunload",function(){document.removeEventListener("visibilitychange",a),document.removeEventListener("webkitvisibilitychange",a),window.removeEventListener("resize",o),window.removeEventListener("orientationchange",o)}),t["default"]={add:function(e){c.push(e)},remove:function(e){var t=c.indexOf(e);-1!==t&&c.splice(t,1)},size:function(){return c.length},observe:function(e){r();try{u.unobserve(e)}catch(t){}u.observe(e)},unobserve:function(e){u&&u.unobserve(e)}}},function(e,t){"use strict";function i(e,t,i){if(e.get("fullscreen"))return 1;if(!e.get("activeTab"))return 0;var n=e.get("intersectionRatio");return void 0===n&&(n=r(t,i)),n}function r(e,t){var i=document.documentElement,n=document.body,r={top:0,left:0,right:i.clientWidth||n.clientWidth,width:i.clientWidth||n.clientWidth,bottom:i.clientHeight||n.clientHeight,height:i.clientHeight||n.clientHeight};if(!n.contains(e))return 0;for(var o=e.getBoundingClientRect(),a=o,s=e.parentNode,l=!1;!l;){var c=null;if(s&&1===s.nodeType?"visible"!==window.getComputedStyle(s).overflow&&(c=t(s)):(l=!0,c=r),c&&!(a=h(c,a)))return 0;s=s.parentNode}var u=o.width*o.height,d=a.width*a.height;return u?d/u:0}function h(e,t){var i=Math.max(e.top,t.top),n=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-r,s=n-i;return 0<=a&&0<=s&&{top:i,bottom:n,left:r,right:o,width:a,height:s}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t,fe){function i(e){return e&&e.__esModule?e:{"default":e}}var n,r,ge=i(fe(155)),me=fe(145),ve=i(fe(150)),ye=i(fe(151)),we=i(fe(62)),be=fe(68),_e=fe(146),xe=void 0;n=[fe(4),fe(5),fe(3),fe(2),fe(1),fe(149),fe(148),fe(147),fe(120),fe(142),fe(143),fe(144),fe(50)],void 0===(r=function(X,K,Q,Z,ee,te,ie,ne,re,oe,ae,se,le){function e(n,s){function r(){return{reason:"interaction"}}function o(){(0,be.cancelAnimationFrame)(H),H=(0,be.requestAnimationFrame)(i)}function i(){A.isSetup&&(A.updateBounds(),A.updateStyles(),A.checkResized())}function a(e,t){var i=(0,me.isAudioMode)(s);if(ee.isNumber(e)&&ee.isNumber(t)){var n=(0,_e.getBreakpoint)(e);(0,_e.setBreakpoint)(R,n);var r=n<2,o=s.get("timeSliderAbove"),a=!i&&!1!==o&&(o||r);Z.toggleClass(R,"jw-flag-small-player",r),Z.toggleClass(R,"jw-flag-time-slider-above",a),Z.toggleClass(R,"jw-orientation-portrait",e<t)}Z.toggleClass(R,"jw-flag-audio-player",i),s.set("audioMode",i)}function l(e,t,i){if(e){var n={color:e,borderColor:e,stroke:e};Z.css("#"+i+" .jw-color-active",n,i),Z.css("#"+i+" .jw-color-active-hover:hover",n,i)}if(t){var r={color:t,borderColor:t,stroke:t};Z.css("#"+i+" .jw-color-inactive",r,i),Z.css("#"+i+" .jw-color-inactive-hover:hover",r,i)}}function e(){s.set("visibility",(0,ye["default"])(s,R,ue))}function t(e,t){t?xe?c():le.load().then(function(e){xe=e,c()})["catch"](function(e){A.trigger("error",{message:"Controls failed to load",reason:e})}):A.removeControls()}function c(){var e=new xe(document,A.element());A.addControls(e)}function u(e){var t=L.querySelector("video, audio");if(t){var i=document.createElement("div");i.innerHTML=e.title||"",t.setAttribute("title",i.textContent)}}function d(e,t,i){t&&!i&&(C(F||e),A.updateStyles())}function h(i,n,e){var t=new ne(n,e,{useHover:!0});return t.on({click:function(){A.trigger(X.JWPLAYER_DISPLAY_CLICK),s.get("controls")&&i.play(r())},tap:function(){A.trigger(X.JWPLAYER_DISPLAY_CLICK);var e=n.get("state"),t=s.get("controls");if(t&&(e===K.IDLE||e===K.COMPLETE||F&&F.get("state")===K.PAUSED)&&i.play(r()),t&&e===K.PAUSED){if(F||n.get("castActive")||n.mediaModel&&"audio"===n.mediaModel.get("mediaType"))return;Z.toggleClass(R,"jw-flag-controls-hidden"),M.renderCues(!0)}else Y&&(Y.showing?Y.userInactive():Y.userActive())},doubleClick:function(){return Y&&i.setFullscreen()},move:function(){return Y&&Y.userActive()},over:function(){return Y&&Y.userActive()}}),t}function p(e,t){Z.replaceClass(R,/jw-skin-\S+/,t?"jw-skin-"+t:"")}function f(e,t){Z.replaceClass(R,/jw-stretch-\S+/,"jw-stretch-"+t)}function g(e,t){Z.toggleClass(R,"jw-flag-aspect-mode",!!t);var i=R.querySelector(".jw-aspect");ce(i,{paddingTop:t||null})}function m(e,t){Z.toggleClass(R,"jw-flag-flash-blocked",t)}function v(e){e.link?(n.pause(!0,r()),n.setFullscreen(!1),window.open(e.link,e.linktarget)):s.get("controls")&&n.play(r())}function y(e,t,i){var n=Z.exists(e),r=Z.exists(t),o={width:e};r&&i&&s.set("aspectratio",null),s.get("aspectratio")||(o.height=t),n&&r&&(s.set("width",e),s.set("height",t)),ce(R,o)}function w(e,t){if((e&&!isNaN(1*e)||(e=s.get("containerWidth")))&&(t&&!isNaN(1*t)||(t=s.get("containerHeight")))){I&&I.resize(e,t,s.get("stretching"));var i=s.getVideo();if(i)i.resize(e,t,s.get("stretching"))&&(clearTimeout(z),z=setTimeout(w,250))}}function b(){if(q.supportsDomFullscreen()){var e=q.fullscreenElement();return!(!e||e.id!==s.get("id"))}return F?F.getVideo().getFullScreen():s.getVideo().getFullScreen()}function _(e){var t=s.get("fullscreen"),i=void 0!==e.jwstate?e.jwstate:b();t!==i&&s.set("fullscreen",i),o(),clearTimeout(z),z=setTimeout(w,200)}function x(e,t){Z.toggleClass(e,"jw-flag-fullscreen",t),ce(document.body,{overflowY:t?"hidden":""}),t&&Y&&Y.userActive(),w(),o()}function k(){Y.userActive()}function j(e,t){var i="audio"===t,n=s.getVideo(),r=n&&0===n.getName().name.indexOf("flash");Z.toggleClass(R,"jw-flag-media-audio",i),i&&!r?R.insertBefore(I.el,L):R.insertBefore(I.el,M.element())}function T(e,t){if(!F){var i="LIVE"===t;Z.toggleClass(R,"jw-flag-live",i),A.setAltText(i?e.get("localization").liveBroadcast:"")}}function E(e,t){return t?void(t.name?O.updateText(t.name,t.message):O.updateText(t.message,"")):void O.playlistItem(e,e.get("playlistItem"))}function C(e){if(s.get("viewSetup")){N=e.get("state");var t=null;F&&(t=N),Y&&(Y.instreamState=t),S(N)}}function S(e){switch(s.get("controls")&&e!==K.PAUSED&&Z.hasClass(R,"jw-flag-controls-hidden")&&Z.removeClass(R,"jw-flag-controls-hidden"),Z.replaceClass(R,/jw-state-\S+/,"jw-state-"+e),e){case K.IDLE:case K.ERROR:case K.COMPLETE:M.hide();break;default:M.show(),e===K.PAUSED&&Y&&!Y.showing&&M.renderCues(!0)}}function P(){!Y||F||de||Y.userActive()}var A=ee.extend(this,Q,{isSetup:!1,api:n,model:s});ee.extend(s.attributes,{containerWidth:void 0,containerHeight:void 0,mediaContainer:void 0,fullscreen:!1,inDom:void 0,iFrame:void 0,activeTab:void 0,intersectionRatio:void 0,visibility:void 0,viewable:void 0,viewSetup:!1,audioMode:void 0,touchMode:void 0,altText:"",cues:void 0,castClicked:!1,scrubbing:!1,logoWidth:0});var R=Z.createElement((0,ge["default"])(s.get("id"),s.get("localization").player)),L=R.querySelector(".jw-media"),I=new ae(s),O=new se(s),M=new re(s),D=void 0,N=void 0,B=void 0,$=void 0,F=void 0,z=-1,H=-1,W=void 0,q=void 0,U=void 0,V=null,Y=void 0;this.updateBounds=function(){(0,be.cancelAnimationFrame)(H);var e=document.body.contains(R),t=ue(R),i=Math.round(t.width),n=Math.round(t.height);return i===B&&n===$?(B&&$||o(),void s.set("inDom",e)):(i&&n||B&&$||o(),(i||n||e)&&(s.set("containerWidth",i),s.set("containerHeight",n)),s.set("inDom",e),void(e&&ve["default"].observe(R)))},this.updateStyles=function(){var e=s.get("containerWidth"),t=s.get("containerHeight");s.get("controls")&&a(e,t),Y&&Y.resize(e,t),w(e,t),M.resize()},this.checkResized=function(){var e=s.get("containerWidth"),t=s.get("containerHeight");if(e!==B||t!==$){B=e,$=t,A.trigger(X.JWPLAYER_RESIZE,{width:e,height:t});var i=(0,_e.getBreakpoint)(e);V!==i&&(V=i,A.trigger(X.JWPLAYER_BREAKPOINT,{breakpoint:V}))}},this.handleColorOverrides=function(){function e(e,t,i,n){e=Z.prefix(e,"#"+o+(n?"":" "));var r={};r[t]=i,Z.css(e.join(", "),r,o)}var o=s.get("id"),t=s.get("skinColorActive"),i=s.get("skinColorInactive"),n=s.get("skinColorBackground");if(t&&(e([".jw-button-color.jw-toggle",".jw-button-color:hover",".jw-button-color.jw-toggle.jw-off:hover",".jw-option:not(.jw-active-option):hover",".jw-nextup-header"],"color",t),e([".jw-option.jw-active-option",".jw-progress"],"background","none "+t)),i&&(e([".jw-text",".jw-option",".jw-button-color",".jw-toggle.jw-off",".jw-skip .jw-skip-icon",".jw-nextup-body"],"color",i),e([".jw-cue",".jw-knob",".jw-active-option",".jw-nextup-header"],"background","none "+i)),n){if(e([".jw-background-color"],"background","none "+n),!1!==s.get("timeSliderAbove"))e([".jw-flag-time-slider-above .jw-background-color.jw-controlbar"],"background","transparent linear-gradient(180deg, "+Z.getRgba(n,0)+" 0%, "+Z.getRgba(n,.25)+" 30%, "+Z.getRgba(n,.4)+" 70%, "+Z.getRgba(n,.5)+") 100%",!0);e([".jw-flag-time-slider-above .jw-background-color.jw-slider-time"],"background","transparent",!0)}l(t,i,o)},this.setup=function(){var i=this;I.setup(R.querySelector(".jw-preview")),O.setup(R.querySelector(".jw-title")),(D=new oe(s)).setup(),D.setContainer(R),D.on(X.JWPLAYER_LOGO_CLICK,v),M.setup(R.id,s.get("captions")),R.insertBefore(M.element(),O.element()),W=h(n,s,L),U=ie(R),q=te(R,document,_),R.addEventListener("focus",P),s.on("change:errorEvent",E),s.on("change:hideAdsControls",function(e,t){Z.toggleClass(R,"jw-flag-ads-hide-controls",t)}),s.on("change:scrubbing",function(e,t){Z.toggleClass(R,"jw-flag-dragging",t)}),s.mediaController.on("fullscreenchange",_),s.change("mediaModel",function(e,t){t.change("mediaType",j,i),t.on("change:visualQuality",function(){w()},i)}),s.change("skin",p,this),s.change("stretching",f),s.change("flashBlocked",m);var e=s.get("width"),t=s.get("height");y(e,t),s.change("aspectratio",g),s.get("controls")?a(e,t):Z.addClass(R,"jw-flag-controls-hidden"),pe||(pe=!0,fe(185)),he&&Z.addClass(R,"jw-ie"),!0===s.get("skin-loading")&&(Z.addClass(R,"jw-flag-skin-loading"),s.once("change:skin-loading",function(){Z.removeClass(R,"jw-flag-skin-loading")})),this.handleColorOverrides(),s.set("mediaContainer",L),s.set("iFrame",Z.isIframe()),s.set("activeTab",(0,we["default"])()),s.set("touchMode",de&&("string"==typeof t||t>=me.CONTROLBAR_ONLY_HEIGHT)),ve["default"].add(this),this.isSetup=!0,s.set("viewSetup",!0),s.set("inDom",document.body.contains(R))},this.init=function(){this.updateBounds(),s.on("change:fullscreen",G),s.on("change:activeTab",e),s.on("change:fullscreen",e),s.on("change:intersectionRatio",e),s.on("change:visibility",d),e(),1!==ve["default"].size()||s.get("visibility")||d(s,1,0),s.change("state",C),s.change("controls",t),de&&(u(s.get("playlistItem")),s.on("itemReady",u)),B=$=null,this.checkResized()};var J=function(e,t){t&&C(F||s)};this.addControls=function(e){Y=e,Z.removeClass(R,"jw-flag-controls-hidden"),s.change("streamType",T,this),e.enable(n,s),e.addActiveListeners(D.element());var t=e.logoContainer();t&&D.setContainer(t),$&&(a(B,$),e.resize(B,$),M.renderCues(!0)),e.on("userActive userInactive",function(){N!==K.PLAYING&&N!==K.BUFFERING||M.renderCues(!0)}),e.on("all",A.trigger,A),R.querySelector(".jw-overlays").addEventListener("mousemove",k)},this.removeControls=function(){D.setContainer(R),Y&&(Y.removeActiveListeners(D.element()),Y.disable(),Y=null);var e=document.querySelector(".jw-overlays");e&&e.removeEventListener("mousemove",k),Z.addClass(R,"jw-flag-controls-hidden")};var G=function(e,t){var i=s.getVideo();t&&Y&&s.get("autostartMuted")&&Y.unmuteAutoplay(n,s),q.supportsDomFullscreen()?(t?q.requestFullscreen():q.exitFullscreen(),x(R,t)):he?x(R,t):(F&&F.getVideo()&&F.getVideo().setFullscreen(t),i.setFullscreen(t)),i&&0===i.getName().name.indexOf("flash")&&i.setFullscreen(t)};this.resize=function(e,t){y(e,t,!0),i()},this.resizeMedia=w,this.setupInstream=function(e){this.instreamModel=F=e,F.on("change:controls",J,this),F.on("change:state",C,this),Z.addClass(R,"jw-flag-ads"),Y&&Y.userActive()},this.setAltText=function(e){s.set("altText",e)},this.destroyInstream=function(){(F&&(F.off(null,null,this),F=null),this.setAltText(""),Z.removeClass(R,["jw-flag-ads","jw-flag-ads-hide-controls"]),s.set("hideAdsControls",!1),s.getVideo)&&s.getVideo().setContainer(L);T(s,s.get("streamType")),W.revertAlternateClickHandlers()},this.addCues=function(e){s.set("cues",e)},this.clickHandler=function(){return W},this.getContainer=this.element=function(){return R},this.controlsContainer=function(){return Y?Y.element():null},this.getSafeRegion=function(e){var t={x:0,y:0,width:B||0,height:$||0};return Y&&((e=e||!Z.exists(e))&&(t.height-=Y.controlbarHeight())),t},this.setCaptions=function(e){M.clear(),M.setup(s.get("id"),e),M.resize()},this.destroy=function(){ve["default"].unobserve(R),ve["default"].remove(this),this.isSetup=!1,this.off(),(0,be.cancelAnimationFrame)(H),clearTimeout(z),R.removeEventListener("focus",P),U&&(U.destroy(),U=null),q&&(q.destroy(),q=null),s.mediaController&&s.mediaController.off("fullscreenchange",_),Y&&Y.disable(),F&&this.destroyInstream(),W&&(W.destroy(),W=null),D&&(D.destroy(),D=null),Z.clearCss(s.get("id"))}}var ce=Z.style,ue=Z.bounds,de=Z.isMobile(),he=Z.isIE(),pe=!1;return e.prototype.setControlsModule=function(e){xe=e},e}.apply(t,n))||(e.exports=r)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,i,n){return'<div id="'+e+'" class="jw-skin-'+(1<arguments.length&&void 0!==t?arguments[1]:"")+' jw-error jw-reset"><div class="jw-title jw-reset"><div class="jw-title-primary jw-reset">'+(2<arguments.length&&void 0!==i?arguments[2]:"")+'</div><div class="jw-title-secondary jw-reset">'+(3<arguments.length&&void 0!==n?arguments[3]:"")+'</div></div><div class="jw-display-container jw-reset"><div class="jw-display-icon-container jw-background-color jw-reset"><div class="jw-icon jw-icon-display jw-reset" aria-hidden="true"></div></div></div></div>'}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return'<div class="jw-logo jw-logo-'+e+(t?" jw-hide":"")+' jw-reset"></div>'}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return'<div id="'+e+'" class="jwplayer jw-reset jw-state-setup" tabindex="0" aria-label="'+(1<arguments.length&&void 0!==t?arguments[1]:"")+'"><div class="jw-aspect jw-reset"></div><div class="jw-media jw-reset"></div><div class="jw-preview jw-reset"></div><div class="jw-title jw-reset"><div class="jw-title-primary jw-reset"></div><div class="jw-title-secondary jw-reset"></div></div><div class="jw-overlays jw-reset"></div></div>'}},function(e,t,i){var n,r;n=[i(74),i(1),i(28),i(2),i(7),i(6),i(79),i(15),i(80),i(69),i(4),i(5),i(53),i(37),i(51),i(21)],void 0===(r=function(e,t,i,n,r,o,a,s,l,c,u,d,h,p,f,g){var m={};return m.api=e,m._=t,m._=t,m.version=i,m.utils=t.extend(n,r,{key:a,extend:t.extend,scriptloader:s,rssparser:f,tea:l,UI:o}),m.utils.css.style=m.utils.style,m.vid=c,m.events=t.extend({},u,{state:d}),m.playlist=t.extend({},h,{item:p}),m.plugins=g,m}.apply(t,n))||(e.exports=r)},,,,function(e,t,v){var i,n;i=[v(94),v(16),v(173),v(29),v(27),v(1)],void 0===(n=function(e,d,h,p,f,g){var m=e.prototype.setup;return e.prototype.setup=function(e,t){function i(){var e=a.get("cast");return g.isObject(e)&&l("casting")}function n(){var e=a.getVideo(),t=a.get("cast")||{};i()?(!t.customAppId&&p.containsDrm(a)||r.apply(this),o.apply(this)):e&&e.video&&(e.video.webkitWirelessVideoPlaybackDisabled=!0)}function r(){v.e(4,function(){if(window.chrome&&f.isChrome()){var e=v(75);this._castController=new e(this,a),this.castToggle=this._castController.castToggle.bind(this._castController)}}.bind(this))}function o(){window.WebKitPlaybackTargetAvailabilityEvent&&v.e(8,function(){var e=v(73);this._airplayController=new e(this,a),this.castToggle=this._airplayController.airplayToggle.bind(this._airplayController)}.bind(this))}m.apply(this,arguments);var a=this._model,s=a.get("edition"),l=d(s),c=h.setup(this._view);e.analytics&&(e.sdkplatform=e.sdkplatform||e.analytics.sdkplatform);var u=this;t.getAdBlock=c.getAdBlock,this.on("playlistItem",function(){c.onReady.apply(u)}),this.once("ready",n,this)},e}.apply(t,i))||(e.exports=n)},function(e,t,l){var i,n;i=[l(79),l(16),l(1),l(2),l(66),l(100),l(29)],void 0===(n=function(o,f,g,a,m,s,i){function v(e,t,i){if(t){var n=t.client;delete t.client,/\.(js|swf)$/.test(n||"")||(n=m.repo()+i),e[n]=t}}function t(e,t){var i=g.clone(t.get("plugins"))||{},n=t.get("edition"),r=f(n),o=/^(vast|googima|freewheel)$/,a=/\.(js|swf)$/,s=m.repo(),l=g.clone(t.get("advertising"));if(r("ads")&&l&&(a.test(l.client)?i[l.client]=l:o.test(l.client)&&(i[s+l.client+".js"]=l),delete l.client),r("jwpsrv")){var c=t.get("analytics");g.isObject(c)||(c={}),v(i,c,"jwpsrv.js")}v(i,t.get("ga"),"gapro.js"),v(i,t.get("sharing"),"sharing.js");var u=t.get("related"),d=g.isObject(u);if(!1!==t.get("controls")||d){var h=!1!==t.get("visualplaylist")||d;d||(u={disableRelated:!0}),u.showDockButton=h,v(i,u,"related.js")}if(!t.get("mobileSdk")){var p=t.get("playlist");g.some(p,function(e){if(e.stereomode&&0<e.stereomode.length)return v(i,t.get("vr")||{},"vr.js"),!0})}t.set("plugins",i),e()}function n(e,t){var i=t.get("key")||window.jwplayer&&window.jwplayer.key,n=new o(i).edition();if(t.set("key",i),t.set("edition",n),"unlimited"===n){var r=a.getScriptPath("jwplayer.js");if(!r)return void s.error(e,"Error setting up player","Could not locate jwplayer.js script tag");l.p=r,a.repo=m.repo=m.loadFrom=function(){return r}}t.updateProviders(),"invalid"===n?s.error(e,"Error setting up player",(void 0===i?"Missing":"Invalid")+" license key"):e()}function r(e,t){i.containsDrm(t)?i.probe(e,t.get("edition")):e()}function e(){var e=s.getQueue();return e.CHECK_KEY={method:n,depends:["LOAD_BASE64_POLYFILL"]},e.PROBE_DRM_SUPPORT={method:r,depends:["CHECK_KEY","LOAD_PROMISE_POLYFILL"]},e.FILTER_PLUGINS={method:t,depends:["CHECK_KEY"]},e.FILTER_PLAYLIST.depends.push("PROBE_DRM_SUPPORT"),e.LOAD_PLUGINS.depends.push("FILTER_PLUGINS"),e}return{getQueue:e}}.apply(t,i))||(e.exports=n)},function(e,t,i){var n,r;n=[i(102),i(156),i(1)],void 0===(r=function(e,t,i){var n=window,r=i.extend(e,t);return"function"==typeof n.define&&n.define.amd&&n.define([],function(){return r}),n.jwplayer?n.jwplayer:r}.apply(t,n))||(e.exports=r)},,,,,,,,,,,function(e,t){var i,n;i=[],void 0===(n=function(){function a(){var e=document.createElement("div");return e.className=s,e.innerHTML="&nbsp;",e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.background="transparent",e}function e(e){function t(){if(r)return!0;var e=this;i()&&e.trigger("adBlock")}function i(){return null!==o.offsetParent&&o.className===s&&""!==o.innerHTML&&0!==o.clientHeight||(r=!0),r}function n(){return r}var r=!1,o=a();return e.element().appendChild(o),{onReady:t,getAdBlock:n}}var s="afs_ads";return{setup:e}}.apply(t,i))||(e.exports=n)},function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,o,a=n(i(176));r=[i(2),i(4),i(6),i(3),i(1)],void 0===(o=function(i,e,t,n,r){var o=function(e){this.model=e,this.setup()};return r.extend(o.prototype,n,{setup:function(){this.destroy(),this.skipMessage=this.model.get("skipText"),this.skipMessageCountdown=this.model.get("skipMessage"),this.setWaitTime(this.model.get("skipOffset"));var e=(0,a["default"])();this.el=i.createElement(e),this.skiptext=this.el.getElementsByClassName("jw-skiptext")[0],this.skipAdOnce=r.once(this.skipAd.bind(this)),new t(this.el).on("click tap",r.bind(function(){this.skippable&&this.skipAdOnce()},this)),this.model.on("change:duration",this.onChangeDuration,this),this.model.on("change:position",this.onChangePosition,this),this.onChangeDuration(this.model,this.model.get("duration")),this.onChangePosition(this.model,this.model.get("position"))},updateMessage:function(e){this.skiptext.innerHTML=e},updateCountdown:function(e){this.updateMessage(this.skipMessageCountdown.replace(/xx/gi,Math.ceil(this.waitTime-e)))},onChangeDuration:function(e,t){if(t){if(this.waitPercentage){if(!t)return;this.itemDuration=t,this.setWaitTime(this.waitPercentage),delete this.waitPercentage}i.removeClass(this.el,"jw-hidden")}},onChangePosition:function(e,t){0<this.waitTime-t?this.updateCountdown(t):(this.updateMessage(this.skipMessage),this.skippable=!0,i.addClass(this.el,"jw-skippable"))},element:function(){return this.el},setWaitTime:function(e){if(r.isString(e)&&"%"===e.slice(-1)){var t=parseFloat(e);this.itemDuration&&!isNaN(t)?this.waitTime=this.itemDuration*t/100:this.waitPercentage=e}else r.isNumber(e)?this.waitTime=e:"string"===i.typeOf(e)?this.waitTime=i.seconds(e):isNaN(Number(e))?this.waitTime=0:this.waitTime=Number(e)},skipAd:function(){this.trigger(e.JWPLAYER_AD_SKIPPED)},destroy:function(){this.el&&(this.el.removeEventListener("click",this.skipAdOnce),this.el.parentElement&&this.el.parentElement.removeChild(this.el)),delete this.skippable,delete this.itemDuration,delete this.waitPercentage}}),o}.apply(t,r))||(e.exports=o)},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return'<div class="jw-skip jw-background-color jw-hidden jw-reset"><span class="jw-text jw-skiptext jw-reset"></span><span class="jw-icon jw-icon-inline jw-skip-icon jw-reset"></span></div>'}},,,function(e,t,i){(e.exports=i(82)()).push([e.id,
".jw-reset{color:inherit;background-color:transparent;padding:0;margin:0;float:none;font-family:Arial,Helvetica,sans-serif;font-size:1em;line-height:1em;list-style:none;text-align:left;text-transform:none;vertical-align:baseline;border:0;direction:ltr;font-variant:inherit;font-stretch:inherit;-webkit-tap-highlight-color:rgba(255,255,255,0)}.jw-background-color{background:rgba(33,33,33,.8)}.jw-knob,.jw-text{color:#cecece}.jw-knob{background-color:#fff}.jw-button-color{color:#cecece;fill:#cecece}.jw-button-color:focus,:not(.jw-flag-touch) .jw-button-color:hover{outline:none;color:#fff;fill:#fff}.jw-toggle{color:#fff}.jw-toggle.jw-off{color:#cecece}.jw-toggle.jw-off:focus{color:#fff}.jw-toggle:focus{outline:none}:not(.jw-flag-touch) .jw-toggle.jw-off:hover{color:#fff}.jw-display-icon-container{margin:0 .25em}.jw-display-icon-container .jw-icon{color:#cecece}.jw-rail{background:hsla(0,0%,100%,.2)}.jw-buffer{background:hsla(0,0%,100%,.3)}.jw-progress{background:#fff}.jw-slider-horizontal,.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-rail{height:.3em}.jw-slider-horizontal .jw-knob{margin-left:-.3em}.jw-slider-vertical .jw-knob{margin-bottom:-.3em}.jw-slider-vertical .jw-progress,.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-slider-container{width:.3em}.jw-menu,.jw-time-tip,.jw-volume-tip{border:0}.jw-menu,.jw-time-tip{padding:.5em}.jw-volume-tip{padding:1em}.jw-skip{padding:.5em}.jw-skip .jw-skip-icon,.jw-skip .jw-skiptext{color:#cecece}.jw-skip.jw-skippable:hover .jw-skip-icon,.jw-skip.jw-skippable:hover .jw-text{color:#fff}.jw-dock-button .jw-text,.jw-time-tip .jw-text{color:#cecece}.jw-dock-button{background:rgba(33,33,33,.8)}:not(.jw-flag-touch) .jw-dock-button:hover{background:#212121}.jw-icon-cast button{--connected-color:#fff;--disconnected-color:#cecece}.jw-icon-cast button:focus{--connected-color:#fff;--disconnected-color:#fff}.jw-icon-cast button.jw-off{--connected-color:#cecece}.jw-icon-cast:hover button{--connected-color:#fff;--disconnected-color:#fff}.jw-nextup-container{bottom:2.5em;padding:5px .5em}.jw-nextup{border-radius:0}.jw-nextup-header{background:rgba(33,33,33,.8);color:#fff}.jw-nextup-body{background:rgba(0,0,0,.8);color:#fff}.jw-nextup-thumbnail-visible+.jw-nextup-title:after{background:-webkit-linear-gradient(top,transparent,#000);background:linear-gradient(-180deg,transparent,#000)}.jw-nextup-close{color:#cecece}.jw-nextup-close:active,.jw-nextup-close:hover{color:#fff}.jwplayer:not(.jw-flag-touch):not(.jw-error):not(.jw-state-error):not(.jw-state-buffering) .jw-display-icon-container:hover,.jwplayer:not(.jw-flag-touch):not(.jw-error):not(.jw-state-error):not(.jw-state-buffering) .jw-media:hover~.jw-controls .jw-display-icon-display{background-color:#212121}.jwplayer:not(.jw-flag-touch):not(.jw-error):not(.jw-state-error):not(.jw-state-buffering) .jw-display-icon-container:hover .jw-icon{color:#fff}.jw-color-active,:not(.jw-flag-touch) .jw-color-active-hover:hover{color:#fff;stroke:#fff;border-color:#fff}.jw-color-inactive,:not(.jw-flag-touch) .jw-color-inactive-hover:hover{color:#cecece;stroke:#cecece;border-color:#cecece}.jw-option{color:#cecece}.jw-option.jw-active-option{color:#fff;background-color:hsla(0,0%,100%,.1)}:not(.jw-flag-touch) .jw-option:hover{color:#fff}.jwplayer{width:100%;font-size:16px;position:relative;display:block;min-height:0;overflow:hidden;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;background-color:#000;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jwplayer *{box-sizing:inherit}.jwplayer.jw-flag-aspect-mode{height:auto!important}.jwplayer.jw-flag-aspect-mode .jw-aspect{display:block}.jwplayer .jw-aspect{display:none}.jwplayer.jw-no-focus:focus,.jwplayer .jw-swf{outline:none}.jwplayer.jw-ie:focus{outline:1px dotted #585858}.jw-media,.jw-preview{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jw-media{overflow:hidden;cursor:pointer}.jw-plugin{position:absolute;bottom:2.5em}.jw-plugin .jw-banner{max-width:100%;opacity:0;cursor:pointer;position:absolute;margin:auto auto 0;left:0;right:0;bottom:0;display:block}.jw-captions,.jw-preview,.jw-title{pointer-events:none}.jw-logo,.jw-media{pointer-events:all}.jwplayer video{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;margin:auto;background:transparent}.jwplayer video::-webkit-media-controls-start-playback-button{display:none}.jwplayer.jw-stretch-uniform video{-o-object-fit:contain;object-fit:contain}.jwplayer.jw-stretch-none video{-o-object-fit:none;object-fit:none}.jwplayer.jw-stretch-fill video{-o-object-fit:cover;object-fit:cover}.jwplayer.jw-stretch-exactfit video{-o-object-fit:fill;object-fit:fill}.jw-preview{position:absolute;display:none;opacity:1;visibility:visible;width:100%;height:100%;background:#000 no-repeat 50% 50%}.jw-error .jw-preview,.jwplayer .jw-preview{background-size:contain}.jw-stretch-none .jw-preview{background-size:auto auto}.jw-stretch-fill .jw-preview{background-size:cover}.jw-stretch-exactfit .jw-preview{background-size:100% 100%}.jw-title{display:none;position:absolute;top:0;width:100%;font-size:.875em;height:8em;background:-webkit-linear-gradient(top,#000,#000 18%,transparent);background:linear-gradient(180deg,#000 0,#000 18%,transparent)}.jw-title-primary,.jw-title-secondary{padding:.75em 1.5em;min-height:2.5em;width:100%;color:#fff;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.jw-title-primary{font-weight:700}.jw-title-secondary{margin-top:-.5em}.jw-flag-small-player .jw-title{background:-webkit-linear-gradient(top,rgba(51,51,51,.75),rgba(51,51,51,0));background:linear-gradient(180deg,rgba(51,51,51,.75),rgba(51,51,51,0));height:auto;padding:16px 0}.jw-flag-small-player .jw-title-primary,.jw-flag-small-player .jw-title-secondary{min-height:inherit;padding:0 16px}.jw-flag-small-player .jw-title-secondary{display:none;margin-top:5px}.jw-captions{position:absolute;width:100%;height:100%;text-align:center;display:none;max-height:calc(100% - 40px);letter-spacing:normal;word-spacing:normal;text-transform:none;text-indent:0;text-decoration:none;pointer-events:none;overflow:hidden;top:0}.jw-captions.jw-captions-enabled{display:block}.jw-captions-window{display:none;padding:.25em;border-radius:.25em}.jw-captions-text,.jw-captions-window.jw-captions-window-active{display:inline-block}.jw-captions-text{color:#fff;background-color:#000;word-wrap:normal;word-break:normal;white-space:pre-line;font-style:normal;font-weight:400;text-align:center;text-decoration:none}.jw-text-track-display{font-size:inherit;line-height:1.5}.jw-text-track-cue{background-color:rgba(0,0,0,.5);color:#fff;padding:.1em .3em}.jwplayer video::-webkit-media-controls{-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.jwplayer video::-webkit-media-text-track-container{max-height:calc(100% - 40px);line-height:normal}.jwplayer video::-webkit-media-text-track-display{min-width:-webkit-min-content}.jwplayer video::cue{background-color:rgba(0,0,0,.5)}.jwplayer video::-webkit-media-controls-panel-container{display:none}.jw-logo{position:absolute;margin:.75em;cursor:pointer;pointer-events:all;background-repeat:no-repeat;background-size:contain;top:auto;right:auto;left:auto;bottom:auto}.jw-flag-audio-player .jw-logo{display:none}.jw-logo-top-right{top:0;right:0}.jw-logo-top-right.jw-below{top:3.5em}.jw-logo-top-left{top:0;left:0}.jw-logo-bottom-left{bottom:0;left:0}.jw-logo-bottom-right{bottom:0;right:0}.jw-state-setup{background-color:transparent}.jw-state-setup .jw-logo{visibility:hidden}body .jw-error .jw-title,body .jwplayer.jw-state-error .jw-title{display:block}body .jw-error .jw-title .jw-title-primary,body .jwplayer.jw-state-error .jw-title .jw-title-primary{white-space:normal}body .jw-error .jw-title .jw-title-secondary,body .jwplayer.jw-state-error .jw-title .jw-title-secondary{display:block}body .jw-error{font-size:16px;background-color:#000;color:#fff;width:100%;height:100%;display:table;opacity:1;position:relative}.jw-state-idle .jw-preview,.jw-state-idle .jw-title,.jwplayer.jw-state-complete:not(.jw-flag-casting):not(.jw-flag-audio-player) .jw-preview,.jwplayer.jw-state-complete:not(.jw-flag-casting):not(.jw-flag-audio-player) .jw-title,body .jw-error .jw-preview,body .jw-error .jw-title,body .jwplayer.jw-state-error .jw-preview,body .jwplayer.jw-state-error .jw-title{display:block}.jw-state-idle .jw-captions,.jwplayer.jw-state-complete .jw-captions,body .jwplayer.jw-state-error .jw-captions{display:none}.jw-state-idle video::-webkit-media-text-track-container,.jwplayer.jw-state-complete video::-webkit-media-text-track-container,body .jwplayer.jw-state-error video::-webkit-media-text-track-container{display:none}.jwplayer.jw-flag-skin-loading .jw-captions,.jwplayer.jw-flag-skin-loading .jw-controls,.jwplayer.jw-flag-skin-loading .jw-media,.jwplayer.jw-flag-skin-loading .jw-preview,.jwplayer.jw-flag-skin-loading .jw-rightclick,.jwplayer.jw-flag-skin-loading .jw-title{display:none}.jwplayer.jw-flag-fullscreen{width:100%!important;height:100%!important;top:0;right:0;bottom:0;left:0;z-index:1000;margin:0;position:fixed}body .jwplayer.jw-flag-flash-blocked .jw-title{display:block}.jwplayer.jw-flag-controls-hidden .jw-captions{max-height:none}.jwplayer.jw-flag-controls-hidden video::-webkit-media-text-track-container{max-height:none}.jwplayer.jw-flag-controls-hidden .jw-media{cursor:default}.jw-flag-audio-player:not(.jw-flag-flash-blocked) .jw-media{visibility:hidden}.jw-flag-audio-player .jw-title{background:none}.jw-flag-audio-player object{min-height:45px}",""])},,,,,,function(e,t,i){var n=i(179);"string"==typeof n&&(n=[["all-players",n,""]]),i(49).style(n,"all-players"),n.locals&&(e.exports=n.locals)}]),webpackJsonpjwplayer([1],{41:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,o,l=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),c=n(i(140));r=[i(3),i(6),i(2),i(1)],void 0===(o=function(n,e,o,r){var a=function(e){var t=o.bounds(e),i=window.pageXOffset;return i&&o.isAndroid()&&0<=document.body.parentElement.getBoundingClientRect().left&&(t.left-=i,t.right-=i),t};return function(){function i(e,t){s(this,i),r.extend(this,n),this.className=e+" jw-background-color jw-reset",this.orientation=t,this.dragStartListener=this.dragStart.bind(this),this.dragMoveListener=this.dragMove.bind(this),this.dragEndListener=this.dragEnd.bind(this),this.tapListener=this.tap.bind(this)}return l(i,[{key:"setup",value:function(){this.el=o.createElement((0,c["default"])(this.className,"jw-slider-"+this.orientation)),this.elementRail=this.el.getElementsByClassName("jw-slider-container")[0],this.elementBuffer=this.el.getElementsByClassName("jw-buffer")[0],this.elementProgress=this.el.getElementsByClassName("jw-progress")[0],this.elementThumb=this.el.getElementsByClassName("jw-knob")[0],this.userInteract=new e(this.element(),{preventScrolling:!0}),this.userInteract.on("dragStart",this.dragStartListener),this.userInteract.on("drag",this.dragMoveListener),this.userInteract.on("dragEnd",this.dragEndListener),this.userInteract.on("tap click",this.tapListener)}},{key:"dragStart",value:function(){this.trigger("dragStart"),this.railBounds=a(this.elementRail)}},{key:"dragEnd",value:function(e){this.dragMove(e),this.trigger("dragEnd")}},{key:"dragMove",value:function(e){var t=this.railBounds=this.railBounds?this.railBounds:a(this.elementRail),i=void 0,n=void 0;"horizontal"===this.orientation?n=(i=e.pageX)<t.left?0:i>t.right?100:100*o.between((i-t.left)/t.width,0,1):n=(i=e.pageY)>=t.bottom?0:i<=t.top?100:100*o.between((t.height-(i-t.top))/t.height,0,1);var r=this.limit(n);return this.render(r),this.update(r),!1}},{key:"tap",value:function(e){this.railBounds=a(this.elementRail),this.dragMove(e)}},{key:"limit",value:function(e){return e}},{key:"update",value:function(e){this.trigger("update",{percentage:e})}},{key:"render",value:function(e){e=Math.max(0,Math.min(e,100)),"horizontal"===this.orientation?(this.elementThumb.style.left=e+"%",this.elementProgress.style.width=e+"%"):(this.elementThumb.style.bottom=e+"%",this.elementProgress.style.height=e+"%")}},{key:"updateBuffer",value:function(e){this.elementBuffer.style.width=e+"%"}},{key:"element",value:function(){return this.el}}]),i}()}.apply(t,r))||(e.exports=o)},42:function(e,t,i){function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,c=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();n=[i(3),i(64),i(2),i(1)],void 0===(r=function(o,a,t,s){return function(){function r(e,t,i){l(this,r),s.extend(this,o),this.el=document.createElement("div");var n="jw-icon jw-icon-tooltip "+e+" jw-button-color jw-reset";i||(n+=" jw-hidden"),a(this.el,t),this.el.className=n,this.container=document.createElement("div"),this.container.className="jw-overlay jw-reset",this.openClass="jw-open",this.componentType="tooltip",this.el.appendChild(this.container)}return c(r,[{key:"addContent",value:function(e){this.content&&this.removeContent(),this.content=e,this.container.appendChild(e)}},{key:"removeContent",value:function(){this.content&&(this.container.removeChild(this.content),this.content=null)}},{key:"hasContent",value:function(){return!!this.content}},{key:"element",value:function(){return this.el}},{key:"openTooltip",value:function(e){this.trigger("open-"+this.componentType,e,{isOpen:!0}),this.isOpen=!0,t.toggleClass(this.el,this.openClass,this.isOpen)}},{key:"closeTooltip",value:function(e){this.trigger("close-"+this.componentType,e,{isOpen:!1}),this.isOpen=!1,t.toggleClass(this.el,this.openClass,this.isOpen)}},{key:"toggleOpenState",value:function(e){this.isOpen?this.closeTooltip(e):this.openTooltip(e)}}]),r}()}.apply(t,n))||(e.exports=r)},43:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var i=0<arguments.length&&void 0!==e?arguments[0]:"";return'<div class="jw-display-icon-container jw-display-icon-'+i+' jw-background-color jw-reset"><div class="jw-icon jw-icon-'+i+' jw-button-color jw-reset" role="button" tabindex="0" aria-label="'+(1<arguments.length&&void 0!==t?arguments[1]:"")+'"></div></div>'}},64:function(e,t){var i,n;i=[],void 0===(n=function(){return function(e,t){e&&t&&(e.setAttribute("aria-label",t),e.setAttribute("role","button"),e.setAttribute("tabindex","0"))}}.apply(t,i))||(e.exports=n)},70:function(e,t,i){var n,r;n=[i(6)],void 0===(r=function(r){return function(e,t,i){var n=document.createElement("div");return n.className="jw-icon jw-icon-inline jw-button-color jw-reset "+e,n.setAttribute("role","button"),n.setAttribute("tabindex","0"),i&&n.setAttribute("aria-label",i),n.style.display="none",t&&new r(n).on("click tap",function(){t()}),{element:function(){return n},toggle:function(e){e?this.show():this.hide()},show:function(){n.style.display=""},hide:function(){n.style.display="none"}}}}.apply(t,n))||(e.exports=r)},71:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,l,u=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),d=n(i(136));s=[i(42),i(2),i(1),i(6)],void 0===(l=function(t,s,l,c){return function(){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"setup",value:function(e,t,i){i=i||{},this.iconUI||(this.iconUI=new c(this.el,{useHover:!0,directSelect:!0}),this.toggleValueListener=this.toggleValue.bind(this),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.select.bind(this)),this.reset(),e=l.isArray(e)?e:[],s.toggleClass(this.el,"jw-hidden",e.length<2);var n=2<e.length||2===e.length&&i&&!1===i.isToggle,r=!n&&2===e.length;if(s.toggleClass(this.el,"jw-toggle",r||i.isToggle),s.toggleClass(this.el,"jw-button-color",!r),n){s.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener);var o=(0,d["default"])(e),a=s.createElement(o);this.addContent(a),this.contentUI=new c(this.content).on("click tap",this.selectListener)}else r&&this.iconUI.on("click tap",this.toggleValueListener);this.selectItem(t)}},{key:"toggleValue",value:function(){this.trigger("toggleValue")}},{key:"select",value:function(e){if(e.target.parentElement===this.content){var t=s.classList(e.target),i=l.find(t,function(e){return 0===e.indexOf("jw-item")});i&&(this.trigger("select",parseInt(i.split("-")[2])),this.closeTooltipListener())}}},{key:"selectItem",value:function(e){if(this.content)for(var t=0;t<this.content.children.length;t++)s.toggleClass(this.content.children[t],"jw-active-option",e===t);s.toggleClass(this.el,"jw-off",0===e)}},{key:"reset",value:function(){s.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}}]),e}()}.apply(t,s))||(e.exports=l)},72:function(e,t,s){function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,n,c=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();i=[s(4),s(5),s(3),s(22),s(2),s(1),s(70),s(126),s(128),s(127),s(132),s(131),s(129),s(130),s(175)],void 0===(n=function(v,e,r,y,w,o,b,_,x,k,j,T,E,C,S){var i=w.isMobile()?4e3:2e3,P=function(){return{reason:"interaction"}},a=!1;return function(){function n(e,t){var i=this;l(this,n),o.extend(this,r),this.activeTimeout=-1,this.context=e,this.controlbar=null,this.displayContainer=null,this.dock=null,this.enabled=!0,this.instreamState=null,this.keydownCallback=null,this.mute=null,this.nextUpToolTip=null,this.playerContainer=t,this.rightClickMenu=null,this.showing=!1,this.unmuteCallback=null,this.div=null,this.right=null,this.activeListeners={mousemove:function(){return clearTimeout(i.activeTimeout)},mouseout:function(){return i.userActive()}},this.dimensions={},a||(a=!0,s(184))}return c(n,[{key:"enable",value:function(o,a){function r(e){var t=0,i=a.get("duration"),n=a.get("position");"DVR"===a.get("streamType")&&(t=i,i=Math.max(n,y.dvrSeekLimit));var r=w.between(n+e,t,i);o.seek(r,P())}function s(e){var t=w.between(a.get("volume")+e,0,100);o.setVolume(t)}var l=this,e=this.context.createElement("div");e.className="jw-controls jw-reset",this.div=e;var t=a.get("touchMode");if(!this.displayContainer){var i=new k,n=new j(a,o),c=new T(a),u=new E(a,o);c.on("click tap",function(){l.trigger(v.JWPLAYER_DISPLAY_CLICK),l.userActive(1e3),o.play(P())}),w.isChrome()&&!t&&(c.el.style.pointerEvents="none",c.icon.style.pointerEvents="none"),i.addButton(n),i.addButton(c),i.addButton(u),this.div.appendChild(i.element()),this.displayContainer=i}var d=this.context.createElement("div");d.className="jw-controls-right jw-reset",e.appendChild(d),this.right=d;var h=this.dock=new x(a);this.right.appendChild(h.element()),t?w.addClass(this.playerContainer,"jw-flag-touch"):(this.rightClickMenu=new S,a.change("flashBlocked",function(e,t){t?l.rightClickMenu.destroy():l.rightClickMenu.setup(e,l.playerContainer,l.playerContainer)}));var p=this.controlbar=new _(o,a);if(p.on(v.JWPLAYER_USER_ACTION,function(){return l.userActive()}),a.get("nextUpDisplay")&&!p.nextUpToolTip){var f=new C(a,o,this.playerContainer);f.on("all",this.trigger,this),f.setup(this.context),p.nextUpToolTip=f,this.div.appendChild(f.element())}if(this.addActiveListeners(p.element()),this.div.appendChild(p.element()),a.get("autostartMuted")){var g=function(){return l.unmuteAutoplay(o,a)};this.mute=b("jw-autostart-mute jw-off",g,a.get("localization").volume),this.mute.show(),this.div.appendChild(this.mute.element()),p.renderVolume(!0,a.get("volume")),w.addClass(this.playerContainer,"jw-flag-autostart"),a.on("change:autostartFailed change:autostartMuted change:mute",g),this.unmuteCallback=g}var m=function(e){if(e.ctrlKey||e.metaKey)return!0;switch(l.instreamState||l.userActive(),e.keyCode){case 27:o.setFullscreen(!1);break;case 13:case 32:o.play(P());break;case 37:l.instreamState||r(-5);break;case 39:l.instreamState||r(5);break;case 38:s(10);break;case 40:s(-10);break;case 67:var t=o.getCaptionsList().length;if(t){var i=(o.getCurrentCaptions()+1)%t;o.setCurrentCaptions(i)}break;case 77:o.setMute();break;case 70:o.setFullscreen();break;default:if(48<=e.keyCode&&e.keyCode<=59){var n=(e.keyCode-48)/10*a.get("duration");o.seek(n,P())}}return/13|32|37|38|39|40/.test(e.keyCode)?(e.preventDefault(),!1):void 0};this.playerContainer.addEventListener("keydown",m),this.keydownCallback=m,this.userActive(),this.playerContainer.appendChild(this.div)}},{key:"disable",value:function(){this.off(),clearTimeout(this.activeTimeout),this.div.parentNode&&(w.removeClass(this.playerContainer,"jw-flag-touch"),this.playerContainer.removeChild(this.div)),this.controlbar&&this.removeActiveListeners(this.controlbar.element()),this.rightClickMenu&&this.rightClickMenu.destroy(),this.keydownCallback&&this.playerContainer.removeEventListener("keydown",this.keydownCallback);var e=this.nextUpToolTip;e&&e.destroy()}},{key:"controlbarHeight",value:function(){return this.dimensions.cbHeight||(this.dimensions.cbHeight=this.controlbar.element().clientHeight),this.dimensions.cbHeight}},{key:"element",value:function(){return this.div}},{key:"logoContainer",value:function(){return this.right}},{key:"resize",value:function(){this.dimensions={}}},{key:"unmuteAutoplay",value:function(e,t){var i=!t.get("autostartFailed"),n=t.get("mute");i?n=!1:t.set("playOnViewable",!1),this.unmuteCallback&&(t.off("change:autostartFailed change:autostartMuted change:mute",this.unmuteCallback),this.unmuteCallback=null),t.set("autostartFailed",void 0),t.set("autostartMuted",void 0),e.setMute(n),this.controlbar.renderVolume(n,t.get("volume")),this.mute.hide(),w.removeClass(this.playerContainer,"jw-flag-autostart")}},{key:"addActiveListeners",value:function(e){e&&!w.isMobile()&&(e.addEventListener("mousemove",this.activeListeners.mousemove),e.addEventListener("mouseout",this.activeListeners.mouseout))}},{key:"removeActiveListeners",value:function(e){e&&(e.removeEventListener("mousemove",this.activeListeners.mousemove),e.removeEventListener("mouseout",this.activeListeners.mouseout))}},{key:"userActive",value:function(e){var t=this;clearTimeout(this.activeTimeout),this.activeTimeout=setTimeout(function(){return t.userInactive()},e||i),this.showing||(w.removeClass(this.playerContainer,"jw-flag-user-inactive"),this.showing=!0,this.trigger("userActive"))}},{key:"userInactive",value:function(){clearTimeout(this.activeTimeout),this.showing=!1,this.controlbar&&this.controlbar.closeMenus({type:"userInactive"}),w.addClass(this.playerContainer,"jw-flag-user-inactive"),this.trigger("userInactive")}}]),n}()}.apply(t,i))||(e.exports=n)},84:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLAYBACK_RATE_ICON='<svg viewBox="112 -44 1024 684"><g><path d="M735.2,41.2c-143,0-258.8,115.9-258.8,258.8s115.9,258.8,258.8,258.8S994,443,994,300S878.1,41.2,735.2,41.2z M899.9,323.5H758.7h-47.1v-47.1V135.3h47.1v141.2h141.2V323.5z"/><rect x="288.1" y="135.3" width="141.2" height="47.1"/><rect x="194" y="276.5" width="188.2" height="47.1"/><rect x="288.1" y="417.7" width="141.2" height="47.1"/></g></svg>'},121:function(e,t,i){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,a=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();n=[i(1),i(2),i(35)],void 0===(r=function(n,t,i){var r=function(){function i(e,t){o(this,i),this.time=e,this.text=t,this.el=document.createElement("div"),this.el.className="jw-cue jw-reset"}return a(i,[{key:"align",value:function(e){if("%"===this.time.toString().slice(-1))this.pct=this.time;else{var t=this.time/e*100;this.pct=t+"%"}this.el.style.left=this.pct}}]),i}();return{loadChapters:function(e){t.ajax(e,this.chaptersLoaded.bind(this),this.chaptersFailed,{plainText:!0})},chaptersLoaded:function(e){var t=i(e.responseText);n.isArray(t)&&(n.each(t,this.addCue,this),this.drawCues())},chaptersFailed:function(){},addCue:function(e){this.cues.push(new r(e.begin,e.text))},drawCues:function(){var t=this,i=this._model.get("duration");return!i||i<=0?void this._model.once("change:duration",this.drawCues,this):void n.each(this.cues,function(e){e.align(i),e.el.addEventListener("mouseover",function(){t.activeCue=e}),e.el.addEventListener("mouseout",function(){t.activeCue=null}),t.elementRail.appendChild(e.el)})},resetChapters:function(){n.each(this.cues,function(e){e.el.parentNode&&e.el.parentNode.removeChild(e.el)}),this.cues=[]}}}.apply(t,n))||(e.exports=r)},122:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o,a,u=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),d=function s(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:s(r,t,i)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(i):void 0},h=n(i(139));o=[i(71),i(2)],void 0===(a=function(e,s){return function(){function a(e,t,i){l(this,a);var n=c(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,!1)),r=(0,h["default"])(i),o=s.createElement(r);return n.defaultIcon=o.getElementsByClassName("jw-menu-selection-icon")[0],n.selectionText=o.getElementsByClassName("jw-menu-selection-text")[0],n.el.insertBefore(o,n.container),s.addClass(n.el,"jw-selection-menu"),s.removeClass(n.el,"jw-icon"),n}return r(a,e),u(a,[{key:"setup",value:function(e,t,i){this.list=e,this.defaultIndex=i&&-1<i.defaultIndex?i.defaultIndex:-1,d(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setup",this).call(this,e,t,i),s.addClass(this.el,"jw-button-color")}},{key:"selectItem",value:function(e){d(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"selectItem",this).call(this,e);var t=e!==this.defaultIndex&&-1!==e;t&&(this.selectionText.textContent=this.list[e].label),s.toggleClass(this.defaultIcon,"jw-hidden",t),s.toggleClass(this.selectionText,"jw-hidden",!t)}}]),a}()}.apply(t,o))||(e.exports=a)},123:function(e,t,i){var n,r;n=[i(1),i(2),i(35)],void 0===(r=function(o,t,i){function n(e){this.begin=e.begin,this.end=e.end,this.img=e.text}return{loadThumbnails:function(e){e&&(this.vttPath=e.split("?")[0].split("/").slice(0,-1).join("/"),this.individualImage=null,t.ajax(e,this.thumbnailsLoaded.bind(this),this.thumbnailsFailed.bind(this),{plainText:!0}))},thumbnailsLoaded:function(e){var t=i(e.responseText);o.isArray(t)&&(o.each(t,function(e){this.thumbnails.push(new n(e))},this),this.drawCues())},thumbnailsFailed:function(){},chooseThumbnail:function(e){var t=o.sortedIndex(this.thumbnails,{end:e},o.property("end"));t>=this.thumbnails.length&&(t=this.thumbnails.length-1);var i=this.thumbnails[t].img;return i.indexOf("://")<0&&(i=this.vttPath?this.vttPath+"/"+i:i),i},loadThumbnail:function(e){var t=this.chooseThumbnail(e),i={display:"block",margin:"0 auto",backgroundPosition:"0 0"};if(0<t.indexOf("#xywh"))try{var n=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(t);t=n[1],i.backgroundPosition=-1*n[2]+"px "+-1*n[3]+"px",i.width=n[4],i.height=n[5]}catch(r){return}else this.individualImage||(this.individualImage=new Image,this.individualImage.onload=o.bind(function(){this.individualImage.onload=null,this.timeTip.image({width:this.individualImage.width,height:this.individualImage.height}),this.timeTip.setWidth(this.individualImage.width)},this),this.individualImage.src=t);return i.backgroundImage='url("'+t+'")',i},showThumbnail:function(e){this.thumbnails.length<1||this.timeTip.image(this.loadThumbnail(e))},resetThumbnails:function(){this.timeTip.image({backgroundImage:"",width:0,height:0}),this.thumbnails=[]}}}.apply(t,n))||(e.exports=r)},124:function(e,t,i){function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n,r,u=function a(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:a(r,t,i)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(i):void 0},d=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();n=[i(1),i(2),i(22),i(6),i(41),i(42),i(121),i(123)],void 0===(r=function(g,m,v,y,e,t,i,n){function r(){return{reason:"interaction"}}var o=function(){function e(){return s(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),d(e,[{key:"setup",value:function(){this.text=document.createElement("span"),this.text.className="jw-text jw-reset",this.img=document.createElement("div"),this.img.className="jw-reset",this.containerWidth=0,this.textLength=0,this.dragJustReleased=!1;var e=document.createElement("div");e.className="jw-time-tip jw-background-color jw-reset",e.appendChild(this.img),e.appendChild(this.text),this.addContent(e)}},{key:"image",value:function(e){m.style(this.img,e)}},{key:"update",value:function(e){this.text.textContent=e}},{key:"getWidth",value:function(){return this.containerWidth||this.setWidth(),this.containerWidth}},{key:"setWidth",value:function(e){return e?void(this.containerWidth=e+16):void(this.container&&(this.containerWidth=m.bounds(this.container).width))}},{key:"resetWidth",value:function(){this.containerWidth=0}}]),e}(),a=function(){function n(e,t){s(this,n);var i=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"jw-slider-time","horizontal"));return i._model=e,i._api=t,i.timeTip=new o("jw-tooltip-time",null,!0),i.timeTip.setup(),i.cues=[],i.seekThrottled=g.throttle(i.performSeek,400),i.mobileHoverDistance=5,i.setup(),i}return c(n,e),d(n,[{key:"setup",value:function(){u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setup",this).apply(this,arguments),this._model.on("duration",
this.onDuration,this).change("playlistItem",this.onPlaylistItem,this).change("position",this.onPosition,this).change("buffer",this.onBuffer,this),this.elementRail.appendChild(this.timeTip.element()),this.elementUI=new y(this.el,{useHover:!0,useMove:!0}).on("drag move over",this.showTimeTooltip.bind(this),this).on("dragEnd out",this.hideTimeTooltip.bind(this),this)}},{key:"limit",value:function(e){if(this.activeCue&&g.isNumber(this.activeCue.pct))return this.activeCue.pct;var t=this._model.get("duration");if("DVR"!==this._model.get("streamType"))return e;var i=(1-e/100)*t,n=this._model.get("position");return 100-100*Math.min(i,Math.max(v.dvrSeekLimit,n))/t}},{key:"update",value:function(e){this.seekTo=e,this.seekThrottled(),u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"update",this).apply(this,arguments)}},{key:"dragStart",value:function(){this._model.set("scrubbing",!0),u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dragStart",this).apply(this,arguments)}},{key:"dragEnd",value:function(){u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dragEnd",this).apply(this,arguments),this._model.set("scrubbing",!1),this.dragJustReleased=!0}},{key:"onSeeked",value:function(){this._model.get("scrubbing")&&this.performSeek()}},{key:"onBuffer",value:function(e,t){this.updateBuffer(t)}},{key:"onPosition",value:function(e,t){return this.dragJustReleased?void(this.dragJustReleased=!1):void this.updateTime(t,e.get("duration"))}},{key:"onDuration",value:function(e,t){this.updateTime(e.get("position"),t)}},{key:"updateTime",value:function(e,t){var i=0;if(t){var n=this._model.get("streamType");"DVR"===n?i=(t-e)/t*100:"VOD"===n&&(i=e/t*100)}this.render(i)}},{key:"onPlaylistItem",value:function(e,t){if(t){this.reset(),e.mediaModel.on("seeked",this.onSeeked,this);var i=t.tracks;g.each(i,function(e){e&&e.kind&&"thumbnails"===e.kind.toLowerCase()?this.loadThumbnails(e.file):e&&e.kind&&"chapters"===e.kind.toLowerCase()&&this.loadChapters(e.file)},this)}}},{key:"performSeek",value:function(){var e,t=this.seekTo,i=this._model.get("duration"),n=this._model.get("streamType");0===i?this._api.play(r()):"DVR"===n?(e=(100-t)/100*i,this._api.seek(e,r())):(e=t/100*i,this._api.seek(Math.min(e,i-.25),r()))}},{key:"showTimeTooltip",value:function(e){var t=this._model.get("duration");if(0!==t){var i,n=this._model.get("containerWidth"),r=m.bounds(this.elementRail),o=e.pageX?e.pageX-r.left:e.x,a=(o=m.between(o,0,r.width))/r.width,s=t*a;if(t<0&&(s=t-s),"touch"===y.getPointerType(e.sourceEvent)&&(this.activeCue=g.reduce(this.cues,function(e,t){return Math.abs(o-parseInt(t.pct)/100*r.width)<this.mobileHoverDistance?t:e}.bind(this),void 0)),this.activeCue)i=this.activeCue.text;else{var l=!0;i=m.timeFormat(s,l),t<0&&s>v.dvrSeekLimit&&(i="Live")}var c=this.timeTip;c.update(i),this.textLength!==i.length&&(this.textLength=i.length,c.resetWidth()),this.showThumbnail(s),m.addClass(c.el,"jw-open");var u=c.getWidth(),d=r.width/100,h=n-r.width,p=0;h<u&&(p=(u-h)/(200*d));var f=100*Math.min(1-p,Math.max(p,a)).toFixed(3);m.style(c.el,{left:f+"%"})}}},{key:"hideTimeTooltip",value:function(){m.removeClass(this.timeTip.el,"jw-open")}},{key:"reset",value:function(){this.resetChapters(),this.resetThumbnails(),this.timeTip.resetWidth(),this.textLength=0}}]),n}();return g.extend(a.prototype,i,n),a}.apply(t,n))||(e.exports=r)},125:function(e,t,i){function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r,o,c=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();r=[i(42),i(41),i(6),i(2)],void 0===(o=function(e,o,a){return function(){function r(e,t,i){s(this,r);var n=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,i,!0));return n._model=e,n.volumeSlider=new o("jw-slider-volume jw-volume-tip","vertical"),n.volumeSlider.setup(),n.addContent(n.volumeSlider.element()),n.volumeSlider.on("update",function(e){this.trigger("update",e)},n),new a(n.el,{useHover:!0,directSelect:!0}).on("click",n.toggleValue,n).on("tap",n.toggleOpenState,n).on("over",n.openTooltip,n).on("out",n.closeTooltip,n),n._model.on("change:volume",n.onVolume,n),n}return n(r,e),c(r,[{key:"toggleValue",value:function(){this.trigger("toggleValue")}}]),r}()}.apply(t,r))||(e.exports=o)},126:function(e,t,i){function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,a=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),R=i(84);n=[i(2),i(1),i(3),i(22),i(6),i(64),i(41),i(124),i(71),i(122),i(125),i(70)],void 0===(r=function(g,m,v,y,w,o,b,_,i,x,k,j){function T(e,t){var i=document.createElement("span");return i.className="jw-text jw-reset "+e,t&&i.setAttribute("role",t),i}function E(e,t){return new i(e,t)}function C(e,t){if(!g.isChrome()||g.isIOS())return j("jw-icon-airplay jw-off",e,t.airplay);var i=t.cast,n=document.createElement("button","google-cast-button");n.className="jw-button-color jw-icon-inline",o(n,i);var r=document.createElement("div");return r.className="jw-reset jw-icon-cast",r.style.display="none",r.style.cursor="pointer",r.appendChild(n),{element:function(){return r},toggle:function(e){e?this.show():this.hide()},show:function(){r.style.display=""},hide:function(){r.style.display="none"},button:n}}function S(){return{reason:"interaction"}}function P(e,t){var i=document.createElement("div");return i.className="jw-group jw-controlbar-"+e+"-group jw-reset",m.each(t,function(e){e.element&&(e=e.element()),i.appendChild(e)}),i}return function(){function f(e,t){A(this,f),m.extend(this,v),this._api=e,this._model=t,this._isMobile=g.isMobile(),this._localization=t.get("localization"),this.nextUpToolTip=null;var i=new _(t,e),n=void 0,r=void 0,o=void 0,a=this._localization.play,s=this._localization.next,l=this._localization.volume,c=this._localization.rewind;this._isMobile||((n=new b("jw-slider-volume","horizontal")).setup(),r=new k(t,"jw-icon-volume",l)),t.get("sdkplatform")||g.isIOS(8)||g.isIOS(9)||(o=j("jw-icon-volume",e.setMute,l));var u=j("jw-icon-next",e.next.bind(this),s);t.get("nextUpDisplay")&&new w(u.element(),{useHover:!0,directSelect:!0}).on("over",function(){var e=this.nextUpToolTip;e&&e.toggle(!0,"hover")},this).on("out",function(){var e=this.nextUpToolTip;if(e){if(e.nextUpSticky)return;e.toggle(!1)}},this),this.elements={alt:T("jw-text-alt","status"),play:j("jw-icon-playback",e.play.bind(this,S()),a),rewind:j("jw-icon-rewind",this.rewind.bind(this),c),next:u,elapsed:T("jw-text-elapsed","timer"),countdown:T("jw-text-countdown","timer"),time:i,duration:T("jw-text-duration","timer"),durationLeft:T("jw-text-duration","timer"),hd:E("jw-icon-hd",this._localization.hd),cc:E("jw-icon-cc",this._localization.cc),audiotracks:E("jw-icon-audio-tracks",this._localization.audioTracks),playbackrates:new x("jw-icon-playback-rate",this._localization.playbackRates,R.PLAYBACK_RATE_ICON),mute:o,volume:n,volumetooltip:r,cast:C(e.castToggle,this._localization),fullscreen:j("jw-icon-fullscreen",e.setFullscreen,this._localization.fullscreen)},this.layout={left:[this.elements.play,this.elements.rewind,this.elements.elapsed,this.elements.durationLeft,this.elements.countdown],center:[this.elements.time,this.elements.alt],right:[this.elements.duration,this.elements.next,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.playbackrates,this.elements.mute,this.elements.cast,this.elements.volume,this.elements.volumetooltip,this.elements.fullscreen]},this.menus=m.compact([this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.playbackrates,this.elements.volumetooltip]),this.layout.left=m.compact(this.layout.left),this.layout.center=m.compact(this.layout.center),this.layout.right=m.compact(this.layout.right),this.el=document.createElement("div"),this.el.className="jw-controlbar jw-background-color jw-reset",this.elements.left=P("left",this.layout.left),this.elements.center=P("center",this.layout.center),this.elements.right=P("right",this.layout.right),this.el.appendChild(this.elements.left),this.el.appendChild(this.elements.center),this.el.appendChild(this.elements.right),this.elements.play.show(),this.elements.fullscreen.show(),this.elements.mute&&this.elements.mute.show(),t.change("volume",this.onVolume,this),t.change("mute",this.onMute,this),t.change("playlistItem",this.onPlaylistItem,this),t.change("mediaModel",this.onMediaModel,this),t.change("castAvailable",this.onCastAvailable,this),t.change("castActive",this.onCastActive,this),t.change("duration",this.onDuration,this),t.change("position",this.onElapsed,this),t.change("fullscreen",this.onFullscreen,this),t.change("captionsList",this.onCaptionsList,this),t.change("captionsIndex",this.onCaptionsIndex,this),t.change("streamType",this.onStreamTypeChange,this),t.change("nextUp",this.onNextUp,this),t.change("cues",this.addCues,this),t.change("altText",this.setAltText,this),this.elements.volume&&this.elements.volume.on("update",function(e){var t=e.percentage;this._api.setVolume(t)},this),this.elements.volumetooltip&&(this.elements.volumetooltip.on("update",function(e){var t=e.percentage;this._api.setVolume(t)},this),this.elements.volumetooltip.on("toggleValue",function(){this._api.setMute()},this)),this.elements.cast.button&&new w(this.elements.cast.button).on("click tap",function(){this._model.set("castClicked",!0)},this),this.elements.hd.on("select",function(e){this._model.getVideo().setCurrentQuality(e)},this),this.elements.hd.on("toggleValue",function(){this._model.getVideo().setCurrentQuality(0===this._model.getVideo().getCurrentQuality()?1:0)},this),this.elements.cc.on("select",function(e){this._api.setCurrentCaptions(e)},this),this.elements.cc.on("toggleValue",function(){var e=this._model.get("captionsIndex");this._api.setCurrentCaptions(e?0:1)},this),this.elements.audiotracks.on("select",function(e){this._model.getVideo().setCurrentAudioTrack(e)},this);var d=t.get("playbackRateControls");if(d){var h=d.indexOf(this._model.get("playbackRate")),p=d.map(function(e){return{label:e+"x",rate:e}});this.elements.playbackrates.setup(p,h,{defaultIndex:d.indexOf(1),isToggle:!1}),t.change("streamType provider",this.togglePlaybackRateControls,this),t.change("playbackRate",this.onPlaybackRate,this),this.elements.playbackrates.on("select",function(e){this._model.setPlaybackRate(d[e])},this),this.elements.playbackrates.on("toggleValue",function(){var e=d.indexOf(this._model.get("playbackRate"));this._model.setPlaybackRate(d[e?0:1])},this)}new w(this.elements.duration).on("click tap",function(){if("DVR"===this._model.get("streamType")){var e=this._model.get("position");this._api.seek(Math.max(y.dvrSeekLimit,e),S())}},this),new w(this.elements.durationLeft).on("click tap",function(){if("DVR"===this._model.get("streamType")){var e=this._model.get("position");this._api.seek(Math.max(y.dvrSeekLimit,e))}},this),new w(this.el).on("click tap drag",function(){this.trigger("userAction")},this),m.each(this.menus,function(e){e.on("open-tooltip",this.closeMenus,this)},this)}return a(f,[{key:"onCaptionsList",value:function(e,t){var i=e.get("captionsIndex");this.elements.cc.setup(t,i,{isToggle:!0})}},{key:"onCaptionsIndex",value:function(e,t){this.elements.cc.selectItem(t)}},{key:"togglePlaybackRateControls",value:function(e){var t=e.getVideo().supportsPlaybackRate&&"LIVE"!==e.get("streamType")&&1<e.get("playbackRateControls").length;g.toggleClass(this.elements.playbackrates.el,"jw-hidden",!t)}},{key:"onPlaybackRate",value:function(e,t){this.elements.playbackrates.selectItem(e.get("playbackRateControls").indexOf(t))}},{key:"onPlaylistItem",value:function(){this.elements.audiotracks.setup()}},{key:"onMediaModel",value:function(e,t){t.on("change:levels",function(e,t){this.elements.hd.setup(t,e.get("currentLevel"))},this),t.on("change:currentLevel",function(e,t){this.elements.hd.selectItem(t)},this),t.on("change:audioTracks",function(e,t){var i=m.map(t,function(e){return{label:e.name}});this.elements.audiotracks.setup(i,e.get("currentAudioTrack"),{isToggle:!1})},this),t.on("change:currentAudioTrack",function(e,t){this.elements.audiotracks.selectItem(t)},this)}},{key:"onVolume",value:function(e,t){this.renderVolume(e.get("mute"),t)}},{key:"onMute",value:function(e,t){this.renderVolume(t,e.get("volume"))}},{key:"renderVolume",value:function(e,t){this.elements.mute&&g.toggleClass(this.elements.mute.element(),"jw-off",e),this.elements.volume&&this.elements.volume.render(e?0:t),this.elements.volumetooltip&&(this.elements.volumetooltip.volumeSlider.render(e?0:t),g.toggleClass(this.elements.volumetooltip.element(),"jw-off",e))}},{key:"onCastAvailable",value:function(e,t){this.elements.cast.toggle(t)}},{key:"onCastActive",value:function(e,t){this.elements.fullscreen.toggle(!t),this.elements.cast.button&&g.toggleClass(this.elements.cast.button,"jw-off",!t)}},{key:"onElapsed",value:function(e,t){var i=void 0,n=void 0,r=e.get("duration");"DVR"===e.get("streamType")?i=n="-"+g.timeFormat(-r):(i=g.timeFormat(t),n=g.timeFormat(r-t)),this.elements.elapsed.textContent=i,this.elements.countdown.textContent=n}},{key:"onDuration",value:function(e,t){var i=void 0;i="DVR"===e.get("streamType")?"Live":g.timeFormat(t),this.elements.duration.textContent=i,this.elements.durationLeft.textContent=i}},{key:"onFullscreen",value:function(e,t){g.toggleClass(this.elements.fullscreen.element(),"jw-off",t)}},{key:"element",value:function(){return this.el}},{key:"setAltText",value:function(e,t){this.elements.alt.textContent=t}},{key:"addCues",value:function(e,t){this.elements.time&&(m.each(t,function(e){this.elements.time.addCue(e)},this),this.elements.time.drawCues())}},{key:"closeMenus",value:function(t){m.each(this.menus,function(e){t&&t.target===e.el||e.closeTooltip(t)})}},{key:"rewind",value:function(){var e=this._model.get("position"),t=this._model.get("duration"),i=e-10,n=0;"DVR"===this._model.get("streamType")&&(n=t),this._api.seek(Math.max(i,n),S())}},{key:"onStreamTypeChange",value:function(e){var t=e.get("streamType");this.elements.rewind.toggle("LIVE"!==t),"DVR"===t&&(this.elements.duration.textContent="Live",this.elements.durationLeft.textContent="Live");var i=e.get("duration");this.onDuration(e,i)}},{key:"onNextUp",value:function(e,t){this.elements.next.toggle(!!t)}}]),f}()}.apply(t,n))||(e.exports=r)},127:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o,a,s=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),l=n(i(134));o=[i(2)],void 0===(a=function(t){return function(){function e(){r(this,e),this.el=t.createElement((0,l["default"])()),this.container=this.el.querySelector(".jw-display-controls")}return s(e,[{key:"addButton",value:function(e){this.container.appendChild(e.el)}},{key:"element",value:function(){return this.el}}]),e}()}.apply(t,o))||(e.exports=a)},128:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,o,c=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),u=n(i(135));r=[i(2),i(1),i(6)],void 0===(o=function(o,r,n){function a(e){return o.hasClass(e.target,"jw-dock-button")?e.target:o.hasClass(e.target,"jw-dock-text")?e.target.parentElement.parentElement:e.target.parentElement}function s(e){var t=(0,u["default"])(e);return o.createElement(t)}return function(){function i(e){var r=this;l(this,i),this.model=e;var t=this.model.get("dock");this.el=s(t),new n(this.el).on("click tap",this.click,this),this.model.on("change:dock",function(e,t){var i=s(t);o.emptyElement(r.el);for(var n=i.childNodes.length;n--;)r.el.appendChild(i.firstChild)},this)}return c(i,[{key:"click",value:function(e){var t=a(e).getAttribute("button"),i=this.model.get("dock"),n=r.findWhere(i,{id:t});n&&n.callback&&n.callback(e)}},{key:"element",value:function(){return this.el}}]),i}()}.apply(t,r))||(e.exports=o)},129:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,o,s=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),l=n(i(43));r=[i(2),i(6)],void 0===(o=function(r,o){return function(){function n(e,t){a(this,n);var i=r.createElement((0,l["default"])("next",e.get("localization").next));this.iconUI=new o(i).on("click tap",function(){t.next()}),e.change("nextUp",function(e,t){i.style.display=t?"":"none"}),this.el=i}return s(n,[{key:"element",value:function(){return this.el}}]),n}()}.apply(t,r))||(e.exports=o)},130:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,o,u=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),d=n(i(137));r=[i(14),i(6),i(1),i(3),i(2)],void 0===(o=function(r,o,a,s,l){return function(){function n(e,t,i){c(this,n),a.extend(this,s),this._model=e,this._api=t,this._playerElement=i,this.nextUpText=e.get("localization").nextUp,this.nextUpClose=e.get("localization").nextUpClose,this.state="tooltip",this.enabled=!1,this.shown=!1,this.reset()}return u(n,[{key:"setup",value:function(e){this.container=e.createElement("div"),this.container.className="jw-nextup-container jw-reset";var t=l.createElement((0,d["default"])());this.addContent(t),this.closeButton=this.content.querySelector(".jw-nextup-close"),this.closeButton.setAttribute("aria-label",this.nextUpClose),this.tooltip=this.content.querySelector(".jw-nextup-tooltip");var i=this._model;this.enabled=!1,i.on("change:nextUp",this.onNextUp,this),i.change("duration",this.onDuration,this),i.change("position",this.onElapsed,this),i.change("streamType",this.onStreamType,this),i.change("mediaModel",this.onMediaModel,this),new o(this.closeButton,{directSelect:!0}).on("click tap",function(){this.nextUpSticky=!1,this.toggle(!1)},this),new o(this.tooltip).on("click tap",this.click,this)}},{key:"loadThumbnail",value:function(e){return this.nextUpImage=new Image,this.nextUpImage.onload=function(){this.nextUpImage.onload=null}.bind(this),{backgroundImage:'url("'+(this.nextUpImage.src=e)+'")'}}},{key:"click",value:function(){this.reset(),this._api.next()}},{key:"toggle",value:function(e,t){if(this.enabled&&(r.toggleClass(this.container,"jw-nextup-sticky",!!this.nextUpSticky),this.shown!==e)){this.shown=e,r.toggleClass(this.container,"jw-nextup-container-visible",e),r.toggleClass(this._playerElement,"jw-flag-nextup",e);var i=this._model.get("nextUp");e&&i&&this.trigger("nextShown",{mode:i.mode,ui:"nextup",itemsShown:[i],feedData:i.feedData,reason:t})}}},{key:"setNextUpItem",value:function(i){var n=this;setTimeout(function(){if(n.thumbnail=n.content.querySelector(".jw-nextup-thumbnail"),r.toggleClass(n.thumbnail,"jw-nextup-thumbnail-visible",!!i.image),i.image){var e=n.loadThumbnail(i.image);l.style(n.thumbnail,e)}n.header=n.content.querySelector(".jw-nextup-header"),n.header.innerText=n.nextUpText,n.title=n.content.querySelector(".jw-nextup-title");var t=i.title;n.title.innerText=t?l.createElement(t).textContent:""},500)}},{key:"onNextUp",value:function(e,t){this.reset(),t&&(this.enabled=!(!t.title&&!t.image),this.enabled&&(t.showNextUp||(this.nextUpSticky=!1,this.toggle(!1)),this.setNextUpItem(t)))}},{key:"onDuration",value:function(e,t){if(t){var i=l.seconds(e.get("nextupoffset")||-10);i<0&&(i+=t),this.offset=i}}},{key:"onMediaModel",value:function(e,t){t.change("state",function(e,t){"complete"===t&&this.toggle(!1)},this)}},{key:"onElapsed",value:function(e,t){var i=this.nextUpSticky;if(this.enabled&&!1!==i){var n=t>=this.offset;n&&void 0===i?(this.nextUpSticky=n,this.toggle(n,"time")):!n&&i&&this.reset()}}},{key:"onStreamType",value:function(e,t){"VOD"!==t&&(this.nextUpSticky=!1,this.toggle(!1))}},{key:"element",value:function(){return this.container}},{key:"addContent",value:function(e){this.content&&this.removeContent(),this.content=e,this.container.appendChild(e)}},{key:"removeContent",value:function(){this.content&&(this.container.removeChild(this.content),this.content=null)}},{key:"reset",value:function(){this.nextUpSticky=void 0,this.toggle(!1)}},{key:"destroy",value:function(){this.off(),this._model.off(null,null,this)}}]),n}()}.apply(t,r))||(e.exports=o)},131:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,o,d=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),h=n(i(43));r=[i(2),i(3),i(6),i(1)],void 0===(o=function(a,s,l,c){return function(){function o(e){var t=this;u(this,o),c.extend(this,s);var n=e.get("localization"),i=a.createElement((0,h["default"])("display",n.playback)),r=i.getElementsByClassName("jw-icon-display")[0];i.style.cursor="pointer",this.icon=r,this.el=i,this.iconUI=new l(this.el).on("click tap",function(e){t.trigger(e.type)}),e.on("change:state",function(e,t){var i=void 0;switch(t){case"buffering":i=n.buffer;break;case"playing":i=n.pause;break;case"paused":i=n.playback;break;case"complete":i=n.replay;break;default:i=""}""===i?r.removeAttribute("aria-label"):r.setAttribute("aria-label",i)})}return d(o,[{key:"element",value:function(){return this.el}}]),o}()}.apply(t,r))||(e.exports=o)},132:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,o,s=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),l=n(i(43));r=[i(2),i(6)],void 0===(o=function(t,i){return function(){function e(r,o){a(this,e),this.el=t.createElement((0,l["default"])("rewind",r.get("localization").playback)),this.iconUI=new i(this.el).on("click tap",function(){var e=r.get("position"),t=r.get("duration"),i=e-10,n=0;"DVR"===r.get("streamType")&&(n=t),o.seek(Math.max(i,n))})}return s(e,[{key:"element",value:function(){return this.el}}]),e}()}.apply(t,r))||(e.exports=o)},133:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o,a,s=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),u=n(i(138));o=[i(2),i(6),i(28)],void 0===(a=function(l,n,c){return function(){function e(){r(this,e)}return s(e,[{key:"buildArray",value:function(){var e=c.split("+"),t=e[0],i={items:[{title:"Powered by JW Player "+t,featured:!0,showLogo:!0,link:"https://jwplayer.com/learn-more"}]},n=0<t.indexOf("-"),r=e[1];if(n&&r){var o=r.split(".");i.items.push({title:"build: ("+o[0]+"."+o[1]+")",link:"#"})}var a=this.model.get("provider");if(a&&0<=a.name.indexOf("flash")){var s="Flash Version "+l.flashVersion();i.items.push({title:s,link:"http://www.adobe.com/software/flash/about/"})}return i}},{key:"rightClick",value:function(e){return this.lazySetup(),!this.mouseOverContext&&(this.hideMenu(),this.showMenu(e),!1)}},{key:"getOffset",value:function(e){for(var t=e.target,i=e.offsetX||e.layerX,n=e.offsetY||e.layerY;t!==this.playerElement;)i+=t.offsetLeft,n+=t.offsetTop,t=t.parentNode;return{x:i,y:n}}},{key:"showMenu",value:function(e){var t=this,i=this.getOffset(e);return this.el.style.left=i.x+"px",this.el.style.top=i.y+"px",l.addClass(this.playerElement,"jw-flag-rightclick-open"),l.addClass(this.el,"jw-open"),clearTimeout(this._menuTimeout),this._menuTimeout=setTimeout(function(){return t.hideMenu()},3e3),!1}},{key:"hideMenu",value:function(){return this.elementUI.off("out",this.hideMenu,this),this.mouseOverContext?void this.elementUI.on("out",this.hideMenu,this):(l.removeClass(this.playerElement,"jw-flag-rightclick-open"),void l.removeClass(this.el,"jw-open"))}},{key:"lazySetup",value:function(){var e=(0,u["default"])(this.buildArray());if(this.el){if(this.html!==e){this.html=e;var t=l.createElement(e);l.emptyElement(this.el);for(var i=t.childNodes.length;i--;)this.el.appendChild(t.firstChild)}}else this.html=e,this.el=l.createElement(this.html),this.layer.appendChild(this.el),this.hideMenuHandler=this.hideMenu.bind(this),this.addOffListener(this.playerElement),this.addOffListener(document),this.elementUI=new n(this.el,{useHover:!0}).on("over",function(){this.mouseOverContext=!0},this).on("out",function(){this.mouseOverContext=!1},this)}},{key:"setup",value:function(e,t,i){this.playerElement=t,this.model=e,this.mouseOverContext=!1,this.layer=i,t.oncontextmenu=this.rightClick.bind(this)}},{key:"addOffListener",value:function(e){e.addEventListener("mousedown",this.hideMenuHandler),e.addEventListener("touchstart",this.hideMenuHandler),e.addEventListener("pointerdown",this.hideMenuHandler)}},{key:"removeOffListener",value:function(e){e.removeEventListener("mousedown",this.hideMenuHandler),e.removeEventListener("touchstart",this.hideMenuHandler),e.removeEventListener("pointerdown",this.hideMenuHandler)}},{key:"destroy",value:function(){clearTimeout(this._menuTimeout),this.el&&(this.hideMenu(),this.elementUI.off(),this.removeOffListener(this.playerElement),this.removeOffListener(document),this.hideMenuHandler=null,this.el=null),this.playerElement&&(this.playerElement.oncontextmenu=null,this.playerElement=null),this.model&&(this.model=null)}}]),e}()}.apply(t,o))||(e.exports=a)},134:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return'<div class="jw-display jw-reset"><div class="jw-display-container jw-reset"><div class="jw-display-controls jw-reset"></div></div></div>'}},135:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return'<div class="jw-dock jw-reset">'+(0<arguments.length&&void 0!==e?arguments[0]:[]).map(function(e){return i(e.btnClass,e.id,e.img,e.tooltip)}).join("")+"</div>"};var i=function(e,t,i,n){return'<div class="jw-dock-button jw-background-color jw-reset '+(0<arguments.length&&void 0!==e?arguments[0]:"")+'" button="'+(1<arguments.length&&void 0!==t?arguments[1]:"")+'"><div class="jw-icon jw-dock-image jw-button-color jw-reset" '+(i?'style="background-image: url('+i+')"':"")+" "+(n?'aria-label="'+n+'" role="button" tabindex="0"':"")+'></div><div class="jw-arrow jw-reset"></div>'+(n?r(n):"")+"</div>"},r=function(e){return'<div class="jw-overlay jw-background-color jw-reset"><span class="jw-text jw-dock-text jw-reset">'+e+"</span></div>"}},136:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return'<ul class="jw-menu jw-background-color jw-reset">'+(0<arguments.length&&void 0!==e?arguments[0]:[]).map(function(e,t){return i(t,e.label)}).join("")+"</ul>"};var i=function(e,t){return"<li class='jw-text jw-option jw-item-"+(0<arguments.length&&void 0!==e?arguments[0]:"")+" jw-reset'>"+(1<arguments.length&&void 0!==t?arguments[1]:"")+"</li>"}},137:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,i){return'<div class="jw-nextup jw-reset"><div class="jw-nextup-tooltip jw-reset"><div class="jw-nextup-header jw-reset">'+(0<arguments.length&&void 0!==e?arguments[0]:"")+'</div><div class="jw-nextup-body jw-background-color jw-reset"><div class="jw-nextup-thumbnail jw-reset"></div><div class="jw-nextup-title jw-reset">'+(1<arguments.length&&void 0!==t?arguments[1]:"")+'</div></div></div><button class="jw-icon jw-nextup-close jw-reset" aria-label="'+(2<arguments.length&&void 0!==i?arguments[2]:"")+'"></button></div>'}},138:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=e.items;return'<div class="jw-rightclick jw-reset"><ul class="jw-reset">'+(void 0===t?[]:t).map(function(e){return i(e.link,e.title,e.featured,e.showLogo)}).join("")+"</ul></div>"};var i=function(e,t,i,n){return'<li class="jw-reset '+(i?"jw-featured":"")+'"><a href="'+(0<arguments.length&&void 0!==e?arguments[0]:"")+'" class="jw-reset" target="_blank">'+(n?'<span class="jw-icon jw-rightclick-logo jw-reset"></span>':"")+(1<arguments.length&&void 0!==t?arguments[1]:"")+"</a></li>"}},139:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return'<div class="jw-selection-menu-icon-container"><div class="jw-menu-selection-icon jw-reset">'+e+'</div><div class="jw-menu-selection-text jw-reset"></div></div>'}},140:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return'<div class="'+(0<arguments.length&&void 0!==e?arguments[0]:"")+" "+(1<arguments.length&&void 0!==t?arguments[1]:"")+' jw-reset" aria-hidden="true"><div class="jw-slider-container jw-reset"><div class="jw-rail jw-reset"></div><div class="jw-buffer jw-reset"></div><div class="jw-progress jw-reset"></div><div class="jw-knob jw-reset"></div></div></div>'}},175:function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a,s,l=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),c=function u(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:u(r,t,i)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(i):void 0};a=[i(133)],void 0===(s=function(e){return function(){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,e),l(i,[{key:"buildArray",value:function(){var e=c(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"buildArray",this).call(this);if(this.model.get("abouttext")){e.items[0].showLogo=!1,e.items.push(e.items.shift());var t={title:this.model.get("abouttext"),link:this.model.get("aboutlink")||e.items[0].link};e.items.unshift(t)}return e}}]),i}()}.apply(t,a))||(e.exports=s)},178:function(e,t,i){(e.exports=i(82)()).push([e.id,"@font-face{font-family:jw-icons;src:url("+i(181)+') format("woff"),url('+i(180
)+') format("truetype")}.jw-icon{font-family:jw-icons;font-style:normal;font-weight:400;text-transform:none;background-color:transparent;font-variant:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.jw-icon-audio-tracks:before{content:"\\E600"}.jw-icon-buffer:before{content:"\\E601"}.jw-icon-airplay.jw-off:before,.jw-icon-airplay:before{content:"\\E901"}.jw-icon-cc:before{content:"\\E605"}.jw-icon-error:before{content:"\\E607"}.jw-icon-fullscreen:before{content:"\\E608"}.jw-icon-fullscreen.jw-off:before{content:"\\E613"}.jw-icon-hd:before{content:"\\E60A"}.jw-rightclick-logo:before{content:"\\E60B"}.jw-icon-next:before{content:"\\E60C"}.jw-icon-pause:before{content:"\\E60D"}.jw-icon-play:before{content:"\\E60E"}.jw-icon-replay:before{content:"\\E610"}.jw-icon-volume:before{content:"\\E612"}.jw-icon-volume.jw-off:before{content:"\\E611"}.jw-icon-close:before{content:"\\E615"}.jw-icon-rewind:before{content:"\\E900";font-size:24px}.jw-overlays{cursor:auto;pointer-events:none}.jw-controls{overflow:hidden;pointer-events:none}.jw-controls .jw-controls-right{position:absolute;top:0;right:0;left:0;bottom:2.5em}.jw-controls,.jw-overlays{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jw-flag-small-player .jw-controls{text-align:center}.jw-icon-playback:before{content:"\\E60E"}.jw-text{height:1em;font-family:Arial,Helvetica,sans-serif;font-size:.75em;font-style:normal;font-weight:400;color:#fff;text-align:center;font-variant:normal;font-stretch:normal}.jw-autostart-mute,.jw-controlbar,.jw-display-icon-container,.jw-display-icon-container .jw-icon,.jw-dock .jw-dock-button,.jw-nextup-container,.jw-overlays .jw-plugin,.jw-skip{pointer-events:all}.jw-error .jw-display-icon-container,.jwplayer .jw-display-icon-container{width:auto;height:auto;box-sizing:content-box}.jw-display{display:table;height:100%;padding:2.5em 0;position:relative;width:100%}.jw-flag-dragging .jw-display{display:none}.jw-display-container{display:table-cell;height:100%;text-align:center;vertical-align:middle}.jw-display-controls{display:inline-block}.jwplayer .jw-display-icon-container{float:left}.jw-display-icon-container{display:inline-block;margin:0 .25em}.jw-display-icon-container .jw-icon{cursor:pointer;width:75px;height:75px;line-height:75px;text-align:center}.jw-display-icon-container .jw-icon.jw-icon-rewind:before{padding:.2em .05em}.jw-display-icon-container .jw-icon:before{font-size:33px;position:relative}.jw-state-idle .jw-display-icon-container .jw-icon.jw-icon-display:before,.jw-state-paused .jw-display-icon-container .jw-icon.jw-icon-display:before{left:1px}.jw-breakpoint-0 .jw-display-icon-next,.jw-breakpoint-0 .jw-display-icon-rewind{display:none}.jw-breakpoint-0 .jw-display .jw-icon{height:44px;line-height:44px;width:44px}.jw-breakpoint-0 .jw-display .jw-icon:before{font-size:22px}.jw-breakpoint-1 .jw-display .jw-icon{height:55px;line-height:55px;width:55px}.jw-breakpoint-1 .jw-display .jw-icon:before{font-size:22px}.jw-breakpoint-1 .jw-display .jw-icon.jw-icon-rewind:before{font-size:33px}.jw-breakpoint-3 .jw-display .jw-icon{height:77px;line-height:77px;width:77px}.jw-breakpoint-3 .jw-display .jw-icon:before{font-size:38.5px}.jw-breakpoint-4 .jw-display .jw-icon,.jw-breakpoint-5 .jw-display .jw-icon,.jw-breakpoint-6 .jw-display .jw-icon,.jw-breakpoint-7 .jw-display .jw-icon{height:88px;line-height:88px;width:88px}.jw-breakpoint-4 .jw-display .jw-icon:before,.jw-breakpoint-5 .jw-display .jw-icon:before,.jw-breakpoint-6 .jw-display .jw-icon:before,.jw-breakpoint-7 .jw-display .jw-icon:before{font-size:44px}.jw-controlbar{display:table;position:absolute;left:0;bottom:0;height:2.5em;width:100%;padding:0 .5em}.jw-slider-horizontal{background-color:transparent}.jw-group{display:table-cell}.jw-controlbar-center-group{padding:0 .5em;position:relative;width:100%}.jw-controlbar-center-group .jw-slider-time,.jw-controlbar-center-group .jw-text-alt{padding:0}.jw-controlbar-center-group .jw-text-alt{display:none;position:absolute;top:-1px;bottom:0;width:100%;height:auto;line-height:2.5em;margin:.5em 0;padding-right:.5em;overflow:hidden;text-align:left;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.jw-controlbar-left-group,.jw-controlbar-right-group{white-space:nowrap}.jw-icon-inline,.jw-icon-tooltip,.jw-slider-horizontal,.jw-text-countdown,.jw-text-duration,.jw-text-elapsed{display:inline-block;height:2.5em;position:relative;line-height:2.5em;vertical-align:middle;cursor:pointer;padding:0 .5em}.jw-selection-menu{padding:0 .25em}.jw-icon-inline,.jw-icon-tooltip{min-width:1.5625em;text-align:center}.jw-icon-display:hover,.jw-icon-inline:hover,.jw-icon-tooltip:hover,.jw-knob:hover,.jw-option:before:hover{color:#fff}.jw-controlbar-left-group .jw-text-duration{display:none}.jw-icon-playback{min-width:2.25em}.jw-icon-volume{min-width:1.75em;text-align:left}.jw-time-tip{line-height:1em;pointer-events:none}.jw-icon-cast{display:none;margin:0;padding:0}.jw-icon-cast button{background-color:transparent;border:none;cursor:pointer;font-size:inherit;width:2.25em}.jw-breakpoint-0 .jw-controlbar .jw-text-duration,.jw-breakpoint-0 .jw-controlbar .jw-text-elapsed,.jw-breakpoint-1:not(.jw-flag-time-slider-above) .jw-controlbar .jw-text-duration,.jw-breakpoint-1:not(.jw-flag-time-slider-above) .jw-controlbar .jw-text-elapsed,.jw-flag-small-player:not(.jw-flag-audio-player) .jw-group>.jw-icon-next,.jw-flag-small-player:not(.jw-flag-audio-player) .jw-group>.jw-icon-playback,.jw-flag-small-player:not(.jw-flag-audio-player) .jw-group>.jw-icon-rewind,.jw-icon-inline.jw-icon-volume,.jw-slider-volume.jw-slider-horizontal,.jwplayer .jw-text-countdown{display:none}.jw-flag-ads-vpaid:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar,.jw-flag-autostart:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar,.jw-flag-user-inactive.jw-state-buffering:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar,.jw-flag-user-inactive.jw-state-playing:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar{visibility:hidden;pointer-events:none;opacity:0}.jw-dock{clear:right;margin:.75em;display:block;opacity:1}.jw-dock:after{content:"";clear:both;display:block}.jw-dock-button{cursor:pointer;float:right;height:2.5em;margin:.5em;position:relative;width:2.5em}.jw-dock-button .jw-arrow{bottom:-.2em;width:.5em;height:.2em;left:50%;margin-left:-.25em}.jw-dock-button .jw-arrow,.jw-dock-button .jw-overlay{visibility:hidden;opacity:0;pointer-events:none;position:absolute}.jw-dock-button .jw-overlay{top:2.5em;right:0;margin-top:.25em;padding:.5em;white-space:nowrap}.jw-dock-button:hover .jw-arrow,.jw-dock-button:hover .jw-overlay{visibility:visible;opacity:1}.jw-dock-image{width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;opacity:.75}.jw-flag-small-player .jw-dock{margin:0}.jw-flag-small-player .jw-dock-button{margin:1px;height:44px;width:44px}.jw-breakpoint-1 .jw-dock{padding:0 1%}.jw-breakpoint-1 .jw-dock-button{margin:2% 1%}.jw-slider-container{height:1em;width:100%;position:relative;-ms-touch-action:none;touch-action:none}.jw-buffer,.jw-progress,.jw-rail{position:absolute;cursor:pointer}.jw-progress{background-color:#fff}.jw-rail{background-color:hsla(0,0%,100%,.2)}.jw-buffer{background-color:hsla(0,0%,100%,.3)}.jw-cue{cursor:pointer;height:.3em;background-color:rgba(33,33,33,.9);border-radius:25%;width:.5em}.jw-cue,.jw-knob{position:absolute}.jw-knob{pointer-events:none;width:.6em;height:.6em;border-radius:.3em}.jw-slider-horizontal{height:.3em;padding:0}.jw-slider-horizontal.jw-slider-volume{width:4em;margin:0 .5em}.jw-slider-horizontal .jw-rail{width:100%}.jw-slider-horizontal .jw-knob{top:-.15em;margin-left:-.3em}.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-rail{height:.3em}.jw-slider-vertical{padding:.66666667em 1em;position:absolute}.jw-slider-vertical .jw-buffer,.jw-slider-vertical .jw-progress,.jw-slider-vertical .jw-rail{bottom:0;height:100%;left:0;right:0;margin:0 auto}.jw-slider-vertical .jw-progress,.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-slider-container{width:.3em}.jw-slider-vertical .jw-slider-container{height:4em}.jw-slider-vertical .jw-knob{right:0;left:-.15em;margin-bottom:-.3em}.jw-slider-time{width:100%}.jw-tooltip-time{position:absolute}.jw-slider-volume .jw-buffer{display:none}.jwplayer .jw-rightclick{display:none;position:absolute;white-space:nowrap}.jwplayer .jw-rightclick.jw-open{display:block}.jwplayer .jw-rightclick ul{list-style:none;font-weight:700;border-radius:.15em;margin:0;border:1px solid #444;padding:0}.jwplayer .jw-rightclick ul li{background-color:#000;border-bottom:1px solid #444;margin:0}.jwplayer .jw-rightclick ul li .jw-rightclick-logo{font-size:2em;color:#ff0147;vertical-align:middle;padding-right:.3em;margin-right:.3em;border-right:1px solid #444}.jwplayer .jw-rightclick ul li a{color:#fff;text-decoration:none;padding:1em;display:block;font-size:.6875em;line-height:1em;border:0}.jwplayer .jw-rightclick ul li:last-child{border-bottom:none}.jwplayer .jw-rightclick ul li:hover{background-color:#1a1a1a;cursor:pointer}.jwplayer .jw-rightclick ul .jw-featured{background-color:#252525;vertical-align:middle}.jwplayer .jw-rightclick ul .jw-featured a{color:#777}.jw-icon-tooltip.jw-open .jw-overlay{opacity:1;visibility:visible}.jw-overlay:before{position:absolute;top:0;bottom:0;left:-50%;width:100%;background-color:transparent;content:" "}.jw-slider-time .jw-overlay:before{height:1em;top:auto}.jw-time-tip,.jw-volume-tip,.jwplayer .jw-menu{position:relative;left:-50%;margin:0}.jw-volume-tip{width:100%;height:100%;display:block}.jw-time-tip{text-align:center;font-family:inherit;bottom:1.25em;padding:.5em;border-radius:.3em}.jw-time-tip .jw-text{color:#fff;line-height:1em}.jw-controlbar .jw-overlay{margin:0;position:absolute;bottom:2.5em;left:50%;opacity:0;visibility:hidden}.jw-controlbar .jw-overlay .jw-contents{position:relative}.jw-controlbar .jw-option{position:relative;white-space:nowrap;cursor:pointer;list-style:none;height:1.5em;font-family:inherit;line-height:1.5em;padding:0 .5em;font-size:.8em;margin:0}.jw-controlbar .jw-option:before{padding-right:.125em}.jw-selection-menu{display:inline-block;width:2.5em;height:2.5em}.jw-selection-menu .jw-selection-menu-icon-container{pointer-events:none;height:inherit}.jw-selection-menu .jw-menu-selection-text{vertical-align:baseline;font-size:.75em;height:100%;line-height:3.335em;text-align:center}.jw-selection-menu .jw-menu-selection-icon{height:100%}.jw-selection-menu .jw-menu-selection-icon svg{height:100%;width:100%}.jw-skip{cursor:default;position:absolute;float:right;display:inline-block;right:.75em;bottom:3em;padding:.5em}.jw-skip.jw-skippable{cursor:pointer}.jw-skip .jw-skip-icon{display:none;margin-left:-.75em}.jw-skip .jw-skip-icon:before{content:"\\E60C"}.jw-skip .jw-skip-icon,.jw-skip .jw-text{color:hsla(0,0%,100%,.6);vertical-align:middle;line-height:1.5em;font-size:.7em}.jw-skip.jw-skippable:hover{cursor:pointer}.jw-skip.jw-skippable:hover .jw-skip-icon,.jw-skip.jw-skippable:hover .jw-text{color:#fff}.jw-skip.jw-skippable .jw-skip-icon{display:inline;margin:0}.jw-cast{background-size:cover;display:none;height:100%;position:relative;width:100%}.jw-cast-container{background:-webkit-linear-gradient(top,rgba(25,25,25,.75),rgba(25,25,25,.25),rgba(25,25,25,0));background:linear-gradient(180deg,rgba(25,25,25,.75),rgba(25,25,25,.25),rgba(25,25,25,0));left:0;padding:20px 20px 80px;position:absolute;top:0;width:100%}.jw-cast-text{color:#fff;font-size:1.6em}.jw-breakpoint-0 .jw-cast-text{font-size:1.15em}.jw-breakpoint-1 .jw-cast-text,.jw-breakpoint-2 .jw-cast-text,.jw-breakpoint-3 .jw-cast-text{font-size:1.3em}.jw-nextup-container{background-color:transparent;bottom:2.5em;cursor:pointer;left:0;margin:0 auto;opacity:0;padding:5px .5em;position:absolute;right:0;text-align:right;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);-webkit-transition:all .15s ease;transition:all .15s ease;visibility:hidden;width:100%;pointer-events:none}.jw-flag-small-player .jw-nextup-container{display:none}.jw-nextup-container-visible{opacity:1;-webkit-transform:translateY(5px);-ms-transform:translateY(5px);transform:translateY(5px);visibility:visible}.jw-nextup{border-radius:0;display:inline-block;overflow:hidden;position:relative;max-width:300px;width:100%;pointer-events:all}.jw-nextup-header{background:rgba(33,33,33,.8);box-sizing:border-box;color:#fff;font-size:12px;font-weight:700;line-height:normal;padding:8px}.jw-nextup-body{background:rgba(0,0,0,.8);color:#fff;overflow:hidden}.jw-nextup-thumbnail{background-position:50%;background-size:cover;display:none;float:left;height:60px;width:45%}.jw-nextup-thumbnail-visible{display:block}.jw-nextup-title{box-sizing:border-box;float:left;font-size:12px;font-weight:700;line-height:1.3;overflow:hidden;padding:5px 6px;position:relative;text-overflow:ellipsis;white-space:nowrap;width:100%}.jw-nextup-thumbnail-visible+.jw-nextup-title{height:60px;white-space:normal;width:55%}.jw-nextup-thumbnail-visible+.jw-nextup-title:after{background:-webkit-linear-gradient(top,transparent,#000);background:linear-gradient(-180deg,transparent,#000);bottom:0;content:"";height:30px;left:0;position:absolute;width:100%}.jw-nextup-close{border:none;color:hsla(0,0%,100%,.6);font-size:13px;opacity:0;position:absolute;right:5px;top:6px;-webkit-transition:color .15s ease,opacity .15s ease,visibility .15s ease;transition:color .15s ease,opacity .15s ease,visibility .15s ease;visibility:hidden}.jw-nextup-close:before{content:"\\E615"}.jw-nextup-close:active,.jw-nextup-close:hover{color:#fff}.jw-nextup-sticky .jw-nextup-close{opacity:1;visibility:visible}.jw-autostart-mute{min-width:1.75em;text-align:left;position:absolute;bottom:.5em;right:.5em;height:44px;width:44px;text-align:center}.jw-autostart-mute:before{content:"\\E612"}.jw-autostart-mute.jw-off:before{content:"\\E611"}.jw-autostart-mute:before{background-color:rgba(33,33,33,.8);padding:5px 4px 5px 6px}.jwplayer.jw-flag-autostart:not(.jw-flag-media-audio) .jw-nextup,.jwplayer.jw-flag-autostart:not(.jw-flag-media-audio):not(.jw-state-buffering):not(.jw-state-error):not(.jw-state-complete) .jw-display{display:none}.jw-state-setup .jw-controls{visibility:hidden}.jw-state-idle:not(.jw-flag-cast-available) .jw-display{padding:0}.jwplayer.jw-state-buffering .jw-display-icon-display .jw-icon{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}.jwplayer.jw-state-buffering .jw-display-icon-display .jw-icon:before{content:"\\E601"}@-webkit-keyframes spin{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spin{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.jwplayer.jw-state-buffering .jw-icon-playback:before,.jwplayer.jw-state-playing .jw-display .jw-icon-display:before,.jwplayer.jw-state-playing .jw-icon-playback:before{content:"\\E60D"}.jwplayer.jw-state-paused .jw-autostart-mute{display:none}.jwplayer.jw-state-complete .jw-display .jw-icon-display:before{content:"\\E610"}.jwplayer.jw-state-complete .jw-display .jw-text{display:none}.jw-state-idle .jw-icon-display:before,.jwplayer.jw-state-complete .jw-icon-playback:before,.jwplayer.jw-state-paused .jw-icon-display:before,.jwplayer.jw-state-paused .jw-icon-playback:before{content:"\\E60E"}.jw-state-idle .jw-display-icon-next,.jw-state-idle .jw-display-icon-rewind,.jwplayer.jw-state-buffering .jw-display-icon-next,.jwplayer.jw-state-buffering .jw-display-icon-rewind,.jwplayer.jw-state-complete .jw-display-icon-next,.jwplayer.jw-state-complete .jw-display-icon-rewind,body .jw-error .jw-display-icon-next,body .jw-error .jw-display-icon-rewind,body .jwplayer.jw-state-error .jw-display-icon-next,body .jwplayer.jw-state-error .jw-display-icon-rewind{display:none}body .jw-error .jw-icon-display,body .jwplayer.jw-state-error .jw-icon-display{cursor:default}body .jw-error .jw-icon-display:before,body .jwplayer.jw-state-error .jw-icon-display:before{content:"\\E607"}body .jw-error .jw-icon-container{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-preview{display:none}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-title{padding-top:4px}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-title-primary{width:auto;display:inline-block;padding-right:0}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-title-secondary{width:auto;display:inline-block;padding-left:0}.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-casting):not(.jw-flag-cast-available) .jw-controlbar,body .jwplayer.jw-state-error .jw-controlbar{display:none}.jwplayer.jw-state-playing.jw-flag-user-inactive .jw-display{visibility:hidden;pointer-events:none;opacity:0}.jwplayer.jw-state-buffering .jw-display-icon-display .jw-text,.jwplayer.jw-state-complete .jw-display .jw-text,.jwplayer.jw-state-paused:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting) .jw-display,.jwplayer.jw-state-playing:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting) .jw-display{display:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima) .jw-controlbar{display:table}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jw-flag-small-player .jw-display{padding-top:44px;padding-bottom:66px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jw-state-error .jw-display,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jw-state-idle:not(.jw-flag-cast-available) .jw-display{padding:0}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-controlbar{background:-webkit-linear-gradient(top,transparent,rgba(0,0,0,.25) 30%,rgba(0,0,0,.4) 70%,rgba(0,0,0,.5));background:linear-gradient(180deg,transparent,rgba(0,0,0,.25) 30%,rgba(0,0,0,.4) 70%,rgba(0,0,0,.5));border:none;border-radius:0;background-size:auto;height:44px;width:100%;padding:0 10px;box-shadow:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-controlbar .jw-overlay{bottom:44px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-controlbar .jw-overlay:after{content:"";display:block;height:22px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-state-idle:not(.jw-flag-cast-available) .jw-controls,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-state-playing.jw-flag-user-inactive:not(.jw-flag-casting) .jw-controls{background:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads) .jw-controlbar,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-live) .jw-controlbar{height:66px;padding:22px 0 0}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-group>.jw-icon,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-group>.jw-text{height:44px;line-height:40px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-group>.jw-icon{font-size:20px;padding:0 8px;max-width:44px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-group>.jw-icon:before{background-color:transparent;background:none;background-size:auto;border:none;border-radius:0;box-shadow:none;height:auto;padding:0}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-group .jw-icon-cast button{font-size:inherit;height:36px;margin-bottom:.5em;width:44px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads):not(.jw-flag-live) .jw-controlbar-center-group{height:22px;left:0;padding:0 15px;position:absolute;right:0;top:0;width:100%}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads):not(.jw-flag-live) .jw-controlbar-center-group .jw-slider-horizontal .jw-knob{border-radius:100%;height:16px;margin-left:-8px;margin-top:-8px;width:16px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads):not(.jw-flag-live) .jw-controlbar-left-group{padding-left:0}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads):not(.jw-flag-live) .jw-controlbar-left-group .jw-text-countdown,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads):not(.jw-flag-live) .jw-controlbar-left-group .jw-text-elapsed{padding:0 .5em}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads):not(.jw-flag-live) .jw-controlbar-left-group .jw-text-duration{padding:0 .5em 0 0}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-breakpoint-0 .jw-text-countdown{display:inline-block}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-flag-small-player .jw-text-countdown,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-flag-small-player .jw-text-elapsed{padding-left:15px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-breakpoint-0) .jw-text-duration{display:inline-block}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer:not(.jw-breakpoint-0) .jw-text-duration:before{content:"/";display:inline-block;padding-right:.5em}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-controlbar-right-group{padding-right:6px;text-align:right}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-controlbar-right-group .jw-text-duration{display:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-volume.jw-slider-vertical{padding:.5em}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-volume.jw-slider-horizontal{margin-bottom:2px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-small-player .jw-controlbar .jw-slider-volume.jw-slider-horizontal{display:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time{background:none;background-color:transparent;height:22px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-slider-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:22px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-cue{top:auto}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-buffer,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-knob,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-progress,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-rail{border:none;box-shadow:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-buffer,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-progress,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-rail{height:2px;margin:auto;top:0;bottom:0}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-rail{background-color:hsla(0,0%,100%,.25)}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-buffer{background-color:hsla(0,0%,100%,.5)}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-slider-time .jw-knob{background:none;background-color:#fff;border-radius:100%;box-shadow:0 0 1px 1px rgba(0,0,0,.1);opacity:1;height:16px;margin-left:-8px;margin-top:-8px;top:50%;width:16px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-tooltip-time{bottom:0;height:auto;line-height:normal;padding:0;pointer-events:none;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-tooltip-time .jw-overlay{bottom:22px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-tooltip-time .jw-overlay:after{content:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-tooltip-time .jw-time-tip{bottom:0;border-radius:.3em}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-controlbar,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live .jw-controlbar{padding-right:5px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-controlbar-center-group,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live .jw-controlbar-center-group{height:auto}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-group>.jw-text-alt,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live .jw-group>.jw-text-alt{display:inline-block;margin:0;line-height:44px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads.jw-ie .jw-text-alt,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live.jw-ie .jw-text-alt{top:-1px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-controlbar .jw-overlay:after,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-text-duration,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live .jw-controlbar .jw-overlay:after,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live .jw-text-duration{display:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-nextup-container,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live .jw-nextup-container{bottom:44px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live .jw-controlbar{padding-left:10px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live .jw-text-duration,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-live .jw-text-elapsed{display:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-controlbar{pointer-events:none}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-icon,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-slider-horizontal{pointer-events:all}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads .jw-controlbar-left-group{display:table-cell}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer.jw-flag-ads.jw-flag-small-player .jw-group .jw-icon-playback{display:inline-block}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-plugin{bottom:66px}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-captions,.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer video::-webkit-media-text-track-container{max-height:calc(100% - 64px)}.jw-flag-time-slider-above:not(.jw-flag-ads-googleima).jwplayer .jw-nextup-container{bottom:66px;padding:5px 20px}.jwplayer.jw-flag-casting .jw-cast{display:block}.jwplayer.jw-flag-casting .jw-captions,.jwplayer.jw-flag-casting.jw-flag-airplay-casting .jw-display-icon-container,.jwplayer.jw-flag-casting.jw-flag-airplay-casting .jw-icon-volume,.jwplayer.jw-flag-casting .jw-icon-audio-tracks,.jwplayer.jw-flag-casting .jw-icon-fullscreen,.jwplayer.jw-flag-casting .jw-icon-hd{display:none}.jwplayer.jw-flag-casting.jw-flag-airplay-casting .jw-icon-airplay{color:#fff}.jwplayer.jw-flag-casting .jw-sharing-dock-btn{display:none}.jwplayer.jw-state-paused.jw-flag-casting .jw-display,.jwplayer.jw-state-playing.jw-flag-casting .jw-display{display:table}.jwplayer.jw-flag-cast-available .jw-icon-airplay,.jwplayer.jw-flag-cast-available .jw-icon-cast{display:inline-block}.jwplayer.jw-flag-live .jw-controlbar .jw-slider-time,.jwplayer.jw-flag-live .jw-controlbar .jw-text-countdown,.jwplayer.jw-flag-live .jw-controlbar .jw-text-duration,.jwplayer.jw-flag-live .jw-controlbar .jw-text-elapsed,.jwplayer.jw-flag-live .jw-display-icon-rewind{display:none}.jwplayer.jw-flag-live .jw-controlbar .jw-text-alt{display:inline-block}.jwplayer.jw-flag-live.jw-ie .jw-controlbar-center-group{overflow:hidden}.jwplayer.jw-flag-live.jw-ie .jw-controlbar-center-group .jw-text-alt{display:table}.jwplayer.jw-flag-controls-hidden .jw-dock,.jwplayer.jw-flag-controls-hidden .jw-logo.jw-hide{visibility:hidden;pointer-events:none;opacity:0}.jwplayer.jw-flag-controls-hidden:not(.jw-flag-casting) .jw-logo-top-right{top:0}.jwplayer.jw-flag-controls-hidden .jw-nextup-container,.jwplayer.jw-flag-controls-hidden .jw-plugin{bottom:.5em}.jw-flag-controls-hidden .jw-controlbar,.jw-flag-controls-hidden .jw-display{visibility:hidden;pointer-events:none;opacity:0}.jw-flag-controls-hidden .jw-logo{visibility:visible}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-dock,.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-logo.jw-hide{visibility:hidden;pointer-events:none;opacity:0}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing:not(.jw-flag-casting) .jw-logo-top-right{top:0}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-nextup-container,.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-plugin{bottom:.5em}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-captions{max-height:none}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing video::-webkit-media-text-track-container{max-height:none}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-media{cursor:none;-webkit-cursor-visibility:auto-hide}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing.jw-flag-casting .jw-display{display:table}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing.jw-flag-casting .jw-dock{display:block}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-flag-casting .jw-nextup-container{bottom:2.5em}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-flag-casting.jw-flag-time-slider-above .jw-nextup-container{bottom:66px}.jwplayer.jw-flag-media-audio .jw-autostart-mute,.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-flag-casting.jw-state-idle .jw-nextup-container{display:none}.jw-flag-media-audio .jw-preview{display:block}.jwplayer.jw-flag-ads .jw-autostart-mute,.jwplayer.jw-flag-ads .jw-captions.jw-captions-enabled,.jwplayer.jw-flag-ads .jw-dock,.jwplayer.jw-flag-ads .jw-logo,.jwplayer.jw-flag-ads .jw-nextup-container,.jwplayer.jw-flag-ads .jw-preview{display:none}.jwplayer.jw-flag-ads video::-webkit-media-text-track-container{display:none}.jwplayer.jw-flag-ads.jw-flag-small-player .jw-display-icon-display,.jwplayer.jw-flag-ads.jw-flag-small-player .jw-display-icon-next,.jwplayer.jw-flag-ads.jw-flag-small-player .jw-display-icon-rewind{display:none}.jwplayer.jw-flag-ads.jw-flag-small-player.jw-state-buffering .jw-display-icon-display{display:inline-block}.jwplayer.jw-flag-ads.jw-flag-small-player .jw-controlbar-center-group{padding:0}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-cast,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-horizontal,.jwplayer.jw-flag-ads .jw-controlbar .jw-text{display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-fullscreen,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline.jw-icon-volume,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-playback,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-volume,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume.jw-slider-horizontal,.jwplayer.jw-flag-ads .jw-controlbar .jw-text-alt{display:inline-block}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip.jw-icon-volume{display:none}.jwplayer.jw-flag-ads.jw-ie .jw-controlbar-center-group{overflow:hidden}.jwplayer.jw-flag-ads.jw-ie .jw-controlbar-center-group .jw-text-alt{display:table}.jwplayer.jw-flag-ads.jw-flag-ads.jw-flag-touch:not(.jw-flag-ads-vpaid) .jw-controls .jw-controlbar,.jwplayer.jw-flag-ads.jw-flag-ads.jw-flag-touch:not(.jw-flag-ads-vpaid).jw-flag-autostart .jw-controls .jw-controlbar{display:table;pointer-events:all;visibility:visible;opacity:1}.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar{font-size:1em}.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-display-icon-display,.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-display-icon-display .jw-icon-display{pointer-events:none}.jwplayer.jw-flag-ads-googleima.jw-skin-seven .jw-controlbar{font-size:.9em}.jwplayer.jw-flag-ads-vpaid .jw-display-container,.jwplayer.jw-flag-ads-vpaid .jw-skip,.jwplayer.jw-flag-touch.jw-flag-ads-vpaid .jw-display-container,.jwplayer.jw-flag-touch.jw-flag-ads-vpaid .jw-skip{display:none}.jwplayer.jw-flag-ads-vpaid.jw-flag-small-player .jw-controls{background:none}.jwplayer.jw-flag-ads-hide-controls .jw-controls{display:none!important}.jw-flag-overlay-open-related .jw-controls,.jw-flag-overlay-open-related .jw-title,.jw-flag-overlay-open-sharing.jw-flag-small-player .jw-controls,.jw-flag-overlay-open-sharing.jw-flag-small-player .jw-title,.jw-flag-overlay-open-sharing:not(.jw-flag-small-player) .jw-logo-top-right{display:none}.jwplayer.jw-flag-rightclick-open{overflow:visible}.jwplayer.jw-flag-rightclick-open .jw-rightclick{z-index:16777215}body .jwplayer.jw-flag-flash-blocked .jw-controls,body .jwplayer.jw-flag-flash-blocked .jw-overlays,body .jwplayer.jw-flag-flash-blocked .jw-preview{display:none}.jw-flag-touch.jw-breakpoint-4 .jw-controlbar,.jw-flag-touch.jw-breakpoint-4 .jw-plugin,.jw-flag-touch.jw-breakpoint-4 .jw-skip,.jw-flag-touch.jw-breakpoint-5 .jw-controlbar,.jw-flag-touch.jw-breakpoint-5 .jw-plugin,.jw-flag-touch.jw-breakpoint-5 .jw-skip,.jw-flag-touch.jw-breakpoint-6 .jw-controlbar,.jw-flag-touch.jw-breakpoint-6 .jw-plugin,.jw-flag-touch.jw-breakpoint-6 .jw-skip,.jw-flag-touch.jw-breakpoint-7 .jw-controlbar,.jw-flag-touch.jw-breakpoint-7 .jw-plugin,.jw-flag-touch.jw-breakpoint-7 .jw-skip{font-size:1.5em}.jw-flag-touch.jw-breakpoint-4 .jw-captions,.jw-flag-touch.jw-breakpoint-4 .jw-nextup-container,.jw-flag-touch.jw-breakpoint-5 .jw-captions,.jw-flag-touch.jw-breakpoint-5 .jw-nextup-container,.jw-flag-touch.jw-breakpoint-6 .jw-captions,.jw-flag-touch.jw-breakpoint-6 .jw-nextup-container,.jw-flag-touch.jw-breakpoint-7 .jw-captions,.jw-flag-touch.jw-breakpoint-7 .jw-nextup-container{bottom:4.25em}.jw-flag-touch.jw-breakpoint-4 video::-webkit-media-text-track-container,.jw-flag-touch.jw-breakpoint-5 video::-webkit-media-text-track-container,.jw-flag-touch.jw-breakpoint-6 video::-webkit-media-text-track-container,.jw-flag-touch.jw-breakpoint-7 video::-webkit-media-text-track-container{max-height:calc(100% - 60px)}.jw-flag-touch .jw-controlbar .jw-icon-volume{display:inline-block}.jw-flag-touch .jw-display,.jw-flag-touch .jw-display-container,.jw-flag-touch .jw-display-controls{pointer-events:none}.jw-flag-touch.jw-state-paused.jw-flag-dragging .jw-display,.jw-flag-touch.jw-state-paused:not(.jw-breakpoint-1) .jw-display-icon-next,.jw-flag-touch.jw-state-paused:not(.jw-breakpoint-1) .jw-display-icon-rewind,.jw-flag-touch.jw-state-playing:not(.jw-breakpoint-1) .jw-display-icon-next,.jw-flag-touch.jw-state-playing:not(.jw-breakpoint-1) .jw-display-icon-rewind{display:none}.jw-flag-audio-player{background-color:transparent}.jw-flag-audio-player:not(.jw-flag-flash-blocked) .jw-media{visibility:hidden}.jw-flag-audio-player .jw-title{background:none}.jw-flag-audio-player object{min-height:45px}.jw-flag-audio-player .jw-display,.jw-flag-audio-player .jw-dock,.jw-flag-audio-player .jw-nextup-container,.jw-flag-audio-player .jw-preview,.jw-flag-audio-player .jw-title{display:none}.jw-flag-audio-player .jw-controlbar{vertical-align:middle;display:table;height:100%;left:0;bottom:0;margin:0;width:100%;min-width:100%}.jw-flag-audio-player .jw-controlbar .jw-icon-fullscreen,.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip{display:none}.jw-flag-audio-player .jw-controlbar .jw-icon-inline.jw-icon-volume,.jw-flag-audio-player .jw-controlbar .jw-slider-volume.jw-slider-horizontal{display:inline-block}.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip.jw-icon-volume{display:none}.jw-flag-audio-player .jw-icon-inline{height:auto;line-height:normal}.jw-flag-audio-player .jw-group{vertical-align:middle}.jw-flag-audio-player .jw-controlbar-center-group{padding-bottom:2px}.jw-flag-audio-player.jw-flag-small-player .jw-text-duration,.jw-flag-audio-player.jw-flag-small-player .jw-text-elapsed,.jw-hidden{display:none}.jw-controls-right,.jw-display,.jw-dock,.jw-overlay,.jw-plugin-sharing{-webkit-transition:opacity .3s ease,visibility .3s ease;transition:opacity .3s ease,visibility .3s ease}.jw-background-color{-webkit-transition:background-color .3s ease,opacity .3s ease,visibility .3s ease;transition:background-color .3s ease,opacity .3s ease,visibility .3s ease}.jw-button-color{-webkit-transition:color .3s ease,fill .3s ease;transition:color .3s ease,fill .3s ease}.jw-knob{-webkit-transition:opacity .15s ease;transition:opacity .15s ease}.jw-skin-seven .jw-display-icon-container{border-radius:3.5em}.jw-skin-seven .jw-display-icon-container>.jw-icon{color:hsla(0,0%,100%,.9)}.jw-skin-seven.jw-breakpoint-2 .jw-display .jw-icon{width:66px;height:66px;line-height:66px}.jw-skin-seven .jw-dock-button{border-radius:2.5em}.jw-skin-seven .jw-dock-button:hover{background:rgba(33,33,33,.8)}.jw-skin-seven .jw-menu{padding:0}.jw-skin-seven .jw-dock .jw-overlay,.jw-skin-seven .jw-skip{border-radius:.5em}.jw-skin-seven .jw-text{text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.jw-skin-seven .jw-slider-container .jw-knob{opacity:0}.jw-skin-seven.jw-flag-touch .jw-knob,.jw-skin-seven .jw-slider-container:hover .jw-knob{opacity:1}'
,""])},180:function(e,t,i){e.exports=i.p+"jw-icons.ttf"},181:function(e,t,i){e.exports=i.p+"jw-icons.woff"},184:function(e,t,i){var n=i(178);"string"==typeof n&&(n=[["all-players",n,""]]),i(49).style(n,"all-players"),n.locals&&(e.exports=n.locals)}}),webpackJsonpjwplayer([12],{56:function(e,t){var i,n;i=[],void 0===(n=function(){function s(e){this.message=e}var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.prototype=new Error,s.prototype.name="InvalidCharacterError",window.btoa||(window.btoa=function(e){for(var t,i,n=String(e),r=0,o=l,a="";n.charAt(0|r)||(o="=",r%1);a+=o.charAt(63&t>>8-r%1*8)){if(255<(i=n.charCodeAt(r+=.75)))throw new s("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|i}return a}),window.atob||(window.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new s("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,n,r=0,o=0,a="";n=t.charAt(o++);~n&&(i=r%4?64*i+n:n,r++%4)?a+=String.fromCharCode(255&i>>(-2*r&6)):0)n=l.indexOf(n);return a})}.apply(t,i))||(e.exports=n)}}),webpackJsonpjwplayer([7],{83:function(){!function(a,n){"use strict";function c(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||o(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,n=this.intersectionRect,r=n.width*n.height;this.intersectionRatio=i?r/i:0}function e(e,t){var i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=r(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function u(){return a.performance&&performance.now&&performance.now()}function r(e,t){var i=null;return function(){i||(i=setTimeout(function(){e(),i=null},t))}}function t(e,t,i,n){"function"==typeof e.addEventListener?e.addEventListener(t,i,n||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function i(e,t,i,n){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,n||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i)}function s(e,t){var i=Math.max(e.top,t.top),n=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-r,s=n-i;return 0<=a&&0<=s&&{top:i,bottom:n,left:r,right:o,width:a,height:s}}function d(e){var t=e.getBoundingClientRect();if(t)return t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t}function o(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}if(!("IntersectionObserver"in a&&"IntersectionObserverEntry"in a&&"intersectionRatio"in a.IntersectionObserverEntry.prototype)){var l=n.documentElement,h=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(t(a,"resize",this._checkForIntersections,!0),t(n,"scroll",this._checkForIntersections,!0),"MutationObserver"in a&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(n,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(a,"resize",this._checkForIntersections,!0),i(n,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),l=s?this._getRootRect():o();this._observationTargets.forEach(function(e){var t=e.element,i=d(t),n=this._rootContainsTarget(t),r=e.entry,o=s&&n&&this._computeTargetAndRootIntersection(t,l),a=e.entry=new c({time:u(),target:t,boundingClientRect:i,rootBounds:l,intersectionRect:o});s&&n?this._hasCrossedThreshold(r,a)&&this._queuedEntries.push(a):r&&r.isIntersecting&&this._queuedEntries.push(a)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=a.getComputedStyle(e).display){for(var i=d(e),n=e.parentNode,r=!1;!r;){var o=null;if(n==this.root||1!=n.nodeType?(r=!0,o=t):"visible"!=a.getComputedStyle(n).overflow&&(o=d(n)),o&&!(i=s(o,i)))break;n=n.parentNode}return i}},e.prototype._getRootRect=function(){var e;if(this.root)e=d(this.root);else{var t=n.documentElement,i=n.body;e={top:0,left:0,right:t.clientWidth||i.clientWidth,width:t.clientWidth||i.clientWidth,bottom:t.clientHeight||i.clientHeight,height:t.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(i){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?i.width:i.height)/100}),t={top:i.top-e[0],right:i.right+e[1],bottom:i.bottom+e[2],left:i.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,n=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==n)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==i||o==n||o<i!=o<n)return!0}},e.prototype._rootIsInDom=function(){return!this.root||l.contains(this.root)},e.prototype._rootContainsTarget=function(e){return(this.root||l).contains(e)},e.prototype._registerInstance=function(){h.indexOf(this)<0&&h.push(this)},e.prototype._unregisterInstance=function(){var e=h.indexOf(this);-1!=e&&h.splice(e,1)},a.IntersectionObserver=e,a.IntersectionObserverEntry=c}}(window,document)}}),webpackJsonpjwplayer([11],{57:function(e,t,i){var n,r,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(1)],void 0===(r=function(e){function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!==d(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(e,i(r,this),i(n,this))}function a(i){var n=this;return null===this._state?void this._deferreds.push(i):void t(function(){var e=n._state?i.onFulfilled:i.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(r){return void i.reject(r)}i.resolve(t)}else(n._state?i.resolve:i.reject)(n._value)})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":d(e))||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void c(i(t,e),i(r,this),i(n,this))}this._state=!0,this._value=e,s.call(this)}catch(a){n.call(this,a)}}function n(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)a.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,i,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=i,this.reject=n}function c(e,t,i){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,i(e))})}catch(r){if(n)return;n=!0,i(r)}}var t=e.defer,u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(i,n){var r=this;return new o(function(e,t){a.call(r,new l(i,n,e,t))})},o.all=function(e){var s=Array.prototype.slice.call(1===arguments.length&&u(e)?e:arguments);return new o(function(n,r){function o(t,e){try{if(e&&("object"===(void 0===e?"undefined":d(e))||"function"==typeof e)){var i=e.then;if("function"==typeof i)return void i.call(e,function(e){o(t,e)},r)}s[t]=e,0==--a&&n(s)}catch(c){r(c)}}if(0===s.length)return n([]);for(var a=s.length,e=0;e<s.length;e++)o(e,s[e])})},o.resolve=function(t){return t&&"object"===(void 0===t?"undefined":d(t))&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(i){return new o(function(e,t){t(i)})},o.race=function(r){return new o(function(e,t){for(var i=0,n=r.length;i<n;i++)r[i].then(e,t)})},o._setImmediateFn=function(e){t=e},window.Promise||(window.Promise=o)}.apply(t,n))||(e.exports=r)}}),webpackJsonpjwplayer([10],{58:function(e,t){var i,n;i=[],void 0===(n=function(){function e(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function f(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function t(){this.values=Object.create(null)}function r(o,i){function e(){function e(e){return i=i.substr(e.length),e}if(!i)return null;var t=i.match(/^([^<]*)(<[^>]+>?)?/);return e(t[1]?t[1]:t[2])}function t(e){return g[e]}function n(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],t);return e}function r(e,t){return!b[t.localName]||b[t.localName]===e.localName}function a(e,t){var i=m[e];if(!i)return null;var n=o.document.createElement(i);n.localName=i;var r=v[e];return r&&t&&(n[r]=t.trim()),n}for(var s,l=o.document.createElement("div"),c=l,u=[];null!==(s=e());)if("<"!==s[0])c.appendChild(o.document.createTextNode(n(s)));else{if("/"===s[1]){u.length&&u[u.length-1]===s.substr(2).replace(">","")&&(u.pop(),c=c.parentNode);continue}var d,h=f(s.substr(1,s.length-2));if(h){d=o.document.createProcessingInstruction("timestamp",h),c.appendChild(d);continue}var p=s.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=a(p[1],p[3])))continue;if(!r(c,d))continue;p[2]&&(d.className=p[2].substr(1).replace("."," ")),u.push(p[1]),c.appendChild(d),c=d}return l}function o(e){for(var t=0;t<n.length;t++){var i=n[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function a(e,t){for(var i=t.childNodes.length-1;0<=i;i--)e.push(t.childNodes[i])}function s(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var n=i.match(/^.*(\n|\r)/);return n?n[e.length=0]:i}return"ruby"===t.tagName?s(e):t.childNodes?(a(e,t),s(e)):void 0}function l(e){if(!e||!e.childNodes)return"ltr";var t,i=[];for(a(i,e);t=s(i);)for(var n=0;n<t.length;n++)if(o(t.charCodeAt(n)))return"rtl";return"ltr"}function y(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}function c(){}function u(e,t){c.call(this),this.cue=t,this.cueDiv=r(e,t.text),this.cueDiv.className="jw-text-track-cue jw-reset";var i={textShadow:"",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={textAlign:"middle"===t.align?"center":t.align,whiteSpace:"pre-line",position:"absolute",direction:l(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var n=0;switch(t.align){case"start":case"left":n=t.position;break;case"middle":case"center":n=t.position-t.size/2;break;case"end":case"right":n=t.position-t.size}n=Math.max(Math.min(100,n),0),""===t.vertical?this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:"auto",width:this.formatStyle(e.width,"px")})}}function w(e){var t;if(e.div){var i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop,o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight,this.width=Math.ceil(this.width+1)}function d(e,t,s,l,i){function n(e,t){for(var i,n=new w(e),r=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(s,t[o])||e.within(s)&&e.overlapsAny(l);)e.move(t[o]);if(e.within(s))return e;var a=e.intersectPercentage(s);a<r&&(i=new w(e),r=a),e=new w(n)}return i||n}var r=new w(t),o=t.cue,a=y(o),c=[];if(o.snapToLines){var u;switch(o.vertical){case"":c=["+y","-y"],u="height";break;case"rl":c=["+x","-x"],u="width";break;case"lr":c=["-x","+x"],u="width"}var d=r.lineHeight,h=Math.floor(s[u]/d);a=Math.min(a,h-i);var p=d*Math.round(a),f=s[u]+d,g=c[0];if(Math.abs(p)>f&&(p=p<0?-1:1,p*=Math.ceil(f/d)*d),a<0)p+=""===o.vertical?s.height:s.width,p-=i*d,c=c.reverse();p-=i,r.move(g,p)}else{var m=r.lineHeight/s.height*100;switch(o.lineAlign){case"middle":a-=m/2;break;case"end":a-=m}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}c=["+y","-x","+x","-y"],r=new w(t)}var v=n(r,c);t.move(v.toCSSCompatValues(s))}function i(){}function h(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}e.prototype=Object.create(Error.prototype),(e.prototype.constructor=e).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},t.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(/^[\d]{1,3}(\.[\d]*)?%$/.test(t)&&(0<=(t=parseFloat(t))&&t<=100))&&(this.set(e,t),!0)}};var g={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\xa0"},m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},v={v:"title",lang:"lang"},b={rt:"ruby"},n=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];c.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},c.prototype.formatStyle=function(e,t){return 0===e?0:e+t},u.prototype=Object.create(c.prototype),u.prototype.constructor=u,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},i.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},i.convertCueToDOMTree=function(e,t){return e&&t?r(e,t):null};var p="1.5%";i.processCues=function(n,r,e,t){if(!n||!r||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);if(!r.length)return null;var o=n.document.createElement("div");if(o.className="jw-text-track-container jw-reset",o.style.position="absolute",o.style.left="0",o.style.right="0",o.style.top="0",o.style.bottom="0",o.style.margin=p,e.appendChild(o),h(r)||t){var a=[],s=w.getSimpleBoxPosition(o),l=r.reduce(function(e,t){return e+t.text.split("\n").length},0);!function(){for(var e=0;e<r.length;e++){var t=r[e],i=new u(n,t);i.div.className="jw-text-track-display jw-reset",o.appendChild(i.div),d(n,i,s,a,l),l-=t.text.split("\n").length,t.displayState=i.div,a.push(w.getSimpleBoxPosition(i))}}()}else for(var i=0;i<r.length;i++)o.appendChild(r[i].displayState)},window.WebVTT||(window.WebVTT=i)}.apply(t,i))||(e.exports=n)}}),webpackJsonpjwplayer([8],{73:function(e,t,i){var n,r;n=[i(2)],void 0===(r=function(u){return function(t,i){function n(){i.set("castState",{available:i.get("castAvailable"),active:i.get("castActive")})}function r(e){e&&e.forEach(function(e){e.file=u.getAbsolutePath(e.file)})}function o(e){e&&(e.image=u.getAbsolutePath(e.image),r(e.allSources),r(e.sources))}function e(){l.removeEventListener("webkitplaybacktargetavailabilitychanged",c.updateAvailability),l.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",c.updateActive)}function a(){l.addEventListener("webkitplaybacktargetavailabilitychanged",c.updateAvailability),l.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",c.updateActive)}function s(){l=null,i.getVideo()&&(l=i.getVideo().video),l&&(e(),a()),c.updateAvailability({}),c.updateActive()}var l=null,c=this;c.updateAvailability=function(e){i.set("castAvailable","available"===e.availability),n()},c.updateActive=function(){var e=!1;l&&(e=!!l.webkitCurrentPlaybackTargetIsWireless),i.off("change:playlistItem",o),e&&(t.instreamDestroy(),o(i.get("playlistItem")),i.on("change:playlistItem",o)),i.set("airplayActive",e),i.set("castActive",e),n()},c.airplayToggle=function(){l&&l.webkitShowPlaybackTargetPicker()},s(),i.on("itemReady",s)}}.apply(t,n))||(e.exports=r)}}),webpackJsonpjwplayer([4],{8:function(e,t,i){var n,r;n=[i(1),i(11),i(2),i(13),i(12)],void 0===(r=function(l,o,c,u,d){function e(e){if(this._currentTextTrackIndex=-1,e){if(this._textTracks?(this._textTracks=l.reject(this._textTracks,function(e){if(this.renderNatively&&"nativecaptions"===e._id)return delete this._tracksById[e._id],!0},this),delete this._tracksById.nativemetadata):this._initTextTracks(),e.length)for(var t=0,i=e.length;t<i;t++){var n=e[t];if(!n._id){if("captions"===n.kind||"metadata"===n.kind){if(n._id="native"+n.kind,!n.label&&"captions"===n.kind){var r=d.createLabel(n,this._unknownCount);n.name=r.label,this._unknownCount=r.unknownCount}}else n._id=d.createId(n,this._textTracks.length);if(this._tracksById[n._id])continue;n.inuse=!0}if(n.inuse&&!this._tracksById[n._id])if("metadata"===n.kind)n.mode="hidden",n.oncuechange=P.bind(this),this._tracksById[n._id]=n;else if(j(n.kind)){var o,a=n.mode;if(n.mode="hidden",!n.cues.length&&n.embedded)continue;if(n.mode=a,this._cuesByTrackId[n._id]&&!this._cuesByTrackId[n._id].loaded){for(var s=this._cuesByTrackId[n._id].cues;o=s.shift();)x(this.renderNatively,n,o);n.mode=a,this._cuesByTrackId[n._id].loaded=!0}C.call(this,n)}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||y.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(c.isEdge()||c.isFF()||c.isSafari())&&(this.addTrackHandler=this.addTrackHandler||w.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function t(e){if(this.renderNatively){var t=e===this._itemTracks;t||u.cancelXhr(this._itemTracks),(this._itemTracks=e)&&(t||(this.disableTextTrack(),S.call(this),this.addTextTracks(e)))}}function i(){return this._currentTextTrackIndex}function n(e){return this.renderNatively?void(this._textTracks&&(0===e&&l.each(this._textTracks,function(e){e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==e-1&&(this.disableTextTrack(),this._currentTextTrackIndex=e-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1))}function r(e){if(e.text&&e.begin&&e.end){var t,i=e.trackid.toString(),n=this._tracksById&&this._tracksById[i];n||(n={kind:"captions",_id:i,data:[]},this.addTextTracks([n]),this.trigger("subtitlesTracks",{tracks:this._textTracks})),e.useDTS&&(n.source||(n.source=e.source||"mpegts")),t=e.begin+"_"+e.text;var r=this._metaCuesByTextTime[t];if(!r){r={begin:e.begin,end:e.end,text:e.text},this._metaCuesByTextTime[t]=r;var o=u.convertToVTTCues([r])[0];n.data.push(o)}}}function a(e){this._tracksById||this._initTextTracks();var t=e.track?e.track:"native"+e.type,i=this._tracksById[t],n="captions"===e.type?"Unknown CC":"ID3 Metadata",r=e.cue;if(!i){var o={kind:e.type,_id:t,label:n,embedded:!0};i=E.call(this,o),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):b.call(this,[i])}A.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?x(this.renderNatively,i,r):i.data.push(r))}function s(e){var t=this._tracksById[e.name];if(t){t.source=e.source;for(var i=e.captions||[],n=[],r=!1,o=0;o<i.length;o++){var a=i[o],s=e.name+"_"+a.begin+"_"+a.end;this._metaCuesByTextTime[s]||(this._metaCuesByTextTime[s]=a,n.push(a),r=!0)}r&&n.sort(function(e,t){return e.begin-t.begin});var l=u.convertToVTTCues(n);Array.prototype.push.apply(t.data,l)}}function h(e,t,i){e&&(p(e,t,i),this.instreamMode||(e.addEventListener?e.addEventListener(t,i):e["on"+t]=i))}function p(e,t,i){e&&(e.removeEventListener?e.removeEventListener(t,i):e["on"+t]=null)}function f(){u.cancelXhr(this._itemTracks);var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(k(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),k(this.renderNatively,this.video.textTracks))}function g(e){this._cachedVTTCues[e]&&(this._cachedVTTCues[e]={},this._tracksById[e].data=[])}function m(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="disabled",(e.embedded||"nativecaptions"===e._id)&&(e.mode="hidden"))}}function v(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="showing")}}function y(){var e=this.video.textTracks,t=l.filter(e,function(e){return(e.inuse||!e._id)&&j(e.kind)});if(this._textTracks&&!R.call(this,t)){for(var i=-1,n=0;n<this._textTracks.length;n++)if("showing"===this._textTracks[n].mode){i=n;break}i!==this._currentTextTrackIndex&&this.setSubtitlesTrack(i+1)}else this.setTextTracks(e)}function w(){this.setTextTracks(this.video.textTracks)}function b(e){if(e){this._textTracks||this._initTextTracks();for(var t=0;t<e.length;t++){var i=e[t];if(!i.kind||j(i.kind)){var n=E.call(this,i);C.call(this,n),i.file&&(i.data=[],u.loadFile(i,this.addVTTCuesToTrack.bind(this,n),L))}}this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function _(e,t){if(this.renderNatively){var i,n=this._tracksById[e._id];if(!n)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[e._id]={cues:t,loaded:!1});if(!this._cuesByTrackId[e._id]||!this._cuesByTrackId[e._id].loaded)for(this._cuesByTrackId[e._id]={cues:t,loaded:!0};i=t.shift();)x(this.renderNatively,n,i)}}function x(e,t,i){if(c.isIE()&&e&&window.TextTrackCue){var n=new window.TextTrackCue(i.startTime,i.endTime,i.text);t.addCue(n)}else t.addCue(i)}function k(i,e){e&&e.length&&l.each(e,function(e){if(!(c.isIE()&&i&&/^(native|subtitle|cc)/.test(e._id))){e.mode="disabled",e.mode="hidden";for(var t=e.cues.length;t--;)e.removeCue(e.cues[t]);e.embedded||(e.mode="disabled"),e.inuse=!1}})}function j(e){return"subtitles"===e||"captions"===e}function T(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0}function E(e){var t,i=d.createLabel(e,this._unknownCount),n=i.label;if(this._unknownCount=i.unknownCount,this.renderNatively||"metadata"===e.kind){var r=this.video.textTracks;(t=l.findWhere(r,{label:n}))?(t.kind=e.kind,t.language=e.language||""):t=this.video.addTextTrack(e.kind,n,e.language||""),t["default"]=e["default"],t.mode="disabled",t.inuse=!0}else(t=e).data=t.data||[];return t._id||(t._id=d.createId(e,this._textTracks.length)),t}function C(e){this._textTracks.push(e),this._tracksById[e._id]=e}function S(){if(this._textTracks){var e=l.filter(this._textTracks,function(e){return e.embedded||"subs"===e.groupid});this._initTextTracks(),l.each(e,function(e){this._tracksById[e._id]=e}),this._textTracks=e}}function P(e){var t=e.currentTarget.activeCues;if(t&&t.length){var i=t[t.length-1].startTime;if(this._activeCuePosition!==i){var n=[];if(l.each(t,function(e){e.startTime<i||(e.data||e.value?n.push(e):e.text&&this.trigger("meta",{metadataTime:i,metadata:JSON.parse(e.text)}))},this),n.length){var r=o.parseID3(n);this.trigger("meta",{metadataTime:i,metadata:r})}this._activeCuePosition=i}}}function A(e,t){var i=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var n,r=this._cachedVTTCues[e._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*t.startTime);var o="_"+t.line,a=Math.floor(20*t.endTime),s=r[n+o]||r[n+1+o]||r[n-1+o];return!(s&&Math.abs(s-a)<=1||(r[n+o]=a,0));case"metadata":var l=t.data?new Uint8Array(t.data).join(""):t.text;return!r[n=t.startTime+l]&&(r[n]=t.endTime,!0);default:return!1}}function R(e){if(e.length>this._textTracks.length)return!0;for(var t=0;t<e.length;t++){var i=e[t];if(!i._id||!this._tracksById[i._id])return!0}return!1}function L(e){c.log("CAPTIONS("+e+")")}return{_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:T,addTracksListener:h,clearTracks:f,clearCueData:g,disableTextTrack:m,enableTextTrack:v,getSubtitlesTrack:i,removeTracksListener:p,addTextTracks:b,setTextTracks:e,setupSideloadedTracks:t,setSubtitlesTrack:n,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:s,addCaptionsCue:r,addVTTCue:a,addVTTCuesToTrack:_,renderNatively:!1}}.apply(t,n))||(e.exports=r)},75:function(e,t,i){var n,r;n=[i(81),i(159),i(158),i(157),i(4),i(5),i(2),i(1)],void 0===(r=function(e,w,b,t,_,x,k,j){var T=t.loadApi(),E={};return function(s,l){function e(){var e=l.get("cast")||{};l.set("castState",{available:!1,active:!1,deviceName:""}),y&&(y.off(),y.reset()),(y=new w(e.customAppId)).on("castState",g),y.on("mediaUpdate",h),y.on("mediaUpdate",p),y.on("setPlaylist",c),y.updateCastState(),E[l.get("id")]=y;var t=l.chooseProvider;l.chooseProvider=function(e){return l.get("castActive")?b:t(e)}}function t(){}function i(){return l.getVideo()}function n(){l.changeVideoProvider(b),(v=i()).setService(y)}function c(){y.setPlaylist(l),l.set("state",x.BUFFERING);var e=l.get("playlistItem");v.updateScreen("Connecting",e.image)}function r(){var e;l.get("castClicked")&&!y.getPlayerId()&&y.setPlayerId(l.get("id")),m()&&(s.setFullscreen(!1),n(),y.addListeners(),(e=y.getMedia())?y.loaded(e):c(),l.on("change:playlist",c),l.on("itemReady",u),l.change("captions",d))}function o(){var e=l.get("state"),t=e===x.COMPLETE,i=e===x.IDLE,n=e===x.ERROR,r=l.get("item"),o=l.get("playlist"),a=l.get("playlistItem");y.removeListeners(),v&&v.remove(),a&&n?void 0===(a=o[r+1])?t=!0:(l.set("item",r+1),l.set("playlistItem",a)):a&&!t&&((a=j.extend({},a)).starttime=a.start=l.get("position")||0),l.set("castActive",!1),l.set("castClicked",!1),l.resetProvider(),l.setProvider(a),l.off("change:playlist",c),l.off("itemReady",u),a&&(t?(l.stopVideo(),s.trigger(_.JWPLAYER_PLAYLIST_COMPLETE,{})):i||l.loadVideo(a))}function a(e){e?r():v&&o()}function u(){y.extractEmbeddedCaptions()}function d(e,t){var i=y.getMedia();if(i){var n=y.obtainTrackStyles(t);y.editTracksInfo(i.activeTrackIds,n)}}function h(e){var t=e.field,i=e.value;if(v){"media"===t&&f(i);var n=v.castEventHandlers[t];n&&n(i)}}function p(e){"media"===e.field&&(u(),v.setSubtitlesTrack(l.get("captionsIndex")),y.off("mediaUpdate",p))}function f(e){var t,i=l.get("playlist");if(e.media){var n=i[(t=e.media.metadata).index];j.isNumber(t.index)&&t.index!==l.get("item")&&(l.set("item",t.index),l.set("playlistItem",n),l.trigger("itemReady",n),v.setSubtitlesTrack(l.get("captionsIndex")));var r=l.get("castState").deviceName,o=r?"Casting to "+r:"";v.updateScreen(o,n.image)}}
function g(e){var t=l.get("castActive"),i=e.active;t!==i&&a(i),i=i&&m(),l.set("castAvailable",e.available),l.set("castActive",i),l.set("castState",{available:e.available,active:i,deviceName:e.deviceName})}function m(){return y.getPlayerId()===l.get("id")}var v=null,y=E[l.get("id")];T.then(e)["catch"](t),this.castToggle=k.noop}}.apply(t,n))||(e.exports=r)},157:function(e,t,i){var n,r;n=[i(4),i(15),i(3),i(1)],void 0===(r=function(n,r,e,t){function i(){return a?s:s=new Promise(function(t,i){var e="__onGCastApiAvailable";(a=new r(l)).addEventListener(n.ERROR,o),a.load(),window[e]=function(e){e?t(e):i()}})}function o(){a.resetEventListeners(),a=null}var a,s,l="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";return t.extend({loadApi:i},e)}.apply(t,n))||(e.exports=r)},158:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,o,a=n(i(177));r=[i(2),i(4),i(3),i(5),i(10),i(8),i(1)],void 0===(o=function(r,s,e,l,t,c,u){function d(e,t){var i=r.createElement((0,a["default"])(e));return t&&(i.style.backgroundImage='url("'+t+'")'),i}var i=function(){function i(){var e=0,t=o.getMedia();if(!t)return e;var i=t.media.tracks;if(!i)return e;for(var n=0;n<i.length;n++){if("TEXT"===i[n].type){e=n;break}}return e}var n,o,a=this;u.extend(a,e,c),a.setState=function(e){return t.setState.call(this,e)},a.destroy=function(){clearInterval(a.timeInterval)},a.supportsFullscreen=function(){return!1},a.setService=function(e){o=e,a._castingScreen=a.updateScreen()},a.setup=function(e){a.setState(l.BUFFERING),a.sendCommand("setup",e)},a.init=function(e){a.sendCommand("item",e)},a.load=function(e){a.init(e),a.play()},a.play=function(){a.sendCommand("play")},a.pause=function(){a.sendCommand("pause")},a.seek=function(e){a.trigger(s.JWPLAYER_MEDIA_SEEK,{position:a.getRemote("currentTime"),offset:e}),a.sendCommand("seek",e,function(){a.trigger(s.JWPLAYER_MEDIA_SEEKED)})},a.next=function(e){a.sendCommand("next",e)},a.volume=function(e){a.sendCommand("volume",e)},a.mute=function(e){a.sendCommand("mute",e)},a.setSubtitlesTrack=function(e){var t=0<e?[e+i()]:[];o.editTracksInfo(t)},a.sendCommand=function(e){if(o){var t=Array.prototype.slice.call(arguments,1);o[e]&&o[e].apply(o,t)}},a.getRemote=function(e){if(o){var t=o.getMedia();return t?"currentTime"===e?t.getEstimatedTime():t[e]||t.media&&t.media[e]:null}},a.updateScreen=function(e,t){n.innerHTML=d(e,t).outerHTML},a.setContainer=function(e){n=e,a._castingScreen&&e.appendChild(a._castingScreen)},a.getContainer=function(){return n},a.remove=function(){clearInterval(a.timeInterval),a._castingScreen&&n===a._castingScreen.parentNode&&n.removeChild(a._castingScreen),a._castingScreen=null},a.getDuration=function(){return a.getRemote("duration")||1/0},a.stop=function(){a.clearTracks()},a.setControls=r.noop,a.setCurrentQuality=r.noop,a.resize=r.noop,a.seekDrag=r.noop,a.setVisibility=r.noop,a.setFullScreen=u.constant(!1),a.getFullScreen=u.constant(!1),a.setPlaybackRate=u.constant(!1),a.getPlaybackRate=u.constant(!1),a.checkComplete=u.constant(!1),a.getCurrentQuality=u.constant(0),a.getQualityLevels=u.constant(["Auto"]),a.castEventHandlers={media:function(e){var t=a.getRemote("items"),i="IDLE"===e.playerState&&"FINISHED"===e.idleReason,n="IDLE"===e.playerState&&"ERROR"===e.idleReason,r=i&&!t;a.castEventHandlers.playerState(r?"complete":e.playerState),a.castEventHandlers.currentTime(),clearInterval(a.timeInterval),"PLAYING"===e.playerState?a.timeInterval=setInterval(a.castEventHandlers.currentTime,100):r?(a.setState("complete"),o.disconnect()):n&&(a.setState("error"),o.disconnect())},volume:function(e){a.trigger("volume",{volume:Math.round(100*e.volume)}),a.trigger("mute",{mute:e.isMute})},captions:function(e){a.clearTracks(),a.setTextTracks(e.tracks)},playerState:function(e){if(e&&l[e.toUpperCase()]){var t=e.toLowerCase();t!==l.IDLE&&t!==l.BUFFERING||a.trigger(s.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0,position:a.getRemote("currentTime"),duration:a.getDuration()}),a.setState(t)}},currentTime:function(){a.trigger(s.JWPLAYER_MEDIA_TIME,{position:a.getRemote("currentTime"),duration:a.getDuration()})},duration:function(){a.trigger(s.JWPLAYER_MEDIA_TIME,{position:a.getRemote("currentTime"),duration:a.getDuration()})},isPaused:function(e){e?a.setState(l.PAUSED):a.setState(l.PLAYING)}}};return i.prototype={getName:function(){return{name:"chromecast"}}},i}.apply(t,r))||(e.exports=o)},159:function(e,t,i){var n,r;n=[i(3),i(2),i(1)],void 0===(r=function(u,e,v){return function(e){function l(e,t,i){var n=function(e){var t=!v.size(e.mediaTypes)||!v.contains(e.mediaTypes,'video/webm; codecs="vp9"'),i=!v.size(e.drm)||v.any(e.drm,function(e,t){return"fairplay"!==t});return t&&i},r=function(e){return e.map(function(e,t){var i=t+1,n=g.cast.media,r=new n.Track(i,n.TrackType.TEXT);return r.trackContentId=e.file,r.trackContentType="text/vtt",r.subtype=n.TextTrackType.SUBTITLES,r.name=e.label||i,r.language="en-US",r.customData="side-loaded captions",r})},o=e.allSources.slice(0).sort(function(e,t){return!e["default"]&&t["default"]?1:0}),a=v.find(o,n);if(a){var s=p(a.type),l=h(a.file),c=e.image?h(e.image):null,u=a.drm,d=new m.MediaInfo(l,s);return d.metadata=new m.GenericMediaMetadata,d.metadata.title=e.title,d.metadata.subtitle=e.description,d.metadata.index=t||0,d.metadata.playerId=f.getPlayerId(),e.tracks&&e.tracks.length&&(d.tracks=r(e.tracks)),i&&(d.textTrackStyle=f.obtainTrackStyles(i)),c&&(d.metadata.images=[{url:c}]),u&&(d.customData={drm:u}),d}}function h(e){var t=document.createElement("a");return t.href=e,t.href}function p(e){switch(e){case"mp4":case"webm":return"video/"+e;case"mpd":case"dash":return"application/dash+xml";case"m3u8":case"hls":return"application/x-mpegURL";case"aac":return"audio/x-aac";case"mp3":return"audio/mpeg";default:return e}}function t(){var e=o.getCastState()!==r.NO_DEVICES_AVAILABLE,t="";(c=o.getCurrentSession())&&(t=c.getCastDevice().friendlyName||t),f.trigger("castState",{available:e,active:!!c,deviceName:t})}function i(){var e=f.getMedia();e&&f.trigger("mediaUpdate",{field:"media",value:e})}var f=this,g=window.chrome,n=g.cast,m=n.media,r=window.cast.framework,o=r.CastContext.getInstance(),c=null,a=r.CastContextEventType.CAST_STATE_CHANGED,s=e||m.DEFAULT_MEDIA_RECEIVER_APP_ID;v.extend(f,u),o.removeEventListener(a,t),o.addEventListener(a,t),o.setOptions({receiverApplicationId:s,autoJoinPolicy:n.AutoJoinPolicy.ORIGIN_SCOPED}),f.updateCastState=t,f.setPlaylist=function(e){var t,i,n=e.get("playlist"),o=e.get("item"),a=e.get("position"),r=e.get("repeat"),s=e.get("captions");"complete"===e.get("state")&&(a=o=0),i=v.reduce(n,function(e,t,i){var n,r=l(t,i,s);return r&&(n=new m.QueueItem(r),r.metadata.index===o&&(n.startTime=a),e.push(n)),e},[]),(t=new m.QueueLoadRequest(i)).startIndex=o,r&&(t.repeatMode=g.cast.media.RepeatMode.ALL),c.getSessionObj().queueLoad(t,f.loaded,f.error)},f.getPlayerId=function(){var e=f.getMedia();return e&&e.media?e.media.metadata.playerId:c?c.getSessionObj().playerId:null},f.setPlayerId=function(e){c&&(c.getSessionObj().playerId=e)},f.loaded=function(e){(f.trigger("mediaUpdate",{field:"volume",value:{volume:c.getVolume(),isMute:c.isMute()}}),c)&&c.getSessionObj().addMediaListener(function(e){e.addUpdateListener(i)});e.addUpdateListener(i)},f.addListeners=function(){return c?(c.getSessionObj().addUpdateListener(t),void c.addEventListener(r.SessionEventType.VOLUME_CHANGED,function(e){f.trigger("mediaUpdate",{field:"volume",value:e})})):null},f.reset=function(){f.removeListeners(),o&&o.removeEventListener(a,t)},f.removeListeners=function(){var e;return c?((e=c.getSessionObj()).removeUpdateListener(t),e.media.forEach(function(e){e.removeUpdateListener(i)}),void c.removeEventListener(r.SessionEventType.VOLUME_CHANGED)):null},f.getMedia=function(){if(c){var e=c.getSessionObj().media;if(e&&e.length)return e[0]}return null},f.error=function(e){console.error("Error:",e),f.disconnect()},f.item=function(e){var t=f.getMedia();if(t){var i=l(e),n=v.find(t.items,function(e){return e.media.contentId===i.contentId&&e.media.index===i.index});n?t.queueJumpToItem(n.itemId):f.trigger("setPlaylist")}else f.trigger("setPlaylist")},f.play=function(){f.getMedia()&&f.getMedia().play()},f.pause=function(){f.getMedia().pause()},f.next=function(){f.getMedia().queueNext()},f.disconnect=function(){c.endSession(!0)},f.seek=function(e,t){var i=new m.SeekRequest;i.currentTime=e,i.resumeState=m.ResumeState.PLAYBACK_START,f.getMedia().seek(i,t)},f.mute=function(e){c.setMute(e)},f.volume=function(e){c.setVolume(e/100)},f.editTracksInfo=function(e,t){var i=f.getMedia();if(i){var n=new g.cast.media.EditTracksInfoRequest(e,t);i.editTracksInfo(n)}},f.extractEmbeddedCaptions=function(){var e=f.getMedia();if(e&&e.media.tracks){var t=e.media.tracks.filter(function(e){return"TEXT"===e.type&&"side-loaded captions"!==e.customData}).map(function(e,t){return e.mapId=t,e.kind="subtitles",e.cues=[],e});t.length&&f.trigger("mediaUpdate",{field:"captions",value:{tracks:t}})}},f.obtainTrackStyles=function(e){var t=function(e){var t=g.cast.media.TextTrackEdgeType;switch(e){case"dropshadow":return t.DROP_SHADOW;case"raised":return t.RAISED;case"depressed":return t.DEPRESSED;case"uniform":return t.OUTLINE;default:return t.NONE}},i=function(e){return Math.round(e/100*255).toString(16)},n=g.cast.media,r=new n.TextTrackStyle;return r.foregroundColor=e.color+i(e.fontOpacity),r.backgroundColor=e.backgroundColor+i(e.backgroundOpacity),r.windowColor=e.windowColor+i(e.windowOpacity),r.fontFamily=e.fontFamily,r.fontStyle=n.TextTrackFontStyle.NORMAL,r.fontScale=e.fontSize/14,r.edgeType=t(e.edgeStyle),r.windowType=n.TextTrackWindowType.NORMAL,r}}}.apply(t,n))||(e.exports=r)},177:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return'<div class="jw-cast jw-reset jw-preview"><div class="jw-cast-container"><div class="jw-cast-text jw-reset">'+(0<arguments.length&&void 0!==e?arguments[0]:"")+"</div></div></div>"}}}),webpackJsonpjwplayer([6],{8:function(e,t,i){var n,r;n=[i(1),i(11),i(2),i(13),i(12)],void 0===(r=function(l,o,c,u,d){function e(e){if(this._currentTextTrackIndex=-1,e){if(this._textTracks?(this._textTracks=l.reject(this._textTracks,function(e){if(this.renderNatively&&"nativecaptions"===e._id)return delete this._tracksById[e._id],!0},this),delete this._tracksById.nativemetadata):this._initTextTracks(),e.length)for(var t=0,i=e.length;t<i;t++){var n=e[t];if(!n._id){if("captions"===n.kind||"metadata"===n.kind){if(n._id="native"+n.kind,!n.label&&"captions"===n.kind){var r=d.createLabel(n,this._unknownCount);n.name=r.label,this._unknownCount=r.unknownCount}}else n._id=d.createId(n,this._textTracks.length);if(this._tracksById[n._id])continue;n.inuse=!0}if(n.inuse&&!this._tracksById[n._id])if("metadata"===n.kind)n.mode="hidden",n.oncuechange=P.bind(this),this._tracksById[n._id]=n;else if(j(n.kind)){var o,a=n.mode;if(n.mode="hidden",!n.cues.length&&n.embedded)continue;if(n.mode=a,this._cuesByTrackId[n._id]&&!this._cuesByTrackId[n._id].loaded){for(var s=this._cuesByTrackId[n._id].cues;o=s.shift();)x(this.renderNatively,n,o);n.mode=a,this._cuesByTrackId[n._id].loaded=!0}C.call(this,n)}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||y.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(c.isEdge()||c.isFF()||c.isSafari())&&(this.addTrackHandler=this.addTrackHandler||w.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function t(e){if(this.renderNatively){var t=e===this._itemTracks;t||u.cancelXhr(this._itemTracks),(this._itemTracks=e)&&(t||(this.disableTextTrack(),S.call(this),this.addTextTracks(e)))}}function i(){return this._currentTextTrackIndex}function n(e){return this.renderNatively?void(this._textTracks&&(0===e&&l.each(this._textTracks,function(e){e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==e-1&&(this.disableTextTrack(),this._currentTextTrackIndex=e-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1))}function r(e){if(e.text&&e.begin&&e.end){var t,i=e.trackid.toString(),n=this._tracksById&&this._tracksById[i];n||(n={kind:"captions",_id:i,data:[]},this.addTextTracks([n]),this.trigger("subtitlesTracks",{tracks:this._textTracks})),e.useDTS&&(n.source||(n.source=e.source||"mpegts")),t=e.begin+"_"+e.text;var r=this._metaCuesByTextTime[t];if(!r){r={begin:e.begin,end:e.end,text:e.text},this._metaCuesByTextTime[t]=r;var o=u.convertToVTTCues([r])[0];n.data.push(o)}}}function a(e){this._tracksById||this._initTextTracks();var t=e.track?e.track:"native"+e.type,i=this._tracksById[t],n="captions"===e.type?"Unknown CC":"ID3 Metadata",r=e.cue;if(!i){var o={kind:e.type,_id:t,label:n,embedded:!0};i=E.call(this,o),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):b.call(this,[i])}A.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?x(this.renderNatively,i,r):i.data.push(r))}function s(e){var t=this._tracksById[e.name];if(t){t.source=e.source;for(var i=e.captions||[],n=[],r=!1,o=0;o<i.length;o++){var a=i[o],s=e.name+"_"+a.begin+"_"+a.end;this._metaCuesByTextTime[s]||(this._metaCuesByTextTime[s]=a,n.push(a),r=!0)}r&&n.sort(function(e,t){return e.begin-t.begin});var l=u.convertToVTTCues(n);Array.prototype.push.apply(t.data,l)}}function h(e,t,i){e&&(p(e,t,i),this.instreamMode||(e.addEventListener?e.addEventListener(t,i):e["on"+t]=i))}function p(e,t,i){e&&(e.removeEventListener?e.removeEventListener(t,i):e["on"+t]=null)}function f(){u.cancelXhr(this._itemTracks);var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(k(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),k(this.renderNatively,this.video.textTracks))}function g(e){this._cachedVTTCues[e]&&(this._cachedVTTCues[e]={},this._tracksById[e].data=[])}function m(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="disabled",(e.embedded||"nativecaptions"===e._id)&&(e.mode="hidden"))}}function v(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="showing")}}function y(){var e=this.video.textTracks,t=l.filter(e,function(e){return(e.inuse||!e._id)&&j(e.kind)});if(this._textTracks&&!R.call(this,t)){for(var i=-1,n=0;n<this._textTracks.length;n++)if("showing"===this._textTracks[n].mode){i=n;break}i!==this._currentTextTrackIndex&&this.setSubtitlesTrack(i+1)}else this.setTextTracks(e)}function w(){this.setTextTracks(this.video.textTracks)}function b(e){if(e){this._textTracks||this._initTextTracks();for(var t=0;t<e.length;t++){var i=e[t];if(!i.kind||j(i.kind)){var n=E.call(this,i);C.call(this,n),i.file&&(i.data=[],u.loadFile(i,this.addVTTCuesToTrack.bind(this,n),L))}}this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function _(e,t){if(this.renderNatively){var i,n=this._tracksById[e._id];if(!n)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[e._id]={cues:t,loaded:!1});if(!this._cuesByTrackId[e._id]||!this._cuesByTrackId[e._id].loaded)for(this._cuesByTrackId[e._id]={cues:t,loaded:!0};i=t.shift();)x(this.renderNatively,n,i)}}function x(e,t,i){if(c.isIE()&&e&&window.TextTrackCue){var n=new window.TextTrackCue(i.startTime,i.endTime,i.text);t.addCue(n)}else t.addCue(i)}function k(i,e){e&&e.length&&l.each(e,function(e){if(!(c.isIE()&&i&&/^(native|subtitle|cc)/.test(e._id))){e.mode="disabled",e.mode="hidden";for(var t=e.cues.length;t--;)e.removeCue(e.cues[t]);e.embedded||(e.mode="disabled"),e.inuse=!1}})}function j(e){return"subtitles"===e||"captions"===e}function T(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0}function E(e){var t,i=d.createLabel(e,this._unknownCount),n=i.label;if(this._unknownCount=i.unknownCount,this.renderNatively||"metadata"===e.kind){var r=this.video.textTracks;(t=l.findWhere(r,{label:n}))?(t.kind=e.kind,t.language=e.language||""):t=this.video.addTextTrack(e.kind,n,e.language||""),t["default"]=e["default"],t.mode="disabled",t.inuse=!0}else(t=e).data=t.data||[];return t._id||(t._id=d.createId(e,this._textTracks.length)),t}function C(e){this._textTracks.push(e),this._tracksById[e._id]=e}function S(){if(this._textTracks){var e=l.filter(this._textTracks,function(e){return e.embedded||"subs"===e.groupid});this._initTextTracks(),l.each(e,function(e){this._tracksById[e._id]=e}),this._textTracks=e}}function P(e){var t=e.currentTarget.activeCues;if(t&&t.length){var i=t[t.length-1].startTime;if(this._activeCuePosition!==i){var n=[];if(l.each(t,function(e){e.startTime<i||(e.data||e.value?n.push(e):e.text&&this.trigger("meta",{metadataTime:i,metadata:JSON.parse(e.text)}))},this),n.length){var r=o.parseID3(n);this.trigger("meta",{metadataTime:i,metadata:r})}this._activeCuePosition=i}}}function A(e,t){var i=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var n,r=this._cachedVTTCues[e._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*t.startTime);var o="_"+t.line,a=Math.floor(20*t.endTime),s=r[n+o]||r[n+1+o]||r[n-1+o];return!(s&&Math.abs(s-a)<=1||(r[n+o]=a,0));case"metadata":var l=t.data?new Uint8Array(t.data).join(""):t.text;return!r[n=t.startTime+l]&&(r[n]=t.endTime,!0);default:return!1}}function R(e){if(e.length>this._textTracks.length)return!0;for(var t=0;t<e.length;t++){var i=e[t];if(!i._id||!this._tracksById[i._id])return!0}return!1}function L(e){c.log("CAPTIONS("+e+")")}return{_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:T,addTracksListener:h,clearTracks:f,clearCueData:g,disableTextTrack:m,enableTextTrack:v,getSubtitlesTrack:i,removeTracksListener:p,addTextTracks:b,setTextTracks:e,setupSideloadedTracks:t,setSubtitlesTrack:n,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:s,addCaptionsCue:r,addVTTCue:a,addVTTCuesToTrack:_,renderNatively:!1}}.apply(t,n))||(e.exports=r)},9:function(e,t){"use strict";function i(e){return{bitrate:e.bitrate,label:e.label,width:e.width,height:e.height}}Object.defineProperty(t,"__esModule",{value:!0}),t.qualityLevel=i},59:function(e,t,i){var n,r,R=i(9);n=[i(2),i(1),i(4),i(5),i(65),i(10),i(3),i(8)],void 0===(r=function(x,k,j,T,E,e,C,S){function P(e){return e+"_swf_"+i++}function A(e){var t=document.createElement("a");t.href=e.flashplayer;var i=t.host===window.location.host;return x.isChrome()&&!i}function t(i,r){function o(){g=setTimeout(function(){C.trigger.call(b,"flashBlocked")},4e3),h.once("embedded",function(){s(),C.trigger.call(b,"flashUnblocked")},b)}function a(){s(),o()}function s(){clearTimeout(g),window.removeEventListener("focus",a)}function l(e){for(var t=e.levels,i=0;i<t.length;i++){var n=t[i];n.index=i,"Auto"!==n.label&&(n.label=x.generateLabel(n,r.qualityLabels))}e.levels=v=c(e.levels),e.currentQuality=m=u(v,e.currentQuality)}function c(e){return e.sort(function(e,t){return e.height&&t.height?t.height-e.height:t.bitrate-e.bitrate})}function u(e,t){for(var i=0;i<e.length;i++)if(e[i].index===t)return i}var d,h,p,f=null,g=-1,m=-1,v=null,y=-1,w=null,t=!1,b=this,n=function(){return h&&h.__ready},_=function(){h&&h.triggerFlash.apply(h,arguments)};k.extend(this,C,S,{init:function(e){e.preload&&"none"!==e.preload&&!r.autostart&&(f=e)},load:function(e){f=e,this.setState(T.LOADING),_("load",e),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources)},play:function(){_("play")},pause:function(){_("pause"),this.setState(T.PAUSED)},stop:function(){_("stop"),m=-1,f=null,this.clearTracks(),this.setState(T.IDLE)},seek:function(e){_("seek",e)},volume:function e(t){if(k.isNumber(t)){var e=Math.min(Math.max(0,t),100);n()&&_("volume",e)}},mute:function(e){n()&&_("mute",e)},setState:function(){return e.setState.apply(this,arguments)},getSwfObject:function(e){var t=e.querySelector("object");return t?(t.off(null,null,this),t):E.embed(r.flashplayer,e,P(i),r.wmode)},getContainer:function(){return d},setContainer:function(e){if(d!==e){d=e,h=this.getSwfObject(e),document.hasFocus()?o():window.addEventListener("focus",a),h.once("ready",function(){s(),h.once("pluginsLoaded",function(){_("setupCommandQueue",h.__commandQueue),h.__commandQueue=[]});var e=k.extend({},r),t=h.triggerFlash("setup",e);t===h?h.__ready=!0:this.trigger(j.JWPLAYER_MEDIA_ERROR,t),f&&_("init",f)},this);var t=[j.JWPLAYER_MEDIA_ERROR,j.JWPLAYER_MEDIA_SEEK,j.JWPLAYER_MEDIA_SEEKED,"subtitlesTrackChanged","mediaType"],i=[j.JWPLAYER_MEDIA_BUFFER,j.JWPLAYER_MEDIA_TIME],n=[j.JWPLAYER_MEDIA_BUFFER_FULL];h.on([j.JWPLAYER_MEDIA_LEVELS,j.JWPLAYER_MEDIA_LEVEL_CHANGED].join(" "),function(e){l(e),this.trigger(e.type,e)},this),h.on(j.JWPLAYER_AUDIO_TRACKS,function(e){y=e.currentTrack,w=e.tracks,this.trigger(e.type,e)},this),h.on(j.JWPLAYER_AUDIO_TRACK_CHANGED,function(e){y=e.currentTrack,w=e.tracks,this.trigger(e.type,e)},this),h.on(j.JWPLAYER_PLAYER_STATE,function(e){var t=e.newstate;t!==T.IDLE&&this.setState(t)},this),h.on(i.join(" "),function(e){"Infinity"===e.duration&&(e.duration=1/0),this.trigger(e.type,e)},this),h.on(t.join(" "),function(e){this.trigger(e.type,e)},this),h.on(n.join(" "),function(e){this.trigger(e.type)},this),h.on(j.JWPLAYER_MEDIA_BEFORECOMPLETE,function(){this.trigger(j.JWPLAYER_MEDIA_COMPLETE)},this),h.on("visualQuality",function(e){var t=0;1<v.length&&(t=u(v,e.level.index+1)),e.level=k.extend(e.level,{index:t}),e.reason=e.reason||"api",this.trigger("visualQuality",e),this.trigger("providerFirstFrame",{})},this),h.on(j.JWPLAYER_PROVIDER_CHANGED,function(e){p=e.message,this.trigger(j.JWPLAYER_PROVIDER_CHANGED,e)},this),h.on(j.JWPLAYER_ERROR,function(e){this.trigger(j.JWPLAYER_MEDIA_ERROR,e)},this),h.on("subtitlesTracks",function(e){this.addTextTracks(e.tracks)},this),h.on("subtitlesTrackData",function(e){this.addCuesToTrack(e)},this),h.on(j.JWPLAYER_MEDIA_META,function(e){e&&(e.metadata&&"textdata"===e.metadata.type?this.addCaptionsCue(e.metadata):this.trigger(e.type,e))},this),A(r)&&h.on("throttle",function(e){s(),"resume"===e.state?C.trigger.call(b,"flashThrottle",e):g=setTimeout(function(){C.trigger.call(b,"flashThrottle",e)},250)},this)}},remove:function(){m=-1,v=null,E.remove(h)},setVisibility:function(e){e=!!e,d.style.opacity=e?1:0},resize:function(e,t,i){i&&_("stretch",i)},setControls:function(e){_("setControls",e)},setFullscreen:function(e){_("fullscreen",t=e)},getFullScreen:function(){return t},setCurrentQuality:function(e){_("setCurrentQuality",v[e].index)},getCurrentQuality:function(){return m},setSubtitlesTrack:function(e){_("setSubtitlesTrack",e)},getName:function(){return p?{name:"flash_"+p}:{name:"flash"}},getQualityLevels:function(){return k.map(v||f&&f.sources,function(e){return(0,R.qualityLevel)(e)})},getAudioTracks:function(){return w},getCurrentAudioTrack:function(){return y},setCurrentAudioTrack:function(e){_("setCurrentAudioTrack",e)},destroy:function(){s(),this.remove(),h&&(h.off(),h=null),f=d=null,this.off()}})}var i=0,n=function(){};return n.prototype=e,t.prototype=new n,t.getName=function(){return{name:"flash"}},t}.apply(t,n))||(e.exports=r)}}),webpackJsonpjwplayer([5],{8:function(e,t,i){var n,r;n=[i(1),i(11),i(2),i(13),i(12)],void 0===(r=function(l,o,c,u,d){function e(e){if(this._currentTextTrackIndex=-1,e){if(this._textTracks?(this._textTracks=l.reject(this._textTracks,function(e){if(this.renderNatively&&"nativecaptions"===e._id)return delete this._tracksById[e._id],!0},this),delete this._tracksById.nativemetadata):this._initTextTracks(),e.length)for(var t=0,i=e.length;t<i;t++){var n=e[t];if(!n._id){if("captions"===n.kind||"metadata"===n.kind){if(n._id="native"+n.kind,!n.label&&"captions"===n.kind){var r=d.createLabel(n,this._unknownCount);n.name=r.label,this._unknownCount=r.unknownCount}}else n._id=d.createId(n,this._textTracks.length);if(this._tracksById[n._id])continue;n.inuse=!0}if(n.inuse&&!this._tracksById[n._id])if("metadata"===n.kind)n.mode="hidden",n.oncuechange=P.bind(this),this._tracksById[n._id]=n;else if(j(n.kind)){var o,a=n.mode;if(n.mode="hidden",!n.cues.length&&n.embedded)continue;if(n.mode=a,this._cuesByTrackId[n._id]&&!this._cuesByTrackId[n._id].loaded){for(var s=this._cuesByTrackId[n._id].cues;o=s.shift();)x(this.renderNatively,n,o);n.mode=a,this._cuesByTrackId[n._id].loaded=!0}C.call(this,n)}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||y.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(c.isEdge()||c.isFF()||c.isSafari())&&(this.addTrackHandler=this.addTrackHandler||w.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function t(e){if(this.renderNatively){var t=e===this._itemTracks;t||u.cancelXhr(this._itemTracks),(this._itemTracks=e)&&(t||(this.disableTextTrack(),S.call(this),this.addTextTracks(e)))}}function i(){return this._currentTextTrackIndex}function n(e){return this.renderNatively?void(this._textTracks&&(0===e&&l.each(this._textTracks,function(e){e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==e-1&&(this.disableTextTrack(),this._currentTextTrackIndex=e-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1))}function r(e){if(e.text&&e.begin&&e.end){var t,i=e.trackid.toString(),n=this._tracksById&&this._tracksById[i];n||(n={kind:"captions",_id:i,data:[]},this.addTextTracks([n]),this.trigger("subtitlesTracks",{tracks:this._textTracks})),e.useDTS&&(n.source||(n.source=e.source||"mpegts")),t=e.begin+"_"+e.text;var r=this._metaCuesByTextTime[t];if(!r){r={begin:e.begin,end:e.end,text:e.text},this._metaCuesByTextTime[t]=r;var o=u.convertToVTTCues([r])[0];n.data.push(o)}}}function a(e){this._tracksById||this._initTextTracks();var t=e.track?e.track:"native"+e.type,i=this._tracksById[t],n="captions"===e.type?"Unknown CC":"ID3 Metadata",r=e.cue;if(!i){var o={kind:e.type,_id:t,label:n,embedded:!0};i=E.call(this,o),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):b.call(this,[i])}A.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?x(this.renderNatively,i,r):i.data.push(r))}function s(e){var t=this._tracksById[e.name];if(t){t.source=e.source;for(var i=e.captions||[],n=[],r=!1,o=0;o<i.length;o++){var a=i[o],s=e.name+"_"+a.begin+"_"+a.end;this._metaCuesByTextTime[s]||(this._metaCuesByTextTime[s]=a,n.push(a),r=!0)}r&&n.sort(function(e,t){return e.begin-t.begin});var l=u.convertToVTTCues(n);Array.prototype.push.apply(t.data,l)}}function h(e,t,i){e&&(p(e,t,i),this.instreamMode||(e.addEventListener?e.addEventListener(t,i):e["on"+t]=i))}function p(e,t,i){e&&(e.removeEventListener?e.removeEventListener(t,i):e["on"+t]=null)}function f(){u.cancelXhr(this._itemTracks);var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(k(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),k(this.renderNatively,this.video.textTracks))}function g(e){this._cachedVTTCues[e]&&(this._cachedVTTCues[e]={},this._tracksById[e].data=[])}function m(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="disabled",(e.embedded||"nativecaptions"===e._id)&&(e.mode="hidden"))}}function v(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="showing")}}function y(){var e=this.video.textTracks,t=l.filter(e,function(e){return(e.inuse||!e._id)&&j(e.kind)});if(this._textTracks&&!R.call(this,t)){for(var i=-1,n=0;n<this._textTracks.length;n++)if("showing"===this._textTracks[n].mode){i=n;break}i!==this._currentTextTrackIndex&&this.setSubtitlesTrack(i+1)}else this.setTextTracks(e)}function w(){this.setTextTracks(this.video.textTracks)}function b(e){if(e){this._textTracks||this._initTextTracks();for(var t=0;t<e.length;t++){var i=e[t];if(!i.kind||j(i.kind)){var n=E.call(this,i);C.call(this,n),i.file&&(i.data=[],u.loadFile(i,this.addVTTCuesToTrack.bind(this,n),L))}}this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function _(e,t){if(this.renderNatively){var i,n=this._tracksById[e._id];if(!n)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[e._id]={cues:t,loaded:!1});if(!this._cuesByTrackId[e._id]||!this._cuesByTrackId[e._id].loaded)for(this._cuesByTrackId[e._id]={cues:t,loaded:!0};i=t.shift();)x(this.renderNatively,n,i)}}function x(e,t,i){if(c.isIE()&&e&&window.TextTrackCue){var n=new window.TextTrackCue(i.startTime,i.endTime,i.text);t.addCue(n)}else t.addCue(i)}function k(i,e){e&&e.length&&l.each(e,function(e){if(!(c.isIE()&&i&&/^(native|subtitle|cc)/.test(e._id))){e.mode="disabled",e.mode="hidden";for(var t=e.cues.length;t--;)e.removeCue(e.cues[t]);e.embedded||(e.mode="disabled"),e.inuse=!1}})}function j(e){return"subtitles"===e||"captions"===e}function T(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0}function E(e){var t,i=d.createLabel(e,this._unknownCount),n=i.label;if(this._unknownCount=i.unknownCount,this.renderNatively||"metadata"===e.kind){var r=this.video.textTracks;(t=l.findWhere(r,{label:n}))?(t.kind=e.kind,t.language=e.language||""):t=this.video.addTextTrack(e.kind,n,e.language||""),t["default"]=e["default"],t.mode="disabled",t.inuse=!0}else(t=e).data=t.data||[];return t._id||(t._id=d.createId(e,this._textTracks.length)),t}function C(e){this._textTracks.push(e),this._tracksById[e._id]=e}function S(){if(this._textTracks){var e=l.filter(this._textTracks,function(e){return e.embedded||"subs"===e.groupid});this._initTextTracks(),l.each(e,function(e){this._tracksById[e._id]=e}),this._textTracks=e}}function P(e){var t=e.currentTarget.activeCues;if(t&&t.length){var i=t[t.length-1].startTime;if(this._activeCuePosition!==i){var n=[];if(l.each(t,function(e){e.startTime<i||(e.data||e.value?n.push(e):e.text&&this.trigger("meta",{metadataTime:i,metadata:JSON.parse(e.text)}))},this),n.length){var r=o.parseID3(n);this.trigger("meta",{metadataTime:i,metadata:r})}this._activeCuePosition=i}}}function A(e,t){var i=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var n,r=this._cachedVTTCues[e._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*t.startTime);var o="_"+t.line,a=Math.floor(20*t.endTime),s=r[n+o]||r[n+1+o]||r[n-1+o];return!(s&&Math.abs(s-a)<=1||(r[n+o]=a,0));case"metadata":var l=t.data?new Uint8Array(t.data).join(""):t.text;return!r[n=t.startTime+l]&&(r[n]=t.endTime,!0);default:return!1}}function R(e){if(e.length>this._textTracks.length)return!0;for(var t=0;t<e.length;t++){var i=e[t];if(!i._id||!this._tracksById[i._id])return!0}return!1}function L(e){c.log("CAPTIONS("+e+")")}return{_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:T,addTracksListener:h,clearTracks:f,clearCueData:g,disableTextTrack:m,enableTextTrack:v,getSubtitlesTrack:i,removeTracksListener:p,addTextTracks:b,setTextTracks:e,setupSideloadedTracks:t,setSubtitlesTrack:n,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:s,addCaptionsCue:r,addVTTCue:a,addVTTCuesToTrack:_,renderNatively:!1}}.apply(t,n))||(e.exports=r)},9:function(e,t){"use strict";function i(e){return{bitrate:e.bitrate,label:e.label,width:e.width,height:e.height}}Object.defineProperty(t,"__esModule",{value:!0}),t.qualityLevel=i},24:function(e,t){var i,n;i=[],void 0===(n=function(){function e(e){return e&&e.length?e.end(e.length-1):0}return{
endOfRange:e}}.apply(t,i))||(e.exports=n)},77:function(e,t,i){var n,r;n=[i(109),i(63),i(4),i(1)],void 0===(r=function(o,h,a,p){function s(l,e){function t(e){var o=e.target,a=e.initData;if(o.webkitKeys||o.webkitSetMediaKeys(new window.WebKitMediaKeys("com.apple.fps.1_0")),!o.webkitKeys)throw new Error("Could not create MediaKeys");var s=l.fairplay;s.initData=a,h.ajax(s.certificateUrl,function(e){var t=new Uint8Array(e.response),i=s.extractContentId(y(a));p.isString(i)&&(i=v(i));var n=f(a,i,t),r=o.webkitKeys.createSession("video/mp4",n);if(!r)throw new Error("Could not create key session");g(r,"webkitkeymessage",c),g(r,"webkitkeyerror",u),s.session=r},i,{responseType:"arraybuffer"})}function c(e){var t=l.fairplay,i=e.target,n=e.message,r=new XMLHttpRequest;r.responseType=t.licenseResponseType,r.addEventListener("load",s,!1),r.addEventListener("error",d,!1);var o="";o=p.isFunction(t.processSpcUrl)?t.processSpcUrl(y(t.initData)):t.processSpcUrl,r.open("POST",o,!0),p.each(t.licenseRequestHeaders,function(e){r.setRequestHeader(e.name,e.value)});var a=t.licenseRequestMessage(n,i);r.send(a)}function s(e){var t=e.target,i=l.fairplay.extractKey(t.response);p.isFunction(i.then)?i.then(n):n(i)}function n(e){var t=l.fairplay.session,i=e;p.isString(i)&&(i=w(i)),t.update(i)}function i(){l.trigger(a.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: Failed to retrieve the server certificate"})}function u(){l.trigger(a.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: Decryption key error was encountered"})}function d(){l.trigger(a.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: The license request failed"})}var r=e.sources[0];if(!l.fairplay||l.fairplay.source!==r){var o=r.drm;o&&o.fairplay?(l.fairplay=p.extend({},b,o.fairplay),l.fairplay.source=r,l.fairplay.destroy=function(){m(l.video,"webkitneedkey",t);var e=this.session;e&&(m(e,"webkitkeymessage",c),m(e,"webkitkeyerror",u)),l.fairplay=null},g(l.video,"webkitneedkey",t)):l.fairplay&&l.fairplay.destroy()}}function f(e,t,i){var n=0,r=new ArrayBuffer(e.byteLength+4+t.byteLength+4+i.byteLength),o=new DataView(r);new Uint8Array(r,n,e.byteLength).set(e),n+=e.byteLength,o.setUint32(n,t.byteLength,!0),n+=4;var a=new Uint16Array(r,n,t.length);return a.set(t),n+=a.byteLength,o.setUint32(n,i.byteLength,!0),n+=4,new Uint8Array(r,n,i.byteLength).set(i),new Uint8Array(r,0,r.byteLength)}function g(e,t,i){m(e,t,i),e.addEventListener(t,i,!1)}function m(e,t,i){e&&e.removeEventListener(t,i)}function v(e){for(var t=new ArrayBuffer(2*e.length),i=new Uint16Array(t),n=0,r=e.length;n<r;n++)i[n]=e.charCodeAt(n);return i}function y(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}function w(e){for(var t=window.atob(e),i=t.length,n=new Uint8Array(new ArrayBuffer(i)),r=0;r<i;r++)n[r]=t.charCodeAt(r);return n}var e=function(e,t){o.call(this,e,t);var i=this.init,n=this.load,r=this.destroy;this.init=function(e){s(this,e),i.call(this,e)},this.load=function(e){s(this,e),n.call(this,e)},this.destroy=function(e){this.fairplay&&this.fairplay.destroy(),r.call(this,e)}},b={certificateUrl:"",processSpcUrl:"",licenseResponseType:"arraybuffer",licenseRequestHeaders:[],licenseRequestMessage:function(e){return e},extractContentId:function(e){return e.split("skd://")[1]},extractKey:function(e){return new Uint8Array(e)}};return e.getName=o.getName,e}.apply(t,n))||(e.exports=r)},109:function(e,t,i){var n,r,Je=i(9);n=[i(60),i(23),i(2),i(14),i(1),i(4),i(5),i(10),i(3),i(8),i(24)],void 0===(r=function(je,Te,Ee,Ce,Se,Pe,Ae,e,Re,Le,Ie){function Oe(e,i){Ee.foreach(e,function(e,t){i.addEventListener(e,t,!1)})}function Me(e,i){Ee.foreach(e,function(e,t){i.removeEventListener(e,t,!1)})}function t(e,r){function t(e){return!!(Ee.isIOS()||Ee.isSafari()||Ee.isEdge())||e&&Ee.isChrome()}function i(e,t){ke.setAttribute(e,t||"")}function n(){H(ke.audioTracks),ie.setTextTracks(ke.textTracks),i("jw-loaded","data")}function o(){i("jw-loaded","started")}function a(e){ie.trigger("click",e)}function s(){ce||(g(f()),h(D(),Z,Q))}function l(){h(D(),Z,Q)}function c(){De(ae),re=!0,ie.state===Ae.STALLED?ie.setState(Ae.PLAYING):ie.state===Ae.PLAYING&&(ae=setTimeout(M,Ne)),ce&&ke.duration===1/0&&0===ke.currentTime||(g(f()),p(ke.currentTime),h(D(),Z,Q),ie.state===Ae.PLAYING&&(ie.trigger(Pe.JWPLAYER_MEDIA_TIME,{position:Z,duration:Q}),d()))}function u(){ie.trigger("ratechange",{playbackRate:ke.playbackRate})}function d(){var e=ge.level;if(e.width!==ke.videoWidth||e.height!==ke.videoHeight){if(e.width=ke.videoWidth,e.height=ke.videoHeight,V(),!e.width||!e.height||-1===le)return;ge.reason=ge.reason||"auto",ge.mode="hls"===te[le].type?"auto":"manual",ge.bitrate=0,e.index=le,e.label=te[le].label,ie.trigger("visualQuality",ge),ge.reason=""}}function h(e,t,i){0===i||e===se&&i===Q||(se=e,ie.trigger(Pe.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*e,position:t,duration:i})),Y()}function p(e){Q<0&&(e=-(L()-e)),Z=e}function f(){var e=ke.duration,t=L();if(e===1/0&&t){var i=t-R();i!==1/0&&Be<i&&(e=-i)}return e}function g(e){Q=e,oe&&e&&e!==1/0&&ie.seek(oe)}function m(){var e=f();ce&&e===1/0&&(e=0),ie.trigger(Pe.JWPLAYER_MEDIA_META,{duration:e,height:ke.videoHeight,width:ke.videoWidth}),g(e)}function v(){re=me=!0,ce||V(),Fe&&ie.setTextTracks(ie._textTracks),w()}function y(){i("jw-loaded","meta"),m()}function w(){ee||Ee.isIOS()&&!me||(me=!(ee=!0),ie.trigger(Pe.JWPLAYER_MEDIA_BUFFER_FULL))}function b(){ie.setState(Ae.PLAYING),ke.hasAttribute("jw-played")||i("jw-played",""),ke.hasAttribute("jw-gesture-required")&&ke.removeAttribute("jw-gesture-required"),ie.trigger(Pe.JWPLAYER_PROVIDER_FIRST_FRAME,{})}function _(){ie.state!==Ae.COMPLETE&&ke.hasAttribute("jw-played")&&ke.currentTime!==ke.duration&&ie.setState(Ae.PAUSED)}function x(){if(!(ce||ke.paused||ke.ended||ie.state===Ae.LOADING||ie.state===Ae.ERROR||ie.seeking))return Ee.isIOS()&&ke.duration-ke.currentTime<=.1?void N():void(G()&&(_e=!0,J())||ie.setState(Ae.STALLED))}function k(){ie.trigger(Pe.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: File could not be played"})}function j(e){var t;return"array"===Ee.typeOf(e)&&0<e.length&&(t=Se.map(e,function(e,t){return{label:e.label||t}})),t}function T(e){le=E(te=e);var t=j(e);t&&ie.trigger(Pe.JWPLAYER_MEDIA_LEVELS,{levels:t,currentQuality:le})}function E(e){var t=Math.max(0,le),i=r.qualityLabel;if(e)for(var n=0;n<e.length;n++)if(e[n]["default"]&&(t=n),i&&e[n].label===i)return n;return ge.reason="initial choice",ge.level={},t}function C(){var e=ke.play();e&&e["catch"]?e["catch"](function(e){console.warn(e),"NotAllowedError"===e.name&&ke.hasAttribute("jw-gesture-required")&&ie.trigger("autoplayFailed")}):ke.hasAttribute("jw-gesture-required")&&ie.trigger("autoplayFailed")}function S(e,t){oe=0,X();var i=document.createElement("source");i.src=te[le].file;var n=ke.src!==i.src,r=ke.getAttribute("jw-loaded"),o=ke.hasAttribute("jw-played");n||"none"===r||"started"===r?(Q=t,P(te[le]),ie.setupSideloadedTracks(ie._itemTracks),ke.load()):(0===e&&0<ke.currentTime&&(oe=-1,ie.seek(e)),C()),Z=ke.currentTime,He&&!o&&(w(),ke.paused||ie.state===Ae.PLAYING||ie.setState(Ae.LOADING)),Ee.isIOS()&&ie.getFullScreen()&&(ke.controls=!0),0<e&&ie.seek(e)}function P(e){pe=null,fe=-1,ge.reason||(ge.reason="initial choice",ge.level={}),ee=re=!1,(ce=je(e))&&(ie.supportsPlaybackRate=!1),e.preload&&e.preload!==ke.getAttribute("preload")&&i("preload",e.preload);var t=document.createElement("source");t.src=e.file,ke.src!==t.src&&(i("jw-loaded","none"),ke.src=e.file)}function A(){ke&&(ie.disableTextTrack(),ke.removeAttribute("preload"),ke.removeAttribute("src"),ke.removeAttribute("jw-loaded"),ke.removeAttribute("jw-played"),Ce.emptyElement(ke),Te.style(ke,{objectFit:""}),le=-1,!ze&&"load"in ke&&ke.load())}function R(){for(var e=ke.seekable?ke.seekable.length:0,t=1/0;e--;)t=Math.min(t,ke.seekable.start(e));return t}function L(){for(var e=ke.seekable?ke.seekable.length:0,t=0;e--;)t=Math.max(t,ke.seekable.end(e));return t}function I(){ie.seeking=!1,ie.trigger(Pe.JWPLAYER_MEDIA_SEEKED)}function O(){ie.trigger("volume",{volume:Math.round(100*ke.volume)}),ie.trigger("mute",{mute:ke.muted})}function M(){ke.currentTime===Z?x():_e=!1}function D(){var e=ke.buffered,t=ke.duration;return!e||0===e.length||t<=0||t===1/0?0:Ee.between(e.end(e.length-1)/t,0,1)}function N(){ie.state!==Ae.IDLE&&ie.state!==Ae.COMPLETE&&(X(),le=-1,ie.trigger(Pe.JWPLAYER_MEDIA_COMPLETE))}function B(e){de=!0,z(e),Ee.isIOS()&&(ke.controls=!1)}function $(){for(var e=-1,t=0;t<ke.audioTracks.length;t++)if(ke.audioTracks[t].enabled){e=t;break}W(e)}function F(e){de=!1,z(e),Ee.isIOS()&&(ke.controls=!1)}function z(e){ie.trigger("fullscreenchange",{target:e.target,jwstate:de})}function H(e){if(pe=null,e){if(e.length){for(var t=0;t<e.length;t++)if(e[t].enabled){fe=t;break}-1===fe&&(e[fe=0].enabled=!0),pe=Se.map(e,function(e){return{name:e.label||e.language,language:e.language}})}ie.addTracksListener(e,"change",$),pe&&ie.trigger("audioTracks",{currentTrack:fe,tracks:pe})}}function W(e){ke&&ke.audioTracks&&pe&&-1<e&&e<ke.audioTracks.length&&e!==fe&&(ke.audioTracks[fe].enabled=!1,fe=e,ke.audioTracks[fe].enabled=!0,ie.trigger("audioTrackChanged",{currentTrack:fe,tracks:pe}))}function q(){return pe||[]}function U(){return fe}function V(){if("hls"===te[0].type){var e="video";0===ke.videoHeight&&(e="audio"),ie.trigger("mediaType",{mediaType:e})}}function Y(){var e=Ie.endOfRange(ke.buffered);ke.duration===1/0&&we===e?ye||(ye=setTimeout(function(){be=!0,J()},ve)):(De(ye),ye=null,be=!1),we=e}function J(){return!(!be||!_e||(ie.trigger(Pe.JWPLAYER_MEDIA_ERROR,{message:"The live stream is either down or has ended"}),0))}function G(){if(ke.duration!==1/0)return!1;var e=2;return Ie.endOfRange(ke.buffered)-ke.currentTime<=e}function X(){De(ae),De(ye),ye=null}this.state=Ae.IDLE,this.seeking=!1,Se.extend(this,Re,Le),this.renderNatively=t(r.renderCaptionsNatively);var K,Q,Z,ee,te,ie=this,ne={click:a,durationchange:s,ended:N,error:k,loadstart:o,loadeddata:n,loadedmetadata:y,canplay:v,playing:b,progress:l,pause:_,seeked:I,timeupdate:c,ratechange:u,volumechange:O,webkitbeginfullscreen:B,webkitendfullscreen:F},re=!1,oe=0,ae=-1,se=-1,le=-1,ce=null,ue=!!r.sdkplatform,de=!1,he=Ee.noop,pe=null,fe=-1,ge={level:{}},me=!1,ve=3e4,ye=null,we=null,be=!1,_e=!1,xe=document.getElementById(e),ke=xe?xe.querySelector("video, audio"):void 0;ke||(ke=document.createElement("video"),He&&i("jw-gesture-required")),ke.className="jw-video jw-reset",this.isSDK=ue,this.video=ke,this.supportsPlaybackRate=!0,Oe(ne,ke),i("disableRemotePlayback",""),i("webkit-playsinline"),i("playsinline"),this.stop=function(){X(),A(),this.clearTracks(),Ee.isIE()&&ke.pause(),this.setState(Ae.IDLE)},this.destroy=function(){he=Ee.noop,Me(ne,ke),this.removeTracksListener(ke.audioTracks,"change",$),this.removeTracksListener(ke.textTracks,"change",ie.textTrackChangeHandler),this.remove(),this.off()},this.init=function(e){te=e.sources,le=E(e.sources),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),Z=e.starttime||0,Q=e.duration||0,ge.reason="",P(te[le]),this.setupSideloadedTracks(e.tracks)},this.load=function(e){T(e.sources),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),He&&!ke.hasAttribute("jw-played")||ie.setState(Ae.LOADING),S(e.starttime||0,e.duration||0)},this.play=function(){return ie.seeking?(ie.setState(Ae.LOADING),void ie.once(Pe.JWPLAYER_MEDIA_SEEKED,ie.play)):(he(),void C())},this.pause=function(){X(),ke.pause(),he=function(){if(ke.paused&&ke.currentTime&&ke.duration===1/0){var e=L(),t=e-R(),i=t<Be,n=e-ke.currentTime;i&&e&&(15<n||n<0)&&(ke.currentTime=Math.max(e-10,e-t))}},this.setState(Ae.PAUSED)},this.seek=function(e){if(e<0&&(e+=R()+L()),0===oe&&this.trigger(Pe.JWPLAYER_MEDIA_SEEK,{position:ke.currentTime,offset:e}),re||(re=!!L()),re){oe=0;try{ie.seeking=!0,ke.currentTime=e}catch(Te){ie.seeking=!1,oe=e}}else oe=e,We&&ke.paused&&C()},this.volume=function(e){e=Ee.between(e/100,0,1),ke.volume=e},this.mute=function(e){ke.muted=!!e},this.detachMedia=function(){return X(),Me(ne,ke),this.removeTracksListener(ke.textTracks,"change",this.textTrackChangeHandler),this.disableTextTrack(),ke},this.attachMedia=function(){Oe(ne,ke),re=!1,this.seeking=!1,ke.loop=!1,this.enableTextTrack(),this.addTracksListener(ke.textTracks,"change",this.textTrackChangeHandler)},this.setContainer=function(e){(K=e).insertBefore(ke,e.firstChild)},this.getContainer=function(){return K},this.remove=function(){A(),X(),K===ke.parentNode&&K.removeChild(ke)},this.setVisibility=function(e){(e=!!e)||qe?Te.style(K,{visibility:"visible",opacity:1}):Te.style(K,{visibility:"",opacity:0})},this.resize=function(e,t,i){if(!(e&&t&&ke.videoWidth&&ke.videoHeight))return!1;var n={objectFit:"",width:"",height:""};if("uniform"===i){var r=e/t,o=ke.videoWidth/ke.videoHeight;Math.abs(r-o)<.09&&(n.objectFit="fill",i="exactfit")}if($e||Ue||Ve||qe&&!We){var a=-Math.floor(ke.videoWidth/2+1),s=-Math.floor(ke.videoHeight/2+1),l=Math.ceil(100*e/ke.videoWidth)/100,c=Math.ceil(100*t/ke.videoHeight)/100;"none"===i?l=c=1:"fill"===i?l=c=Math.max(l,c):"uniform"===i&&(l=c=Math.min(l,c)),n.width=ke.videoWidth,n.height=ke.videoHeight,n.top=n.left="50%",n.margin=0,Te.transform(ke,"translate("+a+"px, "+s+"px) scale("+l.toFixed(2)+", "+c.toFixed(2)+")")}return Te.style(ke,n),!1},this.setFullscreen=function(e){if(e=!!e)return!(Ee.tryCatch(function(){var e=ke.webkitEnterFullscreen||ke.webkitEnterFullScreen;e&&e.apply(ke)})instanceof Ee.Error)&&ie.getFullScreen();var t=ke.webkitExitFullscreen||ke.webkitExitFullScreen;return t&&t.apply(ke),e},ie.getFullScreen=function(){return de||!!ke.webkitDisplayingFullscreen},this.setCurrentQuality=function(e){if(le!==e&&0<=e&&te&&te.length>e){le=e,ge.reason="api",ge.level={},this.trigger(Pe.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:j(te)}),r.qualityLabel=te[e].label;var t=ke.currentTime||0,i=ke.duration||0;i<=0&&(i=Q),ie.setState(Ae.LOADING),S(t,i)}},this.setPlaybackRate=function(e){ke.playbackRate=ke.defaultPlaybackRate=e},this.getPlaybackRate=function(){return ke.playbackRate},this.getCurrentQuality=function(){return le},this.getQualityLevels=function(){return Se.map(te,function(e){return(0,Je.qualityLevel)(e)})},this.getName=function(){return{name:Ye}},this.setCurrentAudioTrack=W,this.getAudioTracks=q,this.getCurrentAudioTrack=U}var De=window.clearTimeout,Ne=256,Be=120,$e=Ee.isIE(),Fe=Ee.isIE(9),ze=Ee.isMSIE(),He=Ee.isMobile(),We=Ee.isFF(),qe=Ee.isAndroidNative(),Ue=Ee.isIOS(7),Ve=Ee.isIOS(8),Ye="html5",i=function(){};return i.prototype=e,t.prototype=new i,t.getName=function(){return{name:"html5"}},t}.apply(t,n))||(e.exports=r)}}),webpackJsonpjwplayer([9],{61:function(e,t,i){var n,r;n=[i(2),i(23),i(1),i(4),i(5),i(15),i(10),i(3)],void 0===(r=function(I,O,M,D,N,B,$,F){function z(t,s){function l(){window.YT&&window.YT.loaded?(k=window.YT,n()):setTimeout(l,100)}function e(){H&&(H.off(),H=null)}function i(){var e=T&&T.parentNode;return e||(C||(window.jwplayer(t).onReady(n),C=!0),!1)}function n(){k&&i()&&S&&S.apply(x)}function r(){if(j&&j.getPlayerState){var e=j.getPlayerState();null!=e&&e!==R&&g({data:e});var t=k.PlayerState;e===t.PLAYING?a():e===t.BUFFERING&&c()}}function o(e){return Math.round(10*e)/10}function a(){c(),x.trigger(D.JWPLAYER_MEDIA_TIME,{position:o(j.getCurrentTime()),duration:j.getDuration()})}function c(){var e=0;j&&j.getVideoLoadedFraction&&(e=Math.round(100*j.getVideoLoadedFraction())),E!==e&&(E=e,x.trigger(D.JWPLAYER_MEDIA_BUFFER,{bufferPercent:e}))}function u(){x.state!==N.IDLE&&x.state!==N.COMPLETE&&x.trigger(D.JWPLAYER_MEDIA_COMPLETE)}function d(){x.trigger(D.JWPLAYER_MEDIA_META,{duration:j.getDuration(),width:T.clientWidth,height:T.clientHeight})}function h(){var i=arguments,n=i.length-1;return function(){for(var e=n,t=i[n].apply(this,arguments);e--;)t=i[e].call(this,t);return t}}function p(e,t){if(!e)throw new Error("invalid Youtube ID");if(T.parentNode){var i={height:"100%",width:"100%",videoId:e,playerVars:M.extend({html5:1,autoplay:0,controls:0,showinfo:0,rel:0,modestbranding:0,playsinline:1,origin:location.protocol+"//"+location.hostname},t),events:{onReady:f,onStateChange:g,onPlaybackQualityChange:m,onError:v}};x.setVisibility(!0),j=new k.Player(T,i),T=j.getIframe(),S=null}}function f(){P&&(P.apply(x),P=null)}function g(e){var t=k.PlayerState;switch(R=e.data){case t.UNSTARTED:return void(I.isAndroid()&&j.playVideo());case t.ENDED:return void u();case t.PLAYING:return M.isFunction(j.unloadModule)&&j.unloadModule("captions"),L=!1,d(),x.trigger(D.JWPLAYER_MEDIA_LEVELS,{levels:x.getQualityLevels(),currentQuality:x.getCurrentQuality()}),void x.setState(N.PLAYING);case t.PAUSED:return void x.setState(N.PAUSED);case t.BUFFERING:return void(x.seeking?x.setState(N.LOADING):x.setState(N.STALLED));case t.CUED:return x.setState(N.IDLE),void(I.isAndroid()&&j.playVideo())}}function m(){R!==k.PlayerState.ENDED&&x.play(),x.trigger(D.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:x.getCurrentQuality(),levels:x.getQualityLevels()})}function v(){x.trigger(D.JWPLAYER_MEDIA_ERROR,{message:"Error loading YouTube: Video could not be played"})}function y(){W&&x.setVisibility(!0)}function w(){clearInterval(A),j&&j.stopVideo&&I.tryCatch(function(){j.stopVideo(),j.clearVideo()})}function b(e){P=null;var t=e.sources[0].file,i=I.youTubeID(t);if(x.volume(s.volume),x.mute(s.mute),x.setVisibility(!0),!k||!j)return S=function(){p(i)},void l();if(j.getPlayerState){var n=j.getVideoData();if((n&&n.video_id)!==i){L?(w(),j.cueVideoById(i)):j.loadVideoById(i);var r=j.getPlayerState(),o=k.PlayerState;r!==o.UNSTARTED&&r!==o.CUED||y()}else 0<j.getCurrentTime()&&j.seekTo(0),d()}else{var a=function(){x.load(e)};P=P?h(a,P):a}}this.state=N.IDLE,M.extend(this,F);var _,x=this,k=window.YT,j=null,T=document.createElement("div"),E=-1,C=!1,S=null,P=null,A=-1,R=-1,L=W;this.setState=function(e){clearInterval(A),e!==N.IDLE&&e!==N.COMPLETE&&(A=setInterval(r,250),e===N.PLAYING?this.seeking=!1:e!==N.LOADING&&e!==N.STALLED||c()),$.setState.apply(this,arguments)},!k&&H&&H.getStatus()===B.loaderstatus.NEW&&(H.on(D.COMPLETE,l),H.on(D.ERROR,e),H.load()),T.id=t+"_youtube",this.init=function(e){b(e)},this.destroy=function(){this.remove(),this.off(),_=T=k=x=null},this.load=function(e){this.setState(N.LOADING),b(e),x.play()},this.stop=function(){w(),this.setState(N.IDLE)},this.play=function(){L||(j&&j.playVideo?j.playVideo():P=P?h(this.play,P):this.play)},this.pause=function(){L||j.pauseVideo&&j.pauseVideo()},this.seek=function(e){L||j.seekTo&&(this.seeking=!0,j.seekTo(e))},this.volume=function(e){if(M.isNumber(e)){var t=Math.min(Math.max(0,e),100);j&&j.getVolume&&j.setVolume(t)}},this.mute=function(e){var t=I.exists(e)?!!e:!s.mute;j&&j.mute&&(t?j.mute():j.unMute())},this.setContainer=function(e){(_=e).appendChild(T),this.setVisibility(!0)},this.getContainer=function(){return _},this.remove=function(){w(),T&&_&&_===T.parentNode&&_.removeChild(T),S=P=j=null},this.setVisibility=function(e){(e=!!e)?(O.style(T,{display:"block"}),O.style(_,{visibility:"visible",opacity:1})):W||O.style(_,{opacity:0})},this.resize=function(){return!1},this.getCurrentQuality=function(){if(!j)return-1;if(j.getAvailableQualityLevels){var e=j.getPlaybackQuality();return j.getAvailableQualityLevels().indexOf(e)}return-1},this.getQualityLevels=function(){if(j){if(!M.isFunction(j.getAvailableQualityLevels))return[];var e=j.getAvailableQualityLevels();return 2===e.length&&M.contains(e,"auto")?{label:M.without(e,"auto")}:M.map(e,function(e){return{label:e}}).reverse()}},this.setCurrentQuality=function(e){if(j&&j.getAvailableQualityLevels){var t=j.getAvailableQualityLevels();if(t.length){var i=t[t.length-e-1];j.setPlaybackQuality(i)}}},this.getName=z.getName}var H=new B(window.location.protocol+"//www.youtube.com/iframe_api"),W=I.isMobile();return z.getName=function(){return{name:"youtube"}},z.register=function(e){e.api.registerProvider(z)},z}.apply(t,n))||(e.exports=r)}}),webpackJsonpjwplayer([13],{25:function(e,t,i){var n,r;n=[i(36)],void 0===(r=function(d){function i(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}function s(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(n);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function l(){this.values=Object.create(null)}function h(e,t,i,n){for(var r=n?e.split(n):[e],o=0;o<=r.length;o+=1)if("string"==typeof r[o]){var a=r[o].split(i);if(2===a.length)t(a[0],a[1])}}function p(t,e,a){function i(){var e=s(t);if(null===e)throw new Error("Malformed timestamp: "+o);return t=t.replace(c,""),e}function n(e,t){var o=new l;h(e,function(e,t){switch(e){case"region":for(var i=a.length-1;0<=i;i--)if(a[i].id===t){o.set(e,a[i].region);break}break;case"vertical":o.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),r=n[0];o.integer(e,r),o.percent(e,r)&&o.set("snapToLines",!1),o.alt(e,r,["auto"]),2===n.length&&o.alt("lineAlign",n[1],["start",x,"end"]);break;case"position":n=t.split(","),o.percent(e,n[0]),2===n.length&&o.alt("positionAlign",n[1],["start",x,"end","line-left","line-right","auto"]);break;case"size":o.percent(e,t);break;case"align":o.alt(e,t,["start",x,"end","left","right"])}},m,u),t.region=o.get("region",null),t.vertical=o.get("vertical","");var i=o.get("line","auto");"auto"===i&&-1===_.line&&(i=-1),t.line=i,t.lineAlign=o.get("lineAlign","start"),t.snapToLines=o.get("snapToLines",!0),t.size=o.get("size",100),t.align=o.get("align",x);var n=o.get("position","auto");"auto"===n&&50===_.position&&(n="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=n}function r(){t=t.replace(v,"")}var o=t;if(r(),e.startTime=i(),r(),"-->"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+o);t=t.substr(3),r(),e.endTime=i(),r(),n(t,e)}var n=/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/,r=/^-?\d+$/,f=/\r\n|\n/,g=/^NOTE($|[ \t])/,c=/^[^\sa-zA-Z-]+/,m=/:/,u=/\s/,v=/^\s+/,y=/-->/,w=/^WEBVTT([ \t].*)?$/,b=window.requestAnimationFrame||function(e){return window.setTimeout(e,17)},e=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new i,this.regionList=[],this.maxCueBatch=1e3};l.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){r.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return 0<=(t=parseFloat(t))&&t<=100&&(this.set(e,t),!0)}};var _=new d(0,0,0),x="middle"===_.align?"middle":"center";return e.prototype={parse:function(t,i){function n(){for(var e=s.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,s.buffer=e.substr(t),i}function r(e){h(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},m)}function o(){"CUETEXT"===s.state&&s.cue&&s.oncue&&s.oncue(s.cue),s.cue=null,s.state="INITIAL"===s.state?"BADWEBVTT":"BADCUE"}function a(){try{for(;s.buffer&&u<=s.maxCueBatch;){if(!f.test(s.buffer))return s.flush(),this;switch(c?c=!1:l=n(),s.state){case"HEADER":m.test(l)?r(l):l||(s.state="ID");break;case"NOTE":l||(s.state="ID");break;case"ID":if(g.test(l)){s.state="NOTE";break}if(!l)break;if(s.cue=new d(0,0,""),s.state="CUE",!y.test(l)){s.cue.id=l;break}case"CUE":try{p(l,s.cue,s.regionList)}catch(t){s.cue=null,s.state="BADCUE";break}s.state="CUETEXT";break;case"CUETEXT":var e=y.test(l);if(!l||e&&(c=!0)){s.oncue&&(u+=1,s.oncue(s.cue)),s.cue=null,s.state="ID";break}s.cue.text&&(s.cue.text+="\n"),s.cue.text+=l;break;case"BADCUE":l||(s.state="ID")}}if(u=0,s.buffer)b(a);else if(!i)return s.flush(),this}catch(t){return o(t),this}}var s=this;t&&(s.buffer+=s.decoder.decode(t,{stream:!0}));try{var l;if("INITIAL"===s.state){if(!f.test(s.buffer))return this;var e=(l=n()).match(w);if(!e||!e[0])throw new Error("Malformed WebVTT signature.");s.state="HEADER"}}catch(_){return o(),this}var c=!1,u=0;a()},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse(void 0,!0)),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(i){throw i}return e.onflush&&e.onflush(),this}},e}.apply(t,n))||(e.exports=r)}}),jwplayer.key="uVl4J18/nIfhC2++wDZHynYBM9/CL1E5d8M2HQ==",function(){var e=this;(function(){(function(){var i=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},WebSocket:window.WebSocket,logger:window.console,createConsumer:function(e){var t;return null==e&&(e=null!=(t=this.getConfig("url"))?t:this.INTERNAL.default_mount_path),new l.Consumer(this.createWebSocketURL(e))},getConfig:function(e){var t;return null!=(t=document.head.querySelector("meta[name='action-cable-"+e+"']"))?t.getAttribute("content"):void 0},createWebSocketURL:function(e){var t;return e&&!/^wss?:/i.test(e)?((t=document.createElement("a")).href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href):e},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var e,t;if(e=1<=arguments.length?i.call(arguments,0):[],this.debugging)return e.push(Date.now()),(t=this.logger).log.apply(t,["[ActionCable]"].concat(i.call(e)))}}}).call(this)}).call(e);var l=e.ActionCable;(function(){(function(){var n=function(e,t){return function(){return e.apply(t,arguments)}};l.ConnectionMonitor=function(){function e(e){this.connection=e,this.visibilityDidChange=n(this.visibilityDidChange,this),this.reconnectAttempts=0}var r,t,i;return e.pollInterval={min:3,max:30},e.staleThreshold=6,e.prototype.start=function(){if(!this.isRunning())return this.startedAt=t(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},e.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=t(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor stopped")},e.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},e.prototype.recordPing=function(){return this.pingedAt=t()},e.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,l.log("ConnectionMonitor recorded connect")},e.prototype.recordDisconnect=function(){return this.disconnectedAt=t(),l.log("ConnectionMonitor recorded disconnect")},e.prototype.startPolling=function(){return this.stopPolling(),this.poll()},e.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},e.prototype.poll=function(){return this.pollTimeout=setTimeout((e=this,function(){return e.reconnectIfStale(),e.poll()}),this.getPollInterval());var e},e.prototype.getPollInterval=function(){var e,t,i,n;return i=(n=this.constructor.pollInterval).min,t=n.max,e=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*r(e,i,t))},e.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return l.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+i(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?l.log("ConnectionMonitor skipping reopening recent disconnect"):(l.log("ConnectionMonitor reopening"),this.connection.reopen())},e.prototype.connectionIsStale=function(){var e;return i(null!=(e=this.pingedAt)?e:this.startedAt)>this.constructor.staleThreshold},e.prototype.disconnectedRecently=function(){return this.disconnectedAt&&i(this.disconnectedAt)<this.constructor.staleThreshold},e.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout((e=this,function(){if(e.connectionIsStale()||!e.connection.isOpen())return l.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}),200);var e},t=function(){return(new Date).getTime()},i=function(e){return(t()-e)/1e3},r=function(e,t,i){return Math.max(t,Math.min(i,e))},e}()}).call(this),function(){var e,r,t,i,n,o=[].slice,a=function(e,t){return function(){return e.apply(t,arguments)}},s=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1};i=l.INTERNAL,r=i.message_types,t=i.protocols,n=2<=t.length?o.call(t,0,e=t.length-1):(e=0,[]),t[e++],l.Connection=function(){function e(e){this.consumer=e,this.open=a(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new l.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)},e.prototype.open=function(){return this.isActive()?(l.log("Attempted to open WebSocket, but existing socket is "+this.getState()),!1):(l.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+t),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new l.WebSocket(this.consumer.url,t),this.installEventHandlers(),this.monitor.start(),!0)},e.prototype.close=function(e){var t;if((null!=e?e:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(t=this.webSocket)?t.close():void 0},e.prototype.reopen=function(){var e;if(l.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(t){return e=t,l.log("Failed to reopen WebSocket",e)}finally{l.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var e;return null!=(e=this.webSocket)?e.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var e;return e=this.getProtocol(),0<=s.call(n,e)},e.prototype.isState=function(){var e,t;return t=1<=arguments.length?o.call(arguments,0):[],e=this.getState(),0<=s.call(t,e)},e.prototype.getState=function(){var e,t;for(t in WebSocket)if(WebSocket[t]===(null!=(e=this.webSocket)?e.readyState:void 0))return t.toLowerCase();return null},e.prototype.installEventHandlers=function(){var e,t;for(e in this.events)t=this.events[e].bind(this),this.webSocket["on"+e]=t},e.prototype.uninstallEventHandlers=function(){var e;for(e in this.events)this.webSocket["on"+e]=function(){}},e.prototype.events={message:function(e){var t,i,n;if(this.isProtocolSupported())switch(t=(n=JSON.parse(e.data)).identifier,i=n.message,n.type){case r.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case r.ping:return this.monitor.recordPing();case r.confirmation:return this.subscriptions.notify(t,"connected");case r.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",i)}},open:function(){if(l.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return l.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(l.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return l.log("WebSocket onerror event")}},e}()}.call(this),function(){var c=[].slice;l.Subscriptions=function(){function e(e){this.consumer=e,this.subscriptions=[]}return e.prototype.create=function(e,t){var i,n,r;return n="object"==typeof(i=e)?i:{channel:i},r=new l.Subscription(this.consumer,n,t),this.add(r)},e.prototype.add=function(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.sendCommand(e,"subscribe"),e},e.prototype.remove=function(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e},e.prototype.reject=function(e){var t,i,n,r,o;for(r=[],t=0,i=(n=this.findAll(e)).length;t<i;t++)o=n[t],this.forget(o),this.notify(o,"rejected"),r.push(o);return r},e.prototype.forget=function(r){var o;return this.subscriptions=function(){var e,t,i,n;for(n=[],e=0,t=(i=this.subscriptions).length;e<t;e++)(o=i[e])!==r&&n.push(o);return n}.call(this),r},
e.prototype.findAll=function(e){var t,i,n,r,o;for(r=[],t=0,i=(n=this.subscriptions).length;t<i;t++)(o=n[t]).identifier===e&&r.push(o);return r},e.prototype.reload=function(){var e,t,i,n,r;for(n=[],e=0,t=(i=this.subscriptions).length;e<t;e++)r=i[e],n.push(this.sendCommand(r,"subscribe"));return n},e.prototype.notifyAll=function(e){var t,i,n,r,o,a,s;for(i=e,t=2<=arguments.length?c.call(arguments,1):[],a=[],n=0,r=(o=this.subscriptions).length;n<r;n++)s=o[n],a.push(this.notify.apply(this,[s,i].concat(c.call(t))));return a},e.prototype.notify=function(e,t){var i,n,r,o,a,s,l;for(s=e,n=t,i=3<=arguments.length?c.call(arguments,2):[],a=[],r=0,o=(l="string"==typeof s?this.findAll(s):[s]).length;r<o;r++)s=l[r],a.push("function"==typeof s[n]?s[n].apply(s,i):void 0);return a},e.prototype.sendCommand=function(e,t){var i;return i=e.identifier,this.consumer.send({command:t,identifier:i})},e}()}.call(this),function(){l.Subscription=function(){function e(e,t,i){this.consumer=e,null==t&&(t={}),this.identifier=JSON.stringify(t),n(this,i)}var n;return e.prototype.perform=function(e,t){return null==t&&(t={}),t.action=e,this.send(t)},e.prototype.send=function(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},e.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},n=function(e,t){var i,n;if(null!=t)for(i in t)n=t[i],e[i]=n;return e},e}()}.call(this),function(){l.Consumer=function(){function e(e){this.url=e,this.subscriptions=new l.Subscriptions(this),this.connection=new l.Connection(this)}return e.prototype.send=function(e){return this.connection.send(e)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=l:"function"==typeof define&&define.amd&&define(l)}.call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),$(function(){$("#copyable-embed-code, #copyable-permalink").focus(function(){var e=$(this);e.select(),e.mouseup(function(){return e.unbind("mouseup"),!1})}),$("#iframe-embed-info-button").click(function(){"true"==$(this).attr("aria-expanded")?$(".iframe-embed-title").addClass("truncated-title"):$(".iframe-embed-title").removeClass("truncated-title"),$("#iframe-share-info").removeClass("in"),$("#iframe-embed-share-button").attr("aria-expanded","false")}),$("#iframe-embed-share-button").click(function(){$("#iframe-embed-info").removeClass("in"),$("#iframe-embed-info-button").attr("aria-expanded","false")})}),$(function(){$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover({trigger:"hover"}),$('[data-toggle="popover-click"]').popover({trigger:"focus"}),$('[data-toggle="popover-click"]').on("click",function(e){return e.preventDefault(),!0}),$('[data-toggle="fade-element"]').hover(function(){$("#"+$(this).attr("data-target-id")).fadeToggle()}),$(".nav-tabs a").click(function(e){e.preventDefault(),$(this).tab("show")}),$('a[data-toggle="tab"]:not(.nav-tabs *)').click(function(e){e.preventDefault(),$('a[href="'+$(this).attr("href")+'"]').tab("show")}),$(document).ready(function(){""!==location.hash&&$('a[href="'+location.hash+'"]').tab("show"),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){history.pushState?history.pushState(null,null,"#"+$(e.target).attr("href").substr(1)):location.hash="#"+$(e.target).attr("href").substr(1)})}),$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var e=$(this.hash);if((e=e.length?e:$("[name="+this.hash.slice(1)+"]")).length)return $("html,body").animate({scrollTop:e.offset().top},750),!1}}),$(document).on("click","#download-menu.dropdown-menu",function(e){e.stopPropagation()}),$(".directory-tree").on("activate_node.jstree",function(e,t){window.location.href=t.node.a_attr.href}),window.addEventListener("touchstart",function e(){$('[data-toggle="tooltip"]').tooltip("destroy"),$(".openseadragon-container").addClass("touch-enabled"),window.removeEventListener("touchstart",e,!1)},!1)}),$(document).ready(function(){$(".selectpicker").selectpicker(),$(".search_scope").change(function(){var e=$(this).val();$(".search-query-form").attr("action",e)}),$("a#full-menu-toggle").on("click",function(e){e.preventDefault(),$(this).toggleClass("menu-active"),$("#dul-masthead-region-megamenu").slideToggle()});var e=document.querySelector("body");1==e.classList.contains("homepage")&&($("#q").attr("placeholder","photographs, advertisements, texts and more"),$("#search_field").change(function(){switch($("#search_field").val()){case"url1":$("#q").attr("placeholder","photographs, advertisements, texts and more");break;case"url2":$("#q").attr("placeholder","e-books, data sets, and more");break;case"url3":$("#q").attr("placeholder","research data from Duke scholars");break;case"url4":$("#q").attr("placeholder","publications by Duke authors");break;default:$("#q").attr("placeholder","photographs, advertisements, texts and more")}}),$("#mast-search").submit(function(e){e.preventDefault(),e.returnValue=!1;var t=$("#q").val();switch($("#search_field").val()){case"url1":location.href="/dc?utf8=%E2%9C%93&search_field=all_fields&q="+t;break;case"url2":location.href="/acquired_materials?utf8=%E2%9C%93&search_field=all_fields&q="+t;break;case"url3":location.href="https://research.repository.duke.edu/catalog?utf8=%E2%9C%93&search_field=all_fields&latest_version=true&top_level=true&q="+t;break;case"url4":location.href="https://dukespace.lib.duke.edu/dspace/discover?query="+t;break;default:location.href="/dc?utf8=%E2%9C%93&search_field=all_fields&q="+t}})),1==e.classList.contains("blacklight-acquired_materials")&&$("#q").attr("placeholder","e-books, data sets, and more")});var eventTracking=function(){function e(){$("#logo-col a.navbar-dul").on("click contextmenu",function(){$(this);var e={category:"masthead",action:"branding logos",label:"dul logo",custom_dimensions:{}};r(e)}),$("#logo-col a.navbar-ddr").on("click contextmenu",function(){$(this);var e={category:"masthead",action:"branding logos",label:"ddr logo",custom_dimensions:{}};r(e)}),$("#search-col form button[data-toggle=dropdown]").on("click contextmenu",function(){var e=$(this),t={category:"search box",action:"search scope selector"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#search-col form ul.dropdown-menu a").on("click contextmenu",function(){var e=$(this),t={category:"search box",action:"search scope selector"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#search-col form input#q").on("click contextmenu",function(){$(this);var e={category:"search box",action:"basic search",label:"keyword search field click",custom_dimensions:{}};r(e)}),$("#search-col form").on("submit",function(){$(this);var e={category:"search box",action:"submit search box"};e.label=$("input#q").val(),e.custom_dimensions={},r(e)}),$("#user-col a").on("click contextmenu",function(){var e=$(this),t={category:"masthead",action:"user account"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#mobile-menu button").on("click contextmenu",function(){var e=$(this),t={category:"masthead",action:"mobile menu"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#main-flashes a").on("click contextmenu",function(){var e=$(this),t={category:"masthead",action:"alerts"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#aptman a").on("click contextmenu",function(){var e=$(this),t={category:"footer",action:"adopt a collection"};t.label=n(e),t.custom_dimensions={},r(t)}),$(".footer a").on("click contextmenu",function(){var e=$(this),t={category:"footer",action:"footer links"};t.label=n(e),t.custom_dimensions={},r(t)}),$(".homepage-intro a").on("click contextmenu",function(){var e=$(this),t={category:"homepage",action:"homepage intro"};t.label=n(e),t.custom_dimensions={},r(t)}),$(".home-mission a").on("click contextmenu",function(){var e=$(this),t={category:"homepage",action:"homepage mission"};t.label=n(e),t.custom_dimensions={},r(t)}),$(".homepage-content a").on("click contextmenu",function(){var e=$(this),t={category:"homepage",action:"program areas"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#browse-all-colls-btn").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"browse all collections",label:"browse all collections (main button)",custom_dimensions:{}};r(e)}),$("#browse-all-items-btn").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"browse all items",label:"browse all items (main button)",custom_dimensions:{}};r(e)}),$("div.collection-start a.more-link").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"about the collection",label:"more about (from collection summary)",custom_dimensions:{}};r(e)}),$("ul#showcase-link-list a").on("click contextmenu",function(){var e=$(this),t={category:"collection home",action:"related link"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#collection-info dd a").on("click contextmenu",function(){var e=$(this),t={category:"metadata link"};t.action=$(this).parent("dd").attr("class"),t.label=n(e),t.custom_dimensions={},r(t)}),$("#featured-collections a").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"featured collection"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("div.collection-showcase a").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"showcase image"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("div.collection-highlight a").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"highlight image"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("a#view-all-featured").on("click contextmenu",function(){var e=$(this),t={category:"collection home",action:"featured items link"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#items-in-collection #documents.gallery .document .thumbnail-wrapper .caption a").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"document result | grid view | title"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("#items-in-collection #documents.gallery .document .thumbnail-wrapper > a").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"document result | grid view | thumbnail"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("#items-in-collection .feature-head a").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"browse all items",label:"browse all items (items section header)",custom_dimensions:{}};r(e)}),$("#items-in-collection .browse-more a").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"browse all items",label:"browse all items (items section bottom)",custom_dimensions:{}};r(e)}),$("#about-collection a").on("click contextmenu",function(){var e=$(this),t={category:"collection home",action:"about the collection"};t.label=n(e),t.custom_dimensions={},r(t)}),$(".collection-sponsor a").on("click contextmenu",function(){var e=$(this),t={category:"collection home",action:"adopt a collection"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#source-collection a").on("click contextmenu",function(){var e=$(this),t={category:"collection home",action:"finding aid"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#blog-posts a").on("click contextmenu",function(){$(this);var e={category:"collection home",action:"blog posts"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("body.about ul.nav a").on("click contextmenu",function(){var e=$(this),t={category:"collection about page",action:"tab navigation"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#appliedParams a").on("click contextmenu",function(){var e=$(this),t={category:"search results",action:"search revision"};t.label=n(e),t.custom_dimensions={},r(t)}),$("body.search-results-page #collections.gallery .document a").on("click contextmenu",function(){$(this);var e={category:"search results",action:"collection result"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("body.search-results-page #documents.documents-list .document .documentHeader a").on("click contextmenu",function(){$(this);var e={category:"search results",action:"document result | list view | title"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("body.search-results-page #documents.documents-list .document .document-thumbnail a").on("click contextmenu",function(){$(this);var e={category:"search results",action:"document result | list view | thumbnail"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("body.search-results-page #documents.gallery .document .thumbnail-wrapper .caption a").on("click contextmenu",function(){$(this);var e={category:"search results",action:"document result | grid view | title"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("body.search-results-page #documents.gallery .document .thumbnail-wrapper > a").on("click contextmenu",function(){$(this);var e={category:"search results",action:"document result | grid view | thumbnail"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("body.search-results-page #documents.documents-list .document .document-metadata a:not(.btn-file-download)").on("click contextmenu",function(){var e=$(this),t={category:"metadata link"};t.action=$(this).parent("dd").attr("class"),t.label=n(e),t.custom_dimensions={},r(t)}),$("body.search-results-page #sortAndPerPage .page_links a").on("click contextmenu",function(){var e=$(this),t={category:"search results",action:"pagination top"};t.label=n(e),t.custom_dimensions={},r(t)}),$("body.search-results-page #sortAndPerPage #sort-dropdown a, body.search-results-page #sortAndPerPage #sort-dropdown button").on("click contextmenu",function(){var e=$(this),t={category:"search results",action:"sort by"};t.label=n(e),t.custom_dimensions={},r(t)}),$("body.search-results-page #sortAndPerPage #per_page-dropdown a, body.search-results-page #sortAndPerPage #per_page-dropdown button").on("click contextmenu",function(){var e=$(this),t={category:"search results",action:"per page"};t.label=n(e),t.custom_dimensions={},r(t)}),$("body.search-results-page #sortAndPerPage .view-type a").on("click contextmenu",function(){var e=$(this),t={category:"search results",action:"layout toggle"};t.label=n(e),t.custom_dimensions={},r(t)}),$("body.search-results-page div.pagination ul.pagination a").on("click contextmenu",function(){var e=$(this),t={category:"search results",action:"pagination bottom"};t.label=n(e),t.custom_dimensions={},r(t)}),$("body.search-results-page .extra-result-see-more a").on("click contextmenu",function(){$(this);var e={category:"search results",action:"pagination bottom",label:"see more (ghost item link)",custom_dimensions:{}};r(e)}),$("body.featured #documents.gallery .document .thumbnail-wrapper .caption a").on("click contextmenu",function(){$(this);var e={category:"featured items page",action:"document result | grid view | title"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("body.featured #documents.gallery .document .thumbnail-wrapper > a").on("click contextmenu",function(){$(this);var e={category:"featured items page",action:"document result | grid view | thumbnail"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("div.facet_limit div.panel-heading").on("click contextmenu",function(){var e=$(this).find("a").first(),t={category:"facets"};t.action=$(this).attr("data-target").substring(1),t.label=n(e)+($(this).hasClass("collapsed")?" [expand]":" [collapse]"),t.custom_dimensions={},r(t)}),$("div.facet_limit ul.facet-values a").on("click contextmenu",function(){var e=$(this),t={category:"facets"};t.action=i(e),t.label=n(e),t.custom_dimensions={},r(t)}),$(document).on("click contextmenu","#ajax-modal.facet-browse a",function(){var e=$(this),t={category:"facets"};t.action=i(e),t.label=n(e),t.custom_dimensions={},r(t)}),$(document).on("click contextmenu","#facet-year_facet_iim input#range_year_facet_iim_begin",function(){$(this);var e={category:"facets",action:"facet-year_facet_iim",label:"year range begin",custom_dimensions:{}};r(e)}),$(document).on("click contextmenu","#facet-year_facet_iim input#range_year_facet_iim_end",function(){$(this);var e={category:"facets",action:"facet-year_facet_iim",label:"year range end",custom_dimensions:{}};r(e)}),$(document).on("click contextmenu","#facet-year_facet_iim div.slider-track",function(){$(this);var e={category:"facets",action:"facet-year_facet_iim",label:"year range slider",custom_dimensions:{}};r(e)}),$(document).on("click contextmenu","#facet-year_facet_iim div.chart_js",function(){$(this);var e={category:"facets",action:"facet-year_facet_iim",label:"year range histogram",custom_dimensions:{}};r(e)}),$(document).on("submit","#facet-year_facet_iim form",function(){$(this);var e={category:"facets",action:"facet-year_facet_iim",label:"year range submit limit",custom_dimensions:{}};r(e)}),$("#research-help h4 a").on("click contextmenu",function(){$(this);var e={category:"sidebar context",action:"research help",label:"owner link",custom_dimensions:{}};r(e)}),$("#research-help a[data-toggle=dropdown]").on("click contextmenu",function(){$(this);var e={category:"sidebar context",action:"research help"};e.label="contact link"+("true"==$(this).attr("aria-expanded")?" [collapse]":" [expand]"),e.custom_dimensions={},r(e)}),$("#research-help ul.dropdown-menu a").on("click contextmenu",function(){var e=$(this),t={category:"sidebar context",action:"research help"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#collection-context a#admin-set").on("click contextmenu",function(){$(this);var e={category:"sidebar context",action:"collection context",label:"admin set",custom_dimensions:{}};r(e)}),$("#collection-context a#parent-collection").on("click contextmenu",function(){$(this);var e={category:"sidebar context",action:"collection context",label:"parent collection",custom_dimensions:{}};r(e)}),$("#collection-context a#parent-item").on("click contextmenu",function(){$(this);var e={category:"sidebar context",action:"collection context",label:"parent item",custom_dimensions:{}};r(e)}),$("#collection-context a#more-digital-collections").on("click contextmenu",function(){$(this);var e={category:"sidebar context",action:"collection context",label:"more digital collections",custom_dimensions:{}};r(e)}),$("#finding-aid a:not(#faid-deep-link)").on("click contextmenu",function(){$(this);var e={category:"sidebar context",action:"finding aid",label:"finding aid top",custom_dimensions:{}};r(e)}),$("#finding-aid a#faid-deep-link").on("click contextmenu",function(){$(this);var e={category:"sidebar context",action:"finding aid",label:"finding aid deep link",custom_dimensions:{}};r(e)}),$("#previousNextDocument a").on("click contextmenu",function(){var e=$(this),t={category:"item to results nav"};t.action=i(e),t.label=n(e),t.custom_dimensions={},r(t)}),$("#item-info dd a:not(.btn-file-download)").on("click contextmenu",function(){var e=$(this),t={category:"metadata link"};t.action=$(this).parent("dd").attr("class"),t.label=n(e),t.custom_dimensions={},r(t)}),$("#item-components #documents .document .documentHeader a").on("click contextmenu",function(){$(this);var e={category:"item contents",action:"document result | list view | title"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("#item-components #documents .document .document-thumbnail a").on("click contextmenu",function(){$(this);var e={category:"item contents",action:"document result | list view | thumbnail"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("#item-components #documents.documents-list .document .document-metadata a:not(.btn-file-download)").on("click contextmenu",function(){var e=$(this),t={category:"metadata link"};t.action=$(this).parent("dd").attr("class"),t.label=n(e),t.custom_dimensions={},r(t)}),$("#item-components .feature-head a").on("click contextmenu",function(){$(this);var e={category:"item contents",action:"browse all components",label:"browse all components (items section header)",custom_dimensions:{}};r(e)}),$("#item-components .browse-more a").on("click contextmenu",function(){$(this);var e={category:"item contents",action:"browse all components",label:"browse all components (items section bottom)",custom_dimensions:{}};r(e)}),$("#item-options #imagecount-indicator").on("click contextmenu",function(){var e=$(this),t={category:"item options",action:"image count"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#item-options #file-dropdown").on("click contextmenu",function(){var e=$(this),t={category:"item options",action:"file link"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#item-options #file-menu input[type=submit]").on("click contextmenu",function(){var e=$(this),t={category:"item options",action:"file link"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#item-options #file-menu a").on("click contextmenu",function(){var e=$(this),t={category:"item options",action:"file link"};t.label=n(e)+" | "+$(this).attr("href"),t.custom_dimensions={},r(t)}),$("#item-options #file-link a").on("click contextmenu",function(){var e=$(this),t={category:"item options",action:"file link"};t.label=n(e)+" | "+$(this).attr("href"),t.custom_dimensions={},r(t)}),$("#item-options #download-dropdown").on("click contextmenu",function(){var e=$(this),t={category:"item options",action:"download"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#item-options #download-menu input[type=submit]").on("click contextmenu",function(){var e=$(this),t={category:"file download",action:"derivative file"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#item-options #download-menu a").on("click contextmenu",function(){var e=$(this),t={category:"file download",action:"derivative file"};t.label=n(e)+" | "+$(this).attr("href"),t.custom_dimensions={},r(t)}),$("#item-options #share-dropdown").on("click contextmenu",function(){var e=$(this),t={category:"item options",action:"share"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#item-options #copyable-embed-code").on("click contextmenu",function(){$(this);var e={category:"item options",action:"embed",label:"embed code box",custom_dimensions:{}};r(e)}),$("#item-options #copyable-permalink").on("click contextmenu",function(){$(this);var e={category:"item options",action:"permalink",label:"permalink box",custom_dimensions:{}};r(e)}),$("#related-items #documents.gallery .document .thumbnail-wrapper .caption a").on("click contextmenu",function(){$(this);var e={category:"related items",action:"document result | grid view | title"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("#related-items #documents.gallery .document .thumbnail-wrapper > a").on("click contextmenu",function(){$(this);var e={category:"related items",action:"document result | grid view | thumbnail"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$(document).on("click contextmenu",".openseadragon-container [id*=referencestrip-]",function(e){e.stopPropagation();var t=$(this),i={category:"image toolbar",action:"thumb strip"};i.label="page "+(t.index()+1),i.custom_dimensions={},r(i)}),$(document).on("click contextmenu",".openseadragon-container #image-toolbar button .btn-wrapper",function(){var e=$(this).parent(),t={category:"image toolbar"};t.action=i(e),t.label=n(e),t.custom_dimensions={},r(t)}),$(document).on("click contextmenu",".openseadragon-container #image-toolbar a",function(){var e=$(this),t={category:"image toolbar"};t.action=i(e),t.label=n(e),t.custom_dimensions={},r(t)}),$(document).on("click contextmenu",".openseadragon-container #image-toolbar input#page-jumper-text",function(){$(this);var e={category:"image toolbar",action:"page jumper",label:"click box",custom_dimensions:{}};r(e)}),$(document).on("submit",".openseadragon-container #image-toolbar form#page-jumper",function(){$(this);var e={category:"image toolbar",action:"page jumper",label:"jump to page",custom_dimensions:{}};r(e)}),$(".iframe-embed-title").on("click contextmenu",function(){var e=$(this),t={category:"embedded item info",action:"title"};t.label=n(e),t.custom_dimensions={},r(t)}),$(".iframe-embed-collection").on("click contextmenu",function(){var e=$(this),t={category:"embedded item info",action:"collection"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#iframe-embed-info-button").on("click contextmenu",function(){var e=$(this),t={category:"embedded item info",action:"info button"};t.label=n(e),t.custom_dimensions={},r(t)}),$("#iframe-embed-share-button").on("click contextmenu",function(){var e=$(this),t={category:"embedded item info",action:"share button"};t.label=n(e),t.custom_dimensions={},r(t)}),$(document).on("play complete fullscreen playlist-item-change playlist-complete","#jwplayer-element",function(e){$(this);var t={category:"audiovisual"};t.action=(e.handleObj.type.match("^playlist")?"av playlist: ":"av file: ")+e.handleObj.type,t.label=$(this).find("video").attr("src"),t.custom_dimensions={},r(t)}),$(document).on("click contextmenu","#av-playlist-nav ul a",function(){$(this);var e={category:"audiovisual",action:"av playlist: playlist-item-change navstrip"};e.label=$(this).attr("href"),e.custom_dimensions={},r(e)}),$("#interactive-transcript .tr-cue").on("click contextmenu",function(){$(this);var e={category:"audiovisual",action:"interactive transcript: cue click"};e.label=$(this).attr("id"),e.custom_dimensions={},r(e)}),$("#transcript-expand").on("click contextmenu",function(){$(this);var e={category:"audiovisual",action:"interactive transcript: expand"};e.label=$(this).data("state"),e.custom_dimensions={},r(e)}),$(document).on("click contextmenu",".jump-av",function(){$(this);var e={category:"audiovisual",action:"description timecode: click"};e.label=$(this).data("jump-sec"),e.custom_dimensions={},r(e)}),$("#download-transcript-dropdown").on("click contextmenu",function(){var e=$(this),t={category:"audiovisual",action:"interactive transcript: show download menu"};t.label=n(e),t.custom_dimensions={},r(t)}),$("ul.caption-download-menu > li > ul > li > a").on("click contextmenu",function(){var e=$(this),t={category:"audiovisual",action:"interactive transcript: download"};t.label=n(e),t.custom_dimensions={},r(t)}),$("ul.caption-download-menu > li > ul > li.dropdown-submenu > ul > li > a").on("click contextmenu",function(){$(this);var e={category:"audiovisual",action:"interactive transcript: download"};e.label=$(this).closest("ul.dropdown-menu").prev("a").text().trim()+" "+$(this).text().trim(),e.custom_dimensions={},r(e)}),$(".btn-file-download").on("click contextmenu",function(){var e={category:"file download",action:"master file"};e.label=$(this).attr("href"),e.custom_dimensions={},e.custom_dimensions={dimension1:"file download",dimension2:$(this).data("ga-permanent-id"),dimension3:"component",dimension4:$(this).data("ga-admin-set"),dimension5:$(this).data("ga-collection"),dimension6:$(this).data("ga-item")},r(e)})}function i(e){return e.data(o.actionDataAttribute)?e.data(o.actionDataAttribute):e.closest("[id]").attr("id")?e.closest("[id]").attr("id"):"top-level"}function n(e){var t;return e.data(o.labelDataAttribute)?t=e.data(o.labelDataAttribute):e.is("[data-toggle=dropdown]")?t="dropdown"+("true"==e.attr("aria-expanded")?" [collapse]":" [expand]"):e.is("a")?t=$.trim(e.text())||e.children("img:first").attr("alt")||e.attr("title"):e.is("button")?(t=e.attr("aria-label")||e.attr("title")||$.trim(e.text()),e.is("[data-toggle=collapse]")&&(t+="true"==e.attr("aria-expanded")?" [collapse]":" [expand]")):t=e.is("input")?e.attr("name")||e.attr("value")||e.attr("placeholder"):"no label",t}function r(e){t(e)}function t(e){ga("send","event",e.category,e.action,e.label,e.custom_dimensions)}var o={categoryDataAttribute:"ga-category",actionDataAttribute:"ga-action",labelDataAttribute:"ga-label"};return{listenForClicks:e}}();$(document).ready(function(){eventTracking.listenForClicks(),$(document).on("click","ul.facet-values a, .facet_pagination a.more_facets_link",function(){var e=$(this);$("#ajax-modal").addClass("facet-browse"),$("#ajax-modal .modal-dialog").first().attr("id",e.closest("[id]").attr("id"))})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(A,R){"use strict";if(!A.jstree){var r=0,o=!1,a=!1,s=!1,n=[],e=A("script:last").attr("src"),b=window.document;A.jstree={version:"3.3.4",defaults:{plugins:[]},plugins:{},path:e&&-1!==e.indexOf("/")?e.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},A.jstree.create=function(e,i){var n=new A.jstree.core(++r),t=i;return i=A.extend(!0,{},A.jstree.defaults,i),t&&t.plugins&&(i.plugins=t.plugins),A.each(i.plugins,function(e,t){"core"!==e&&(n=n.plugin(t,i[t]))}),A(e).data("jstree",n),n.init(e,i),n},A.jstree.destroy=function(){A(".jstree:jstree").jstree("destroy"),A(b).off(".jstree")},A.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},A.jstree.reference=function(t){var i=null,e=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!e||!e.length)try{e=A(t)}catch(n){}if(!e||!e.length)try{e=A("#"+t.replace(A.jstree.idregex,"\\$&"))}catch(n){}return e&&e.length&&(e=e.closest(".jstree")).length&&(e=e.data("jstree"))?i=e:A(".jstree").each(function(){var e=A(this).data("jstree");if(e&&e._model.data[t])return i=e,!1}),i},A.fn.jstree=function(i){var n="string"==typeof i,r=Array.prototype.slice.call(arguments,1),o=null;return!(!0===i&&!this.length)&&(this.each(function(){var e=A.jstree.reference(this),t=n&&e?e[i]:null;if(o=n&&t?t.apply(e,r):null,e||n||i!==R&&!A.isPlainObject(i)||A.jstree.create(this,i),(e&&!n||!0===i)&&(o=e||!1),null!==o&&o!==R)return!1}),null!==o&&o!==R?o:this)},A.expr.pseudos.jstree=A.expr.createPseudo(function(){return function(e){return A(e).hasClass("jstree")&&A(e).data("jstree")!==R}}),A.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:A.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},A.jstree.core.prototype={plugin:function(e,t){var i=A.jstree.plugins[e];return i?(this._data[e]={},i.prototype=this,new i(t,this)):this},init:function(e,t){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[A.jstree.root]={id:A.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=A(e).addClass("jstree jstree-"+this._id),this.settings=t,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(A.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,i=b.createElement("LI");return i.setAttribute("role","treeitem"),(e=b.createElement("I")).className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),i.appendChild(e),(e=b.createElement("A")).className="jstree-anchor",
e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),(t=b.createElement("I")).className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),i.appendChild(e),e=t=null,i},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var o="",a=null,t=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(b.selection&&b.selection.empty)b.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(i){}}}).on("mousedown.jstree",A.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),t=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",A.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",A.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",A.proxy(function(e){e.preventDefault(),e.currentTarget!==b.activeElement&&A(e.currentTarget).focus(),this.activate_node(e.currentTarget,e)},this)).on("keydown.jstree",".jstree-anchor",A.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(32!==e.which&&13!==e.which&&(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey))return!0;var t=null;switch(this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37)),e.which){case 32:e.ctrlKey&&(e.type="click",A(e.currentTarget).trigger(e));break;case 13:e.type="click",A(e.currentTarget).trigger(e);break;case 37:e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(t=this.get_parent(e.currentTarget))&&t.id!==A.jstree.root&&this.get_node(t,!0).children(".jstree-anchor").focus();break;case 38:e.preventDefault(),(t=this.get_prev_dom(e.currentTarget))&&t.length&&t.children(".jstree-anchor").focus();break;case 39:e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(e.currentTarget)&&(t=this.get_node(e.currentTarget,!0).children(".jstree-children")[0])&&A(this._firstChild(t)).children(".jstree-anchor").focus();break;case 40:e.preventDefault(),(t=this.get_next_dom(e.currentTarget))&&t.length&&t.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:e.preventDefault(),(t=this._firstChild(this.get_container_ul()[0]))&&A(t).children(".jstree-anchor").filter(":visible").focus();break;case 35:e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:e.preventDefault(),this.edit(e.currentTarget)}},this)).on("load_node.jstree",A.proxy(function(e,t){t.status&&(t.node.id!==A.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(A.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var e,t,i=[];for(e=0,t=this._data.core.selected.length;e<t;e++)i=i.concat(this._model.data[this._data.core.selected[e]].parents);for(e=0,t=(i=A.vakata.array_unique(i)).length;e<t;e++)this.open_node(i[e],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",A.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;a&&clearTimeout(a),a=setTimeout(function(){o=""},500);var i=String.fromCharCode(e.which).toLowerCase(),t=this.element.find(".jstree-anchor").filter(":visible"),n=t.index(b.activeElement)||0,r=!1;if(1<(o+=i).length){if(t.slice(n).each(A.proxy(function(e,t){if(0===A(t).text().toLowerCase().indexOf(o))return A(t).focus(),!(r=!0)},this)),r)return;if(t.slice(0,n).each(A.proxy(function(e,t){if(0===A(t).text().toLowerCase().indexOf(o))return A(t).focus(),!(r=!0)},this)),r)return}if(new RegExp("^"+i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(o)){if(t.slice(n+1).each(A.proxy(function(e,t){if(A(t).text().toLowerCase().charAt(0)===i)return A(t).focus(),!(r=!0)},this)),r)return;if(t.slice(0,n+1).each(A.proxy(function(e,t){if(A(t).text().toLowerCase().charAt(0)===i)return A(t).focus(),!(r=!0)},this)),r)return}},this)).on("init.jstree",A.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",A.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",A.proxy(function(e){this._data.core.focused=null,A(e.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",A.proxy(function(e){var t=this.get_node(e.currentTarget);t&&t.id&&(this._data.core.focused=t.id),this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),A(e.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",A.proxy(function(){if(500<+new Date-t&&!this._data.core.focused){t=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",A.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",A.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),A(b).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),(t.instance=this).element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(e){var t=this.settings.core.strings;return A.isFunction(t)?t.call(this,e):t&&t[e]?t[e]:e},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(e,t){var i;e&&e.id&&(e=e.id);try{if(this._model.data[e])e=this._model.data[e];else if("string"==typeof e&&this._model.data[e.replace(/^#/,"")])e=this._model.data[e.replace(/^#/,"")];else if("string"==typeof e&&(i=A("#"+e.replace(A.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else if((i=A(e,this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=A(e,this.element)).length||!i.hasClass("jstree"))return!1;e=this._model.data[A.jstree.root]}return t&&(e=e.id===A.jstree.root?this.element:A("#"+e.id.replace(A.jstree.idregex,"\\$&"),this.element)),e}catch(n){return!1}},get_path:function(e,t,i){if(!(e=e.parents?e:this.get_node(e))||e.id===A.jstree.root||!e.parents)return!1;var n,r,o=[];for(o.push(i?e.id:e.text),n=0,r=e.parents.length;n<r;n++)o.push(i?e.parents[n]:this.get_text(e.parents[n]));return o=o.reverse().slice(1),t?o.join(t):o},get_next_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){for(i=this._firstChild(this.get_container_ul()[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);return!!i&&A(i)}if(!e||!e.length)return!1;if(t){for(i=e[0];(i=this._nextSibling(i))&&0===i.offsetHeight;);return!!i&&A(i)}if(e.hasClass("jstree-open")){for(i=this._firstChild(e.children(".jstree-children")[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);if(null!==i)return A(i)}for(i=e[0];(i=this._nextSibling(i))&&0===i.offsetHeight;);return null!==i?A(i):e.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){for(i=this.get_container_ul()[0].lastChild;i&&0===i.offsetHeight;)i=this._previousSibling(i);return!!i&&A(i)}if(!e||!e.length)return!1;if(t){for(i=e[0];(i=this._previousSibling(i))&&0===i.offsetHeight;);return!!i&&A(i)}for(i=e[0];(i=this._previousSibling(i))&&0===i.offsetHeight;);if(null===i)return!(!(i=e[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&A(i);for(e=A(i);e.hasClass("jstree-open");)e=e.children(".jstree-children").first().children(".jstree-node:visible:last");return e},get_parent:function(e){return!(!(e=this.get_node(e))||e.id===A.jstree.root)&&e.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||0<e.children.length)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(a,s){var e,t,i,n,r;if(A.isArray(a))return this._load_nodes(a.slice(),s),!0;if(!(a=this.get_node(a)))return s&&s.call(this,a,!1),!1;if(a.state.loaded){for(a.state.loaded=!1,i=0,n=a.parents.length;i<n;i++)this._model.data[a.parents[i]].children_d=A.vakata.array_filter(this._model.data[a.parents[i]].children_d,function(e){return-1===A.inArray(e,a.children_d)});for(e=0,t=a.children_d.length;e<t;e++)this._model.data[a.children_d[e]].state.selected&&(r=!0),delete this._model.data[a.children_d[e]];r&&(this._data.core.selected=A.vakata.array_filter(this._data.core.selected,function(e){return-1===A.inArray(e,a.children_d)})),a.children=[],a.children_d=[],r&&this.trigger("changed",{action:"load_node",node:a,selected:this._data.core.selected})}return a.state.failed=!1,a.state.loading=!0,this.get_node(a,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(a,A.proxy(function(e){(a=this._model.data[a.id]).state.loading=!1,a.state.loaded=e,a.state.failed=!a.state.loaded;var t=this.get_node(a,!0),i=0,n=0,r=this._model.data,o=!1;for(i=0,n=a.children.length;i<n;i++)if(r[a.children[i]]&&!r[a.children[i]].state.hidden){o=!0;break}a.state.loaded&&t&&t.length&&(t.removeClass("jstree-closed jstree-open jstree-leaf"),o?"#"!==a.id&&t.addClass(a.state.opened?"jstree-open":"jstree-closed"):t.addClass("jstree-leaf")),t.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:a,status:e}),s&&s.call(this,a,e)},this)),!0},_load_nodes:function(e,t,i,n){var r,o,a=!0,s=function(){this._load_nodes(e,t,!0)},l=this._model.data,c=[];for(r=0,o=e.length;r<o;r++)l[e[r]]&&(!l[e[r]].state.loaded&&!l[e[r]].state.failed||!i&&n)&&(this.is_loading(e[r])||this.load_node(e[r],s),a=!1);if(a){for(r=0,o=e.length;r<o;r++)l[e[r]]&&l[e[r]].state.loaded&&c.push(e[r]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(e,t){if(e||(e=A.jstree.root),!(e=this.get_node(e)))return!1;var i,n,r=[],o=this._model.data,a=o[e.id].children_d;for(e.state&&!e.state.loaded&&r.push(e.id),i=0,n=a.length;i<n;i++)o[a[i]]&&o[a[i]].state&&!o[a[i]].state.loaded&&r.push(a[i]);r.length?this._load_nodes(r,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(r,o){var e,t=this.settings.core.data,a=function a(){return 3!==this.nodeType&&8!==this.nodeType};return t?A.isFunction(t)?t.call(this,r,A.proxy(function(e){!1===e?o.call(this,!1):this["string"==typeof e?"_append_html_data":"_append_json_data"](r,"string"==typeof e?A(A.parseHTML(e)).filter(a):e,function(e){o.call(this,e)})},this)):"object"==typeof t?t.url?(t=A.extend(!0,{},t),A.isFunction(t.url)&&(t.url=t.url.call(this,r)),A.isFunction(t.data)&&(t.data=t.data.call(this,r)),A.ajax(t).done(A.proxy(function(e,t,i){var n=i.getResponseHeader("Content-Type");return n&&-1!==n.indexOf("json")||"object"==typeof e?this._append_json_data(r,e,function(e){o.call(this,e)}):n&&-1!==n.indexOf("html")||"string"==typeof e?this._append_html_data(r,A(A.parseHTML(e)).filter(a),function(e){o.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:r.id,xhr:i})},this.settings.core.error.call(this,this._data.core.last_error),o.call(this,!1))},this)).fail(A.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:r.id,xhr:e})},o.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(e=A.isArray(t)?A.extend(!0,[],t):A.isPlainObject(t)?A.extend(!0,{},t):t,r.id===A.jstree.root?this._append_json_data(r,e,function(e){o.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:r.id})},this.settings.core.error.call(this,this._data.core.last_error),o.call(this,!1))):"string"==typeof t?r.id===A.jstree.root?this._append_html_data(r,A(A.parseHTML(t)).filter(a),function(e){o.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:r.id})},this.settings.core.error.call(this,this._data.core.last_error),o.call(this,!1)):o.call(this,!1):r.id===A.jstree.root?this._append_html_data(r,this._data.core.original_container_html.clone(!0),function(e){o.call(this,e)}):o.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&this._model.changed.push(e.id)},_append_html_data:function(e,t,i){(e=this.get_node(e)).children=[],e.children_d=[];var n,r,o,a=t.is("ul")?t.children():t,s=e.id,l=[],c=[],u=this._model.data,d=u[s],h=this._data.core.selected.length;for(a.each(A.proxy(function(e,t){(n=this._parse_model_from_html(A(t),s,d.parents.concat()))&&(l.push(n),c.push(n),u[n].children_d.length&&(c=c.concat(u[n].children_d)))},this)),d.children=l,d.children_d=c,r=0,o=d.parents.length;r<o;r++)u[d.parents[r]].children_d=u[d.parents[r]].children_d.concat(c);this.trigger("model",{nodes:c,parent:s}),s!==A.jstree.root?(this._node_changed(s),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==h&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(e,t,l,i){if(null!==this.element){(e=this.get_node(e)).children=[],e.children_d=[],t.d&&"string"==typeof(t=t.d)&&(t=JSON.parse(t)),A.isArray(t)||(t=[t]);var n=null,r={df:this._model.default_state,dat:t,par:e.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(e,c){e.data&&(e=e.data);var t,i,n,r,o=e.dat,a=e.par,s=[],l=[],u=[],d=e.df,h=e.t_id,p=e.t_cnt,f=e.m,g=f[a],m=e.sel,v=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var n,r,o,a,s=e.id.toString(),l={id:s,text:e.text||"",icon:e.icon===c||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in d)d.hasOwnProperty(n)&&(l.state[n]=d[n]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==c&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(l.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(l.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(l.li_attr[n]=e.li_attr[n]);if(l.li_attr.id||(l.li_attr.id=s),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(l.a_attr[n]=e.a_attr[n]);for(e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),n=0,r=(f[l.id]=l).children.length;n<r;n++)o=v(f[l.children[n]],l.id,i),a=f[o],l.children_d.push(o),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));return delete e.data,delete e.children,f[l.id].original=e,l.state.selected&&u.push(l.id),l.id},y=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);for(var n,r,o,a,s,l=!1;l="j"+h+"_"+ ++p,f[l];);for(n in s={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===c||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},d)d.hasOwnProperty(n)&&(s.state[n]=d[n]);if(e&&e.id&&(s.id=e.id.toString()),e&&e.text&&(s.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(s.icon=e.data.jstree.icon),s.icon!==c&&null!==s.icon&&""!==s.icon||(s.icon=!0),e&&e.data&&(s.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(s.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(s.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(s.li_attr[n]=e.li_attr[n]);if(s.li_attr.id&&!s.id&&(s.id=s.li_attr.id.toString()),s.id||(s.id=l),s.li_attr.id||(s.li_attr.id=s.id),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(s.a_attr[n]=e.a_attr[n]);if(e&&e.children&&e.children.length){for(n=0,r=e.children.length;n<r;n++)o=y(e.children[n],s.id,i),a=f[o],s.children.push(o),a.children_d.length&&(s.children_d=s.children_d.concat(a.children_d));s.children_d=s.children_d.concat(s.children)}return e&&e.children&&!0===e.children&&(s.state.loaded=!1,s.children=[],s.children_d=[]),delete e.data,delete e.children,s.original=e,(f[s.id]=s).state.selected&&u.push(s.id),s.id};if(o.length&&o[0].id!==c&&o[0].parent!==c){for(i=0,n=o.length;i<n;i++)o[i].children||(o[i].children=[]),f[o[i].id.toString()]=o[i];for(i=0,n=o.length;i<n;i++)f[o[i].parent.toString()].children.push(o[i].id.toString()),g.children_d.push(o[i].id.toString());for(i=0,n=g.children.length;i<n;i++)t=v(f[g.children[i]],a,g.parents.concat()),l.push(t),f[t].children_d.length&&(l=l.concat(f[t].children_d));for(i=0,n=g.parents.length;i<n;i++)f[g.parents[i]].children_d=f[g.parents[i]].children_d.concat(l);r={cnt:p,mod:f,sel:m,par:a,dpc:l,add:u}}else{for(i=0,n=o.length;i<n;i++)(t=y(o[i],a,g.parents.concat()))&&(s.push(t),l.push(t),f[t].children_d.length&&(l=l.concat(f[t].children_d)));for(g.children=s,g.children_d=l,i=0,n=g.parents.length;i<n;i++)f[g.parents[i]].children_d=f[g.parents[i]].children_d.concat(l);r={cnt:p,mod:f,sel:m,par:a,dpc:l,add:u}}if("undefined"!=typeof window&&"undefined"!=typeof window.document)return r;postMessage(r)},a=function(e,t){if(null!==this.element){this._cnt=e.cnt;var i,n=this._model.data;for(i in n)n.hasOwnProperty(i)&&n[i].state&&n[i].state.loading&&e.mod[i]&&(e.mod[i].state.loading=!0);if(this._model.data=e.mod,t){var r,o=e.add,a=e.sel,s=this._data.core.selected.slice();if(n=this._model.data,a.length!==s.length||A.vakata.array_unique(a.concat(s)).length!==a.length){for(i=0,r=a.length;i<r;i++)-1===A.inArray(a[i],o)&&-1===A.inArray(a[i],s)&&(n[a[i]].state.selected=!1);for(i=0,r=s.length;i<r;i++)-1===A.inArray(s[i],a)&&(n[s[i]].state.selected=!0)}}e.add.length&&(this._data.core.selected=this._data.core.selected.concat(e.add)),this.trigger("model",{nodes:e.dpc,parent:e.par}),e.par!==A.jstree.root?(this._node_changed(e.par),this.redraw()):this.redraw(!0),e.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),l.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString()],{type:"text/javascript"}))),!this._data.core.working||i?(this._data.core.working=!0,(n=new window.Worker(this._wrk)).onmessage=A.proxy(function(e){a.call(this,e.data,!0);try{n.terminate(),n=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),r.par?n.postMessage(r):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([e,t,l,!0])}catch(s){a.call(this,o(r),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else a.call(this,o(r),!1)}},_parse_model_from_html:function(e,t,i){i=i?[].concat(i):[],t&&i.unshift(t);var n,r,o,a,s,l=this._model.data,c={id:!1,text:!1,icon:!0,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(c.state[o]=this._model.default_state[o]);if(a=A.vakata.attributes(e,!0),A.each(a,function(e,t){if(!(t=A.trim(t)).length)return!0;c.li_attr[e]=t,"id"===e&&(c.id=t.toString())}),(a=e.children("a").first()).length&&(a=A.vakata.attributes(a,!0),A.each(a,function(e,t){(t=A.trim(t)).length&&(c.a_attr[e]=t)})),(a=e.children("a").first().length?e.children("a").first().clone():e.clone()).children("ins, i, ul").remove(),a=a.html(),a=A("<div />").html(a),c.text=this.settings.core.force_text?a.text():a.html(),a=e.data(),c.data=a?A.extend(!0,{},a):null,c.state.opened=e.hasClass("jstree-open"),c.state.selected=e.children("a").hasClass("jstree-clicked"),c.state.disabled=e.children("a").hasClass("jstree-disabled"),c.data&&c.data.jstree)for(o in c.data.jstree)c.data.jstree.hasOwnProperty(o)&&(c.state[o]=c.data.jstree[o]);for((a=e.children("a").children(".jstree-themeicon")).length&&(c.icon=!a.hasClass("jstree-themeicon-hidden")&&a.attr("rel")),c.state.icon!==R&&(c.icon=c.state.icon),c.icon!==R&&null!==c.icon&&""!==c.icon||(c.icon=!0),a=e.children("ul").children("li");l[s="j"+this._id+"_"+ ++this._cnt];);return c.id=c.li_attr.id?c.li_attr.id.toString():s,a.length?(a.each(A.proxy(function(e,t){n=this._parse_model_from_html(A(t),c.id,i),r=this._model.data[n],c.children.push(n),r.children_d.length&&(c.children_d=c.children_d.concat(r.children_d))},this)),c.children_d=c.children_d.concat(c.children)):e.hasClass("jstree-closed")&&(c.state.loaded=!1),c.li_attr["class"]&&(c.li_attr["class"]=c.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),c.a_attr["class"]&&(c.a_attr["class"]=c.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),(l[c.id]=c).state.selected&&this._data.core.selected.push(c.id),c.id},_parse_model_from_flat_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var n,r,o,a,s=e.id.toString(),l=this._model.data,c=this._model.default_state,u={id:s,text:e.text||"",icon:e.icon===R||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in c)c.hasOwnProperty(n)&&(u.state[n]=c[n]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(u.icon=e.data.jstree.icon),u.icon!==R&&null!==u.icon&&""!==u.icon||(u.icon=!0),e&&e.data&&(u.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(u.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(u.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(u.li_attr[n]=e.li_attr[n]);if(u.li_attr.id||(u.li_attr.id=s),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(u.a_attr[n]=e.a_attr[n]);for(e&&e.children&&!0===e.children&&(u.state.loaded=!1,u.children=[],u.children_d=[]),n=0,r=(l[u.id]=u).children.length;n<r;n++)a=l[o=this._parse_model_from_flat_json(l[u.children[n]],u.id,i)],u.children_d.push(o),a.children_d.length&&(u.children_d=u.children_d.concat(a.children_d));return delete e.data,delete e.children,l[u.id].original=e,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);for(var n,r,o,a,s,l=!1,c=this._model.data,u=this._model.default_state;c[l="j"+this._id+"_"+ ++this._cnt];);for(n in s={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===R||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},u)u.hasOwnProperty(n)&&(s.state[n]=u[n]);if(e&&e.id&&(s.id=e.id.toString()),e&&e.text&&(s.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(s.icon=e.data.jstree.icon),s.icon!==R&&null!==s.icon&&""!==s.icon||(s.icon=!0),e&&e.data&&(s.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(s.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(s.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(s.li_attr[n]=e.li_attr[n]);if(s.li_attr.id&&!s.id&&(s.id=s.li_attr.id.toString()),s.id||(s.id=l),s.li_attr.id||(s.li_attr.id=s.id),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(s.a_attr[n]=e.a_attr[n]);if(e&&e.children&&e.children.length){for(n=0,r=e.children.length;n<r;n++)a=c[o=this._parse_model_from_json(e.children[n],s.id,i)],s.children.push(o),a.children_d.length&&(s.children_d=s.children_d.concat(a.children_d));s.children_d=s.children_d.concat(s.children)}return e&&e.children&&!0===e.children&&(s.state.loaded=!1,s.children=[],s.children_d=[]),delete e.data,delete e.children,s.original=e,(c[s.id]=s).state.selected&&this._data.core.selected.push(s.id),s.id},_redraw:function(){var e,t,i,n=this._model.force_full_redraw?this._model.data[A.jstree.root].children.concat([]):this._model.changed.concat([]),r=b.createElement("UL"),o=this._data.core.focused;for(t=0,i=n.length;t<i;t++)(e=this.redraw_node(n[t],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&r.appendChild(e);this._model.force_full_redraw&&(r.className=this.get_container_ul()[0].className,r.setAttribute("role","group"),this.element.empty().append(r)),null!==o&&((e=this.get_node(o,!0))&&e.length&&e.children(".jstree-anchor")[0]!==b.activeElement?e.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:n})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t=this.get_node(e),i=!1,n=!1,r=!1,o=b;if(!t)return!1;if(t.id===A.jstree.root)return this.redraw(!0);if(!(e=this.get_node(e,!0))||!e.length)return!1;if(e.children(".jstree-children").remove(),e=e[0],t.children.length&&t.state.loaded){for((r=o.createElement("UL")).setAttribute("role","group"),r.className="jstree-children",i=0,n=t.children.length;i<n;i++)r.appendChild(this.redraw_node(t.children[i],!0,!0));e.appendChild(r)}},redraw_node:function(e,t,i,n){var r=this.get_node(e),o=!1,a=!1,s=!1,l=!1,c=!1,u=!1,d="",h=b,p=this._model.data,f=!1,g=null,m=0,v=0,y=!1,w=!1;if(!r)return!1;if(r.id===A.jstree.root)return this.redraw(!0);if(t=t||0===r.children.length,e=b.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(r.id[0])?"\\3"+r.id[0]+" "+r.id.substr(1).replace(A.jstree.idregex,"\\$&"):r.id.replace(A.jstree.idregex,"\\$&"))):b.getElementById(r.id))e=A(e),i||((o=e.parent().parent()[0])===this.element[0]&&(o=null),a=e.index()),t||!r.children.length||e.children(".jstree-children").length||(t=!0),t||(s=e.children(".jstree-children")[0]),f=e.children(".jstree-anchor")[0]===b.activeElement,e.remove();else if(t=!0,!i){if(!(null===(o=r.parent!==A.jstree.root?A("#"+r.parent.replace(A.jstree.idregex,"\\$&"),this.element)[0]:null)||o&&p[r.parent].state.opened))return!1;a=A.inArray(r.id,null===o?p[A.jstree.root].children:p[r.parent].children)}for(l in e=this._data.core.node.cloneNode(!0),d="jstree-node ",r.li_attr)if(r.li_attr.hasOwnProperty(l)){if("id"===l)continue;"class"!==l?e.setAttribute(l,r.li_attr[l]):d+=r.li_attr[l]}for(r.a_attr.id||(r.a_attr.id=r.id+"_anchor"),e.setAttribute("aria-selected",!!r.state.selected),e.setAttribute("aria-level",r.parents.length),e.setAttribute("aria-labelledby",r.a_attr.id),r.state.disabled&&e.setAttribute("aria-disabled",!0),l=0,c=r.children.length;l<c;l++)if(!p[r.children[l]].state.hidden){y=!0;break}if(null!==r.parent&&p[r.parent]&&!r.state.hidden&&(l=A.inArray(r.id,p[r.parent].children),w=r.id,-1!==l))for(l++,c=p[r.parent].children.length;l<c&&(p[p[r.parent].children[l]].state.hidden||(w=p[r.parent].children[l]),w===r.id);l++);for(c in r.state.hidden&&(d+=" jstree-hidden"),r.state.loaded&&!y?d+=" jstree-leaf":(d+=r.state.opened&&r.state.loaded?" jstree-open":" jstree-closed",e.setAttribute("aria-expanded",r.state.opened&&r.state.loaded)),w===r.id&&(d+=" jstree-last"),e.id=r.id,e.className=d,d=(r.state.selected?" jstree-clicked":"")+(r.state.disabled?" jstree-disabled":""),r.a_attr)if(r.a_attr.hasOwnProperty(c)){if("href"===c&&"#"===r.a_attr[c])continue;"class"!==c?e.childNodes[1].setAttribute(c,r.a_attr[c]):d+=" "+r.a_attr[c]}if(d.length&&(e.childNodes[1].className="jstree-anchor "+d),(r.icon&&!0!==r.icon||!1===r.icon)&&(!1===r.icon?e.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===r.icon.indexOf("/")&&-1===r.icon.indexOf(".")?e.childNodes[1].childNodes[0].className+=" "+r.icon+" jstree-themeicon-custom":(e.childNodes[1].childNodes[0].style.backgroundImage='url("'+r.icon+'")',e.childNodes[1].childNodes[0].style.backgroundPosition="center center",e.childNodes[1].childNodes[0].style.backgroundSize="auto",e.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?e.childNodes[1].appendChild(h.createTextNode(r.text)):e.childNodes[1].innerHTML+=r.text,t&&r.children.length&&(r.state.opened||n)&&r.state.loaded){for((u=h.createElement("UL")).setAttribute("role","group"),u.className="jstree-children",l=0,c=r.children.length;l<c;l++)u.appendChild(this.redraw_node(r.children[l],t,!0));e.appendChild(u)}if(s&&e.appendChild(s),!i){for(o||(o=this.element[0]),l=0,c=o.childNodes.length;l<c;l++)if(o.childNodes[l]&&o.childNodes[l].className&&-1!==o.childNodes[l].className.indexOf("jstree-children")){g=o.childNodes[l];break}g||((g=h.createElement("UL")).setAttribute("role","group"),g.className="jstree-children",o.appendChild(g)),a<(o=g).childNodes.length?o.insertBefore(e,o.childNodes[a]):o.appendChild(e),f&&(m=this.element[0].scrollTop,v=this.element[0].scrollLeft,e.childNodes[1].focus(),this.element[0].scrollTop=m,this.element[0].scrollLeft=v)}return r.state.opened&&!r.state.loaded&&(r.state.opened=!1,setTimeout(A.proxy(function(){this.open_node(r.id,!1,0)},this),0)),e},open_node:function(e,i,n){var t,r,o,a;if(A.isArray(e)){for(t=0,r=(e=e.slice()).length;t<r;t++)this.open_node(e[t],i,n);return!0}return!(!(e=this.get_node(e))||e.id===A.jstree.root)&&(n=n===R?this.settings.core.animation:n,this.is_closed(e)?this.is_loaded(e)?(o=this.get_node(e,!0),a=this,o.length&&(n&&o.children(".jstree-children").length&&o.children(".jstree-children").stop(!0,!0),e.children.length&&!this._firstChild(o.children(".jstree-children")[0])&&this.draw_children(e),n?(this.trigger("before_open",{node:e}),o.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(n,function(){this.style.display="",a.element&&a.trigger("after_open",{node:e})})):(this.trigger("before_open",{node:e}),o[0].className=o[0].className.replace("jstree-closed","jstree-open"),o[0].setAttribute("aria-expanded",!0))),e.state.opened=!0,i&&i.call(this,e,!0),o.length||this.trigger("before_open",{node:e}),this.trigger("open_node",{node:e}),n&&o.length||this.trigger("after_open",{node:e}),!0):this.is_loading(e)?setTimeout(A.proxy(function(){this.open_node(e,i,n)},this),500):void this.load_node(e,function(e,t){return t?this.open_node(e,i,n):!!i&&i.call(this,e,!1)}):(i&&i.call(this,e,!1),!1))},_open_to:function(e){if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;var t,i,n=e.parents;for(t=0,i=n.length;t<i;t+=1
)t!==A.jstree.root&&this.open_node(n[t],!1,0);return A("#"+e.id.replace(A.jstree.idregex,"\\$&"),this.element)},close_node:function(e,t){var i,n,r,o;if(A.isArray(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.close_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===A.jstree.root)&&(!this.is_closed(e)&&(t=t===R?this.settings.core.animation:t,o=(r=this).get_node(e,!0),e.state.opened=!1,this.trigger("close_node",{node:e}),void(o.length?t?o.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(t,function(){this.style.display="",o.children(".jstree-children").remove(),r.element&&r.trigger("after_close",{node:e})}):(o[0].className=o[0].className.replace("jstree-open","jstree-closed"),o.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:e})):this.trigger("after_close",{node:e}))))},toggle_node:function(e){var t,i;if(A.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.toggle_node(e[t]);return!0}return this.is_closed(e)?this.open_node(e):this.is_open(e)?this.close_node(e):void 0},open_all:function(e,i,n){if(e||(e=A.jstree.root),!(e=this.get_node(e)))return!1;var t,r,o,a=e.id===A.jstree.root?this.get_container_ul():this.get_node(e,!0);if(!a.length){for(t=0,r=e.children_d.length;t<r;t++)this.is_closed(this._model.data[e.children_d[t]])&&(this._model.data[e.children_d[t]].state.opened=!0);return this.trigger("open_all",{node:e})}n=n||a,(a=(o=this).is_closed(e)?a.find(".jstree-closed").addBack():a.find(".jstree-closed")).each(function(){o.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,n)},i||0)}),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(e,t){if(e||(e=A.jstree.root),!(e=this.get_node(e)))return!1;var i,n,r=e.id===A.jstree.root?this.get_container_ul():this.get_node(e,!0),o=this;for(r.length&&(r=this.is_open(e)?r.find(".jstree-open").addBack():r.find(".jstree-open"),A(r.get().reverse()).each(function(){o.close_node(this,t||0)})),i=0,n=e.children_d.length;i<n;i++)this._model.data[e.children_d[i]].state.opened=!1;this.trigger("close_all",{node:e})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(e){var t,i;if(A.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;e.state.disabled=!1,this.get_node(e,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:e})},disable_node:function(e){var t,i;if(A.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;e.state.disabled=!0,this.get_node(e,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:e})},is_hidden:function(e){return!0===(e=this.get_node(e)).state.hidden},hide_node:function(e,t){var i,n;if(A.isArray(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.hide_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;e.state.hidden||(e.state.hidden=!0,this._node_changed(e.parent),t||this.redraw(),this.trigger("hide_node",{node:e}))},show_node:function(e,t){var i,n;if(A.isArray(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.show_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;e.state.hidden&&(e.state.hidden=!1,this._node_changed(e.parent),t||this.redraw(),this.trigger("show_node",{node:e}))},hide_all:function(e){var t,i=this._model.data,n=[];for(t in i)i.hasOwnProperty(t)&&t!==A.jstree.root&&!i[t].state.hidden&&(i[t].state.hidden=!0,n.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("hide_all",{nodes:n}),n},show_all:function(e){var t,i=this._model.data,n=[];for(t in i)i.hasOwnProperty(t)&&t!==A.jstree.root&&i[t].state.hidden&&(i[t].state.hidden=!1,n.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("show_all",{nodes:n}),n},activate_node:function(e,t){if(this.is_disabled(e))return!1;if(t&&"object"==typeof t||(t={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==R?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&(!t.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(t.shiftKey){var i,n,r=this.get_node(e).id,o=this._data.core.last_clicked.id,a=this.get_node(this._data.core.last_clicked.parent).children,s=!1;for(i=0,n=a.length;i<n;i+=1)a[i]===r&&(s=!s),a[i]===o&&(s=!s),this.is_disabled(a[i])||!s&&a[i]!==r&&a[i]!==o?this.deselect_node(a[i],!0,t):this.is_hidden(a[i])||this.select_node(a[i],!0,!1,t);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:t})}else this.is_selected(e)?this.deselect_node(e,!1,t):this.select_node(e,!1,!1,t);else!this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,t):(this.deselect_all(!0),this.select_node(e,!1,!1,t),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:t})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(e,t,i,n){var r,o,a;if(A.isArray(e)){for(o=0,a=(e=e.slice()).length;o<a;o++)this.select_node(e[o],t,i,n);return!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;r=this.get_node(e,!0),e.state.selected||(e.state.selected=!0,this._data.core.selected.push(e.id),i||(r=this._open_to(e)),r&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:e,selected:this._data.core.selected,event:n}),t||this.trigger("changed",{action:"select_node",node:e,selected:this._data.core.selected,event:n}))},deselect_node:function(e,t,i){var n,r,o;if(A.isArray(e)){for(n=0,r=(e=e.slice()).length;n<r;n++)this.deselect_node(e[n],t,i);return!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;o=this.get_node(e,!0),e.state.selected&&(e.state.selected=!1,this._data.core.selected=A.vakata.array_remove_item(this._data.core.selected,e.id),o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:i}),t||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:i}))},select_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[A.jstree.root].children_d.concat(),t=0,i=this._data.core.selected.length;t<i;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:n})},deselect_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(t=0,i=this._data.core.selected.length;t<i;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:n}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:n})},is_selected:function(e){return!(!(e=this.get_node(e))||e.id===A.jstree.root)&&e.state.selected},get_selected:function(e){return e?A.map(this._data.core.selected,A.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(e){var t,i,n,r,o=this.get_selected(!0),a={};for(t=0,i=o.length;t<i;t++)a[o[t].id]=o[t];for(t=0,i=o.length;t<i;t++)for(n=0,r=o[t].children_d.length;n<r;n++)a[o[t].children_d[n]]&&delete a[o[t].children_d[n]];for(t in o=[],a)a.hasOwnProperty(t)&&o.push(t);return e?A.map(o,A.proxy(function(e){return this.get_node(e)},this)):o},get_bottom_selected:function(e){var t,i,n=this.get_selected(!0),r=[];for(t=0,i=n.length;t<i;t++)n[t].children.length||r.push(n[t].id);return e?A.map(r,A.proxy(function(e){return this.get_node(e)},this)):r},get_state:function(){var e,t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(e in this._model.data)this._model.data.hasOwnProperty(e)&&e!==A.jstree.root&&(this._model.data[e].state.opened&&t.core.open.push(e),this._model.data[e].state.selected&&t.core.selected.push(e));return t},set_state:function(t,i){if(t){if(t.core&&t.core.selected&&t.core.initial_selection===R&&(t.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),t.core){var n,e;if(t.core.open)return A.isArray(t.core.open)&&t.core.open.length?this._load_nodes(t.core.open,function(e){this.open_node(e,!1,0),delete t.core.open,this.set_state(t,i)}):(delete t.core.open,this.set_state(t,i)),!1;if(t.core.scroll)return t.core.scroll&&t.core.scroll.left!==R&&this.element.scrollLeft(t.core.scroll.left),t.core.scroll&&t.core.scroll.top!==R&&this.element.scrollTop(t.core.scroll.top),delete t.core.scroll,this.set_state(t,i),!1;if(t.core.selected)return n=this,t.core.initial_selection!==R&&t.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),A.each(t.core.selected,function(e,t){n.select_node(t,!1,!0)})),delete t.core.initial_selection,delete t.core.selected,this.set_state(t,i),!1;for(e in t)t.hasOwnProperty(e)&&"core"!==e&&-1===A.inArray(e,this.settings.plugins)&&delete t[e];if(A.isEmptyObject(t.core))return delete t.core,this.set_state(t,i),!1}return!A.isEmptyObject(t)||(t=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(e,t){this._data.core.state=!0===t?{}:this.get_state(),t&&A.isFunction(t)&&(this._data.core.state=t.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[A.jstree.root]={id:A.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var i=this.get_container_ul()[0].className;e||(this.element.html("<ul class='"+i+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(A.jstree.root,function(e,t){t&&(this.get_container_ul()[0].className=i,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(A.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===A.jstree.root)return!1;var i=[],e=[],n=this._data.core.selected.concat([]);e.push(t.id),!0===t.state.opened&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){e.push(this.id),i.push(this.id)}),this._load_nodes(e,A.proxy(function(e){this.open_node(i,!1,0),this.select_node(n),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(e,t){if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;var i,n,r=this._model.data,o=e.id;for(t=t.toString(),r[e.parent].children[A.inArray(e.id,r[e.parent].children)]=t,i=0,n=e.parents.length;i<n;i++)r[e.parents[i]].children_d[A.inArray(e.id,r[e.parents[i]].children_d)]=t;for(i=0,n=e.children.length;i<n;i++)r[e.children[i]].parent=t;for(i=0,n=e.children_d.length;i<n;i++)r[e.children_d[i]].parents[A.inArray(e.id,r[e.children_d[i]].parents)]=t;return-1!==(i=A.inArray(e.id,this._data.core.selected))&&(this._data.core.selected[i]=t),(i=this.get_node(e.id,!0))&&(i.attr("id",t),this.element.attr("aria-activedescendant")===e.id&&this.element.attr("aria-activedescendant",t)),delete r[e.id],e.id=t,r[e.li_attr.id=t]=e,this.trigger("set_id",{node:e,"new":e.id,old:o}),!0},get_text:function(e){return!(!(e=this.get_node(e))||e.id===A.jstree.root)&&e.text},set_text:function(e,t){var i,n;if(A.isArray(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.set_text(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===A.jstree.root)&&(e.text=t,this.get_node(e,!0).length&&this.redraw_node(e.id),this.trigger("set_text",{obj:e,text:t}),!0)},get_json:function(e,t,i){if(!(e=this.get_node(e||A.jstree.root)))return!1;t&&t.flat&&!i&&(i=[]);var n,r,o={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:A.extend(!0,{},e.li_attr),a_attr:A.extend(!0,{},e.a_attr),state:{},data:(!t||!t.no_data)&&A.extend(!0,A.isArray(e.data)?[]:{},e.data)};if(t&&t.flat?o.parent=e.parent:o.children=[],t&&t.no_state)delete o.state;else for(n in e.state)e.state.hasOwnProperty(n)&&(o.state[n]=e.state[n]);if(t&&t.no_li_attr&&delete o.li_attr,t&&t.no_a_attr&&delete o.a_attr,t&&t.no_id&&(delete o.id,o.li_attr&&o.li_attr.id&&delete o.li_attr.id,o.a_attr&&o.a_attr.id&&delete o.a_attr.id),t&&t.flat&&e.id!==A.jstree.root&&i.push(o),!t||!t.no_children)for(n=0,r=e.children.length;n<r;n++)t&&t.flat?this.get_json(e.children[n],t,i):o.children.push(this.get_json(e.children[n],t));return t&&t.flat?i:e.id===A.jstree.root?o.children:o},create_node:function(e,t,i,n,r){if(null===e&&(e=A.jstree.root),!(e=this.get_node(e)))return!1;if(!(i=i===R?"last":i).toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,n,!0)});var o,a,s,l;switch(t||(t={text:this.get_string("New node")}),(t="string"==typeof t?{text:t}:A.extend(!0,{},t)).text===R&&(t.text=this.get_string("New node")),e.id===A.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":o=this.get_node(e.parent),i=A.inArray(e.id,o.children),e=o;break;case"after":o=this.get_node(e.parent),i=A.inArray(e.id,o.children)+1,e=o;break;case"inside":case"first":i=0;break;case"last":i=e.children.length;break;default:i||(i=0)}if(i>e.children.length&&(i=e.children.length),t.id||(t.id=!0),!this.check("create_node",t,e,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===t.id&&delete t.id,!(t=this._parse_model_from_json(t,e.id,e.parents.concat())))return!1;for(o=this.get_node(t),(a=[]).push(t),a=a.concat(o.children_d),this.trigger("model",{nodes:a,parent:e.id}),e.children_d=e.children_d.concat(a),s=0,l=e.parents.length;s<l;s++)this._model.data[e.parents[s]].children_d=this._model.data[e.parents[s]].children_d.concat(a);for(t=o,o=[],s=0,l=e.children.length;s<l;s++)o[i<=s?s+1:s]=e.children[s];return o[i]=t.id,e.children=o,this.redraw_node(e,!0),this.trigger("create_node",{node:this.get_node(t),parent:e.id,position:i}),n&&n.call(this,this.get_node(t)),t.id},rename_node:function(e,t){var i,n,r;if(A.isArray(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.rename_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===A.jstree.root)&&(r=e.text,this.check("rename_node",e,this.get_parent(e),t)?(this.set_text(e,t),this.trigger("rename_node",{node:e,text:t,old:r}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(e){var t,i,n,r,o,a,s,l,c,u,d,h;if(A.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.delete_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;if(n=this.get_node(e.parent),r=A.inArray(e.id,n.children),u=!1,!this.check("delete_node",e,n,r))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==r&&(n.children=A.vakata.array_remove(n.children,r)),(o=e.children_d.concat([])).push(e.id),a=0,s=e.parents.length;a<s;a++)this._model.data[e.parents[a]].children_d=A.vakata.array_filter(this._model.data[e.parents[a]].children_d,function(e){return-1===A.inArray(e,o)});for(l=0,c=o.length;l<c;l++)if(this._model.data[o[l]].state.selected){u=!0;break}for(u&&(this._data.core.selected=A.vakata.array_filter(this._data.core.selected,function(e){return-1===A.inArray(e,o)})),this.trigger("delete_node",{node:e,parent:n.id}),u&&this.trigger("changed",{action:"delete_node",node:e,selected:this._data.core.selected,parent:n.id}),l=0,c=o.length;l<c;l++)delete this._model.data[o[l]];return-1!==A.inArray(this._data.core.focused,o)&&(this._data.core.focused=null,d=this.element[0].scrollTop,h=this.element[0].scrollLeft,n.id===A.jstree.root?this._model.data[A.jstree.root].children[0]&&this.get_node(this._model.data[A.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(n,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=d,this.element[0].scrollLeft=h),this.redraw_node(n,!0),!0},check:function(e,t,i,n,r){t=t&&t.id?t:this.get_node(t),i=i&&i.id?i:this.get_node(i);var o=e.match(/^move_node|copy_node|create_node$/i)?i:t,a=this.settings.core.check_callback;return"move_node"!==e&&"copy_node"!==e||r&&r.is_multi||t.id!==i.id&&("move_node"!==e||A.inArray(t.id,i.children)!==n)&&-1===A.inArray(i.id,t.children_d)?(o&&o.data&&(o=o.data),o&&o.functions&&(!1===o.functions[e]||!0===o.functions[e])?(!1===o.functions[e]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),o.functions[e]):!(!1===a||A.isFunction(a)&&!1===a.call(this,e,t,i,n,r)||a&&!1===a[e])||!(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})):!(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})},last_error:function(){return this._data.core.last_error},move_node:function(e,t,i,n,r,o,a){var s,l,c,u,d,h,p,f,g,m,v,y,w,b;if(t=this.get_node(t),i=i===R?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(t))return this.load_node(t,function(){this.move_node(e,t,i,n,!0,!1,a)});if(A.isArray(e)){if(1!==e.length){for(s=0,l=e.length;s<l;s++)(g=this.move_node(e[s],t,i,n,r,!1,a))&&(t=g,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id?e:this.get_node(e))||e.id===A.jstree.root)return!1;if(c=(e.parent||A.jstree.root).toString(),d=i.toString().match(/^(before|after)$/)&&t.id!==A.jstree.root?this.get_node(t.parent):t,p=!(h=a||(this._model.data[e.id]?this:A.jstree.reference(e.id)))||!h._id||this._id!==h._id,u=h&&h._id&&c&&h._model.data[c]&&h._model.data[c].children?A.inArray(e.id,h._model.data[c].children):-1,h&&h._id&&(e=h._model.data[e.id]),p)return!!(g=this.copy_node(e,t,i,n,r,!1,a))&&(h&&h.delete_node(e),g);switch(t.id===A.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=A.inArray(t.id,d.children);break;case"after":i=A.inArray(t.id,d.children)+1;break;case"inside":case"first":i=0;break;case"last":i=d.children.length;break;default:i||(i=0)}if(i>d.children.length&&(i=d.children.length),!this.check("move_node",e,d,i,{core:!0,origin:a,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(e.parent===d.id){for(f=d.children.concat(),-1!==(g=A.inArray(e.id,f))&&(f=A.vakata.array_remove(f,g),g<i&&i--),g=[],m=0,v=f.length;m<v;m++)g[i<=m?m+1:m]=f[m];g[i]=e.id,d.children=g,this._node_changed(d.id),this.redraw(d.id===A.jstree.root)}else{for((g=e.children_d.concat()).push(e.id),m=0,v=e.parents.length;m<v;m++){for(f=[],y=0,w=(b=h._model.data[e.parents[m]].children_d).length;y<w;y++)-1===A.inArray(b[y],g)&&f.push(b[y]);h._model.data[e.parents[m]].children_d=f}for(h._model.data[c].children=A.vakata.array_remove_item(h._model.data[c].children,e.id),m=0,v=d.parents.length;m<v;m++)this._model.data[d.parents[m]].children_d=this._model.data[d.parents[m]].children_d.concat(g);for(f=[],m=0,v=d.children.length;m<v;m++)f[i<=m?m+1:m]=d.children[m];for(f[i]=e.id,d.children=f,d.children_d.push(e.id),d.children_d=d.children_d.concat(e.children_d),e.parent=d.id,(g=d.parents.concat()).unshift(d.id),b=e.parents.length,g=(e.parents=g).concat(),m=0,v=e.children_d.length;m<v;m++)this._model.data[e.children_d[m]].parents=this._model.data[e.children_d[m]].parents.slice(0,-1*b),Array.prototype.push.apply(this._model.data[e.children_d[m]].parents,g);c!==A.jstree.root&&d.id!==A.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(c),this._node_changed(d.id)),o||this.redraw()}return n&&n.call(this,e,d,i),this.trigger("move_node",{node:e,parent:d.id,position:i,old_parent:c,old_position:u,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),e.id},copy_node:function(e,t,i,n,r,o,a){var s,l,c,u,d,h,p,f,g,m;if(t=this.get_node(t),i=i===R?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(t))return this.load_node(t,function(){this.copy_node(e,t,i,n,!0,!1,a)});if(A.isArray(e)){if(1!==e.length){for(s=0,l=e.length;s<l;s++)(u=this.copy_node(e[s],t,i,n,r,!0,a))&&(t=u,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id?e:this.get_node(e))||e.id===A.jstree.root)return!1;switch(f=(e.parent||A.jstree.root).toString(),g=i.toString().match(/^(before|after)$/)&&t.id!==A.jstree.root?this.get_node(t.parent):t,!(m=a||(this._model.data[e.id]?this:A.jstree.reference(e.id)))||!m._id||this._id!==m._id,m&&m._id&&(e=m._model.data[e.id]),t.id===A.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=A.inArray(t.id,g.children);break;case"after":i=A.inArray(t.id,g.children)+1;break;case"inside":case"first":i=0;break;case"last":i=g.children.length;break;default:i||(i=0)}if(i>g.children.length&&(i=g.children.length),!this.check("copy_node",e,g,i,{core:!0,origin:a,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(p=m?m.get_json(e,{no_id:!0,no_data:!0,no_state:!0}):e))return!1;if(!0===p.id&&delete p.id,!(p=this._parse_model_from_json(p,g.id,g.parents.concat())))return!1;for(u=this.get_node(p),e&&e.state&&!1===e.state.loaded&&(u.state.loaded=!1),(c=[]).push(p),c=c.concat(u.children_d),this.trigger("model",{nodes:c,parent:g.id}),d=0,h=g.parents.length;d<h;d++)this._model.data[g.parents[d]].children_d=this._model.data[g.parents[d]].children_d.concat(c);for(c=[],d=0,h=g.children.length;d<h;d++)c[i<=d?d+1:d]=g.children[d];return c[i]=u.id,g.children=c,g.children_d.push(u.id),g.children_d=g.children_d.concat(u.children_d),g.id===A.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(g.id),o||this.redraw(g.id===A.jstree.root),n&&n.call(this,u,g,i),this.trigger("copy_node",{node:u,original:e,parent:g.id,position:i,old_parent:f,old_position:m&&m._id&&f&&m._model.data[f]&&m._model.data[f].children?A.inArray(e.id,m._model.data[f].children):-1,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id,old_instance:m,new_instance:this}),u.id},cut:function(e){if(e||(e=this._data.core.selected.concat()),A.isArray(e)||(e=[e]),!e.length)return!1;var t,i,n,r=[];for(i=0,n=e.length;i<n;i++)(t=this.get_node(e[i]))&&t.id&&t.id!==A.jstree.root&&r.push(t);if(!r.length)return!1;o=r,a="move_node",(s=this).trigger("cut",{node:e})},copy:function(e){if(e||(e=this._data.core.selected.concat()),A.isArray(e)||(e=[e]),!e.length)return!1;var t,i,n,r=[];for(i=0,n=e.length;i<n;i++)(t=this.get_node(e[i]))&&t.id&&t.id!==A.jstree.root&&r.push(t);if(!r.length)return!1;o=r,a="copy_node",(s=this).trigger("copy",{node:e})},get_buffer:function(){return{mode:a,node:o,inst:s}},can_paste:function(){return!1!==a&&!1!==o},paste:function(e,t){if(!((e=this.get_node(e))&&a&&a.match(/^(copy_node|move_node)$/)&&o))return!1;this[a](o,e,t,!1,!1,!1,s)&&this.trigger("paste",{parent:e.id,node:o,mode:a}),s=a=o=!1},clear_buffer:function(){s=a=o=!1,this.trigger("clear_buffer")},edit:function(r,e,o){var t,i,a,s,l,c,u,n,d,h=!1;return!!(r=this.get_node(r))&&(this.check("edit",r,this.get_parent(r))?(d=r,e="string"==typeof e?e:r.text,this.set_text(r,""),r=this._open_to(r),d.text=e,t=this._data.core.rtl,i=this.element.width(),this._data.core.focused=d.id,a=r.children(".jstree-anchor").focus(),s=A("<span>"),l=e,c=A("<div />",{css:{position:"absolute",top:"-200px",left:t?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),u=A("<input />",{value:l,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:A.proxy(function(e){e.stopImmediatePropagation(),e.preventDefault();var t,i=s.children(".jstree-rename-input").val(),n=this.settings.core.force_text;""===i&&(i=l),c.remove(),s.replaceWith(a),s.remove(),l=n?l:A("<div></div>").append(A.parseHTML(l)).html(),this.set_text(r,l),(t=!!this.rename_node(r,n?A("<div></div>").text(i).text():A("<div></div>").append(A.parseHTML(i)).html()))||this.set_text(r,l),this._data.core.focused=d.id,setTimeout(A.proxy(function(){var e=this.get_node(d.id,!0);e.length&&(this._data.core.focused=d.id,e.children(".jstree-anchor").focus())},this),0),o&&o.call(this,d,t,h),u=null},this),keydown:function(e){var t=e.which;27===t&&(h=!0,this.value=l),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(){u.width(Math.min(c.text("pW"+this.value).width(),i))},keypress:function(e){if(13===e.which)return!1}}),n={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},s.attr("class",a.attr("class")).append(a.contents().clone()).append(u),a.replaceWith(s),c.css(n),u.css(n).width(Math.min(c.text("pW"+u[0].value).width(),i))[0].select(),void A(b).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(e){u&&e.target!==u&&A(u).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(e,t){if(!e)return!1;if(!0===t){var i=this.settings.core.themes.dir;i||(i=A.jstree.path+"/themes"),t=i+"/"+e+"/style.css"}t&&-1===A.inArray(t,n)&&(A("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />'),n.push(t)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=e,this.element.addClass("jstree-"+e),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+e+"-responsive"),this.trigger("set_theme",{theme:e})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),(this._data.core.themes.variant=e)&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(e,t){var i,n,r,o;if(A.isArray(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.set_icon(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===A.jstree.root)&&(o=e.icon,e.icon=!0===t||null===t||t===R||""===t||t,r=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===t?this.hide_icon(e):(!0===t||null===t||t===R||""===t?r.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"):-1===t.indexOf("/")&&-1===t.indexOf(".")?(r.removeClass(o).css("background",""),r.addClass(t+" jstree-themeicon-custom").attr("rel",t)):(r.removeClass(o).css("background",""),r.addClass("jstree-themeicon-custom").css("background","url('"+t+"') center center no-repeat").attr("rel",t)),!1===o&&this.show_icon(e)),!0)},get_icon:function(e){return!(!(e=this.get_node(e))||e.id===A.jstree.root)&&e.icon},hide_icon:function(e){var t,i;if(A.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.hide_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===A.jstree.root)&&(e.icon=!1,this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(e){var t,i,n;if(A.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.show_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===A.jstree.root)&&(n=this.get_node(e,!0),e.icon=!n.length||n.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),e.icon||(e.icon=!0),n.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},A.vakata={},A.vakata.attributes=function(e,i){e=A(e)[0];var n=i?{}:[];return e&&e.attributes&&A.each(e.attributes,function(e,t){-1===A.inArray(t.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==t.value&&""!==A.trim(t.value)&&(i?n[t.name]=t.value:n.push(t.name))}),n},A.vakata.array_unique=function(e){var t,i,n=[],r={};for(t=0,i=e.length;t<i;t++)r[e[t]]===R&&(n.push(e[t]),r[e[t]]=!0);return n},A.vakata.array_remove=function(e,t){return e.splice(t,1),e},A.vakata.array_remove_item=function(e,t){var i=A.inArray(t,e);return-1!==i?A.vakata.array_remove(e,i):e},A.vakata.array_filter=function(e,t,i,n,r){if(e.filter)return e.filter(t,i);for(r in n=[],e)~~r+""==r+""&&0<=r&&t.call(i,e[r],+r,e)&&n.push(e[r]);return n},A.jstree.plugins.changed=function(e,o){var a=[];this.trigger=function(e,t){var i,n;if(t||(t={}),"changed"===e.replace(".jstree","")){t.changed={selected:[],deselected:[]};var r={};for(i=0,n=a.length;i<n;i++)r[a[i]]=1;for(i=0,n=t.selected.length;i<n;i++)r[t.selected[i]]?r[t.selected[i]]=2:t.changed.selected.push(t.selected[i]);for(i=0,n=a.length;i<n;i++)1===r[a[i]]&&t.changed.deselected.push(a[i]);a=t.selected.slice()}o.trigger.call(this,e,t)},this.refresh=function(e,t){return a=[],
o.refresh.apply(this,arguments)}};var h,p,f,l,c,d,g,i,u=b.createElement("I");u.className="jstree-icon jstree-checkbox",u.setAttribute("role","presentation"),A.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},A.jstree.plugins.checkbox=function(e,l){this.bind=function(){l.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",A.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",A.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",A.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(A.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",A.proxy(function(e,t){var i,n,r=this._model.data,o=(r[t.parent],t.nodes);for(i=0,n=o.length;i<n;i++)r[o[i]].state.checked=r[o[i]].state.checked||r[o[i]].original&&r[o[i]].original.state&&r[o[i]].original.state.checked,r[o[i]].state.checked&&this._data.checkbox.selected.push(o[i])},this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",A.proxy(function(e,t){var i,n,r,o,a,s,l=this._model.data,c=l[t.parent],u=t.nodes,d=[],h=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(-1!==h.indexOf("down"))if(c.state[p?"selected":"checked"]){for(n=0,r=u.length;n<r;n++)l[u[n]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(u)}else for(n=0,r=u.length;n<r;n++)if(l[u[n]].state[p?"selected":"checked"]){for(o=0,a=l[u[n]].children_d.length;o<a;o++)l[l[u[n]].children_d[o]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(l[u[n]].children_d)}if(-1!==h.indexOf("up")){for(n=0,r=c.children_d.length;n<r;n++)l[c.children_d[n]].children.length||d.push(l[c.children_d[n]].parent);for(o=0,a=(d=A.vakata.array_unique(d)).length;o<a;o++)for(c=l[d[o]];c&&c.id!==A.jstree.root;){for(n=i=0,r=c.children.length;n<r;n++)i+=l[c.children[n]].state[p?"selected":"checked"];if(i!==r)break;c.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(c.id),(s=this.get_node(c,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}}this._data[p?"core":"checkbox"].selected=A.vakata.array_unique(this._data[p?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",A.proxy(function(e,t){var i,n,r,o,a=t.node,s=this._model.data,l=this.get_node(a.parent),c=this.settings.checkbox.cascade,u=this.settings.checkbox.tie_selection,d={},h=this._data[u?"core":"checkbox"].selected;for(i=0,n=h.length;i<n;i++)d[h[i]]=!0;if(-1!==c.indexOf("down")){var p=this._cascade_new_checked_state(a.id,!0);a.children_d.concat(a.id).forEach(function(e){-1<p.indexOf(e)?d[e]=!0:delete d[e]})}if(-1!==c.indexOf("up"))for(;l&&l.id!==A.jstree.root;){for(i=r=0,n=l.children.length;i<n;i++)r+=s[l.children[i]].state[u?"selected":"checked"];if(r!==n)break;l.state[u?"selected":"checked"]=!0,d[l.id]=!0,(o=this.get_node(l,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),l=this.get_node(l.parent)}for(i in h=[],d)d.hasOwnProperty(i)&&h.push(i);this._data[u?"core":"checkbox"].selected=h},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",A.proxy(function(){var e,t,i,n=this.get_node(A.jstree.root),r=this._model.data;for(e=0,t=n.children_d.length;e<t;e++)(i=r[n.children_d[e]])&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",A.proxy(function(e,t){var i,n,r,o=t.node,a=(this.get_node(o,!0),this.settings.checkbox.cascade),s=this.settings.checkbox.tie_selection,l=this._data[s?"core":"checkbox"].selected,c=o.children_d.concat(o.id);if(-1!==a.indexOf("down")){var u=this._cascade_new_checked_state(o.id,!1);l=l.filter(function(e){return-1===c.indexOf(e)||-1<u.indexOf(e)})}if(-1!==a.indexOf("up")&&-1===l.indexOf(o.id)){for(i=0,n=o.parents.length;i<n;i++)(r=this._model.data[o.parents[i]]).state[s?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),(r=this.get_node(o.parents[i],!0))&&r.length&&r.attr("aria-selected",!1).children(".jstree-anchor").removeClass(s?"jstree-clicked":"jstree-checked");l=l.filter(function(e){return-1===o.parents.indexOf(e)})}this._data[s?"core":"checkbox"].selected=l},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",A.proxy(function(e,t){for(var i,n,r,o,a=this.get_node(t.parent),s=this._model.data,l=this.settings.checkbox.tie_selection;a&&a.id!==A.jstree.root&&!a.state[l?"selected":"checked"];){for(i=r=0,n=a.children.length;i<n;i++)r+=s[a.children[i]].state[l?"selected":"checked"];if(!(0<n&&r===n))break;a.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(a.id),(o=this.get_node(a,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}},this)).on("move_node.jstree",A.proxy(function(e,t){var i,n,r,o,a,s=t.is_multi,l=t.old_parent,c=this.get_node(t.parent),u=this._model.data,d=this.settings.checkbox.tie_selection;if(!s)for(i=this.get_node(l);i&&i.id!==A.jstree.root&&!i.state[d?"selected":"checked"];){for(r=n=0,o=i.children.length;r<o;r++)n+=u[i.children[r]].state[d?"selected":"checked"];if(!(0<o&&n===o))break;i.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(i.id),(a=this.get_node(i,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}for(i=c;i&&i.id!==A.jstree.root;){for(r=n=0,o=i.children.length;r<o;r++)n+=u[i.children[r]].state[d?"selected":"checked"];if(n===o)i.state[d?"selected":"checked"]||(i.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(i.id),(a=this.get_node(i,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"));else{if(!i.state[d?"selected":"checked"])break;i.state[d?"selected":"checked"]=!1,this._data[d?"core":"checkbox"].selected=A.vakata.array_remove_item(this._data[d?"core":"checkbox"].selected,i.id),(a=this.get_node(i,!0))&&a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked")}i=this.get_node(i.parent)}},this))},this._undetermined=function(){if(null!==this.element){var i,n,r,o,a={},s=this._model.data,e=this.settings.checkbox.tie_selection,t=this._data[e?"core":"checkbox"].selected,l=[],c=this;for(i=0,n=t.length;i<n;i++)if(s[t[i]]&&s[t[i]].parents)for(r=0,o=s[t[i]].parents.length;r<o&&a[s[t[i]].parents[r]]===R;r++)s[t[i]].parents[r]!==A.jstree.root&&(a[s[t[i]].parents[r]]=!0,l.push(s[t[i]].parents[r]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var e,t=c.get_node(this);if(t)if(t.state.loaded){for(i=0,n=t.children_d.length;i<n;i++)if(!(e=s[t.children_d[i]]).state.loaded&&e.original&&e.original.state&&e.original.state.undetermined&&!0===e.original.state.undetermined)for(a[e.id]===R&&e.id!==A.jstree.root&&(a[e.id]=!0,l.push(e.id)),r=0,o=e.parents.length;r<o;r++)a[e.parents[r]]===R&&e.parents[r]!==A.jstree.root&&(a[e.parents[r]]=!0,l.push(e.parents[r]))}else if(t.original&&t.original.state&&t.original.state.undetermined&&!0===t.original.state.undetermined)for(a[t.id]===R&&t.id!==A.jstree.root&&(a[t.id]=!0,l.push(t.id)),r=0,o=t.parents.length;r<o;r++)a[t.parents[r]]===R&&t.parents[r]!==A.jstree.root&&(a[t.parents[r]]=!0,l.push(t.parents[r]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),i=0,n=l.length;i<n;i++)s[l[i]].state[e?"selected":"checked"]||(t=this.get_node(l[i],!0))&&t.length&&t.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(e,t,i,n){if(e=l.redraw_node.apply(this,arguments)){var r,o,a=null,s=null;for(r=0,o=e.childNodes.length;r<o;r++)if(e.childNodes[r]&&e.childNodes[r].className&&-1!==e.childNodes[r].className.indexOf("jstree-anchor")){a=e.childNodes[r];break}a&&(!this.settings.checkbox.tie_selection&&this._model.data[e.id].state.checked&&(a.className+=" jstree-checked"),s=u.cloneNode(!1),this._model.data[e.id].state.checkbox_disabled&&(s.className+=" jstree-checkbox-disabled"),a.insertBefore(s,a.childNodes[0]))}return i||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(A.proxy(this._undetermined,this),50)),e},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(e){e=this.get_node(e);var t,i,n=this.settings.checkbox.cascade,r=this.settings.checkbox.tie_selection,o=this._data[r?"core":"checkbox"].selected,a=this._model.data;if(!e||!0===e.state[r?"selected":"checked"]||-1===n.indexOf("undetermined")||-1===n.indexOf("down")&&-1===n.indexOf("up"))return!1;if(!e.state.loaded&&!0===e.original.state.undetermined)return!0;for(t=0,i=e.children_d.length;t<i;t++)if(-1!==A.inArray(e.children_d[t],o)||!a[e.children_d[t]].state.loaded&&a[e.children_d[t]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(e){var t,i,n;if(A.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;n=this.get_node(e,!0),e.state.checkbox_disabled||(e.state.checkbox_disabled=!0,n&&n.length&&n.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:e}))},this.enable_checkbox=function(e){var t,i,n;if(A.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;n=this.get_node(e,!0),e.state.checkbox_disabled&&(e.state.checkbox_disabled=!1,n&&n.length&&n.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:e}))},this.activate_node=function(e,t){return!A(t.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||A(t.target).hasClass("jstree-checkbox"))&&(t.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!A(t.target).hasClass("jstree-checkbox")?l.activate_node.call(this,e,t):!this.is_disabled(e)&&(this.is_checked(e)?this.uncheck_node(e,t):this.check_node(e,t),void this.trigger("activate_node",{node:this.get_node(e)})))},this._cascade_new_checked_state=function(e,i){var n=this,t=this.settings.checkbox.tie_selection,r=this._model.data[e],o=[],a=[];if(!this.settings.checkbox.cascade_to_disabled&&r.state.disabled||!this.settings.checkbox.cascade_to_hidden&&r.state.hidden){var s=this.get_checked_descendants(e);r.state[t?"selected":"checked"]&&s.push(r.id),o=o.concat(s)}else{r.children&&r.children.forEach(function(e){var t=n._cascade_new_checked_state(e,i);o=o.concat(t),-1<t.indexOf(e)&&a.push(e)});var l=n.get_node(r,!0),c=0<a.length&&a.length<r.children.length;r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=c),c?(r.state[t?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked")):i&&a.length===r.children.length?(r.state[t?"selected":"checked"]=i,o.push(r.id),l.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked")):(r.state[t?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked"))}return o},this.get_checked_descendants=function(e){var t=this,i=t.settings.checkbox.tie_selection;return t._model.data[e].children_d.filter(function(e){return t._model.data[e].state[i?"selected":"checked"]})},this.check_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.select_node(e,!1,!0,t);var i,n,r;if(A.isArray(e)){for(n=0,r=(e=e.slice()).length;n<r;n++)this.check_node(e[n],t);return!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;i=this.get_node(e,!0),e.state.checked||(e.state.checked=!0,this._data.checkbox.selected.push(e.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.uncheck_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.deselect_node(e,!1,t);var i,n,r;if(A.isArray(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.uncheck_node(e[i],t);return!0}if(!(e=this.get_node(e))||e.id===A.jstree.root)return!1;r=this.get_node(e,!0),e.state.checked&&(e.state.checked=!1,this._data.checkbox.selected=A.vakata.array_remove_item(this._data.checkbox.selected,e.id),r.length&&r.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e,t;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[A.jstree.root].children_d.concat(),e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,i=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:i})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):!(!(e=this.get_node(e))||e.id===A.jstree.root)&&e.state.checked},this.get_checked=function(e){return this.settings.checkbox.tie_selection?this.get_selected(e):e?A.map(this._data.checkbox.selected,A.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_top_selected(e);var t,i,n,r,o=this.get_checked(!0),a={};for(t=0,i=o.length;t<i;t++)a[o[t].id]=o[t];for(t=0,i=o.length;t<i;t++)for(n=0,r=o[t].children_d.length;n<r;n++)a[o[t].children_d[n]]&&delete a[o[t].children_d[n]];for(t in o=[],a)a.hasOwnProperty(t)&&o.push(t);return e?A.map(o,A.proxy(function(e){return this.get_node(e)},this)):o},this.get_bottom_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(e);var t,i,n=this.get_checked(!0),r=[];for(t=0,i=n.length;t<i;t++)n[t].children.length||r.push(n[t].id);return e?A.map(r,A.proxy(function(e){return this.get_node(e)},this)):r},this.load_node=function(e,t){var i,n,r;if(!A.isArray(e)&&!this.settings.checkbox.tie_selection&&(r=this.get_node(e))&&r.state.loaded)for(i=0,n=r.children_d.length;i<n;i++)this._model.data[r.children_d[i]].state.checked&&(!0,this._data.checkbox.selected=A.vakata.array_remove_item(this._data.checkbox.selected,r.children_d[i]));return l.load_node.apply(this,arguments)},this.get_state=function(){var e=l.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection||(e.checkbox=this._data.checkbox.selected.slice()),e},this.set_state=function(e,t){var i=l.set_state.apply(this,arguments);if(i&&e.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var n=this;A.each(e.checkbox,function(e,t){n.check_node(t)})}return delete e.checkbox,this.set_state(e,t),!1}return i},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),l.refresh.apply(this,arguments)}},A.jstree.defaults.conditionalselect=function(){return!0},A.jstree.plugins.conditionalselect=function(e,i){this.activate_node=function(e,t){this.settings.conditionalselect.call(this,this.get_node(e),t)&&i.activate_node.call(this,e,t)}},A.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var i=A.jstree.reference(e.reference),t=i.get_node(e.reference);i.create_node(t,{},"last",function(e){try{i.edit(e)}catch(t){setTimeout(function(){i.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var t=A.jstree.reference(e.reference),i=t.get_node(e.reference);t.edit(i)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var t=A.jstree.reference(e.reference),i=t.get_node(e.reference);t.is_selected(i)?t.delete_node(t.get_selected()):t.delete_node(i)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var t=A.jstree.reference(e.reference),i=t.get_node(e.reference);t.is_selected(i)?t.cut(t.get_top_selected()):t.cut(i)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var t=A.jstree.reference(e.reference),i=t.get_node(e.reference);t.is_selected(i)?t.copy(t.get_top_selected()):t.copy(i)}},paste:{separator_before:!1,icon:!1,_disabled:function(e){return!A.jstree.reference(e.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var t=A.jstree.reference(e.reference),i=t.get_node(e.reference);t.paste(i)}}}}}}},A.jstree.plugins.contextmenu=function(e,o){this.bind=function(){o.bind.call(this);var t,i,n=0,r=null;this.element.on("init.jstree loading.jstree ready.jstree",A.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",A.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),n=e.ctrlKey?+new Date:0,(t||r)&&(n=+new Date+1e4),r&&clearTimeout(r),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",A.proxy(function(){this._data.contextmenu.visible&&(!n||250<+new Date-n)&&A.vakata.context.hide(),n=0},this)).on("touchstart.jstree",".jstree-anchor",function(e){e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].clientX,i=e.originalEvent.changedTouches[0].clientY,r=setTimeout(function(){A(e.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){r&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(50<Math.abs(t-e.originalEvent.changedTouches[0].clientX)||50<Math.abs(i-e.originalEvent.changedTouches[0].clientY))&&clearTimeout(r)}).on("touchend.vakata.jstree",function(){r&&clearTimeout(r)}),A(b).on("context_hide.vakata.jstree",A.proxy(function(e,t){this._data.contextmenu.visible=!1,A(t.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&A.vakata.context.hide(),o.teardown.call(this)},this.show_contextmenu=function(t,i,n,e){if(!(t=this.get_node(t))||t.id===A.jstree.root)return!1;var r=this.settings.contextmenu,o=this.get_node(t,!0).children(".jstree-anchor"),a=!1,s=!1;(r.show_at_node||i===R||n===R)&&(a=o.offset(),i=a.left,n=a.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(t)&&this.activate_node(t,e),s=r.items,A.isFunction(s)&&(s=s.call(this,t,A.proxy(function(e){this._show_contextmenu(t,i,n,e)},this))),A.isPlainObject(s)&&this._show_contextmenu(t,i,n,s)},this._show_contextmenu=function(e,t,i,n){var r=this.get_node(e,!0).children(".jstree-anchor");A(b).one("context_show.vakata.jstree",A.proxy(function(e,t){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";A(t.element).addClass(i),r.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,A.vakata.context.show(r,{x:t,y:i},n),this.trigger("show_contextmenu",{node:e,x:t,y:i})}},f={element:p=!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1},(h=A).vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(e){h(b).triggerHandler("context_"+e+".vakata",{reference:f.reference,element:f.element,position:{x:f.position_x,y:f.position_y}})},_execute:function(e){return!(!(e=f.items[e])||e._disabled&&(!h.isFunction(e._disabled)||e._disabled({item:e,reference:f.reference,element:f.element}))||!e.action)&&e.action.call(null,{item:e,reference:f.reference,element:f.element,position:{x:f.position_x,y:f.position_y}})},_parse:function(e,t){if(!e)return!1;t||(f.html="",f.items=[]);var i,n="",r=!1;return t&&(n+="<ul>"),h.each(e,function(e,t){if(!t)return!0;f.items.push(t),!r&&t.separator_before&&(n+="<li class='vakata-context-separator'><a href='#' "+(h.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),r=!1,n+="<li class='"+(t._class||"")+(!0===t._disabled||h.isFunction(t._disabled)&&t._disabled({item:t,reference:f.reference,element:f.element})?" vakata-contextmenu-disabled ":"")+"' "+(t.shortcut?" data-shortcut='"+t.shortcut+"' ":"")+">",n+="<a href='#' rel='"+(f.items.length-1)+"' "+(t.title?"title='"+t.title+"'":"")+">",h.vakata.context.settings.icons&&(n+="<i ",t.icon&&(-1!==t.icon.indexOf("/")||-1!==t.icon.indexOf(".")?n+=" style='background:url(\""+t.icon+"\") center center no-repeat' ":n+=" class='"+t.icon+"' "),n+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),n+=(h.isFunction(t.label)?t.label({item:e,reference:f.reference,element:f.element}):t.label)+(t.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+t.shortcut+'">'+(t.shortcut_label||"")+"</span>":"")+"</a>",t.submenu&&(i=h.vakata.context._parse(t.submenu,!0))&&(n+=i),n+="</li>",t.separator_after&&(n+="<li class='vakata-context-separator'><a href='#' "+(h.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",r=!0)}),n=n.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),t&&(n+="</ul>"),t||(f.html=n,h.vakata.context._trigger("parse")),10<n.length&&n},_show_submenu:function(e){if((e=h(e)).length&&e.children("ul").length){var t=e.children("ul"),i=e.offset().left,n=i+e.outerWidth(),r=e.offset().top,o=t.width(),a=t.height(),s=h(window).width()+h(window).scrollLeft(),l=h(window).height()+h(window).scrollTop();p?e[n-(o+10+e.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):e[s<n+o&&s-n<i?"addClass":"removeClass"]("vakata-context-right"),l<r+a+10&&t.css("bottom","-1px"),e.hasClass("vakata-context-right")?i<o&&t.css("margin-right",i-o):s-n<o&&t.css("margin-left",s-n-o),t.show()}},show:function(e,t,i){var n,r,o,a,s,l,c,u,d=!0;switch(f.element&&f.element.length&&f.element.width(""),d){case!t&&!e:return!1;case!!t&&!!e:f.reference=e,f.position_x=t.x,f.position_y=t.y;break;case!t&&!!e:n=(f.reference=e).offset(),f.position_x=n.left+e.outerHeight(),f.position_y=n.top;break;case!!t&&!e:f.position_x=t.x,f.position_y=t.y}e&&!i&&h(e).data("vakata_contextmenu")&&(i=h(e).data("vakata_contextmenu")),h.vakata.context._parse(i)&&f.element.html(f.html),f.items.length&&(f.element.appendTo("body"),r=f.element,o=f.position_x,a=f.position_y,s=r.width(),l=r.height(),c=h(window).width()+h(window).scrollLeft(),u=h(window).height()+h(window).scrollTop(),p&&(o-=r.outerWidth()-h(e).outerWidth())<h(window).scrollLeft()+20&&(o=h(window).scrollLeft()+20),c<o+s+20&&(o=c-(s+20)),u<a+l+20&&(a=u-(l+20)),f.element.css({left:o,top:a}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),f.is_visible=!0,h.vakata.context._trigger("show"))},hide:function(){f.is_visible&&(f.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),f.is_visible=!1,h.vakata.context._trigger("hide"))}},h(function(){p="rtl"===h("body").css("direction");var t=!1;f.element=h("<ul class='vakata-context'></ul>"),f.element.on("mouseenter","li",function(e){e.stopImmediatePropagation(),h.contains(this,e.relatedTarget)||(t&&clearTimeout(t),f.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),h(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),h.vakata.context._show_submenu(this))}).on("mouseleave","li",function(e){h.contains(this,e.relatedTarget)||h(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(){h(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),h.vakata.context.settings.hide_onmouseleave&&(t=setTimeout(function(){h.vakata.context.hide()},h.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(e){e.preventDefault(),h(this).blur().parent().hasClass("vakata-context-disabled")||!1===h.vakata.context._execute(h(this).attr("rel"))||h.vakata.context.hide()}).on("keydown","a",function(e){var t=null;switch(e.which){case 13:case 32:e.type="click",e.preventDefault(),h(e.currentTarget).trigger(e);break;case 37:f.is_visible&&(f.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 38:f.is_visible&&((t=f.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(t=f.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),t.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 39:f.is_visible&&(f.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 40:f.is_visible&&((t=f.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(t=f.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),t.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 27:h.vakata.context.hide(),e.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=f.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),h(b).on("mousedown.vakata.jstree",function(e){f.is_visible&&f.element[0]!==e.target&&!h.contains(f.element[0],e.target)&&h.vakata.context.hide()}).on("context_show.vakata.jstree",function(){f.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),p&&f.element.addClass("vakata-context-rtl").css("direction","rtl"),f.element.find("ul").hide().end()})}),A.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1},A.jstree.plugins.dnd=function(e,s){this.init=function(e,t){s.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in b.createElement("span")},this.bind=function(){s.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",A.proxy(function(e){if(this.settings.dnd.large_drag_target&&A(e.target).closest(".jstree-node")[0]!==e.currentTarget)return!0;if("touchstart"===e.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!A(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var t=this.get_node(e.target),i=this.is_selected(t)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,n=1<i?i+" "+this.get_string("nodes"):this.get_text(e.currentTarget);if(this.settings.core.force_text&&(n=A.vakata.html.escape(n)),t&&t.id&&t.id!==A.jstree.root&&(1===e.which||"touchstart"===e.type||"dragstart"===e.type)&&(!0===this.settings.dnd.is_draggable||A.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,1<i?this.get_top_selected(!0):[t],e))){if(l={jstree:!0,origin:this,obj:this.get_node(t,!0),nodes:1<i?this.get_top_selected():[t.id]},c=e.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),A.vakata.dnd.start(e,l,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+n+'<ins class="jstree-copy" style="display:none;">+</ins></div>');A.vakata.dnd._trigger("start",e,{helper:A(),element:c,data:l})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(e){return e.preventDefault(),A.vakata.dnd._trigger("move",e,{helper:A(),element:c,data:l}),!1}).on("drop.jstree",A.proxy(function(e){return e.preventDefault(),A.vakata.dnd._trigger("stop",e,{helper:A(),element:c,data:l}),!1},this))},this.redraw_node=function(e,t,i,n){if((e=s.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var r,o,a=null;for(r=0,o=e.childNodes.length;r<o;r++)if(e.childNodes[r]&&e.childNodes[r].className&&-1!==e.childNodes[r].className.indexOf("jstree-anchor")){a=e.childNodes[r];break}a&&a.setAttribute("draggable",!0)}return e}},A(function(){var T=!1,E=!1,C=!1,S=!1,P=A('<div id="jstree-marker">&#160;</div>').hide();A(b).on("dnd_start.vakata.jstree",function(e,t){C=T=!1,t&&t.data&&t.data.jstree&&P.appendTo("body")}).on("dnd_move.vakata.jstree",function(e,r){var o=r.event.target!==C.target;if(S&&(r.event&&"dragover"===r.event.type&&!o||clearTimeout(S)),r&&r.data&&r.data.jstree&&(!r.event.target.id||"jstree-marker"!==r.event.target.id)){C=r.event;var a,s,l,c,u,d,h,p,f,g,m,v,y,w,b,_,x=A.jstree.reference(r.event.target),k=!1,j=!1,t=!1;if(x&&x._data&&x._data.dnd)if(P.attr("class","jstree-"+x.get_theme()+(x.settings.core.themes.responsive?" jstree-dnd-responsive":"")),b=r.data.origin&&(r.data.origin.settings.dnd.always_copy||r.data.origin.settings.dnd.copy&&(r.event.metaKey||r.event.ctrlKey)),r.helper.children().attr("class","jstree-"+x.get_theme()+" jstree-"+x.get_theme()+"-"+x.get_theme_variant()+" "+(x.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[b?"show":"hide"](),r.event.target!==x.element[0]&&r.event.target!==x.get_container_ul()[0]||0!==x.get_container_ul().children().length){if((k=x.settings.dnd.large_drop_target?A(r.event.target).closest(".jstree-node").children(".jstree-anchor"):A(r.event.target).closest(".jstree-anchor"))&&k.length&&k.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(j=k.offset(),t=(r.event.pageY!==R?r.event.pageY:r.event.originalEvent.pageY)-j.top,l=k.outerHeight(),d=t<l/3?["b","i","a"]:l-l/3<t?["a","i","b"]:l/2<t?["i","a","b"]:["i","b","a"],A.each(d,function(e,t){switch(t){case"b":
a=j.left-6,s=j.top,c=x.get_parent(k),u=k.parent().index();break;case"i":y=x.settings.dnd.inside_pos,w=x.get_node(k.parent()),a=j.left-2,s=j.top+l/2+1,c=w.id,u="first"===y?0:"last"===y?w.children.length:Math.min(y,w.children.length);break;case"a":a=j.left-6,s=j.top+l,c=x.get_parent(k),u=k.parent().index()+1}for(h=!0,p=0,f=r.data.nodes.length;p<f;p++)if(g=r.data.origin&&(r.data.origin.settings.dnd.always_copy||r.data.origin.settings.dnd.copy&&(r.event.metaKey||r.event.ctrlKey))?"copy_node":"move_node",m=u,"move_node"===g&&"a"===t&&r.data.origin&&r.data.origin===x&&c===x.get_parent(r.data.nodes[p])&&(v=x.get_node(c),m>A.inArray(r.data.nodes[p],v.children)&&(m-=1)),!(h=h&&(x&&x.settings&&x.settings.dnd&&!1===x.settings.dnd.check_while_dragging||x.check(g,r.data.origin&&r.data.origin!==x?r.data.origin.get_node(r.data.nodes[p]):r.data.nodes[p],c,m,{dnd:!0,ref:x.get_node(k.parent()),pos:t,origin:r.data.origin,is_multi:r.data.origin&&r.data.origin!==x,is_foreign:!r.data.origin})))){x&&x.last_error&&(E=x.last_error());break}var i,n;if("i"===t&&k.parent().is(".jstree-closed")&&x.settings.dnd.open_timeout&&(r.event&&"dragover"===r.event.type&&!o||(S&&clearTimeout(S),S=setTimeout((i=x,n=k,function(){i.open_node(n)}),x.settings.dnd.open_timeout))),h)return(_=x.get_node(c,!0)).hasClass(".jstree-dnd-parent")||(A(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),_.addClass("jstree-dnd-parent")),T={ins:x,par:c,pos:"i"!==t||"last"!==y||0!==u||x.is_loaded(w)?u:"last"},P.css({left:a+"px",top:s+"px"}).show(),r.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),r.event.originalEvent&&r.event.originalEvent.dataTransfer&&(r.event.originalEvent.dataTransfer.dropEffect=b?"copy":"move"),E={},!(d=!0)}),!0===d))return}else{for(h=!0,p=0,f=r.data.nodes.length;p<f&&(h=h&&x.check(r.data.origin&&(r.data.origin.settings.dnd.always_copy||r.data.origin.settings.dnd.copy&&(r.event.metaKey||r.event.ctrlKey))?"copy_node":"move_node",r.data.origin&&r.data.origin!==x?r.data.origin.get_node(r.data.nodes[p]):r.data.nodes[p],A.jstree.root,"last",{dnd:!0,ref:x.get_node(A.jstree.root),pos:"i",origin:r.data.origin,is_multi:r.data.origin&&r.data.origin!==x,is_foreign:!r.data.origin}));p++);if(h)return T={ins:x,par:A.jstree.root,pos:"last"},P.hide(),r.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(r.event.originalEvent&&r.event.originalEvent.dataTransfer&&(r.event.originalEvent.dataTransfer.dropEffect=b?"copy":"move"))}A(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),T=!1,r.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),r.event.originalEvent&&r.event.originalEvent.dataTransfer&&(r.event.originalEvent.dataTransfer.dropEffect="none"),P.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(P.hide(),C=T=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(e,t){if(A(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),S&&clearTimeout(S),t&&t.data&&t.data.jstree){P.hide().detach();var i,n,r=[];if(T){for(i=0,n=t.data.nodes.length;i<n;i++)r[i]=t.data.origin?t.data.origin.get_node(t.data.nodes[i]):t.data.nodes[i];T.ins[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(t.event.metaKey||t.event.ctrlKey))?"copy_node":"move_node"](r,T.par,T.pos,!1,!1,!1,t.data.origin)}else(i=A(t.event.target).closest(".jstree")).length&&E&&E.error&&"check"===E.error&&(i=i.jstree(!0))&&i.settings.core.error.call(this,E);T=C=!1}}).on("keyup.jstree keydown.jstree",function(e,t){(t=A.vakata.dnd._get())&&t.data&&t.data.jstree&&("keyup"===e.type&&27===e.which?(S&&clearTimeout(S),S=C=E=T=!1,P.hide().detach(),A.vakata.dnd._clean()):(t.helper.find(".jstree-copy").first()[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"](),C&&(C.metaKey=e.metaKey,C.ctrlKey=e.ctrlKey,A.vakata.dnd._trigger("move",C))))})}),g={element:!((d=A).vakata.html={div:d("<div />"),escape:function(e){return d.vakata.html.div.text(e).html()},strip:function(e){return d.vakata.html.div.empty().append(d.parseHTML(e)).text()}}),target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},d.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(e,t,i){i===R&&(i=d.vakata.dnd._get()),i.event=t,d(b).triggerHandler("dnd_"+e+".vakata",i)},_get:function(){return{data:g.data,element:g.element,helper:g.helper}},_clean:function(){g.helper&&g.helper.remove(),g.scroll_i&&(clearInterval(g.scroll_i),g.scroll_i=!1),g={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},d(b).off("mousemove.vakata.jstree touchmove.vakata.jstree",d.vakata.dnd.drag),d(b).off("mouseup.vakata.jstree touchend.vakata.jstree",d.vakata.dnd.stop)},_scroll:function(e){if(!g.scroll_e||!g.scroll_l&&!g.scroll_t)return g.scroll_i&&(clearInterval(g.scroll_i),g.scroll_i=!1),!1;if(!g.scroll_i)return g.scroll_i=setInterval(d.vakata.dnd._scroll,100),!1;if(!0===e)return!1;var t=g.scroll_e.scrollTop(),i=g.scroll_e.scrollLeft();g.scroll_e.scrollTop(t+g.scroll_t*d.vakata.dnd.settings.scroll_speed),g.scroll_e.scrollLeft(i+g.scroll_l*d.vakata.dnd.settings.scroll_speed),t===g.scroll_e.scrollTop()&&i===g.scroll_e.scrollLeft()||d.vakata.dnd._trigger("scroll",g.scroll_e)},start:function(e,t,i){"touchstart"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=b.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),g.is_drag&&d.vakata.dnd.stop({});try{e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.touchAction="none",e.currentTarget.style.msTouchAction="none",e.currentTarget.style.MozUserSelect="none")}catch(n){}return g.init_x=e.pageX,g.init_y=e.pageY,g.data=t,g.is_down=!0,g.element=e.currentTarget,g.target=e.target,g.is_touch="touchstart"===e.type,!1!==i&&(g.helper=d("<div id='vakata-dnd'></div>").html(i).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),d(b).on("mousemove.vakata.jstree touchmove.vakata.jstree",d.vakata.dnd.drag),d(b).on("mouseup.vakata.jstree touchend.vakata.jstree",d.vakata.dnd.stop),!1},drag:function(i){if("touchmove"===i.type&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(i.pageX=i.originalEvent.changedTouches[0].pageX,i.pageY=i.originalEvent.changedTouches[0].pageY,i.target=b.elementFromPoint(i.originalEvent.changedTouches[0].pageX-window.pageXOffset,i.originalEvent.changedTouches[0].pageY-window.pageYOffset)),g.is_down){if(!g.is_drag){if(!(Math.abs(i.pageX-g.init_x)>(g.is_touch?d.vakata.dnd.settings.threshold_touch:d.vakata.dnd.settings.threshold)||Math.abs(i.pageY-g.init_y)>(g.is_touch?d.vakata.dnd.settings.threshold_touch:d.vakata.dnd.settings.threshold)))return;g.helper&&(g.helper.appendTo("body"),g.helper_w=g.helper.outerWidth()),g.is_drag=!0,d(g.target).one("click.vakata",!1),d.vakata.dnd._trigger("start",i)}var e=!1,t=!1,n=!1,r=!1,o=!1,a=!1,s=!1,l=!1,c=!1,u=!1;return g.scroll_t=0,g.scroll_l=0,g.scroll_e=!1,d(d(i.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(d(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var e=d(this),t=e.offset();if(this.scrollHeight>this.offsetHeight&&(t.top+e.height()-i.pageY<d.vakata.dnd.settings.scroll_proximity&&(g.scroll_t=1),i.pageY-t.top<d.vakata.dnd.settings.scroll_proximity&&(g.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(t.left+e.width()-i.pageX<d.vakata.dnd.settings.scroll_proximity&&(g.scroll_l=1),i.pageX-t.left<d.vakata.dnd.settings.scroll_proximity&&(g.scroll_l=-1)),g.scroll_t||g.scroll_l)return g.scroll_e=d(this),!1}),g.scroll_e||(e=d(b),t=d(window),n=e.height(),r=t.height(),o=e.width(),a=t.width(),s=e.scrollTop(),l=e.scrollLeft(),r<n&&i.pageY-s<d.vakata.dnd.settings.scroll_proximity&&(g.scroll_t=-1),r<n&&r-(i.pageY-s)<d.vakata.dnd.settings.scroll_proximity&&(g.scroll_t=1),a<o&&i.pageX-l<d.vakata.dnd.settings.scroll_proximity&&(g.scroll_l=-1),a<o&&a-(i.pageX-l)<d.vakata.dnd.settings.scroll_proximity&&(g.scroll_l=1),(g.scroll_t||g.scroll_l)&&(g.scroll_e=e)),g.scroll_e&&d.vakata.dnd._scroll(!0),g.helper&&(c=parseInt(i.pageY+d.vakata.dnd.settings.helper_top,10),u=parseInt(i.pageX+d.vakata.dnd.settings.helper_left,10),n&&n<c+25&&(c=n-50),o&&u+g.helper_w>o&&(u=o-(g.helper_w+2)),g.helper.css({left:u+"px",top:c+"px"})),d.vakata.dnd._trigger("move",i),!1}},stop:function(e){if("touchend"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=b.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),g.is_drag)e.target!==g.target&&d(g.target).off("click.vakata"),d.vakata.dnd._trigger("stop",e);else if("touchend"===e.type&&e.target===g.target){var t=setTimeout(function(){d(e.target).click()},100);d(e.target).one("click",function(){t&&clearTimeout(t)})}return d.vakata.dnd._clean(),!1}},A.jstree.defaults.massload=null,A.jstree.plugins.massload=function(e,u){this.init=function(e,t){this._data.massload={},u.init.call(this,e,t)},this._load_nodes=function(n,r,o,a){var e,t,s,i=this.settings.massload,l=(JSON.stringify(n),[]),c=this._model.data;if(!o){for(e=0,t=n.length;e<t;e++)c[n[e]]&&(c[n[e]].state.loaded||c[n[e]].state.failed)&&!a||(l.push(n[e]),(s=this.get_node(n[e],!0))&&s.length&&s.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},l.length){if(A.isFunction(i))return i.call(this,l,A.proxy(function(e){var t,i;if(e)for(t in e)e.hasOwnProperty(t)&&(this._data.massload[t]=e[t]);for(t=0,i=n.length;t<i;t++)(s=this.get_node(n[t],!0))&&s.length&&s.removeClass("jstree-loading").attr("aria-busy",!1);u._load_nodes.call(this,n,r,o,a)},this));if("object"==typeof i&&i&&i.url)return i=A.extend(!0,{},i),A.isFunction(i.url)&&(i.url=i.url.call(this,l)),A.isFunction(i.data)&&(i.data=i.data.call(this,l)),A.ajax(i).done(A.proxy(function(e){var t,i;if(e)for(t in e)e.hasOwnProperty(t)&&(this._data.massload[t]=e[t]);for(t=0,i=n.length;t<i;t++)(s=this.get_node(n[t],!0))&&s.length&&s.removeClass("jstree-loading").attr("aria-busy",!1);u._load_nodes.call(this,n,r,o,a)},this)).fail(A.proxy(function(){u._load_nodes.call(this,n,r,o,a)},this))}}return u._load_nodes.call(this,n,r,o,a)},this._load_node=function(e,t){var i,n=this._data.massload[e.id],r=null;return n?(r=this["string"==typeof n?"_append_html_data":"_append_json_data"](e,"string"==typeof n?A(A.parseHTML(n)).filter(function(){return 3!==this.nodeType}):n,function(e){t.call(this,e)}),(i=this.get_node(e.id,!0))&&i.length&&i.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[e.id],r):u._load_node.call(this,e,t)}},A.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},A.jstree.plugins.search=function(e,s){this.bind=function(){s.bind.call(this),this._data.search.str="",this._data.search.dom=A(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",A.proxy(function(e,t){if(this._data.search.som&&t.res.length){var i,n,r,o,a=this._model.data,s=[];for(i=0,n=t.res.length;i<n;i++)if(a[t.res[i]]&&!a[t.res[i]].state.hidden&&(s.push(t.res[i]),s=s.concat(a[t.res[i]].parents),this._data.search.smc))for(r=0,o=a[t.res[i]].children_d.length;r<o;r++)a[a[t.res[i]].children_d[r]]&&!a[a[t.res[i]].children_d[r]].state.hidden&&s.push(a[t.res[i]].children_d[r]);s=A.vakata.array_remove_item(A.vakata.array_unique(s),A.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(s,!0),this.redraw(!0)}},this)).on("clear_search.jstree",A.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(n,e,t,i,r,o){if(!1===n||""===A.trim(n.toString()))return this.clear_search();i=(i=this.get_node(i))&&i.id?i.id:null,n=n.toString();var a,s,l=this.settings.search,c=!!l.ajax&&l.ajax,u=this._model.data,d=null,h=[],p=[];if(this._data.search.res.length&&!r&&this.clear_search(),t===R&&(t=l.show_only_matches),o===R&&(o=l.show_only_matches_children),!e&&!1!==c)return A.isFunction(c)?c.call(this,n,A.proxy(function(e){e&&e.d&&(e=e.d),this._load_nodes(A.isArray(e)?A.vakata.array_unique(e):[],function(){this.search(n,!0,t,i,r,o)})},this),i):((c=A.extend({},c)).data||(c.data={}),c.data.str=n,i&&(c.data.inside=i),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=A.ajax(c).fail(A.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(c)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(A.proxy(function(e){e&&e.d&&(e=e.d),this._load_nodes(A.isArray(e)?A.vakata.array_unique(e):[],function(){this.search(n,!0,t,i,r,o)})},this)),this._data.search.lastRequest);if(r||(this._data.search.str=n,this._data.search.dom=A(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=t,this._data.search.smc=o),d=new A.vakata.search(n,!0,{caseSensitive:l.case_sensitive,fuzzy:l.fuzzy}),A.each(u[i||A.jstree.root].children_d,function(e,t){var i=u[t];i.text&&!i.state.hidden&&(!l.search_leaves_only||i.state.loaded&&0===i.children.length)&&(l.search_callback&&l.search_callback.call(this,n,i)||!l.search_callback&&d.search(i.text).isMatch)&&(h.push(t),p=p.concat(i.parents))}),h.length){for(a=0,s=(p=A.vakata.array_unique(p)).length;a<s;a++)p[a]!==A.jstree.root&&u[p[a]]&&!0===this.open_node(p[a],null,0)&&this._data.search.opn.push(p[a]);r?(this._data.search.dom=this._data.search.dom.add(A(this.element[0].querySelectorAll("#"+A.map(h,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(A.jstree.idregex,"\\$&"):e.replace(A.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=A.vakata.array_unique(this._data.search.res.concat(h))):(this._data.search.dom=A(this.element[0].querySelectorAll("#"+A.map(h,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(A.jstree.idregex,"\\$&"):e.replace(A.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=h),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:n,res:this._data.search.res,show_only_matches:t})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=A(this.element[0].querySelectorAll("#"+A.map(this._data.search.res,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(A.jstree.idregex,"\\$&"):e.replace(A.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=A()},this.redraw_node=function(e,t,i,n){if((e=s.redraw_node.apply(this,arguments))&&-1!==A.inArray(e.id,this._data.search.res)){var r,o,a=null;for(r=0,o=e.childNodes.length;r<o;r++)if(e.childNodes[r]&&e.childNodes[r].className&&-1!==e.childNodes[r].className.indexOf("jstree-anchor")){a=e.childNodes[r];break}a&&(a.className+=" jstree-search")}return e}},(i=A).vakata.search=function(m,e,v){v=v||{},!1!==(v=i.extend({},i.vakata.search.defaults,v)).fuzzy&&(v.fuzzy=!0),m=v.caseSensitive?m:m.toLowerCase();var y,w,b,t,_=v.location,r=v.distance,x=v.threshold,k=m.length;return 32<k&&(v.fuzzy=!1),v.fuzzy&&(y=1<<k-1,w=function(){var e={},t=0;for(t=0;t<k;t++)e[m.charAt(t)]=0;for(t=0;t<k;t++)e[m.charAt(t)]|=1<<k-t-1;return e}(),b=function(e,t){var i=e/k,n=Math.abs(_-t);return r?i+n/r:n?1:i}),t=function(e){if(e=v.caseSensitive?e:e.toLowerCase(),m===e||-1!==e.indexOf(m))return{isMatch:!0,score:0};if(!v.fuzzy)return{isMatch:!1,score:1};var t,i,n,r,o,a,s,l,c,u=e.length,d=x,h=e.indexOf(m,_),p=k+u,f=1,g=[];for(-1!==h&&(d=Math.min(b(0,h),d),-1!==(h=e.lastIndexOf(m,_+k))&&(d=Math.min(b(0,h),d))),h=-1,t=0;t<k;t++){for(n=0,r=p;n<r;)b(t,_+r)<=d?n=r:p=r,r=Math.floor((p-n)/2+n);for(p=r,a=Math.max(1,_-r+1),s=Math.min(_+r,u)+k,(l=new Array(s+2))[s+1]=(1<<t)-1,i=s;a<=i;i--)if(c=w[e.charAt(i-1)],l[i]=0===t?(l[i+1]<<1|1)&c:(l[i+1]<<1|1)&c|(o[i+1]|o[i])<<1|1|o[i+1],l[i]&y&&(f=b(t,i-1))<=d){if(d=f,h=i-1,g.push(h),!(_<h))break;a=Math.max(1,2*_-h)}if(b(t+1,_)>d)break;o=l}return{isMatch:0<=h,score:f}},!0===e?{search:t}:t(e)},i.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1},A.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1};var m=!(A.jstree.plugins.sort=function(e,t){this.bind=function(){t.bind.call(this),this.element.on("model.jstree",A.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",A.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",A.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(e,t){var i,n;if((e=this.get_node(e))&&e.children&&e.children.length&&(e.children.sort(A.proxy(this.settings.sort,this)),t))for(i=0,n=e.children_d.length;i<n;i++)this.sort(e.children_d[i],!1)}});A.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},A.jstree.plugins.state=function(e,t){this.bind=function(){t.bind.call(this);var e=A.proxy(function(){this.element.on(this.settings.state.events,A.proxy(function(){m&&clearTimeout(m),m=setTimeout(A.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",A.proxy(function(){this.element.one("restore_state.jstree",e),this.restore_state()||e()},this))},this.save_state=function(){var e={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};A.vakata.storage.set(this.settings.state.key,JSON.stringify(e))},this.restore_state=function(){var i=A.vakata.storage.get(this.settings.state.key);if(i)try{i=JSON.parse(i)}catch(e){return!1}return!(i&&i.ttl&&i.sec&&+new Date-i.sec>i.ttl)&&(i&&i.state&&(i=i.state),i&&A.isFunction(this.settings.state.filter)&&(i=this.settings.state.filter.call(this,i)),!!i&&(this.element.one("set_state.jstree",function(e,t){t.instance.trigger("restore_state",{state:A.extend(!0,{},i)})}),this.set_state(i),!0))},this.clear_state=function(){return A.vakata.storage.del(this.settings.state.key)}},A.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}},A.jstree.defaults.types={"default":{}},A.jstree.defaults.types[A.jstree.root]={},A.jstree.plugins.types=function(e,u){this.init=function(e,t){var i,n;if(t&&t.types&&t.types["default"])for(i in t.types)if("default"!==i&&i!==A.jstree.root&&t.types.hasOwnProperty(i))for(n in t.types["default"])t.types["default"].hasOwnProperty(n)&&t.types[i][n]===R&&(t.types[i][n]=t.types["default"][n]);u.init.call(this,e,t),this._model.data[A.jstree.root].type=A.jstree.root},this.refresh=function(e,t){u.refresh.call(this,e,t),this._model.data[A.jstree.root].type=A.jstree.root},this.bind=function(){this.element.on("model.jstree",A.proxy(function(e,t){var i,n,r,o=this._model.data,a=t.nodes,s=this.settings.types,l="default";for(i=0,n=a.length;i<n;i++){if(l="default",o[a[i]].original&&o[a[i]].original.type&&s[o[a[i]].original.type]&&(l=o[a[i]].original.type),o[a[i]].data&&o[a[i]].data.jstree&&o[a[i]].data.jstree.type&&s[o[a[i]].data.jstree.type]&&(l=o[a[i]].data.jstree.type),o[a[i]].type=l,!0===o[a[i]].icon&&s[l].icon!==R&&(o[a[i]].icon=s[l].icon),s[l].li_attr!==R&&"object"==typeof s[l].li_attr)for(r in s[l].li_attr)if(s[l].li_attr.hasOwnProperty(r)){if("id"===r)continue;o[a[i]].li_attr[r]===R?o[a[i]].li_attr[r]=s[l].li_attr[r]:"class"===r&&(o[a[i]].li_attr["class"]=s[l].li_attr["class"]+" "+o[a[i]].li_attr["class"])}if(s[l].a_attr!==R&&"object"==typeof s[l].a_attr)for(r in s[l].a_attr)if(s[l].a_attr.hasOwnProperty(r)){if("id"===r)continue;o[a[i]].a_attr[r]===R?o[a[i]].a_attr[r]=s[l].a_attr[r]:"href"===r&&"#"===o[a[i]].a_attr[r]?o[a[i]].a_attr.href=s[l].a_attr.href:"class"===r&&(o[a[i]].a_attr["class"]=s[l].a_attr["class"]+" "+o[a[i]].a_attr["class"])}}o[A.jstree.root].type=A.jstree.root},this)),u.bind.call(this)},this.get_json=function(e,t,i){var n,r,o=this._model.data,a=t?A.extend(!0,{},t,{no_id:!1}):{},s=u.get_json.call(this,e,a,i);if(!1===s)return!1;if(A.isArray(s))for(n=0,r=s.length;n<r;n++)s[n].type=s[n].id&&o[s[n].id]&&o[s[n].id].type?o[s[n].id].type:"default",t&&t.no_id&&(delete s[n].id,s[n].li_attr&&s[n].li_attr.id&&delete s[n].li_attr.id,s[n].a_attr&&s[n].a_attr.id&&delete s[n].a_attr.id);else s.type=s.id&&o[s.id]&&o[s.id].type?o[s.id].type:"default",t&&t.no_id&&(s=this._delete_ids(s));return s},this._delete_ids=function(e){if(A.isArray(e)){for(var t=0,i=e.length;t<i;t++)e[t]=this._delete_ids(e[t]);return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&A.isArray(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(e,t,i,n,r){if(!1===u.check.call(this,e,t,i,n,r))return!1;t=t&&t.id?t:this.get_node(t),i=i&&i.id?i:this.get_node(i);var o,a,s,l,c=t&&t.id?r&&r.origin?r.origin:A.jstree.reference(t.id):null;switch(c=c&&c._model&&c._model.data?c._model.data:null,e){case"create_node":case"move_node":case"copy_node":if("move_node"!==e||-1===A.inArray(t.id,i.children)){if((o=this.get_rules(i)).max_children!==R&&-1!==o.max_children&&o.max_children===i.children.length)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});if(o.valid_children!==R&&-1!==o.valid_children&&-1===A.inArray(t.type||"default",o.valid_children))return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});if(c&&t.children_d&&t.parents){for(s=a=0,l=t.children_d.length;s<l;s++)a=Math.max(a,c[t.children_d[s]].parents.length);a=a-t.parents.length+1}(a<=0||a===R)&&(a=1);do{if(o.max_depth!==R&&-1!==o.max_depth&&o.max_depth<a)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});i=this.get_node(i.parent),o=this.get_rules(i),a++}while(i)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var t=this.get_type(e,!0);return t.max_depth===R&&(t.max_depth=-1),t.max_children===R&&(t.max_children=-1),t.valid_children===R&&(t.valid_children=-1),t},this.get_type=function(e,t){return!!(e=this.get_node(e))&&(t?A.extend({type:e.type},this.settings.types[e.type]):e.type)},this.set_type=function(e,t){var i,n,r,o,a,s,l,c,u=this._model.data;if(A.isArray(e)){for(n=0,r=(e=e.slice()).length;n<r;n++)this.set_type(e[n],t);return!0}if(i=this.settings.types,e=this.get_node(e),!i[t]||!e)return!1;if((l=this.get_node(e,!0))&&l.length&&(c=l.children(".jstree-anchor")),o=e.type,a=this.get_icon(e),e.type=t,(!0===a||!i[o]||i[o].icon!==R&&a===i[o].icon)&&this.set_icon(e,i[t].icon===R||i[t].icon),i[o]&&i[o].li_attr!==R&&"object"==typeof i[o].li_attr)for(s in i[o].li_attr)if(i[o].li_attr.hasOwnProperty(s)){if("id"===s)continue;"class"===s?(u[e.id].li_attr["class"]=(u[e.id].li_attr["class"]||"").replace(i[o].li_attr[s],""),l&&l.removeClass(i[o].li_attr[s])):u[e.id].li_attr[s]===i[o].li_attr[s]&&(u[e.id].li_attr[s]=null,l&&l.removeAttr(s))}if(i[o]&&i[o].a_attr!==R&&"object"==typeof i[o].a_attr)for(s in i[o].a_attr)if(i[o].a_attr.hasOwnProperty(s)){if("id"===s)continue;"class"===s?(u[e.id].a_attr["class"]=(u[e.id].a_attr["class"]||"").replace(i[o].a_attr[s],""),c&&c.removeClass(i[o].a_attr[s])):u[e.id].a_attr[s]===i[o].a_attr[s]&&("href"===s?(u[e.id].a_attr[s]="#",c&&c.attr("href","#")):(delete u[e.id].a_attr[s],c&&c.removeAttr(s)))}if(i[t].li_attr!==R&&"object"==typeof i[t].li_attr)for(s in i[t].li_attr)if(i[t].li_attr.hasOwnProperty(s)){if("id"===s)continue;u[e.id].li_attr[s]===R?(u[e.id].li_attr[s]=i[t].li_attr[s],l&&("class"===s?l.addClass(i[t].li_attr[s]):l.attr(s,i[t].li_attr[s]))):"class"===s&&(u[e.id].li_attr["class"]=i[t].li_attr[s]+" "+u[e.id].li_attr["class"],l&&l.addClass(i[t].li_attr[s]))}if(i[t].a_attr!==R&&"object"==typeof i[t].a_attr)for(s in i[t].a_attr)if(i[t].a_attr.hasOwnProperty(s)){if("id"===s)continue;u[e.id].a_attr[s]===R?(u[e.id].a_attr[s]=i[t].a_attr[s],c&&("class"===s?c.addClass(i[t].a_attr[s]):c.attr(s,i[t].a_attr[s]))):"href"===s&&"#"===u[e.id].a_attr[s]?(u[e.id].a_attr.href=i[t].a_attr.href,c&&c.attr("href",i[t].a_attr.href)):"class"===s&&(u[e.id].a_attr["class"]=i[t].a_attr["class"]+" "+u[e.id].a_attr["class"],c&&c.addClass(i[t].a_attr[s]))}return!0}},A.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},A.jstree.plugins.unique=function(e,p){this.check=function(e,t,i,n,r){if(!1===p.check.call(this,e,t,i,n,r))return!1;if(t=t&&t.id?t:this.get_node(t),!(i=i&&i.id?i:this.get_node(i))||!i.children)return!0;var o,a,s="rename_node"===e?n:t.text,l=[],c=this.settings.unique.case_sensitive,u=this._model.data;for(o=0,a=i.children.length;o<a;o++)l.push(c?u[i.children[o]].text:u[i.children[o]].text.toLowerCase());switch(c||(s=s.toLowerCase()),e){case"delete_node":return!0;case"rename_node":return(o=-1===A.inArray(s,l)||t.text&&t.text[c?"toString":"toLowerCase"]()===s)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+s+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),o;case"create_node":return(o=-1===A.inArray(s,l))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+s+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),o;case"copy_node":return(o=-1===A.inArray(s,l))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+s+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),o;case"move_node":return(o=t.parent===i.id&&(!r||!r.is_multi)||-1===A.inArray(s,l))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+s+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),o}return!0},this.create_node=function(e,t,i,n,r){if(!t||t.text===R){if(null===e&&(e=A.jstree.root),!(e=this.get_node(e)))return p.create_node.call(this,e,t,i,n,r);if(!(i=i===R?"last":i).toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(e))return p.create_node.call(this,e,t,i,n,r);t||(t={});var o,a,s,l,c,u=this._model.data,d=this.settings.unique.case_sensitive,h=this.settings.unique.duplicate;for(a=o=this.get_string("New node"),s=[],l=0,c=e.children.length;l<c;l++)s.push(d?u[e.children[l]].text:u[e.children[l]].text.toLowerCase());for(l=1;-1!==A.inArray(d?a:a.toLowerCase(),s);)a=h.call(this,o,++l).toString();t.text=a}return p.create_node.call(this,e,t,i,n,r)}};var v=b.createElement("DIV");if(v.setAttribute("unselectable","on"),v.setAttribute("role","presentation"),v.className="jstree-wholerow",v.innerHTML="&#160;",A.jstree.plugins.wholerow=function(e,o){this.bind=function(){o.bind.call(this),this.element.on("ready.jstree set_state.jstree",A.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",A.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",A.proxy(function(){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",A.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,n,r=!1;for(i=0,n=t.selected.length;i<n;i++)(r=this.get_node(t.selected[i],!0))&&r.length&&r.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",A.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",A.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",A.proxy(function(e){if(this._data.contextmenu){e.preventDefault();var t=A.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});A(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t)}},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=A.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});A(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()}).on("dblclick.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=A.Event("dblclick",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});A(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",A.proxy(function(e){e.stopImmediatePropagation();var t=A.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});A(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",A.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",A.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),o.teardown.call(this)},this.redraw_node=function(e,t,i,n){if(e=o.redraw_node.apply(this,arguments)){var r=v.cloneNode(!0);-1!==A.inArray(e.id,this._data.core.selected)&&(r.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===e.id&&(r.className+=" jstree-wholerow-hovered"),e.insertBefore(r,e.childNodes[0])}return e}},b.registerElement&&Object&&Object.create){var t=Object.create(HTMLElement.prototype);t.createdCallback=function(){var e,t={core:{},plugins:[]};for(e in A.jstree.plugins)A.jstree.plugins.hasOwnProperty(e)&&this.attributes[e]&&(t.plugins.push(e),this.getAttribute(e)&&JSON.parse(this.getAttribute(e))&&(t[e]=JSON.parse(this.getAttribute(e))));for(e in A.jstree.defaults.core)A.jstree.defaults.core.hasOwnProperty(e)&&this.attributes[e]&&(t.core[e]=JSON.parse(this.getAttribute(e))||this.getAttribute(e));A(this).jstree(t)};try{b.registerElement("vakata-jstree",{prototype:t})}catch(y){}}}}),function(n){n.version={versionStr:"2.3.0",major:parseInt("2",10),minor:parseInt("3",10),revision:parseInt("0",10)};var e,t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},i=Object.prototype.toString,r=Object.prototype.hasOwnProperty;n.isFunction=function(e){return"function"===n.type(e)},n.isArray=Array.isArray||function(e){return"array"===n.type(e)},
n.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},n.type=function(e){return null===e||e===undefined?String(e):t[i.call(e)]||"object"},n.isPlainObject=function(e){if(!e||"object"!==OpenSeadragon.type(e)||e.nodeType||n.isWindow(e))return!1;if(e.constructor&&!r.call(e,"constructor")&&!r.call(e.constructor.prototype,"isPrototypeOf"))return!1;var t;for(var i in e)t=i;return t===undefined||r.call(e,t)},n.isEmptyObject=function(e){for(var t in e)return!1;return!0},n.freezeObject=function(e){return Object.freeze?n.freezeObject=Object.freeze:n.freezeObject=function(e){return e},n.freezeObject(e)},n.supportsCanvas=(e=document.createElement("canvas"),!(!n.isFunction(e.getContext)||!e.getContext("2d"))),n.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(i){t=!0}return t},n.pixelDensityRatio=function(){if(n.supportsCanvas){var e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return Math.max(t,1)/i}return 1}()}(OpenSeadragon),function($){function getOffsetParent(e,t){return t&&e!=document.body?document.body:e.offsetParent}$.extend=function(e,t){var i,n,r,o,a,s,l=e||{},c=arguments.length,u=!1,d=1;for("boolean"==typeof l&&(u=l,l=t||{},d=2),"object"==typeof l||OpenSeadragon.isFunction(l)||(l={}),c===d&&(l=this,--d);d<c;d++)if(null!==(i=arguments[d])||i!==undefined)for(n in i)r=l[n],l!==(o=i[n])&&(u&&o&&(OpenSeadragon.isPlainObject(o)||(a=OpenSeadragon.isArray(o)))?(a?(a=!1,s=r&&OpenSeadragon.isArray(r)?r:[]):s=r&&OpenSeadragon.isPlainObject(r)?r:{},l[n]=OpenSeadragon.extend(u,s,o)):o!==undefined&&(l[n]=o));return l};var isIOSDevice=function(){if("object"!=typeof navigator)return!1;var e=navigator.userAgent;return"string"==typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,degrees:0,opacity:1,preload:!1,compositeOperation:null,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:"#437AB2"},SIGNAL:"----seadragon----",delegate:function(t,i){return function(){var e=arguments;return e===undefined&&(e=[]),i.apply(t,e)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(e){var t,i,n=new $.Point;for(i=getOffsetParent(e=$.getElement(e),t="fixed"==$.getElementStyle(e).position);i;)n.x+=e.offsetLeft,n.y+=e.offsetTop,t&&(n=n.plus($.getPageScroll())),i=getOffsetParent(e=i,t="fixed"==$.getElementStyle(e).position);return n},getElementOffset:function(e){var t,i,n=(e=$.getElement(e))&&e.ownerDocument,r={top:0,left:0};return n?(t=n.documentElement,typeof e.getBoundingClientRect!=typeof undefined&&(r=e.getBoundingClientRect()),i=n==n.window?n:9===n.nodeType&&(n.defaultView||n.parentWindow),new $.Point(r.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0),r.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0))):new $.Point},getElementSize:function(e){return e=$.getElement(e),new $.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return(e=$.getElement(e)).currentStyle}:function(e){return e=$.getElement(e),window.getComputedStyle(e,"")},getCssPropertyWithVendorPrefix:function(e){var s={};return $.getCssPropertyWithVendorPrefix=function(e){if(s[e]!==undefined)return s[e];var t=document.createElement("div").style,i=null;if(t[e]!==undefined)i=e;else for(var n=["Webkit","Moz","MS","O","webkit","moz","ms","o"],r=$.capitalizeFirstLetter(e),o=0;o<n.length;o++){var a=n[o]+r;if(t[a]!==undefined){i=a;break}}return s[e]=i},$.getCssPropertyWithVendorPrefix(e)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var i=e%t;return i<0&&(i+=t),i},pointInElement:function(e,t){e=$.getElement(e);var i=$.getElementOffset(e),n=$.getElementSize(e);return t.x>=i.x&&t.x<i.x+n.x&&t.y<i.y+n.y&&t.y>=i.y},getEvent:function(e){return $.getEvent=e?function(e){return e}:function(){return window.event},$.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.pageX,t.y=e.pageY,t};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,t}}return $.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(t.scrollLeft||t.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(e){if("undefined"!=typeof window.scrollTo)$.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var t=$.getPageScroll();if(t.x===e.x&&t.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var i=$.getPageScroll();if(i.x!==t.x&&i.y!==t.y)return void($.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,(i=$.getPageScroll()).x!==t.x&&i.y!==t.y)return void($.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});$.setPageScroll=function(){}}return $.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!t.clientWidth&&!t.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(e){e=$.getElement(e);var t=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(t[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(t[1].style,{display:"table-row"}),$.extend(t[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),t[0].appendChild(t[1]),t[1].appendChild(t[2]),t[2].appendChild(e),t[0]},makeNeutralElement:function(e){var t=document.createElement(e),i=t.style;return i.background="transparent none",i.border="none",i.margin="0px",i.padding="0px",i.position="static",t},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(e){return $.makeTransparentImage=function(e){var t=$.makeNeutralElement("img");return t.src=e,t},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(e){var t=$.makeNeutralElement("img"),i=null;return(i=$.makeNeutralElement("span")).style.display="inline-block",t.onload=function(){i.style.width=i.style.width||t.width+"px",i.style.height=i.style.height||t.height+"px",t.onload=null,t=null},t.src=e,i.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",i}),$.makeTransparentImage(e)},setElementOpacity:function(e,t,i){var n;e=$.getElement(e),i&&!$.Browser.alpha&&(t=Math.round(t)),$.Browser.opacity?e.style.opacity=t<1?t:"":t<1?(n="alpha(opacity="+Math.round(100*t)+")",e.style.filter=n):e.style.filter=""},setElementTouchActionNone:function(e){"undefined"!=typeof(e=$.getElement(e)).style.touchAction?e.style.touchAction="none":"undefined"!=typeof e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,t){(e=$.getElement(e)).className?-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=" "+t):e.className=t},indexOf:function(e,t,i){return Array.prototype.indexOf?this.indexOf=function(e,t,i){return e.indexOf(t,i)}:this.indexOf=function(e,t,i){var n,r,o=i||0;if(!e)throw new TypeError;if(0===(r=e.length)||r<=o)return-1;for(o<0&&(o=r-Math.abs(o)),n=o;n<r;n++)if(e[n]===t)return n;return-1},this.indexOf(e,t,i)},removeClass:function(e,t){var i,n,r=[];for(i=(e=$.getElement(e)).className.split(/\s+/),n=0;n<i.length;n++)i[n]&&i[n]!==t&&r.push(i[n]);e.className=r.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,t,i,n){(e=$.getElement(e)).addEventListener(t,i,n)};if(window.attachEvent)return function(e,t,i){(e=$.getElement(e)).attachEvent("on"+t,i)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,t,i,n){(e=$.getElement(e)).removeEventListener(t,i,n)};if(window.detachEvent)return function(e,t,i){(e=$.getElement(e)).detachEvent("on"+t,i)};throw new Error("No known event model.")}(),cancelEvent:function(e){(e=$.getEvent(e)).preventDefault?$.cancelEvent=function(e){e.preventDefault()}:$.cancelEvent=function(e){(e=$.getEvent(e)).cancel=!0,e.returnValue=!1},$.cancelEvent(e)},stopEvent:function(e){(e=$.getEvent(e)).stopPropagation?$.stopEvent=function(e){e.stopPropagation()}:$.stopEvent=function(e){(e=$.getEvent(e)).cancelBubble=!0},$.stopEvent(e)},createCallback:function(i,n){var e,r=[];for(e=2;e<arguments.length;e++)r.push(arguments[e]);return function(){var e,t=r.concat([]);for(e=0;e<arguments.length;e++)t.push(arguments[e]);return n.apply(i,t)}},getUrlParameter:function(e){var t=URLPARAMS[e];return t||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(e){var t;try{t=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(i){t=!1}if(t)window.XMLHttpRequest?$.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(e)},makeAjaxRequest:function(e,t,i){var n,r,o;$.isPlainObject(e)&&(t=e.success,i=e.error,n=e.withCredentials,r=e.headers,o=e.responseType||null,e=e.url);var a=$.getUrlProtocol(e),s=$.createAjaxRequest("file:"===a);if(!$.isFunction(t))throw new Error("makeAjaxRequest requires a success callback");s.onreadystatechange=function(){4==s.readyState&&(s.onreadystatechange=function(){},200<=s.status&&s.status<300||0===s.status&&"http:"!==a&&"https:"!==a?t(s):($.console.log("AJAX request returned %d: %s",s.status,e),$.isFunction(i)&&i(s)))};try{if(s.open("GET",e,!0),o&&(s.responseType=o),r)for(var l in r)r.hasOwnProperty(l)&&r[l]&&s.setRequestHeader(l,r[l]);n&&(s.withCredentials=!0),s.send(null)}catch(h){var c=h.message,u=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(u&&"undefined"!=typeof h.number&&-2147024891==h.number&&(c+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",h.name,c),s.onreadystatechange=function(){},window.XDomainRequest){var d=new XDomainRequest;if(d){d.onload=function(){$.isFunction(t)&&t({responseText:d.responseText,status:200,statusText:"OK"})},d.onerror=function(){$.isFunction(i)&&i({responseText:d.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{d.open("GET",e),d.send()}catch(p){$.isFunction(i)&&i(s,h)}}}else $.isFunction(i)&&i(s,h)}return s},jsonp:function(e){var i,t=e.url,n=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=e.callbackName||"openseadragon"+$.now(),o=window[r],a="$1"+r+"$2",s=e.param||"callback",l=e.callback;t=t.replace(/(\=)\?(&|$)|\?\?/i,a),t+=(/\?/.test(t)?"&":"?")+s+"="+r,window[r]=function(e){if(o)window[r]=o;else try{delete window[r]}catch(t){}l&&$.isFunction(l)&&l(e)},i=document.createElement("script"),undefined===e.async&&!1===e.async||(i.async="async"),e.scriptCharset&&(i.charset=e.scriptCharset),i.src=t,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=undefined)},n.insertBefore(i,n.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)$.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(e){var t=null;return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t}}return $.parseXml(e)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(e){return!!FILEFORMATS[(e=e||"").toLowerCase()]}}),$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};!function(){var e=navigator.appVersion,t=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(t.substring(t.indexOf("MSIE")+5,t.indexOf(";",t.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(0<=t.indexOf("Firefox")?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(t.substring(t.indexOf("Firefox")+8))):0<=t.indexOf("Safari")?($.Browser.vendor=0<=t.indexOf("Chrome")?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(t.substring(t.substring(0,t.indexOf("Safari")).lastIndexOf("/")+1,t.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(e)}var i,n,r,o=window.location.search.substring(1).split("&");for(r=0;r<o.length;r++)0<(n=(i=o[r]).indexOf("="))&&(URLPARAMS[i.substring(0,n)]=decodeURIComponent(i.substring(n+1)));$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}();var nullfunction=function(){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(t&&i)$.requestAnimationFrame=function(){return t.apply(e,arguments)},$.cancelAnimationFrame=function(){return i.apply(e,arguments)};else{var n,r=[],o=[],a=0;$.requestAnimationFrame=function(e){return r.push([++a,e]),n||(n=setInterval(function(){if(r.length){var e=$.now(),t=o;for(o=r,r=t;o.length;)o.shift()[1](e)}else clearInterval(n),n=undefined},20)),a},$.cancelAnimationFrame=function(e){var t,i;for(t=0,i=r.length;t<i;t+=1)if(r[t][0]===e)return void r.splice(t,1);for(t=0,i=o.length;t<i;t+=1)if(o[t][0]===e)return void o.splice(t,1)}}}(window)}(OpenSeadragon),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.OpenSeadragon=t()}(this,function(){return OpenSeadragon}),function(e){var t={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.fullscreenElement},t.requestFullScreen=function(e){return e.requestFullscreen()},t.exitFullScreen=function(){document.exitFullscreen()},t.fullScreenEventName="fullscreenchange",t.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.msFullscreenElement},t.requestFullScreen=function(e){return e.msRequestFullscreen()},t.exitFullScreen=function(){document.msExitFullscreen()},t.fullScreenEventName="MSFullscreenChange",t.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitFullscreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullscreen()},t.exitFullScreen=function(){document.webkitExitFullscreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullScreen()},t.exitFullScreen=function(){document.webkitCancelFullScreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.mozFullScreenElement},t.requestFullScreen=function(e){return e.mozRequestFullScreen()},t.exitFullScreen=function(){document.mozCancelFullScreen()},t.fullScreenEventName="mozfullscreenchange",t.fullScreenErrorEventName="mozfullscreenerror"),t.isFullScreen=function(){return null!==t.getFullScreenElement()},t.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),t.exitFullScreen()},e.extend(e,t)}(OpenSeadragon),function(o){o.EventSource=function(){this.events={}},o.EventSource.prototype={addOnceHandler:function(t,i,e,n){var r=this;n=n||1;var o=0,a=function(e){++o===n&&r.removeHandler(t,a),i(e)};this.addHandler(t,a,e)},addHandler:function(e,t,i){var n=this.events[e];n||(this.events[e]=n=[]),t&&o.isFunction(t)&&(n[n.length]={handler:t,userData:i||null})},removeHandler:function(e,t){var i,n=this.events[e],r=[];if(n&&o.isArray(n)){for(i=0;i<n.length;i++)n[i].handler!==t&&r.push(n[i]);this.events[e]=r}},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var r=this.events[e];return r&&r.length?(r=1===r.length?[r[0]]:Array.apply(null,r),function(e,t){var i,n=r.length;for(i=0;i<n;i++)r[i]&&(t.eventSource=e,t.userData=r[i].userData,r[i].handler(t))}):null},raiseEvent:function(e,t){var i=this.getHandler(e);i&&(t||(t={}),i(this,t))}}}(OpenSeadragon),function(g){function r(e){var t,i=_e[e.hash],n=i.activePointersLists.length;for(t=0;t<n;t++)0<i.activePointersLists[t].captureCount&&(g.removeEvent(g.MouseTracker.captureElement,"mousemove",i.mousemovecaptured,!0),g.removeEvent(g.MouseTracker.captureElement,"mouseup",i.mouseupcaptured,!0),g.removeEvent(g.MouseTracker.captureElement,g.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",i.pointermovecaptured,!0),g.removeEvent(g.MouseTracker.captureElement,g.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",i.pointerupcaptured,!0),g.removeEvent(g.MouseTracker.captureElement,"touchmove",i.touchmovecaptured,!0),g.removeEvent(g.MouseTracker.captureElement,"touchend",i.touchendcaptured,!0),i.activePointersLists[t].captureCount=0);for(t=0;t<n;t++)i.activePointersLists.pop()}function t(e){var t,i,n=_e[e.hash];if(!n.tracking){for(i=0;i<g.MouseTracker.subscribeEvents.length;i++)t=g.MouseTracker.subscribeEvents[i],g.addEvent(e.element,t,n[t],!1);r(e),n.tracking=!0}}function i(e){var t,i,n=_e[e.hash];if(n.tracking){for(i=0;i<g.MouseTracker.subscribeEvents.length;i++)t=g.MouseTracker.subscribeEvents[i],g.removeEvent(e.element,t,n[t],!1);r(e),n.tracking=!1}}function o(e,t){var i=_e[e.hash];if("pointerevent"===t)return{upName:g.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:i.pointerupcaptured,moveName:g.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:i.pointermovecaptured};if("mouse"===t)return{upName:"mouseup",upHandler:i.mouseupcaptured,moveName:"mousemove",moveHandler:i.mousemovecaptured};if("touch"===t)return{upName:"touchend",upHandler:i.touchendcaptured,moveName:"touchmove",moveHandler:i.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function c(e,t,i){var n,r=e.getActivePointersListByType(t);r.captureCount+=i||1,1===r.captureCount&&(g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?e.element.setCapture(!0):(n=o(e,g.MouseTracker.havePointerEvents?"pointerevent":t),xe&&fe(window.top)&&g.addEvent(window.top,n.upName,n.upHandler,!0),g.addEvent(g.MouseTracker.captureElement,n.upName,n.upHandler,!0),g.addEvent(g.MouseTracker.captureElement,n.moveName,n.moveHandler,!0)))}function l(e,t,i){var n,r=e.getActivePointersListByType(t);r.captureCount-=i||1,0===r.captureCount&&(g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?e.element.releaseCapture():(n=o(e,g.MouseTracker.havePointerEvents?"pointerevent":t),xe&&fe(window.top)&&g.removeEvent(window.top,n.upName,n.upHandler,!0),g.removeEvent(g.MouseTracker.captureElement,n.moveName,n.moveHandler,!0),g.removeEvent(g.MouseTracker.captureElement,n.upName,n.upHandler,!0)))}function n(e){var t;if(g.MouseTracker.unprefixedPointerEvents)t=e.pointerType;else switch(e.pointerType){case 2:t="touch";break;case 3:t="pen";break;case 4:t="mouse";break;default:t=""}return t}function u(e){return g.getMousePosition(e)}function a(e,t){return m(u(e),t)}function m(e,t){var i=g.getElementOffset(t);return e.minus(i)}function v(e,t){return new g.Point((e.x+t.x)/2,(e.y+t.y)/2)}function s(e,t){e.clickHandler&&g.cancelEvent(t)}function d(e,t){e.dblClickHandler&&g.cancelEvent(t)}function h(e,t){e.keyDownHandler&&(t=g.getEvent(t),e.keyDownHandler({eventSource:e,keyCode:t.keyCode?t.keyCode:t.charCode,ctrl:t.ctrlKey,shift:t.shiftKey,alt:t.altKey,meta:t.metaKey,originalEvent:t,preventDefaultAction:!1,userData:e.userData})||g.cancelEvent(t))}function p(e,t){e.keyUpHandler&&(t=g.getEvent(t),e.keyUpHandler({eventSource:e,keyCode:t.keyCode?t.keyCode:t.charCode,ctrl:t.ctrlKey,shift:t.shiftKey,alt:t.altKey,meta:t.metaKey,originalEvent:t,preventDefaultAction:!1,userData:e.userData})||g.cancelEvent(t))}function f(e,t){e.keyHandler&&(t=g.getEvent(t),e.keyHandler({eventSource:e,keyCode:t.keyCode?t.keyCode:t.charCode,ctrl:t.ctrlKey,shift:t.shiftKey,alt:t.altKey,meta:t.metaKey,originalEvent:t,preventDefaultAction:!1,userData:e.userData})||g.cancelEvent(t))}function y(e,t){e.focusHandler&&(t=g.getEvent(t),!1===e.focusHandler({eventSource:e,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t))}function w(e,t){e.blurHandler&&(t=g.getEvent(t),!1===e.blurHandler({eventSource:e,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t))}function b(e,t){x(e,t,t)}function _(e,t){var i={target:(t=g.getEvent(t)).target||t.srcElement,type:"wheel",shiftKey:t.shiftKey||!1,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX?t.pageX:t.clientX,pageY:t.pageY?t.pageY:t.clientY,deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==g.MouseTracker.wheelEventName?i.deltaY=-t.wheelDelta/g.DEFAULT_SETTINGS.pixelsPerWheelLine:i.deltaY=t.detail,x(e,i,t)}function x(e,t,i){var n=0;n=t.deltaY<0?1:-1,e.scrollHandler&&!1===e.scrollHandler({eventSource:e,pointerType:"mouse",position:a(t,e.element),scroll:n,shift:t.shiftKey,isTouchEvent:!1,originalEvent:i,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(i)}function k(e,t){if(e===t)return!1;for(;t&&t!==e;)t=t.parentNode;return t===e}function j(e,t){E(e,t=g.getEvent(t))}function T(e,t){(t=g.getEvent(t)).currentTarget===t.relatedTarget||k(t.currentTarget,t.relatedTarget)||E(e,t)}function E(e,t){se(e,t,[{id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(t),currentTime:g.now()}])}function C(e,t){P(e,t=g.getEvent(t))}function S(e,t){(t=g.getEvent(t)).currentTarget===t.relatedTarget||k(t.currentTarget,t.relatedTarget)||P(e,t)}function P(e,t){le(e,t,[{id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(t),currentTime:g.now()}])}function A(e){return g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?1===e?0:2===e?2:4===e?1:-1:e}function R(e,t){ce(e,t=g.getEvent(t),[{id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(t),currentTime:g.now()}],A(t.button))&&(g.stopEvent(t),c(e,"mouse")),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler)&&g.cancelEvent(t)}function L(e,t){O(e,t)}function I(e,t){O(e,t),g.stopEvent(t)}function O(e,t){ue(e,t=g.getEvent(t),[{id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(t),currentTime:g.now()}],A(t.button))&&l(e,"mouse")}function M(e,t){N(e,t)}function D(e,t){N(e,t),g.stopEvent(t)}function N(e,t){de(e,t=g.getEvent(t),[{id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(t),currentTime:g.now()}])}function B(e,t,i){var n,r=i.getLength(),o=[];if("touch"===i.type||0<i.contacts){for(n=0;n<r;n++)o.push(i.getByIndex(n));0<o.length&&(ue(e,t,o,0),i.captureCount=1,l(e,i.type),le(e,t,o))}}function $(e,t){var i,n,r,o,a=t.changedTouches.length,s=[],l=e.getActivePointersListByType("touch");for(i=g.now(),l.getLength()>t.touches.length-a&&(g.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),B(e,t,l)),n=0;n<a;n++)s.push({id:t.changedTouches[n].identifier,type:"touch",currentPos:u(t.changedTouches[n]),currentTime:i});for(se(e,t,s),n=0;n<be.length;n++)if(be[n]!==e&&be[n].isTracking()&&k(be[n].element,e.element)){for(o=[],r=0;r<a;r++)o.push({id:t.changedTouches[r].identifier,type:"touch",currentPos:u(t.changedTouches[r]),currentTime:i});se(be[n],t,o)}ce(e,t,s,0)&&(g.stopEvent(t),c(e,"touch",a)),g.cancelEvent(t)}function F(e,t){H(e,t)}function z(e,t){H(e,t),g.stopEvent(t)}function H(e,t){var i,n,r,o,a=t.changedTouches.length,s=[];for(i=g.now(),n=0;n<a;n++)s.push({id:t.changedTouches[n].identifier,type:"touch",currentPos:u(t.changedTouches[n]),currentTime:i});for(ue(e,t,s,0)&&l(e,"touch",a),le(e,t,s),n=0;n<be.length;n++)if(be[n]!==e&&be[n].isTracking()&&k(be[n].element,e.element)){for(o=[],r=0;r<a;r++)o.push({id:t.changedTouches[r].identifier,type:"touch",currentPos:u(t.changedTouches[r]),currentTime:i});le(be[n],t,o)}g.cancelEvent(t)}function W(e,t){U(e,t)}function q(e,t){U(e,t),g.stopEvent(t)}function U(e,t){var i,n=t.changedTouches.length,r=[];for(i=0;i<n;i++)r.push({id:t.changedTouches[i].identifier,type:"touch",currentPos:u(t.changedTouches[i]),currentTime:g.now()});de(e,t,r),g.cancelEvent(t)}function V(e,t){B(e,t,e.getActivePointersListByType("touch"))}function Y(e,t){return t.stopPropagation(),t.preventDefault(),!1}function J(e,t){return t.stopPropagation(),t.preventDefault(),!1}function G(e,t){t.currentTarget===t.relatedTarget||k(t.currentTarget,t.relatedTarget)||se(e,t,[{id:t.pointerId,type:n(t),isPrimary:t.isPrimary,currentPos:u(t),currentTime:g.now()}])}function X(e,t){t.currentTarget===t.relatedTarget||k(t.currentTarget,t.relatedTarget)||le(e,t,[{id:t.pointerId,type:n(t),isPrimary:t.isPrimary,currentPos:u(t),currentTime:g.now()}])}function K(e,t){var i;ce(e,t,[i={id:t.pointerId,type:n(t),isPrimary:t.isPrimary,currentPos:u(t),currentTime:g.now()}],t.button)&&(g.stopEvent(t),c(e,i.type)),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler||e.pinchHandler)&&g.cancelEvent(t)}function Q(e,t){ee(e,t)}function Z(e,t){e.getActivePointersListByType(n(t)).getById(t.pointerId)&&ee(e,t),g.stopEvent(t)}function ee(e,t){var i;ue(e,t,[i={id:t.pointerId,type:n(t),isPrimary:t.isPrimary,currentPos:u(t),currentTime:g.now()}],t.button)&&l(e,i.type)}function te(e,t){ne(e,t)}function ie(e,t){e.getActivePointersListByType(n(t)).getById(t.pointerId)&&ne(e,t),g.stopEvent(t)}function ne(e,t){de(e,t,[{id:t.pointerId,type:n(t),isPrimary:t.isPrimary,currentPos:u(t),currentTime:g.now()}])}function re(e,t){he(e,t,[{id:t.pointerId,type:n(t)}])}function oe(e,t){return t.hasOwnProperty("isPrimary")||(0===e.getLength()?t.isPrimary=!0:t.isPrimary=!1),t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function ae(e,t){var i,n;return e.getById(t.id)?(i=e.removeById(t.id),t.hasOwnProperty("isPrimary")||(n=e.getPrimary())||(n=e.getByIndex(0))&&(n.isPrimary=!0)):i=e.getLength(),i}function se(e,t,i){var n,r,o,a=e.getActivePointersListByType(i[0].type),s=i.length;for(n=0;n<s;n++)r=i[n],(o=a.getById(r.id))?(o.insideElement=!0,o.lastPos=o.currentPos,o.lastTime=o.currentTime,o.currentPos=r.currentPos,o.currentTime=r.currentTime,r=o):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,oe(a,r)),e.enterHandler&&!1===e.enterHandler({eventSource:e,pointerType:r.type,
position:m(r.currentPos,e.element),buttons:a.buttons,pointers:e.getActivePointerCount(),insideElementPressed:r.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===r.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t)}function le(e,t,i){var n,r,o,a=e.getActivePointersListByType(i[0].type),s=i.length;for(n=0;n<s;n++)r=i[n],(o=a.getById(r.id))&&(o.captured?(o.insideElement=!1,o.lastPos=o.currentPos,o.lastTime=o.currentTime,o.currentPos=r.currentPos,o.currentTime=r.currentTime):ae(a,o),r=o),e.exitHandler&&!1===e.exitHandler({eventSource:e,pointerType:r.type,position:m(r.currentPos,e.element),buttons:a.buttons,pointers:e.getActivePointerCount(),insideElementPressed:!!o&&o.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===r.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t)}function ce(e,t,i,n){var r,o,a,s=_e[e.hash],l=e.getActivePointersListByType(i[0].type),c=i.length;"undefined"!=typeof t.buttons?l.buttons=t.buttons:g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?0===n?l.buttons+=1:1===n?l.buttons+=4:2===n?l.buttons+=2:3===n?l.buttons+=8:4===n?l.buttons+=16:5===n&&(l.buttons+=32):0===n?l.buttons|=1:1===n?l.buttons|=4:2===n?l.buttons|=2:3===n?l.buttons|=8:4===n?l.buttons|=16:5===n&&(l.buttons|=32);var u=e.getActivePointersListsExceptType(i[0].type);for(r=0;r<u.length;r++)B(e,t,u[r]);if(0!==n)return e.nonPrimaryPressHandler&&!1===e.nonPrimaryPressHandler({eventSource:e,pointerType:i[0].type,position:m(i[0].currentPos,e.element),button:n,buttons:l.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),!1;for(r=0;r<c;r++)o=i[r],(a=l.getById(o.id))?(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,a.contactPos=o.currentPos,a.contactTime=o.currentTime,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=o.currentPos,a.currentTime=o.currentTime,o=a):(o.captured=!0,o.insideElementPressed=!0,o.insideElement=!0,oe(l,o)),l.addContact(),(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&g.MouseTracker.gesturePointVelocityTracker.addPoint(e,o),1===l.contacts?e.pressHandler&&!1===e.pressHandler({eventSource:e,pointerType:o.type,position:m(o.contactPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===o.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t):2===l.contacts&&e.pinchHandler&&"touch"===o.type&&(s.pinchGPoints=l.asArray(),s.lastPinchDist=s.currentPinchDist=s.pinchGPoints[0].currentPos.distanceTo(s.pinchGPoints[1].currentPos),s.lastPinchCenter=s.currentPinchCenter=v(s.pinchGPoints[0].currentPos,s.pinchGPoints[1].currentPos));return!0}function ue(e,t,i,n){var r,o,a,s,l,c,u=_e[e.hash],d=e.getActivePointersListByType(i[0].type),h=i.length,p=!1,f=!1;if("undefined"!=typeof t.buttons?d.buttons=t.buttons:g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?0===n?d.buttons-=1:1===n?d.buttons-=4:2===n?d.buttons-=2:3===n?d.buttons-=8:4===n?d.buttons-=16:5===n&&(d.buttons-=32):0===n?d.buttons^=-2:1===n?d.buttons^=-5:2===n?d.buttons^=-3:3===n?d.buttons^=-9:4===n?d.buttons^=-17:5===n&&(d.buttons^=-33),0!==n)return e.nonPrimaryReleaseHandler&&!1===e.nonPrimaryReleaseHandler({eventSource:e,pointerType:i[0].type,position:m(i[0].currentPos,e.element),button:n,buttons:d.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),B(e,t,e.getActivePointersListByType("mouse")),!1;for(a=0;a<h;a++)s=i[a],(l=d.getById(s.id))&&(l.captured&&(f=p=!(l.captured=!1)),l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=s.currentPos,l.currentTime=s.currentTime,l.insideElement||ae(d,l),r=l.currentPos,o=l.currentTime,f?(d.removeContact(),(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&g.MouseTracker.gesturePointVelocityTracker.removePoint(e,l),0===d.contacts?(e.releaseHandler&&!1===e.releaseHandler({eventSource:e,pointerType:l.type,position:m(r,e.element),buttons:d.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),e.dragEndHandler&&!l.currentPos.equals(l.contactPos)&&!1===e.dragEndHandler({eventSource:e,pointerType:l.type,position:m(l.currentPos,e.element),speed:l.speed,direction:l.direction,shift:t.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),(e.clickHandler||e.dblClickHandler)&&l.insideElement&&(c=o-l.contactTime<=e.clickTimeThreshold&&l.contactPos.distanceTo(r)<=e.clickDistThreshold,e.clickHandler&&!1===e.clickHandler({eventSource:e,pointerType:l.type,position:m(l.currentPos,e.element),quick:c,shift:t.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),e.dblClickHandler&&c&&(d.clicks++,1===d.clicks?(u.lastClickPos=r,u.dblClickTimeOut=setTimeout(function(){d.clicks=0},e.dblClickTimeThreshold)):2===d.clicks&&(clearTimeout(u.dblClickTimeOut),d.clicks=0,u.lastClickPos.distanceTo(r)<=e.dblClickDistThreshold&&!1===e.dblClickHandler({eventSource:e,pointerType:l.type,position:m(l.currentPos,e.element),shift:t.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),u.lastClickPos=null)))):2===d.contacts&&e.pinchHandler&&"touch"===l.type&&(u.pinchGPoints=d.asArray(),u.lastPinchDist=u.currentPinchDist=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos),u.lastPinchCenter=u.currentPinchCenter=v(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos))):e.releaseHandler&&!1===e.releaseHandler({eventSource:e,pointerType:l.type,position:m(r,e.element),buttons:d.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t));return p}function de(e,t,i){var n,r,o,a,s,l=_e[e.hash],c=e.getActivePointersListByType(i[0].type),u=i.length;for("undefined"!=typeof t.buttons&&(c.buttons=t.buttons),n=0;n<u;n++)r=i[n],(o=c.getById(r.id))?(r.hasOwnProperty("isPrimary")&&(o.isPrimary=r.isPrimary),o.lastPos=o.currentPos,o.lastTime=o.currentTime,o.currentPos=r.currentPos,o.currentTime=r.currentTime):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,oe(c,r));e.stopHandler&&"mouse"===i[0].type&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout(function(){pe(e,t,i[0].type)},e.stopDelay)),0===c.contacts?e.moveHandler&&!1===e.moveHandler({eventSource:e,pointerType:i[0].type,position:m(i[0].currentPos,e.element),buttons:c.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t):1===c.contacts?(e.moveHandler&&(o=c.asArray()[0],!1===e.moveHandler({eventSource:e,pointerType:o.type,position:m(o.currentPos,e.element),buttons:c.buttons,isTouchEvent:"touch"===o.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t)),e.dragHandler&&(s=(o=c.asArray()[0]).currentPos.minus(o.lastPos),!1===e.dragHandler({eventSource:e,pointerType:o.type,position:m(o.currentPos,e.element),buttons:c.buttons,delta:s,speed:o.speed,direction:o.direction,shift:t.shiftKey,isTouchEvent:"touch"===o.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t))):2===c.contacts&&(e.moveHandler&&(a=c.asArray(),!1===e.moveHandler({eventSource:e,pointerType:a[0].type,position:m(v(a[0].currentPos,a[1].currentPos),e.element),buttons:c.buttons,isTouchEvent:"touch"===a[0].type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t)),e.pinchHandler&&"touch"===i[0].type&&(s=l.pinchGPoints[0].currentPos.distanceTo(l.pinchGPoints[1].currentPos))!=l.currentPinchDist&&(l.lastPinchDist=l.currentPinchDist,l.currentPinchDist=s,l.lastPinchCenter=l.currentPinchCenter,l.currentPinchCenter=v(l.pinchGPoints[0].currentPos,l.pinchGPoints[1].currentPos),!1===e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:l.pinchGPoints,lastCenter:m(l.lastPinchCenter,e.element),center:m(l.currentPinchCenter,e.element),lastDistance:l.lastPinchDist,distance:l.currentPinchDist,shift:t.shiftKey,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t)))}function he(e,t,i){ue(e,t,i,0),le(e,t,i)}function pe(e,t,i){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:i,position:a(t,e.element),buttons:e.getActivePointersListByType(i).buttons,isTouchEvent:"touch"===i,originalEvent:t,preventDefaultAction:!1,userData:e.userData})}function fe(e){try{return e.addEventListener&&e.removeEventListener}catch(t){return!1}}var ge,me,ve,ye,we,e,be=[],_e={};g.MouseTracker=function(e){be.push(this);var t=arguments;g.isPlainObject(e)||(e={element:t[0],clickTimeThreshold:t[1],clickDistThreshold:t[2]}),this.hash=Math.random(),this.element=g.getElement(e.element),this.clickTimeThreshold=e.clickTimeThreshold||g.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=e.clickDistThreshold||g.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=e.dblClickTimeThreshold||g.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=e.dblClickDistThreshold||g.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=e.userData||null,this.stopDelay=e.stopDelay||50,this.enterHandler=e.enterHandler||null,this.exitHandler=e.exitHandler||null,this.pressHandler=e.pressHandler||null,this.nonPrimaryPressHandler=e.nonPrimaryPressHandler||null,this.releaseHandler=e.releaseHandler||null,this.nonPrimaryReleaseHandler=e.nonPrimaryReleaseHandler||null,this.moveHandler=e.moveHandler||null,this.scrollHandler=e.scrollHandler||null,this.clickHandler=e.clickHandler||null,this.dblClickHandler=e.dblClickHandler||null,this.dragHandler=e.dragHandler||null,this.dragEndHandler=e.dragEndHandler||null,this.pinchHandler=e.pinchHandler||null,this.stopHandler=e.stopHandler||null,this.keyDownHandler=e.keyDownHandler||null,this.keyUpHandler=e.keyUpHandler||null,this.keyHandler=e.keyHandler||null,this.focusHandler=e.focusHandler||null,this.blurHandler=e.blurHandler||null;var i=this;_e[this.hash]={click:function(e){s(i,e)},dblclick:function(e){d(i,e)},keydown:function(e){h(i,e)},keyup:function(e){p(i,e)},keypress:function(e){f(i,e)},focus:function(e){y(i,e)},blur:function(e){w(i,e)},wheel:function(e){b(i,e)},mousewheel:function(e){_(i,e)},DOMMouseScroll:function(e){_(i,e)},MozMousePixelScroll:function(e){_(i,e)},mouseenter:function(e){j(i,e)},mouseleave:function(e){C(i,e)},mouseover:function(e){T(i,e)},mouseout:function(e){S(i,e)},mousedown:function(e){R(i,e)},mouseup:function(e){L(i,e)},mouseupcaptured:function(e){I(i,e)},mousemove:function(e){M(i,e)},mousemovecaptured:function(e){D(i,e)},touchstart:function(e){$(i,e)},touchend:function(e){F(i,e)},touchendcaptured:function(e){z(i,e)},touchmove:function(e){W(i,e)},touchmovecaptured:function(e){q(i,e)},touchcancel:function(e){V(i,e)},gesturestart:function(e){Y(i,e)},gesturechange:function(e){J(i,e)},pointerover:function(e){G(i,e)},MSPointerOver:function(e){G(i,e)},pointerout:function(e){X(i,e)},MSPointerOut:function(e){X(i,e)},pointerdown:function(e){K(i,e)},MSPointerDown:function(e){K(i,e)},pointerup:function(e){Q(i,e)},MSPointerUp:function(e){Q(i,e)},pointermove:function(e){te(i,e)},MSPointerMove:function(e){te(i,e)},pointercancel:function(e){re(i,e)},MSPointerCancel:function(e){re(i,e)},pointerupcaptured:function(e){Z(i,e)},pointermovecaptured:function(e){ie(i,e)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},e.startDisabled||this.setTracking(!0)},g.MouseTracker.prototype={destroy:function(){var e;for(i(this),this.element=null,e=0;e<be.length;e++)if(be[e]===this){be.splice(e,1);break}_e[this.hash]=null,delete _e[this.hash]},isTracking:function(){return _e[this.hash].tracking},setTracking:function(e){return e?t(this):i(this),this},getActivePointersListsExceptType:function(e){for(var t=_e[this.hash],i=[],n=0;n<t.activePointersLists.length;++n)t.activePointersLists[n].type!==e&&i.push(t.activePointersLists[n]);return i},getActivePointersListByType:function(e){var t,i,n=_e[this.hash],r=n.activePointersLists.length;for(t=0;t<r;t++)if(n.activePointersLists[t].type===e)return n.activePointersLists[t];return i=new g.MouseTracker.GesturePointList(e),n.activePointersLists.push(i),i},getActivePointerCount:function(){var e,t=_e[this.hash],i=t.activePointersLists.length,n=0;for(e=0;e<i;e++)n+=t.activePointersLists[e].getLength();return n},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},g.MouseTracker.resetAllMouseTrackers=function(){for(var e=0;e<be.length;e++)be[e].isTracking()&&(be[e].setTracking(!1),be[e].setTracking(!0))},g.MouseTracker.gesturePointVelocityTracker=(ge=[],ve=me=0,ye=function(e,t){return e.hash.toString()+t.type+t.id.toString()},we=function(){var e,t,i,n,r,o,a=ge.length,s=g.now();for(n=s-ve,ve=s,e=0;e<a;e++)(i=(t=ge[e]).gPoint).direction=Math.atan2(i.currentPos.y-t.lastPos.y,i.currentPos.x-t.lastPos.x),r=t.lastPos.distanceTo(i.currentPos),t.lastPos=i.currentPos,o=1e3*r/(n+1),i.speed=.75*o+.25*i.speed},{addPoint:function(e,t){var i=ye(e,t);ge.push({guid:i,gPoint:t,lastPos:t.currentPos}),1===ge.length&&(ve=g.now(),me=window.setInterval(we,50))},removePoint:function(e,t){var i,n=ye(e,t),r=ge.length;for(i=0;i<r;i++)if(ge[i].guid===n){ge.splice(i,1),0==--r&&window.clearInterval(me);break}}}),g.MouseTracker.captureElement=document,g.MouseTracker.wheelEventName=g.Browser.vendor==g.BROWSERS.IE&&8<g.Browser.version||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",g.MouseTracker.supportsMouseCapture=(e=document.createElement("div"),g.isFunction(e.setCapture)&&g.isFunction(e.releaseCapture)),g.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",g.MouseTracker.wheelEventName],"DOMMouseScroll"==g.MouseTracker.wheelEventName&&g.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||g.Browser.vendor!==g.BROWSERS.IE)?(g.MouseTracker.havePointerEvents=!0,g.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),g.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?g.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:g.MouseTracker.maxTouchPoints=0,g.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(g.MouseTracker.havePointerEvents=!0,g.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),g.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?g.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:g.MouseTracker.maxTouchPoints=0,g.MouseTracker.haveMouseEnter=!1):(g.MouseTracker.havePointerEvents=!1,g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?(g.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),g.MouseTracker.haveMouseEnter=!0):(g.MouseTracker.subscribeEvents.push("mouseover","mouseout"),g.MouseTracker.haveMouseEnter=!1),g.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&g.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&g.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),g.MouseTracker.mousePointerId="legacy-mouse",g.MouseTracker.maxTouchPoints=10),g.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},g.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(){var e,t=this._gPoints.length;for(e=0;e<t;e++)if(this._gPoints[e].isPrimary)return this._gPoints[e];return null},addContact:function(){++this.contacts,1<this.contacts&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};var xe=function(){try{return window.self!==window.top}catch(e){return!0}}()}(OpenSeadragon),function(r){r.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},r.Control=function(e,t,i){var n=e.parentNode;"number"==typeof t&&(r.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),t={anchor:t}),t.attachToViewer="undefined"==typeof t.attachToViewer||t.attachToViewer,this.autoFade="undefined"==typeof t.autoFade||t.autoFade,this.element=e,this.anchor=t.anchor,this.container=i,this.anchor==r.ControlAnchor.ABSOLUTE?(this.wrapper=r.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof t.top?t.top+"px":t.top,this.wrapper.style.left="number"==typeof t.left?t.left+"px":t.left,this.wrapper.style.height="number"==typeof t.height?t.height+"px":t.height,this.wrapper.style.width="number"==typeof t.width?t.width+"px":t.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=r.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==r.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),t.attachToViewer?this.anchor==r.ControlAnchor.TOP_RIGHT||this.anchor==r.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):n.appendChild(this.wrapper)},r.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(e){this.wrapper.style.display=e?this.anchor==r.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(e){this.element[r.SIGNAL]&&r.Browser.vendor==r.BROWSERS.IE?r.setElementOpacity(this.element,e,!0):r.setElementOpacity(this.wrapper,e,!0)}}}(OpenSeadragon),function(r){function n(e,t){var i,n=e.controls;for(i=n.length-1;0<=i;i--)if(n[i].element==t)return i;return-1}r.ControlDock=function(e){var t,i,n=["topleft","topright","bottomright","bottomleft"];for(r.extend(!0,this,{id:"controldock-"+r.now()+"-"+Math.floor(1e6*Math.random()),container:r.makeNeutralElement("div"),controls:[]},e),this.container.onsubmit=function(){return!1},this.element&&(this.element=r.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;i<n.length;i++)t=n[i],this.controls[t]=r.makeNeutralElement("div"),this.controls[t].style.position="absolute",t.match("left")&&(this.controls[t].style.left="0px"),t.match("right")&&(this.controls[t].style.right="0px"),t.match("top")&&(this.controls[t].style.top="0px"),t.match("bottom")&&(this.controls[t].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},r.ControlDock.prototype={addControl:function(e,t){var i=null;if(!(0<=n(this,e=r.getElement(e)))){switch(t.anchor){case r.ControlAnchor.TOP_RIGHT:i=this.controls.topright,e.style.position="relative",e.style.paddingRight="0px",e.style.paddingTop="0px";break;case r.ControlAnchor.BOTTOM_RIGHT:i=this.controls.bottomright,e.style.position="relative",e.style.paddingRight="0px",e.style.paddingBottom="0px";break;case r.ControlAnchor.BOTTOM_LEFT:i=this.controls.bottomleft,e.style.position="relative",e.style.paddingLeft="0px",e.style.paddingBottom="0px";break;case r.ControlAnchor.TOP_LEFT:i=this.controls.topleft,e.style.position="relative",e.style.paddingLeft="0px",e.style.paddingTop="0px";break;case r.ControlAnchor.ABSOLUTE:i=this.container,e.style.margin="0px",e.style.padding="0px";break;default:case r.ControlAnchor.NONE:i=this.container,e.style.margin="0px",e.style.padding="0px"}this.controls.push(new r.Control(e,t,i)),e.style.display="inline-block"}},removeControl:function(e){var t=n(this,e=r.getElement(e));return 0<=t&&(this.controls[t].destroy(),this.controls.splice(t,1)),this},clearControls:function(){for(;0<this.controls.length;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;0<=e;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;0<=t;t--)this.controls[t].setVisible(e);return this}}}(OpenSeadragon),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(f){function u(e){return e=f.getElement(e),new f.Point(0===e.clientWidth?1:e.clientWidth,0===e.clientHeight?1:e.clientHeight)}function e(i,n,r,o,a){function s(e,t){e.ready?o(e):(e.addHandler("ready",function(){o(e)}),e.addHandler("open-failed",function(e){a({message:e.message,source:t})}))}var l=i;if("string"==f.type(n))if(n.match(/^\s*<.*>\s*$/))n=f.parseXml(n);else if(n.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var e=f.parseJSON(n);n=e}catch(t){}setTimeout(function(){if("string"==f.type(n))(n=new f.TileSource({url:n,crossOriginPolicy:r.crossOriginPolicy!==undefined?r.crossOriginPolicy:i.crossOriginPolicy,ajaxWithCredentials:i.ajaxWithCredentials,ajaxHeaders:i.ajaxHeaders,useCanvas:i.useCanvas,success:function(e){o(e.tileSource)}})).addHandler("open-failed",function(e){a(e)});else if(f.isPlainObject(n)||n.nodeType)if(n.crossOriginPolicy!==undefined||r.crossOriginPolicy===undefined&&i.crossOriginPolicy===undefined||(n.crossOriginPolicy=r.crossOriginPolicy!==undefined?r.crossOriginPolicy:i.crossOriginPolicy),n.ajaxWithCredentials===undefined&&(n.ajaxWithCredentials=i.ajaxWithCredentials),n.useCanvas===undefined&&(n.useCanvas=i.useCanvas),f.isFunction(n.getTileUrl)){var e=new f.TileSource(n);e.getTileUrl=n.getTileUrl,o(e)}else{var t=f.TileSource.determineType(l,n);if(!t)return void a({message:"Unable to load TileSource",source:n});s(new t(t.prototype.configure.apply(l,[n])),n)}else s(n,n)})}function d(e,t){if(t instanceof f.Overlay)return t;var i=null;if(t.element)i=f.getElement(t.element);else{var n=t.id?t.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(i=f.getElement(t.id))||((i=document.createElement("a")).href="#/overlay/"+n),i.id=n,f.addClass(i,t.className?t.className:"openseadragon-overlay")}var r=t.location,o=t.width,a=t.height;if(!r){var s=t.x,l=t.y;if(t.px!==undefined){var c=e.viewport.imageToViewportRectangle(new f.Rect(t.px,t.py,o||0,a||0));s=c.x,l=c.y,o=o!==undefined?c.width:undefined,a=a!==undefined?c.height:undefined}r=new f.Point(s,l)}var u=t.placement;return u&&"string"===f.type(u)&&(u=f.Placement[t.placement.toUpperCase()]),new f.Overlay({element:i,location:r,placement:u,onDraw:t.onDraw,checkResize:t.checkResize,width:o,height:a,rotationMode:t.rotationMode})}function a(e,t){var i;for(i=e.length-1;0<=i;i--)if(e[i].element===t)return i;return-1}function s(e,t){return f.requestAnimationFrame(function(){t(e)})}function n(e){f.requestAnimationFrame(function(){t(e)})}function h(e){e.autoHideControls&&(e.controlsShouldFade=!0,e.controlsFadeBeginTime=f.now()+e.controlsFadeDelay,window.setTimeout(function(){n(e)},e.controlsFadeDelay))}function t(e){var t,i;if(e.controlsShouldFade){for(t=1-(f.now()-e.controlsFadeBeginTime)/e.controlsFadeLength,t=Math.min(1,t),t=Math.max(0,t),i=e.controls.length-1;0<=i;i--)e.controls[i].autoFade&&e.controls[i].setOpacity(t);0<t&&n(e)}}function p(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;0<=t;t--)e.controls[t].setOpacity(1)}function g(){p(this)}function m(){h(this)}function l(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return e.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new f.Point(0,-40))),this.viewport.applyConstraints(),!1;case 40:return e.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new f.Point(0,40))),this.viewport.applyConstraints(),!1;case 37:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new f.Point(-40,0))),this.viewport.applyConstraints(),!1;case 39:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new f.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function c(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return e.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new f.Point(0,-40))),this.viewport.applyConstraints(),!1;case 115:case 83:return e.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new f.Point(0,40))),this.viewport.applyConstraints(),!1;case 97:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new f.Point(-40,0))),this.viewport.applyConstraints(),!1;case 100:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new f.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function v(e){document.activeElement==this.canvas||this.canvas.focus();var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-click",t),!t.preventDefaultAction&&this.viewport&&e.quick&&this.gestureSettingsByDeviceType(e.pointerType).clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(e.position,!0)),this.viewport.applyConstraints())}function y(e){!e.preventDefaultAction&&this.viewport&&this.gestureSettingsByDeviceType(e.pointerType).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(e.position,!0)),this.viewport.applyConstraints()),this.raiseEvent("canvas-double-click",{tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent})}function w(e){var t,i={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.raiseEvent("canvas-drag",i),!e.preventDefaultAction&&this.viewport){if(t=this.gestureSettingsByDeviceType(e.pointerType),this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.constrainDuringPan){var n=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=n.x,this.viewport.centerSpringY.target.value+=n.y;var r=this.viewport.getBounds(),o=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=n.x,this.viewport.centerSpringY.target.value-=n.y,r.x!=o.x&&(e.delta.x=0),r.y!=o.y&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function b(e){if(!e.preventDefaultAction&&this.viewport){var t=this.gestureSettingsByDeviceType(e.pointerType);if(t.flickEnabled&&e.speed>=t.flickMinSpeed){var i=0;this.panHorizontal&&(i=t.flickMomentum*e.speed*Math.cos(e.direction));var n=0;this.panVertical&&(n=t.flickMomentum*e.speed*Math.sin(e.direction));var r=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),o=this.viewport.pointFromPixel(new f.Point(r.x-i,r.y-n));this.viewport.panTo(o,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:e.eventSource,position:e.position,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent})}function _(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function x(e){window.location!=window.parent.location&&f.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function k(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function j(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function T(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function E(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function C(e){var t,i,n;if(!e.preventDefaultAction&&this.viewport&&((t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom&&(i=this.viewport.pointFromPixel(e.center,!0),n=this.viewport.pointFromPixel(e.lastCenter,!0).minus(i),this.panHorizontal||(n.x=0),this.panVertical||(n.y=0),this.viewport.zoomBy(e.distance/e.lastDistance,i,!0),this.viewport.panBy(n,!0),this.viewport.applyConstraints()),t.pinchRotate)){var r=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),o=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(r-o)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:e.eventSource,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent}),!1}function S(e){var t,i,n;if((n=f.now())-this._lastScrollTime>this.minScrollDeltaTime){if(this._lastScrollTime=n,!e.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).scrollToZoom&&(i=Math.pow(this.zoomPerScroll,e.scroll),this.viewport.zoomBy(i,this.viewport.pointFromPixel(e.position,!0)),
this.viewport.applyConstraints()),this.raiseEvent("canvas-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),t&&t.scrollToZoom)return!1}else if((t=this.gestureSettingsByDeviceType(e.pointerType))&&t.scrollToZoom)return!1}function P(e){V[this.hash].mouseInside=!0,p(this),this.raiseEvent("container-enter",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function A(e){e.pointers<1&&(V[this.hash].mouseInside=!1,V[this.hash].animating||h(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function R(e){i(e),e.isOpen()?e._updateRequestId=s(e,R):e._updateRequestId=!1}function i(e){if(!e._opening){if(e.autoResize){var t=u(e.container),i=V[e.hash].prevContainerSize;if(!t.equals(i)){var n=e.viewport;if(e.preserveImageSizeOnResize){var r=i.x/t.x,o=n.getZoom()*r,a=n.getCenter();n.resize(t,!1),n.zoomTo(o,null,!0),n.panTo(a,!0)}else{var s=n.getBounds();n.resize(t,!0),n.fitBoundsWithConstraints(s,!0)}V[e.hash].prevContainerSize=t,V[e.hash].forceRedraw=!0}}var l=e.viewport.update(),c=e.world.update()||l;l&&e.raiseEvent("viewport-change"),e.referenceStrip&&(c=e.referenceStrip.update(e.viewport)||c),!V[e.hash].animating&&c&&(e.raiseEvent("animation-start"),p(e)),(c||V[e.hash].forceRedraw||e.world.needsDraw())&&(L(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),V[e.hash].forceRedraw=!1,c&&e.raiseEvent("animation")),V[e.hash].animating&&!c&&(e.raiseEvent("animation-finish"),V[e.hash].mouseInside||h(e)),V[e.hash].animating=c}}function L(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}function I(e,t){return e?e+t:t}function O(){V[this.hash].lastZoomTime=f.now(),V[this.hash].zoomFactor=this.zoomPerSecond,V[this.hash].zooming=!0,r(this)}function M(){V[this.hash].lastZoomTime=f.now(),V[this.hash].zoomFactor=1/this.zoomPerSecond,V[this.hash].zooming=!0,r(this)}function D(){V[this.hash].zooming=!1}function r(e){f.requestAnimationFrame(f.delegate(e,o))}function o(){var e,t,i;V[this.hash].zooming&&this.viewport&&(t=(e=f.now())-V[this.hash].lastZoomTime,i=Math.pow(V[this.hash].zoomFactor,t/1e3),this.viewport.zoomBy(i),this.viewport.applyConstraints(),V[this.hash].lastZoomTime=e,r(this))}function N(){this.viewport&&(V[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function B(){this.viewport&&(V[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function $(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function F(){this.viewport&&this.viewport.goHome()}function z(){this.isFullPage()&&!f.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function H(){if(this.viewport){var e=this.viewport.getRotation();0===e?e=270:e-=90,this.viewport.setRotation(e)}}function W(){if(this.viewport){var e=this.viewport.getRotation();270===e?e=0:e+=90,this.viewport.setRotation(e)}}function q(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)}function U(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)}var V={},Y=1;f.Viewer=function(e){var t,i,n,r=arguments,o=this;if(f.isPlainObject(e)||(e={id:r[0],xmlPath:1<r.length?r[1]:undefined,prefixUrl:2<r.length?r[2]:undefined,controls:3<r.length?r[3]:undefined,overlays:4<r.length?r[4]:undefined}),e.config&&(f.extend(!0,e,e.config),delete e.config),f.extend(!0,this,{id:e.id,hash:e.hash||Y++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},f.DEFAULT_SETTINGS,e),"undefined"==typeof this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for("undefined"!=typeof V[this.hash]&&f.console.warn("Hash "+this.hash+" has already been used."),V[this.hash]={fsBoundsDelta:new f.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=f.now(),f.EventSource.call(this),this.addHandler("open-failed",function(e){var t=f.getString("Errors.OpenFailed",e.eventSource,e.message);o._showMessage(t)}),f.ControlDock.call(this,e),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=f.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(i=this.canvas.style).width="100%",i.height="100%",i.overflow="hidden",i.position="absolute",i.top="0px",i.left="0px",f.setElementTouchActionNone(this.canvas),""!==e.tabIndex&&(this.canvas.tabIndex=e.tabIndex===undefined?0:e.tabIndex),this.container.className="openseadragon-container",(n=this.container.style).width="100%",n.height="100%",n.position="relative",n.overflow="hidden",n.left="0px",n.top="0px",n.textAlign="left",this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new f.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:f.delegate(this,l),keyHandler:f.delegate(this,c),clickHandler:f.delegate(this,v),dblClickHandler:f.delegate(this,y),dragHandler:f.delegate(this,w),dragEndHandler:f.delegate(this,b),enterHandler:f.delegate(this,_),exitHandler:f.delegate(this,x),pressHandler:f.delegate(this,k),releaseHandler:f.delegate(this,j),nonPrimaryPressHandler:f.delegate(this,T),nonPrimaryReleaseHandler:f.delegate(this,E),scrollHandler:f.delegate(this,S),pinchHandler:f.delegate(this,C)}),this.outerTracker=new f.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:f.delegate(this,P),exitHandler:f.delegate(this,A)}),this.toolbar&&(this.toolbar=new f.ControlDock({element:this.toolbar})),this.bindStandardControls(),V[this.hash].prevContainerSize=u(this.container),this.world=new f.World({viewer:this}),this.world.addHandler("add-item",function(){o.source=o.world.getItemAt(0).source,V[o.hash].forceRedraw=!0,o._updateRequestId||(o._updateRequestId=s(o,R))}),this.world.addHandler("remove-item",function(){o.world.getItemCount()?o.source=o.world.getItemAt(0).source:o.source=null,V[o.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(){o.viewport&&o.viewport._setContentBounds(o.world.getHomeBounds(),o.world.getContentFactor())}),this.world.addHandler("item-index-change",function(){o.source=o.world.getItemAt(0).source}),this.viewport=new f.Viewport({containerSize:V[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new f.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:e.timeout}),this.tileCache=new f.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new f.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=f.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(t=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(t,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(t=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(t,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new f.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),t=0;t<this.customControls.length;t++)this.addControl(this.customControls[t].id,{anchor:this.customControls[t].anchor});f.requestAnimationFrame(function(){h(o)})},f.extend(f.Viewer.prototype,f.EventSource.prototype,f.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(e){return f.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(e)},openTileSource:function(e){return f.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(e)},open:function(i,e){var r=this;if(this.close(),i){if(this.sequenceMode&&f.isArray(i))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===e||isNaN(e)||(this.initialPage=e),this.tileSources=i,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),void this._updateSequenceButtons(this._sequenceIndex);if(f.isArray(i)||(i=[i]),i.length){this._opening=!0;for(var o,n=i.length,a=0,s=0,l=function(){if(a+s===n)if(a){!r._firstOpen&&r.preserveViewport||(r.viewport.goHome(!0),r.viewport.update()),r._firstOpen=!1;var e=i[0];if(e.tileSource&&(e=e.tileSource),r.overlays&&!r.preserveOverlays)for(var t=0;t<r.overlays.length;t++)r.currentOverlays[t]=d(r,r.overlays[t]);r._drawOverlays(),r._opening=!1,r.raiseEvent("open",{source:e})}else r._opening=!1,r.raiseEvent("open-failed",o)},t=function(i){f.isPlainObject(i)&&i.tileSource||(i={tileSource:i}),i.index!==undefined&&(f.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete i.index),i.collectionImmediately===undefined&&(i.collectionImmediately=!0);var n=i.success;i.success=function(e){if(a++,i.tileSource.overlays)for(var t=0;t<i.tileSource.overlays.length;t++)r.addOverlay(i.tileSource.overlays[t]);n&&n(e),l()};var t=i.error;i.error=function(e){s++,o||(o=e),t&&t(e),l()},r.addTiledImage(i)},c=0;c<i.length;c++)t(i[c]);return this}}},close:function(){return V[this.hash]&&(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),V[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close")),this},destroy:function(){if(V[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(f.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),V[this.hash]=null,delete V[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisibile();return t},setControlsEnabled:function(e){return e?p(this):h(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},isFullPage:function(){return V[this.hash].fullPage},setFullPage:function(e){var t,i,n=document.body,r=n.style,o=document.documentElement.style,a=this;if(e==this.isFullPage())return this;var s={fullPage:e,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",s),s.preventDefaultAction)return this;if(e){for(this.elementSize=f.getElementSize(this.element),this.pageScroll=f.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=r.margin,this.docMargin=o.margin,r.margin="0",o.margin="0",this.bodyPadding=r.padding,this.docPadding=o.padding,r.padding="0",o.padding="0",this.bodyWidth=r.width,this.docWidth=o.width,r.width="100%",o.width="100%",this.bodyHeight=r.height,this.docHeight=o.height,r.height="100%",o.height="100%",this.previousBody=[],V[this.hash].prevElementParent=this.element.parentNode,V[this.hash].prevNextSibling=this.element.nextSibling,V[this.hash].prevElementWidth=this.element.style.width,V[this.hash].prevElementHeight=this.element.style.height,t=n.childNodes.length,i=0;i<t;i++)this.previousBody.push(n.childNodes[0]),n.removeChild(n.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,n.appendChild(this.toolbar.element),f.addClass(this.toolbar.element,"fullpage")),f.addClass(this.element,"fullpage"),n.appendChild(this.element),this.element.style.height=f.getWindowSize().y+"px",this.element.style.width=f.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=f.getElementSize(this.element).y-f.getElementSize(this.toolbar.element).y+"px"),V[this.hash].fullPage=!0,f.delegate(this,P)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,r.margin=this.bodyMargin,o.margin=this.docMargin,r.padding=this.bodyPadding,o.padding=this.docPadding,r.width=this.bodyWidth,o.width=this.docWidth,r.height=this.bodyHeight,o.height=this.docHeight,n.removeChild(this.element),t=this.previousBody.length,i=0;i<t;i++)n.appendChild(this.previousBody.shift());f.removeClass(this.element,"fullpage"),V[this.hash].prevElementParent.insertBefore(this.element,V[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(n.removeChild(this.toolbar.element),f.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=V[this.hash].prevElementWidth,this.element.style.height=V[this.hash].prevElementHeight;var l=0,c=function(){f.setPageScroll(a.pageScroll);var e=f.getPageScroll();++l<10&&(e.x!==a.pageScroll.x||e.y!==a.pageScroll.y)&&f.requestAnimationFrame(c)};f.requestAnimationFrame(c),V[this.hash].fullPage=!1,f.delegate(this,A)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:e}),this},setFullScreen:function(e){var t=this;if(!f.supportsFullScreen)return this.setFullPage(e);if(f.isFullScreen()===e)return this;var i={fullScreen:e,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",i),i.preventDefaultAction)return this;if(e){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var n=function(){var e=f.isFullScreen();e||(f.removeEvent(document,f.fullScreenEventName,n),f.removeEvent(document,f.fullScreenErrorEventName,n),t.setFullPage(!1),t.isFullPage()&&(t.element.style.width=t.fullPageStyleWidth,t.element.style.height=t.fullPageStyleHeight)),t.navigator&&t.viewport&&t.navigator.update(t.viewport),t.raiseEvent("full-screen",{fullScreen:e})};f.addEvent(document,f.fullScreenEventName,n),f.addEvent(document,f.fullScreenErrorEventName,n),f.requestFullScreen(document.body)}else f.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(i){function t(e){for(var t=0;t<o._loadQueue.length;t++)if(o._loadQueue[t]===a){o._loadQueue.splice(t,1);break}0===o._loadQueue.length&&r(a),o.raiseEvent("add-item-failed",e),i.error&&i.error(e)}function r(e){o.collectionMode&&(o.world.arrange({immediately:e.options.collectionImmediately,rows:o.collectionRows,columns:o.collectionColumns,layout:o.collectionLayout,tileSize:o.collectionTileSize,tileMargin:o.collectionTileMargin}),o.world.setAutoRefigureSizes(!0))}function n(){for(var e,t,i;o._loadQueue.length&&(e=o._loadQueue[0]).tileSource;){if(o._loadQueue.splice(0,1),e.options.replace){var n=o.world.getIndexOfItem(e.options.replaceItem);-1!=n&&(e.options.index=n),o.world.removeItem(e.options.replaceItem)}t=new f.TiledImage({viewer:o,source:e.tileSource,viewport:o.viewport,drawer:o.drawer,tileCache:o.tileCache,imageLoader:o.imageLoader,x:e.options.x,y:e.options.y,width:e.options.width,height:e.options.height,fitBounds:e.options.fitBounds,fitBoundsPlacement:e.options.fitBoundsPlacement,clip:e.options.clip,placeholderFillStyle:e.options.placeholderFillStyle,opacity:e.options.opacity,preload:e.options.preload,degrees:e.options.degrees,compositeOperation:e.options.compositeOperation,springStiffness:o.springStiffness,animationTime:o.animationTime,minZoomImageRatio:o.minZoomImageRatio,wrapHorizontal:o.wrapHorizontal,wrapVertical:o.wrapVertical,immediateRender:o.immediateRender,blendTime:o.blendTime,alwaysBlend:o.alwaysBlend,minPixelRatio:o.minPixelRatio,smoothTileEdgesMinZoom:o.smoothTileEdgesMinZoom,iOSDevice:o.iOSDevice,crossOriginPolicy:e.options.crossOriginPolicy,ajaxWithCredentials:e.options.ajaxWithCredentials,loadTilesWithAjax:e.options.loadTilesWithAjax,ajaxHeaders:e.options.ajaxHeaders,debugMode:o.debugMode}),o.collectionMode&&o.world.setAutoRefigureSizes(!1),o.world.addItem(t,{index:e.options.index}),0===o._loadQueue.length&&r(e),1!==o.world.getItemCount()||o.preserveViewport||o.viewport.goHome(!0),o.navigator&&(i=f.extend({},e.options,{replace:!1,originalTiledImage:t,tileSource:e.tileSource}),o.navigator.addTiledImage(i)),e.options.success&&e.options.success({item:t})}}f.console.assert(i,"[Viewer.addTiledImage] options is required"),f.console.assert(i.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),f.console.assert(!i.replace||-1<i.index&&i.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var o=this;i.replace&&(i.replaceItem=o.world.getItemAt(i.index)),this._hideMessage(),i.placeholderFillStyle===undefined&&(i.placeholderFillStyle=this.placeholderFillStyle),i.opacity===undefined&&(i.opacity=this.opacity),i.preload===undefined&&(i.preload=this.preload),i.compositeOperation===undefined&&(i.compositeOperation=this.compositeOperation),i.crossOriginPolicy===undefined&&(i.crossOriginPolicy=i.tileSource.crossOriginPolicy!==undefined?i.tileSource.crossOriginPolicy:this.crossOriginPolicy),i.ajaxWithCredentials===undefined&&(i.ajaxWithCredentials=this.ajaxWithCredentials),i.loadTilesWithAjax===undefined&&(i.loadTilesWithAjax=this.loadTilesWithAjax),i.ajaxHeaders===undefined||null===i.ajaxHeaders?i.ajaxHeaders=this.ajaxHeaders:f.isPlainObject(i.ajaxHeaders)&&f.isPlainObject(this.ajaxHeaders)&&(i.ajaxHeaders=f.extend({},this.ajaxHeaders,i.ajaxHeaders));var a={options:i};f.isArray(i.tileSource)?setTimeout(function(){t({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:i.tileSource,options:i})}):(this._loadQueue.push(a),e(this,i.tileSource,i,function(e){a.tileSource=e,n()},function(e){e.options=i,t(e),n()}))},addSimpleImage:function(e){f.console.assert(e,"[Viewer.addSimpleImage] options is required"),f.console.assert(e.url,"[Viewer.addSimpleImage] options.url is required");var t=f.extend({},e,{tileSource:{type:"image",url:e.url}});delete t.url,this.addTiledImage(t)},addLayer:function(t){var i=this;f.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var e=f.extend({},t,{success:function(e){i.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){i.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(e),this},getLayerAtLevel:function(e){return f.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(e)},getLevelOfLayer:function(e){return f.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(e)},getLayersCount:function(){return f.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(e,t){return f.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(e,t)},removeLayer:function(e){return f.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(e)},forceRedraw:function(){return V[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var e=f.delegate(this,g),t=f.delegate(this,m),i=f.delegate(this,U),n=f.delegate(this,q),r=this.navImages,o=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(o=!1),this.previousButton=new f.Button({element:this.previousButton?f.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:f.getString("Tooltips.PreviousPage"),srcRest:I(this.prefixUrl,r.previous.REST),srcGroup:I(this.prefixUrl,r.previous.GROUP),srcHover:I(this.prefixUrl,r.previous.HOVER),srcDown:I(this.prefixUrl,r.previous.DOWN),onRelease:n,onFocus:e,onBlur:t}),this.nextButton=new f.Button({element:this.nextButton?f.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:f.getString("Tooltips.NextPage"),srcRest:I(this.prefixUrl,r.next.REST),srcGroup:I(this.prefixUrl,r.next.GROUP),srcHover:I(this.prefixUrl,r.next.HOVER),srcDown:I(this.prefixUrl,r.next.DOWN),onRelease:i,onFocus:e,onBlur:t}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),o&&(this.paging=new f.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:f.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||f.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var e=f.delegate(this,O),t=f.delegate(this,D),i=f.delegate(this,N),n=f.delegate(this,M),r=f.delegate(this,B),o=f.delegate(this,F),a=f.delegate(this,z),s=f.delegate(this,H),l=f.delegate(this,W),c=f.delegate(this,g),u=f.delegate(this,m),d=this.navImages,h=[],p=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton)&&(p=!1),this.showZoomControl&&(h.push(this.zoomInButton=new f.Button({element:this.zoomInButton?f.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:f.getString("Tooltips.ZoomIn"),srcRest:I(this.prefixUrl,d.zoomIn.REST),srcGroup:I(this.prefixUrl,d.zoomIn.GROUP),srcHover:I(this.prefixUrl,d.zoomIn.HOVER),srcDown:I(this.prefixUrl,d.zoomIn.DOWN),onPress:e,onRelease:t,onClick:i,onEnter:e,onExit:t,onFocus:c,onBlur:u})),h.push(this.zoomOutButton=new f.Button({element:this.zoomOutButton?f.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:f.getString("Tooltips.ZoomOut"),srcRest:I(this.prefixUrl,d.zoomOut.REST),srcGroup:I(this.prefixUrl,d.zoomOut.GROUP),srcHover:I(this.prefixUrl,d.zoomOut.HOVER),srcDown:I(this.prefixUrl,d.zoomOut.DOWN),onPress:n,onRelease:t,onClick:r,onEnter:n,onExit:t,onFocus:c,onBlur:u}))),this.showHomeControl&&h.push(this.homeButton=new f.Button({element:this.homeButton?f.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:f.getString("Tooltips.Home"),srcRest:I(this.prefixUrl,d.home.REST),srcGroup:I(this.prefixUrl,d.home.GROUP),srcHover:I(this.prefixUrl,d.home.HOVER),srcDown:I(this.prefixUrl,d.home.DOWN),onRelease:o,onFocus:c,onBlur:u})),this.showFullPageControl&&h.push(this.fullPageButton=new f.Button({element:this.fullPageButton?f.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:f.getString("Tooltips.FullPage"),srcRest:I(this.prefixUrl,d.fullpage.REST),srcGroup:I(this.prefixUrl,d.fullpage.GROUP),srcHover:I(this.prefixUrl,d.fullpage.HOVER),srcDown:I(this.prefixUrl,d.fullpage.DOWN),onRelease:a,onFocus:c,onBlur:u})),this.showRotationControl&&(h.push(this.rotateLeftButton=new f.Button({element:this.rotateLeftButton?f.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:f.getString("Tooltips.RotateLeft"),srcRest:I(this.prefixUrl,d.rotateleft.REST),srcGroup:I(this.prefixUrl,d.rotateleft.GROUP),srcHover:I(this.prefixUrl,d.rotateleft.HOVER),srcDown:I(this.prefixUrl,d.rotateleft.DOWN),onRelease:s,onFocus:c,onBlur:u})),h.push(this.rotateRightButton=new f.Button({element:this.rotateRightButton?f.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:f.getString("Tooltips.RotateRight"),srcRest:I(this.prefixUrl,d.rotateright.REST),srcGroup:I(this.prefixUrl,d.rotateright.GROUP),srcHover:I(this.prefixUrl,d.rotateright.HOVER),srcDown:I(this.prefixUrl,d.rotateright.DOWN),onRelease:l,onFocus:c,onBlur:u}))),p&&(this.buttons=new f.ButtonGroup({buttons:h,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",f.delegate(this,$)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||f.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||f.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&0<=e&&e<this.tileSources.length&&(this.raiseEvent("page",{page:e}),this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e)),this},addOverlay:function(e,t,i,n){var r;if(r=f.isPlainObject(e)?e:{element:e,location:t,placement:i,onDraw:n},e=f.getElement(r.element),0<=a(this.currentOverlays,e))return this;var o=d(this,r);return this.currentOverlays.push(o),o.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:e,location:r.location,placement:r.placement}),this},updateOverlay:function(e,t,i){var n;return e=f.getElement(e),0<=(n=a(this.currentOverlays,e))&&(this.currentOverlays[n].update(t,i),V[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:e,location:t,placement:i})),this},removeOverlay:function(e){var t;return e=f.getElement(e),0<=(t=a(this.currentOverlays,e))&&(this.currentOverlays[t].destroy(),this.currentOverlays.splice(t,1),V[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:e})),this},clearOverlays:function(){for(;0<this.currentOverlays.length;)this.currentOverlays.pop().destroy();return V[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(e){var t;return e=f.getElement(e),0<=(t=a(this.currentOverlays,e))?this.currentOverlays[t]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(0<e?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(e){this._hideMessage();var t=f.makeNeutralElement("div");t.appendChild(document.createTextNode(e)),this.messageDiv=f.makeCenteredNode(t),f.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&1<this.tileSources.length&&(this.referenceStrip=new f.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else f.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}})}(OpenSeadragon),function(u){function d(e){e.quick&&this.viewer.viewport&&(this.viewer.viewport.panTo(this.viewport.pointFromPixel(e.position)),this.viewer.viewport.applyConstraints())}function h(e){this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function p(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function f(e){return this.viewer.raiseEvent("navigator-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),!1}function g(e,t){e.style.webkitTransform="rotate("+t+"deg)",e.style.mozTransform="rotate("+t+"deg)",e.style.msTransform="rotate("+t+"deg)",e.style.oTransform="rotate("+t+"deg)",e.style.transform="rotate("+t+"deg)"}u.Navigator=function(e){function t(e){g(c.displayRegionContainer,e),g(c.displayRegion,-e),c.viewport.setRotation(e)}var i,n,r,o,a,s,l=e.viewer,c=this;(e.id?(this.element=document.getElementById(e.id),e.controlOptions={anchor:u.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(e.id="navigator-"+u.now(),this.element=u.makeNeutralElement("div"),e.controlOptions={anchor:u.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:e.autoFade},e.position&&(
"BOTTOM_RIGHT"==e.position?e.controlOptions.anchor=u.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==e.position?e.controlOptions.anchor=u.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==e.position?e.controlOptions.anchor=u.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==e.position?e.controlOptions.anchor=u.ControlAnchor.TOP_LEFT:"ABSOLUTE"==e.position&&(e.controlOptions.anchor=u.ControlAnchor.ABSOLUTE,e.controlOptions.top=e.top,e.controlOptions.left=e.left,e.controlOptions.height=e.height,e.controlOptions.width=e.width))),this.element.id=e.id,this.element.className+=" navigator",(e=u.extend(!0,{sizeRatio:u.DEFAULT_SETTINGS.navigatorSizeRatio},e,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:e.autoResize,minZoomImageRatio:1})).minPixelRatio=this.minPixelRatio=l.minPixelRatio,u.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new u.Point(1,1),this.totalBorderWidths=new u.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),e.controlOptions.anchor!=u.ControlAnchor.NONE&&(r=this.element.style,o=this.borderWidth,r.margin="0px",r.border=o+"px solid #555",r.padding="0px",r.background="#000",r.opacity=.8,r.overflow="hidden"),this.displayRegion=u.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",a=this.displayRegion.style,s=this.borderWidth,a.position="relative",a.top="0px",a.left="0px",a.fontSize="0px",a.overflow="hidden",a.border=s+"px solid #900",a.margin="0px",a.padding="0px",a.background="transparent",a["float"]="left",a.cssFloat="left",a.styleFloat="left",a.zIndex=999999999,a.cursor="default",this.displayRegionContainer=u.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",l.addControl(this.element,e.controlOptions),this._resizeWithViewer=e.controlOptions.anchor!=u.ControlAnchor.ABSOLUTE&&e.controlOptions.anchor!=u.ControlAnchor.NONE,this._resizeWithViewer&&(e.width&&e.height?(this.element.style.height="number"==typeof e.height?e.height+"px":e.height,this.element.style.width="number"==typeof e.width?e.width+"px":e.width):(i=u.getElementSize(l.element),this.element.style.height=Math.round(i.y*e.sizeRatio)+"px",this.element.style.width=Math.round(i.x*e.sizeRatio)+"px",this.oldViewerSize=i),n=u.getElementSize(this.element),this.elementArea=n.x*n.y),this.oldContainerSize=new u.Point(0,0),u.Viewer.apply(this,[e]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),e.navigatorRotate)&&(t(e.viewer.viewport?e.viewer.viewport.getRotation():e.viewer.degrees||0),e.viewer.addHandler("rotate",function(e){t(e.degrees)}));this.innerTracker.destroy(),this.innerTracker=new u.MouseTracker({element:this.element,dragHandler:u.delegate(this,h),clickHandler:u.delegate(this,d),releaseHandler:u.delegate(this,p),scrollHandler:u.delegate(this,f)}),this.addHandler("reset-size",function(){c.viewport&&c.viewport.goHome(!0)}),l.world.addHandler("item-index-change",function(t){window.setTimeout(function(){var e=c.world.getItemAt(t.previousIndex);c.world.setItemIndex(e,t.newIndex)},1)}),l.world.addHandler("remove-item",function(e){var t=e.item,i=c._getMatchingItem(t);i&&c.world.removeItem(i)}),this.update(l.viewport)},u.extend(u.Navigator.prototype,u.EventSource.prototype,u.Viewer.prototype,{updateSize:function(){if(this.viewport){var e=new u.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);e.equals(this.oldContainerSize)||(this.viewport.resize(e,!0),this.viewport.goHome(!0),this.oldContainerSize=e,this.drawer.clear(),this.world.draw())}},update:function(e){var t,i,n,r,o,a;if(t=u.getElementSize(this.viewer.element),this._resizeWithViewer&&t.x&&t.y&&!t.equals(this.oldViewerSize)&&(this.oldViewerSize=t,this.maintainSizeRatio||!this.elementArea?(i=t.x*this.sizeRatio,n=t.y*this.sizeRatio):(i=Math.sqrt(this.elementArea*(t.x/t.y)),n=this.elementArea/i),this.element.style.width=Math.round(i)+"px",this.element.style.height=Math.round(n)+"px",this.elementArea||(this.elementArea=i*n),this.updateSize()),e&&this.viewport){r=e.getBoundsNoRotate(!0),o=this.viewport.pixelFromPointNoRotate(r.getTopLeft(),!1),a=this.viewport.pixelFromPointNoRotate(r.getBottomRight(),!1).minus(this.totalBorderWidths);var s=this.displayRegion.style;s.display=this.world.getItemCount()?"block":"none",s.top=Math.round(o.y)+"px",s.left=Math.round(o.x)+"px";var l=Math.abs(o.x-a.x),c=Math.abs(o.y-a.y);s.width=Math.round(Math.max(l,0))+"px",s.height=Math.round(Math.max(c,0))+"px"}},addTiledImage:function(e){var o=this,a=e.originalTiledImage;delete e.original;var t=u.extend({},e,{success:function(e){function t(){o._matchBounds(r,a)}function i(){o._matchOpacity(r,a)}function n(){o._matchCompositeOperation(r,a)}var r=e.item;r._originalForNavigator=a,o._matchBounds(r,a,!0),a.addHandler("bounds-change",t),a.addHandler("clip-change",t),a.addHandler("opacity-change",i),a.addHandler("composite-operation-change",n)}});return u.Viewer.prototype.addTiledImage.apply(this,[t])},_getMatchingItem:function(e){for(var t,i=this.world.getItemCount(),n=0;n<i;n++)if((t=this.world.getItemAt(n))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,i){var n=t.getBoundsNoRotate();e.setPosition(n.getTopLeft(),i),e.setWidth(n.width,i),e.setRotation(t.getRotation(),i),e.setClip(t.getClip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(OpenSeadragon),function(a){var s={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right"}};a.extend(a,{getString:function(e){var t,i=e.split("."),n=null,r=arguments,o=s;for(t=0;t<i.length-1;t++)o=o[i[t]]||{};return"string"!=typeof(n=o[i[t]])&&(a.console.log("Untranslated source string:",e),n=""),n.replace(/\{\d+\}/g,function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<r.length?r[t]:""})},setString:function(e,t){var i,n=e.split("."),r=s;for(i=0;i<n.length-1;i++)r[n[i]]||(r[n[i]]={}),r=r[n[i]];r[n[i]]=t}})}(OpenSeadragon),function(s){s.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},s.Point.prototype={clone:function(){return new s.Point(this.x,this.y)},plus:function(e){return new s.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new s.Point(this.x-e.x,this.y-e.y)},times:function(e){return new s.Point(this.x*e,this.y*e)},divide:function(e){return new s.Point(this.x/e,this.y/e)},negate:function(){return new s.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(e){return new s.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof s.Point&&this.x===e.x&&this.y===e.y},rotate:function(e,t){var i,n;if(t=t||new s.Point(0,0),e%90==0){switch(s.positiveModulo(e,360)){case 0:i=1,n=0;break;case 90:i=0,n=1;break;case 180:i=-1,n=0;break;case 270:i=0,n=-1}}else{var r=e*Math.PI/180;i=Math.cos(r),n=Math.sin(r)}var o=i*(this.x-t.x)-n*(this.y-t.y)+t.x,a=n*(this.x-t.x)+i*(this.y-t.y)+t.y;return new s.Point(o,a)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(d){function c(e){var t,i,n=e.responseText,r=e.status;if(!e)throw new Error(d.getString("Errors.Security"));if(200!==e.status&&0!==e.status)throw t=404==(r=e.status)?"Not Found":e.statusText,new Error(d.getString("Errors.Status",r,t));if(n.match(/\s*<.*/))try{i=e.responseXML&&e.responseXML.documentElement?e.responseXML:d.parseXml(n)}catch(o){i=e.responseText}else if(n.match(/\s*[\{\[].*/))try{i=d.parseJSON(n)}catch(o){i=n}else i=n;return i}d.TileSource=function(e,t,i,n,r,o){var a,s,l=this,c=arguments;if(a=d.isPlainObject(e)?e:{width:c[0],height:c[1],tileSize:c[2],tileOverlap:c[3],minLevel:c[4],maxLevel:c[5]},d.EventSource.call(this),d.extend(!0,this,a),!this.success)for(s=0;s<arguments.length;s++)if(d.isFunction(arguments[s])){this.success=arguments[s];break}this.success&&this.addHandler("ready",function(e){l.success(e)}),"string"==d.type(e)&&(this.url=e),this.url?(this.aspectRatio=1,this.dimensions=new d.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new d.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=undefined!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&d.isFunction(this.success)&&this.success(this))},d.TileSource.prototype={getTileSize:function(){return d.console.error("[TileSource.getTileSize] is deprecated.Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},getLevelScale:function(e){var t,i={};for(t=0;t<=this.maxLevel;t++)i[t]=1/Math.pow(2,this.maxLevel-t);return this.getLevelScale=function(e){return i[e]},this.getLevelScale(e)},getNumTiles:function(e){var t=this.getLevelScale(e),i=Math.ceil(t*this.dimensions.x/this.getTileWidth(e)),n=Math.ceil(t*this.dimensions.y/this.getTileHeight(e));return new d.Point(i,n)},getPixelRatio:function(e){var t=this.dimensions.times(this.getLevelScale(e)),i=1/t.x,n=1/t.y;return new d.Point(i,n)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!(1<(t=this.getNumTiles(e)).x||1<t.y);e++);return e-1},getTileAtPoint:function(e,t){var i=0<=t.x&&t.x<=1&&0<=t.y&&t.y<=1/this.aspectRatio;d.console.assert(i,"[TileSource.getTileAtPoint] must be called with a valid point.");var n=this.dimensions.x*this.getLevelScale(e),r=t.x*n,o=t.y*n,a=Math.floor(r/this.getTileWidth(e)),s=Math.floor(o/this.getTileHeight(e));return 1<=t.x&&(a=this.getNumTiles(e).x-1),t.y>=1/this.aspectRatio&&(s=this.getNumTiles(e).y-1),new d.Point(a,s)},getTileBounds:function(e,t,i){var n=this.dimensions.times(this.getLevelScale(e)),r=this.getTileWidth(e),o=this.getTileHeight(e),a=0===t?0:r*t-this.tileOverlap,s=0===i?0:o*i-this.tileOverlap,l=r+(0===t?1:2)*this.tileOverlap,c=o+(0===i?1:2)*this.tileOverlap,u=1/n.x;return l=Math.min(l,n.x-a),c=Math.min(c,n.y-s),new d.Rect(a*u,s*u,l*u,c*u)},getImageInfo:function(r){var e,i,n,o,t,a,s,l=this;r&&-1<(s=(a=(t=r.split("/"))[t.length-1]).lastIndexOf("."))&&(t[t.length-1]=a.slice(0,s)),i=function(e){"string"==typeof e&&(e=d.parseXml(e));var t=d.TileSource.determineType(l,e,r);t?((o=t.prototype.configure.apply(l,[e,r])).ajaxWithCredentials===undefined&&(o.ajaxWithCredentials=l.ajaxWithCredentials),n=new t(o),l.ready=!0,l.raiseEvent("ready",{tileSource:n})):l.raiseEvent("open-failed",{message:"Unable to load TileSource",source:r})},r.match(/\.js$/)?(e=r.split("/").pop().replace(".js",""),d.jsonp({url:r,async:!1,callbackName:e,callback:i})):d.makeAjaxRequest({url:r,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(e){var t=c(e);i(t)},error:function(e,t){var i;try{i="HTTP "+e.status+" attempting to load TileSource"}catch(n){i=(void 0!==t&&t.toString?t.toString():"Unknown error")+" attempting to load TileSource"}l.raiseEvent("open-failed",{message:i,source:r})}})},supports:function(){return!1},configure:function(){throw new Error("Method not implemented.")},getTileUrl:function(){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(){return{}},tileExists:function(e,t,i){var n=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&0<=t&&0<=i&&t<n.x&&i<n.y}},d.extend(!0,d.TileSource.prototype,d.EventSource.prototype),d.TileSource.determineType=function(e,t,i){var n;for(n in OpenSeadragon)if(n.match(/.+TileSource$/)&&d.isFunction(OpenSeadragon[n])&&d.isFunction(OpenSeadragon[n].prototype.supports)&&OpenSeadragon[n].prototype.supports.call(e,t,i))return OpenSeadragon[n];d.console.error("No TileSource was able to open %s %s",i,t)}}(OpenSeadragon),function(f){function n(e,t){if(!t||!t.documentElement)throw new Error(f.getString("Errors.Xml"));var i,n,r,o,a,s=t.documentElement,l=s.localName||s.tagName,c=t.documentElement.namespaceURI,u=null,d=[];if("Image"==l)try{if((o=s.getElementsByTagName("Size")[0])===undefined&&(o=s.getElementsByTagNameNS(c,"Size")[0]),u={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:s.getAttribute("Url"),Format:s.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(s.getAttribute("Overlap"),10),TileSize:parseInt(s.getAttribute("TileSize"),10),Size:{Height:parseInt(o.getAttribute("Height"),10),Width:parseInt(o.getAttribute("Width"),10)}}},!f.imageFormatSupported(u.Image.Format))throw new Error(f.getString("Errors.ImageFormat",u.Image.Format.toUpperCase()));for((i=s.getElementsByTagName("DisplayRect"))===undefined&&(i=s.getElementsByTagNameNS(c,"DisplayRect")[0]),a=0;a<i.length;a++)(r=(n=i[a]).getElementsByTagName("Rect")[0])===undefined&&(r=n.getElementsByTagNameNS(c,"Rect")[0]),d.push({Rect:{X:parseInt(r.getAttribute("X"),10),Y:parseInt(r.getAttribute("Y"),10),Width:parseInt(r.getAttribute("Width"),10),Height:parseInt(r.getAttribute("Height"),10),MinLevel:parseInt(n.getAttribute("MinLevel"),10),MaxLevel:parseInt(n.getAttribute("MaxLevel"),10)}});return d.length&&(u.Image.DisplayRect=d),g(e,u)}catch(p){throw p instanceof Error?p:new Error(f.getString("Errors.Dzi"))}else{if("Collection"==l)throw new Error(f.getString("Errors.Dzc"));if("Error"==l){var h=s.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(h)}}throw new Error(f.getString("Errors.Dzi"))}function g(e,t){var i,n,r=t.Image,o=r.Url,a=r.Format,s=r.Size,l=r.DisplayRect||[],c=parseInt(s.Width,10),u=parseInt(s.Height,10),d=parseInt(r.TileSize,10),h=parseInt(r.Overlap,10),p=[];for(n=0;n<l.length;n++)i=l[n].Rect,p.push(new f.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return f.extend(!0,{width:c,height:u,tileSize:d,tileOverlap:h,minLevel:null,maxLevel:null,tilesUrl:o,fileFormat:a,displayRects:p},t)}f.DziTileSource=function(e,t,i,n,r,o,a,s,l){var c,u,d,h;if(h=f.isPlainObject(e)?e:{width:e,height:t,tileSize:i,tileOverlap:n,tilesUrl:r,fileFormat:o,displayRects:a,minLevel:s,maxLevel:l},this._levelRects={},this.tilesUrl=h.tilesUrl,this.fileFormat=h.fileFormat,this.displayRects=h.displayRects,this.displayRects)for(c=this.displayRects.length-1;0<=c;c--)for(d=(u=this.displayRects[c]).minLevel;d<=u.maxLevel;d++)this._levelRects[d]||(this._levelRects[d]=[]),this._levelRects[d].push(u);f.TileSource.apply(this,[h])},f.extend(f.DziTileSource.prototype,f.TileSource.prototype,{supports:function(e){var t;return e.Image?t=e.Image.xmlns:e.documentElement&&("Image"!=e.documentElement.localName&&"Image"!=e.documentElement.tagName||(t=e.documentElement.namespaceURI)),-1!==(t=(t||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==t.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(e,t){var i;return i=f.isPlainObject(e)?g(this,e):n(this,e),t&&!i.tilesUrl&&(i.tilesUrl=t.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=t.search(/\.(dzi|xml|js)\?/)?i.queryParams=t.match(/\?.*/):i.queryParams=""),i},getTileUrl:function(e,t,i){return[this.tilesUrl,e,"/",t,"_",i,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,i){var n,r,o,a,s,l,c,u=this._levelRects[e];if(!u||!u.length)return!0;for(c=u.length-1;0<=c;c--)if(!(e<(n=u[c]).minLevel||e>n.maxLevel)&&(r=this.getLevelScale(e),o=n.x*r,a=n.y*r,s=o+n.width*r,l=a+n.height*r,o=Math.floor(o/this._tileWidth),a=Math.floor(a/this._tileWidth),s=Math.ceil(s/this._tileWidth),l=Math.ceil(l/this._tileWidth),o<=t&&t<s&&a<=i&&i<l))return!0;return!1}})}(OpenSeadragon),function(l){function c(e){return!(-1!=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json"].indexOf(e[0]))||-1!=e.indexOf("sizeByW")}function u(e){for(var t=[],i=0;i<e.sizes.length;i++)t.push({url:e["@id"]+"/full/"+e.sizes[i].width+",/0/default.jpg",width:e.sizes[i].width,height:e.sizes[i].height});return t.sort(function(e,t){return e.width-t.width})}function n(e){if(!e||!e.documentElement)throw new Error(l.getString("Errors.Xml"));var t=e.documentElement,i=null;if("info"==t.tagName)try{return o(t,i={}),i}catch(n){throw n instanceof Error?n:new Error(l.getString("Errors.IIIF"))}throw new Error(l.getString("Errors.IIIF"))}function o(e,t,i){var n,r;if(3==e.nodeType&&i)(r=e.nodeValue.trim()).match(/^\d*$/)&&(r=Number(r)),t[i]?(l.isArray(t[i])||(t[i]=[t[i]]),t[i].push(r)):t[i]=r;else if(1==e.nodeType)for(n=0;n<e.childNodes.length;n++)o(e.childNodes[n],t,e.nodeName)}l.IIIFTileSource=function(e){if(l.extend(!0,this,e),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(e.tileSizePerScaleFactor={},this.tile_width&&this.tile_height)e.tileWidth=this.tile_width,e.tileHeight=this.tile_height;else if(this.tile_width)e.tileSize=this.tile_width;else if(this.tile_height)e.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)e.tileWidth=this.tiles[0].width,e.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var t=0;t<this.tiles.length;t++)for(var i=0;i<this.tiles[t].scaleFactors.length;i++){var n=this.tiles[t].scaleFactors[i];this.scale_factors.push(n),e.tileSizePerScaleFactor[n]={width:this.tiles[t].width,height:this.tiles[t].height||this.tiles[t].width}}}else if(c(e.profile)){for(var r=Math.min(this.height,this.width),o=[256,512,1024],a=[],s=0;s<o.length;s++)o[s]<=r&&a.push(o[s]);0<a.length?e.tileSize=Math.max.apply(null,a):e.tileSize=r}else this.sizes&&0<this.sizes.length?(this.emulateLegacyImagePyramid=!0,e.levels=u(this),l.extend(!0,e,{width:e.levels[e.levels.length-1].width,height:e.levels[e.levels.length-1].height,tileSize:Math.max(e.height,e.width),tileOverlap:0,minLevel:0,maxLevel:e.levels.length-1}),this.levels=e.levels):l.console.error("Nothing in the info.json to construct image pyramids from");e.maxLevel||this.emulateLegacyImagePyramid||(this.scale_factors?e.maxLevel=Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),.5)):e.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)))),l.TileSource.apply(this,[e])},l.extend(l.IIIFTileSource.prototype,l.TileSource.prototype,{supports:function(e){return!(!e.protocol||"http://iiif.io/api/image"!=e.protocol)||(!(!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=e["@context"]&&"http://iiif.io/api/image/1/context.json"!=e["@context"])||(!(!e.profile||0!==e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(e.identifier&&e.width&&e.height)||!(!e.documentElement||"info"!=e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=e.documentElement.namespaceURI))))},configure:function(e,t){if(l.isPlainObject(e))return e["@context"]||(e["@context"]="http://iiif.io/api/image/1.0/context.json",e["@id"]=t.replace("/info.json","")),e;var i=n(e);return i["@context"]="http://iiif.io/api/image/1.0/context.json",i["@id"]=t.replace("/info.xml",""),i},getTileWidth:function(e){if(this.emulateLegacyImagePyramid)return l.TileSource.prototype.getTileWidth.call(this,e);var t=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[t]?this.tileSizePerScaleFactor[t].width:this._tileWidth},getTileHeight:function(e){if(this.emulateLegacyImagePyramid)return l.TileSource.prototype.getTileHeight.call(this,e);var t=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[t]?this.tileSizePerScaleFactor[t].height:this._tileHeight},getLevelScale:function(e){if(this.emulateLegacyImagePyramid){var t=NaN;return 0<this.levels.length&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t}return l.TileSource.prototype.getLevelScale.call(this,e)},getNumTiles:function(e){return this.emulateLegacyImagePyramid?this.getLevelScale(e)?new l.Point(1,1):new l.Point(0,0):l.TileSource.prototype.getNumTiles.call(this,e)},getTileAtPoint:function(e,t){return this.emulateLegacyImagePyramid?new l.Point(0,0):l.TileSource.prototype.getTileAtPoint.call(this,e,t)},getTileUrl:function(e,t,i){if(this.emulateLegacyImagePyramid){var n=null;return 0<this.levels.length&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n}var r,o,a,s,l,c,u,d,h,p,f,g="0",m=Math.pow(.5,this.maxLevel-e),v=Math.ceil(this.width*m),y=Math.ceil(this.height*m);return r=this.getTileWidth(e),o=this.getTileHeight(e),a=Math.ceil(r/m),s=Math.ceil(o/m),f=-1<this["@context"].indexOf("/1.0/context.json")||-1<this["@context"].indexOf("/1.1/context.json")||-1<this["@context"].indexOf("/1/context.json")?"native.jpg":"default.jpg",v<r&&y<o?(p=v+",",l="full"):(c=t*a,u=i*s,d=Math.min(a,this.width-c),h=Math.min(s,this.height-u),p=Math.ceil(d*m)+",",l=[c,u,d,h].join(",")),[this["@id"],l,p,g,f].join("/")}})}(OpenSeadragon),function(a){a.OsmTileSource=function(e,t,i,n,r){var o;(o=a.isPlainObject(e)?e:{width:e,height:t,tileSize:i,tileOverlap:n,tilesUrl:r}).width&&o.height||(o.width=65572864,o.height=65572864),o.tileSize||(o.tileSize=256,o.tileOverlap=0),o.tilesUrl||(o.tilesUrl="http://tile.openstreetmap.org/"),o.minLevel=8,a.TileSource.apply(this,[o])},a.extend(a.OsmTileSource.prototype,a.TileSource.prototype,{supports:function(e){return e.type&&"openstreetmaps"==e.type},configure:function(e){return e},getTileUrl:function(e,t,i){return this.tilesUrl+(e-8)+"/"+t+"/"+i+".png"}})}(OpenSeadragon),function(c){c.TmsTileSource=function(e,t,i,n,r){var o;o=c.isPlainObject(e)?e:{width:e,height:t,tileSize:i,tileOverlap:n,tilesUrl:r};var a,s=256*Math.ceil(o.width/256),l=256*Math.ceil(o.height/256);a=l<s?s/256:l/256,o.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,o.tileSize=256,o.width=s,o.height=l,c.TileSource.apply(this,[o])},c.extend(c.TmsTileSource.prototype,c.TileSource.prototype,{supports:function(e){return e.type&&"tiledmapservice"==e.type},configure:function(e){return e},getTileUrl:function(e,t,i){var n=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(n-i)+".png"}})}(OpenSeadragon),function(e){e.ZoomifyTileSource=function(e){e.tileSize=256;var t={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(t.x,10)>e.tileSize||parseInt(t.y,10)>e.tileSize;)t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),e.imageSizes.push({x:t.x,y:t.y}),e.gridSize.push(this._getGridSize(t.x,t.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,i){return{x:Math.ceil(e/i),y:Math.ceil(t/i)}},_calculateAbsoluteTileNumber:function(e,t,i){for(var n=0,r={},o=0;o<e;o++)n+=(r=this.gridSize[o]).x*r.y;return n+=(r=this.gridSize[e]).x*i+t},supports:function(e){return e.type&&"zoomifytileservice"==e.type},configure:function(e){return e},getTileUrl:function(e,t,i){var n=0,r=this._calculateAbsoluteTileNumber(e,t,i);return n=Math.floor(r/256),this.tilesUrl+"TileGroup"+n+"/"+e+"-"+t+"-"+i+".jpg"}})}(OpenSeadragon),function(c){function r(e){var t,i,n=[];for(i=0;i<e.length;i++)(t=e[i]).height&&t.width&&t.url?n.push({url:t.url,width:Number(t.width),height:Number(t.height)}):c.console.error("Unsupported image format: %s",t.url?t.url:"<no URL>");return n.sort(function(e,t){return e.height-t.height})}function t(e,t){if(!t||!t.documentElement)throw new Error(c.getString("Errors.Xml"));var i,n,r=t.documentElement,o=r.tagName,a=null,s=[];if("image"==o)try{for(a={type:r.getAttribute("type"),levels:[]},s=r.getElementsByTagName("level"),n=0;n<s.length;n++)i=s[n],a.levels.push({url:i.getAttribute("url"),width:parseInt(i.getAttribute("width"),10),height:parseInt(i.getAttribute("height"),10)});return u(e,a)}catch(l){throw l instanceof Error?l:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==o)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==o)throw new Error("Error: "+t)}throw new Error("Unknown element "+o)}function u(e,t){return t.levels}c.LegacyTileSource=function(e){var t,i,n;c.isArray(e)&&(t={type:"legacy-image-pyramid",levels:e}),t.levels=r(t.levels),0<t.levels.length?(i=t.levels[t.levels.length-1].width,n=t.levels[t.levels.length-1].height):(n=i=0,c.console.error("No supported image formats found")),c.extend(!0,t,{width:i,height:n,tileSize:Math.max(n,i),tileOverlap:0,minLevel:0,maxLevel:0<t.levels.length?t.levels.length-1:0}),c.TileSource.apply(this,[t]),this.levels=t.levels},c.extend(c.LegacyTileSource.prototype,c.TileSource.prototype,{supports:function(e){return e.type&&"legacy-image-pyramid"==e.type||e.documentElement&&"legacy-image-pyramid"==e.documentElement.getAttribute("type")},configure:function(e){return c.isPlainObject(e)?u(this,e):t(this,e)},getLevelScale:function(e){var t=NaN;return 0<this.levels.length&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(e){return this.getLevelScale(e)?new c.Point(1,1):new c.Point(0,0)},getTileUrl:function(e){var t=null;return 0<this.levels.length&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].url),t}})}(OpenSeadragon),function(s){s.ImageTileSource=function(e){e=s.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},e),s.TileSource.apply(this,[e])},s.extend(s.ImageTileSource.prototype,s.TileSource.prototype,{supports:function(e){return e.type&&"image"===e.type},configure:function(e){return e},getImageInfo:function(e){var t=this._image=new Image,i=this;this.crossOriginPolicy&&(t.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(t.useCredentials=this.ajaxWithCredentials),s.addEvent(t,"load",function(){i.width=Object.prototype.hasOwnProperty.call(t,"naturalWidth")?t.naturalWidth:t.width,i.height=Object.prototype.hasOwnProperty.call(t,"naturalHeight")?t.naturalHeight:t.height,i.aspectRatio=i.width/i.height,i.dimensions=new s.Point(i.width,i.height),i._tileWidth=i.width,i._tileHeight=i.height,i.tileOverlap=0,i.minLevel=0,i.levels=i._buildLevels(),i.maxLevel=i.levels.length-1,i.ready=!0,i.raiseEvent("ready",{tileSource:i})}),s.addEvent(t,"error",function(){i.raiseEvent("open-failed",{message:"Error loading image at "+e,source:e})}),t.src=e},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(e){return this.getLevelScale(e)?new s.Point(1,1):new s.Point(0,0)},getTileUrl:function(e){var t=null;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].url),t},getContext2D:function(e){var t=null;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].context2D),t},_buildLevels:function(){var e=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!s.supportsCanvas||!this.useCanvas)return delete this._image,e;var t=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,i=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,n=document.createElement("canvas"),r=n.getContext("2d");if(n.width=t,n.height=i,r.drawImage(this._image,0,0,t,i),e[0].context2D=r,delete this._image,s.isCanvasTainted(n))return e;for(;2<=t&&2<=i;){t=Math.floor(t/2),i=Math.floor(i/2);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=t,o.height=i,a.drawImage(n,0,0,t,i),e.splice(0,0,{context2D:a,width:t,height:i}),n=o,r=a}return e}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(i){function n(e){i.requestAnimationFrame(function(){t(e)})}function t(e){var t;e.shouldFade&&(t=1-(i.now()-e.fadeBeginTime)/e.fadeLength,t=Math.min(1,t),t=Math.max(0,t),e.imgGroup&&i.setElementOpacity(e.imgGroup,t,!0),0<t&&n(e))}function r(e){e.shouldFade=!0,e.fadeBeginTime=i.now()+e.fadeDelay,window.setTimeout(function(){n(e)},e.fadeDelay)}function o(e){e.shouldFade=!1,e.imgGroup&&i.setElementOpacity(e.imgGroup,1,!0)}function a(e,t){e.element.disabled||(t>=i.ButtonState.GROUP&&e.currentState==i.ButtonState.REST&&(o(e),e.currentState=i.ButtonState.GROUP),t>=i.ButtonState.HOVER&&e.currentState==i.ButtonState.GROUP&&(e.imgHover&&(e.imgHover.style.visibility=""),e.currentState=i.ButtonState.HOVER),t>=i.ButtonState.DOWN&&e.currentState==i.ButtonState.HOVER&&(e.imgDown&&(e.imgDown.style.visibility=""),e.currentState=i.ButtonState.DOWN))}function s(e,t){e.element.disabled||(t<=i.ButtonState.HOVER&&e.currentState==i.ButtonState.DOWN&&(e.imgDown&&(e.imgDown.style.visibility="hidden"),e.currentState=i.ButtonState.HOVER),t<=i.ButtonState.GROUP&&e.currentState==i.ButtonState.HOVER&&(e.imgHover&&(e.imgHover.style.visibility="hidden"),e.currentState=i.ButtonState.GROUP),t<=i.ButtonState.REST&&e.currentState==i.ButtonState.GROUP&&(r(e),e.currentState=i.ButtonState.REST))}i.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},i.Button=function(e){var t=this;i.EventSource.call(this),i.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:i.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:i.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},e),this.element=e.element||i.makeNeutralElement("div"),e.element||(this.imgRest=i.makeTransparentImage(this.srcRest),this.imgGroup=i.makeTransparentImage(this.srcGroup),this.imgHover=i.makeTransparentImage(this.srcHover),this.imgDown=i.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",i.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",i.Browser.vendor==i.BROWSERS.FIREFOX&&i.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=i.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new i.MouseTracker({element:this.element,
clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){e.insideElementPressed?(a(t,i.ButtonState.DOWN),t.raiseEvent("enter",{originalEvent:e.originalEvent})):e.buttonDownAny||a(t,i.ButtonState.HOVER)},focusHandler:function(e){this.enterHandler(e),t.raiseEvent("focus",{originalEvent:e.originalEvent})},exitHandler:function(e){s(t,i.ButtonState.GROUP),e.insideElementPressed&&t.raiseEvent("exit",{originalEvent:e.originalEvent})},blurHandler:function(e){this.exitHandler(e),t.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(e){a(t,i.ButtonState.DOWN),t.raiseEvent("press",{originalEvent:e.originalEvent})},releaseHandler:function(e){e.insideElementPressed&&e.insideElementReleased?(s(t,i.ButtonState.HOVER),t.raiseEvent("release",{originalEvent:e.originalEvent})):e.insideElementPressed?s(t,i.ButtonState.GROUP):a(t,i.ButtonState.HOVER)},clickHandler:function(e){e.quick&&t.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){return 13!==e.keyCode||(t.raiseEvent("click",{originalEvent:e.originalEvent}),t.raiseEvent("release",{originalEvent:e.originalEvent}),!1)}}),s(this,i.ButtonState.REST)},i.extend(i.Button.prototype,i.EventSource.prototype,{notifyGroupEnter:function(){a(this,i.ButtonState.GROUP)},notifyGroupExit:function(){s(this,i.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,i.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,i.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(r){r.ButtonGroup=function(e){r.extend(!0,this,{buttons:[],clickTimeThreshold:r.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:r.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var t,i=this.buttons.concat([]),n=this;if(this.element=e.element||r.makeNeutralElement("div"),!e.group)for(this.label=r.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),t=0;t<i.length;t++)this.element.appendChild(i[t].element);r.setElementTouchActionNone(this.element),this.tracker=new r.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(){var e;for(e=0;e<n.buttons.length;e++)n.buttons[e].notifyGroupEnter()},exitHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<n.buttons.length;t++)n.buttons[t].notifyGroupExit()}})},r.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(T){T.Rect=function(e,t,i,n,r){var o,a;this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.width="number"==typeof i?i:0,this.height="number"==typeof n?n:0,this.degrees="number"==typeof r?r:0,this.degrees=T.positiveModulo(this.degrees,360),270<=this.degrees?(o=this.getTopRight(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):180<=this.degrees?(o=this.getBottomRight(),this.x=o.x,this.y=o.y,this.degrees-=180):90<=this.degrees&&(o=this.getBottomLeft(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},T.Rect.fromSummits=function(e,t,i){var n=e.distanceTo(t),r=e.distanceTo(i),o=t.minus(e),a=Math.atan(o.y/o.x);return o.x<0?a+=Math.PI:o.y<0&&(a+=2*Math.PI),new T.Rect(e.x,e.y,n,r,a/Math.PI*180)},T.Rect.prototype={clone:function(){return new T.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new T.Point(this.x,this.y)},getBottomRight:function(){return new T.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new T.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new T.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new T.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new T.Point(this.width,this.height)},equals:function(e){return e instanceof T.Rect&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height&&this.degrees===e.degrees},times:function(e){return new T.Rect(this.x*e,this.y*e,this.width*e,this.height*e,this.degrees)},translate:function(e){return new T.Rect(this.x+e.x,this.y+e.y,this.width,this.height,this.degrees)},union:function(e){var t=this.getBoundingBox(),i=e.getBoundingBox(),n=Math.min(t.x,i.x),r=Math.min(t.y,i.y),o=Math.max(t.x+t.width,i.x+i.width),a=Math.max(t.y+t.height,i.y+i.height);return new T.Rect(n,r,o-n,a-r)},intersection:function(e){function t(e,t,i,n){var r=t.minus(e),o=n.minus(i),a=-o.x*r.y+r.x*o.y;if(0===a)return null;var s=(r.x*(e.y-i.y)-r.y*(e.x-i.x))/a,l=(o.x*(e.y-i.y)-o.y*(e.x-i.x))/a;return-c<=s&&s<=1-c&&-c<=l&&l<=1-c?new T.Point(e.x+l*r.x,e.y+l*r.y):null}var c=1e-10,i=[],n=this.getTopLeft();e.containsPoint(n,c)&&i.push(n);var r=this.getTopRight();e.containsPoint(r,c)&&i.push(r);var o=this.getBottomLeft();e.containsPoint(o,c)&&i.push(o);var a=this.getBottomRight();e.containsPoint(a,c)&&i.push(a);var s=e.getTopLeft();this.containsPoint(s,c)&&i.push(s);var l=e.getTopRight();this.containsPoint(l,c)&&i.push(l);var u=e.getBottomLeft();this.containsPoint(u,c)&&i.push(u);var d=e.getBottomRight();this.containsPoint(d,c)&&i.push(d);for(var h=this._getSegments(),p=e._getSegments(),f=0;f<h.length;f++)for(var g=h[f],m=0;m<p.length;m++){var v=p[m],y=t(g[0],g[1],v[0],v[1]);y&&i.push(y)}if(0===i.length)return null;for(var w=i[0].x,b=i[0].x,_=i[0].y,x=i[0].y,k=1;k<i.length;k++){var j=i[k];j.x<w&&(w=j.x),j.x>b&&(b=j.x),j.y<_&&(_=j.y),j.y>x&&(x=j.y)}return new T.Rect(w,_,b-w,x-_)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),i=this.getBottomLeft(),n=this.getBottomRight();return[[e,t],[t,n],[n,i],[i,e]]},rotate:function(e,t){if(0===(e=T.positiveModulo(e,360)))return this.clone();t=t||this.getCenter();var i=this.getTopLeft().rotate(e,t),n=this.getTopRight().rotate(e,t).minus(i);n=n.apply(function(e){var t=1e-15;return Math.abs(e)<t?0:e});var r=Math.atan(n.y/n.x);return n.x<0?r+=Math.PI:n.y<0&&(r+=2*Math.PI),new T.Rect(i.x,i.y,this.width,this.height,r/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var e=this.getTopLeft(),t=this.getTopRight(),i=this.getBottomLeft(),n=this.getBottomRight(),r=Math.min(e.x,t.x,i.x,n.x),o=Math.max(e.x,t.x,i.x,n.x),a=Math.min(e.y,t.y,i.y,n.y),s=Math.max(e.y,t.y,i.y,n.y);return new T.Rect(r,a,o-r,s-a)},getIntegerBoundingBox:function(){var e=this.getBoundingBox(),t=Math.floor(e.x),i=Math.floor(e.y),n=Math.ceil(e.width+e.x-t),r=Math.ceil(e.height+e.y-i);return new T.Rect(t,i,n,r)},containsPoint:function(e,t){t=t||0;var i=this.getTopLeft(),n=this.getTopRight(),r=this.getBottomLeft(),o=n.minus(i),a=r.minus(i);return(e.x-i.x)*o.x+(e.y-i.y)*o.y>=-t&&(e.x-n.x)*o.x+(e.y-n.y)*o.y<=t&&(e.x-i.x)*a.x+(e.y-i.y)*a.y>=-t&&(e.x-r.x)*a.x+(e.y-r.y)*a.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(h){function s(e){var t=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),n=Number(this.element.style.width.replace("px","")),r=Number(this.element.style.height.replace("px","")),o=h.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?0<-e.delta.x?t>-(n-o.x)&&(this.element.style.marginLeft=t+2*e.delta.x+"px",c(this,o.x,t+2*e.delta.x)):-e.delta.x<0&&t<0&&(this.element.style.marginLeft=t+2*e.delta.x+"px",c(this,o.x,t+2*e.delta.x)):0<-e.delta.y?i>-(r-o.y)&&(this.element.style.marginTop=i+2*e.delta.y+"px",c(this,o.y,i+2*e.delta.y)):-e.delta.y<0&&i<0&&(this.element.style.marginTop=i+2*e.delta.y+"px",c(this,o.y,i+2*e.delta.y))),!1}function l(e){var t=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),n=Number(this.element.style.width.replace("px","")),r=Number(this.element.style.height.replace("px","")),o=h.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?0<e.scroll?t>-(n-o.x)&&(this.element.style.marginLeft=t-60*e.scroll+"px",c(this,o.x,t-60*e.scroll)):e.scroll<0&&t<0&&(this.element.style.marginLeft=t-60*e.scroll+"px",c(this,o.x,t-60*e.scroll)):e.scroll<0?i>o.y-r&&(this.element.style.marginTop=i+60*e.scroll+"px",c(this,o.y,i+60*e.scroll)):0<e.scroll&&i<0&&(this.element.style.marginTop=i+60*e.scroll+"px",c(this,o.y,i+60*e.scroll))),!1}function c(e,t,i){var n,r,o,a,s,l,c;for(n="horizontal"==e.scroll?e.panelWidth:e.panelHeight,r=Math.ceil(t/n)+5,l=r=(r=(o=Math.ceil((Math.abs(i)+t)/n)+1)-r)<0?0:r;l<o&&l<e.panels.length;l++)if(!(c=e.panels[l]).activePanel){var u,d=e.viewer.tileSources[l];u=d.referenceStripThumbnailUrl?{type:"image",url:d.referenceStripThumbnailUrl}:d,(a=new h.Viewer({id:c.id,tileSources:[u],element:c,navigatorSizeRatio:e.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0})).displayRegion=h.makeNeutralElement("div"),a.displayRegion.id=c.id+"-displayregion",a.displayRegion.className="displayregion",(s=a.displayRegion.style).position="relative",s.top="0px",s.left="0px",s.fontSize="0px",s.overflow="hidden",s["float"]="left",s.cssFloat="left",s.styleFloat="left",s.zIndex=999999999,s.cursor="default",s.width=e.panelWidth-4+"px",s.height=e.panelHeight-4+"px",a.displayRegion.innerTracker=new h.MouseTracker({element:a.displayRegion,startDisabled:!0}),c.getElementsByTagName("div")[0].appendChild(a.displayRegion),e.miniViewers[c.id]=a,c.activePanel=!0}}function u(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px",!1}function d(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="-"+h.getElementSize(t).y/2+"px":t.style.marginLeft="-"+h.getElementSize(t).x/2+"px",!1}function p(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return l.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:case 37:return l.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return l.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function f(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 61:return l.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return l.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return l.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:case 97:return l.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return l.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}var g={};h.ReferenceStrip=function(e){var t,i,n,r=this,o=e.viewer,a=h.getElementSize(o.element);for(e.id||(e.id="referencestrip-"+h.now(),this.element=h.makeNeutralElement("div"),this.element.id=e.id,this.element.className="referencestrip"),e=h.extend(!0,{sizeRatio:h.DEFAULT_SETTINGS.referenceStripSizeRatio,position:h.DEFAULT_SETTINGS.referenceStripPosition,scroll:h.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:h.DEFAULT_SETTINGS.clickTimeThreshold},e,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),h.extend(this,e),g[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,(i=this.element.style).marginTop="0px",i.marginRight="0px",i.marginBottom="0px",i.marginLeft="0px",i.left="0px",i.bottom="0px",i.border="0px",i.background="#000",i.position="relative",h.setElementTouchActionNone(this.element),h.setElementOpacity(this.element,.8),this.viewer=o,this.innerTracker=new h.MouseTracker({element:this.element,dragHandler:h.delegate(this,s),scrollHandler:h.delegate(this,l),enterHandler:h.delegate(this,u),exitHandler:h.delegate(this,d),keyDownHandler:h.delegate(this,p),keyHandler:h.delegate(this,f)}),e.width&&e.height?(this.element.style.width=e.width+"px",this.element.style.height=e.height+"px",o.addControl(this.element,{anchor:h.ControlAnchor.BOTTOM_LEFT})):"horizontal"==e.scroll?(this.element.style.width=a.x*e.sizeRatio*o.tileSources.length+12*o.tileSources.length+"px",this.element.style.height=a.y*e.sizeRatio+"px",o.addControl(this.element,{anchor:h.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=a.y*e.sizeRatio*o.tileSources.length+12*o.tileSources.length+"px",this.element.style.width=a.x*e.sizeRatio+"px",o.addControl(this.element,{anchor:h.ControlAnchor.TOP_LEFT})),this.panelWidth=a.x*this.sizeRatio+8,this.panelHeight=a.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},n=0;n<o.tileSources.length;n++)(t=h.makeNeutralElement("div")).id=this.element.id+"-"+n,t.style.width=r.panelWidth+"px",t.style.height=r.panelHeight+"px",t.style.display="inline",t.style["float"]="left",t.style.cssFloat="left",t.style.styleFloat="left",t.style.padding="2px",h.setElementTouchActionNone(t),t.innerTracker=new h.MouseTracker({element:t,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(e){e.eventSource.dragging=h.now()},releaseHandler:function(e){var t=e.eventSource,i=t.element.id,n=Number(i.split("-")[2]),r=h.now();e.insideElementPressed&&e.insideElementReleased&&t.dragging&&r-t.dragging<t.clickTimeThreshold&&(t.dragging=null,o.goToPage(n))}}),this.element.appendChild(t),t.activePanel=!1,this.panels.push(t);c(this,"vertical"==this.scroll?a.y:a.x,0),this.setFocus(0)},h.extend(h.ReferenceStrip.prototype,h.EventSource.prototype,h.Viewer.prototype,{setFocus:function(e){var t,i=h.getElement(this.element.id+"-"+e),n=h.getElementSize(this.viewer.canvas),r=Number(this.element.style.width.replace("px","")),o=Number(this.element.style.height.replace("px","")),a=-Number(this.element.style.marginLeft.replace("px","")),s=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==i&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=i,this.currentSelected.style.background="#999","horizontal"==this.scroll?(t=Number(e)*(this.panelWidth+3))>a+n.x-this.panelWidth?(t=Math.min(t,r-n.x),this.element.style.marginLeft=-t+"px",c(this,n.x,-t)):t<a&&(t=Math.max(0,t-n.x/2),this.element.style.marginLeft=-t+"px",c(this,n.x,-t)):(t=Number(e)*(this.panelHeight+3))>s+n.y-this.panelHeight?(t=Math.min(t,o-n.y),this.element.style.marginTop=-t+"px",c(this,n.y,-t)):t<s&&(t=Math.max(0,t-n.y/2),this.element.style.marginTop=-t+"px",c(this,n.y,-t)),this.currentPage=e,u.call(this,{eventSource:this.innerTracker}))},update:function(){return!!g[this.id].animating&&(h.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(a){a.DisplayRect=function(e,t,i,n,r,o){a.Rect.apply(this,[e,t,i,n]),this.minLevel=r,this.maxLevel=o},a.extend(a.DisplayRect.prototype,a.Rect.prototype)}(OpenSeadragon),function(r){function o(e,t){return(1-Math.exp(e*-t))/(1-Math.exp(-e))}r.Spring=function(e){var t=arguments;"object"!=typeof e&&(e={initial:t.length&&"number"==typeof t[0]?t[0]:undefined,springStiffness:1<t.length?t[1].springStiffness:5,animationTime:1<t.length?t[1].animationTime:1.5}),r.console.assert("number"==typeof e.springStiffness&&0!==e.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),r.console.assert("number"==typeof e.animationTime&&0<=e.animationTime,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),e.exponential&&(this._exponential=!0,delete e.exponential),r.extend(!0,this,e),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:r.now()},r.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},r.Spring.prototype={resetTo:function(e){r.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=e,this.start.time=this.target.time=this.current.time=r.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(e){r.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=e,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(e){this.start.value+=e,this.target.value+=e,this._exponential&&(r.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(e){this._exponential=e,this._exponential&&(r.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var e,t;this.current.time=r.now(),this._exponential?(e=this.start._logValue,t=this.target._logValue):(e=this.start.value,t=this.target.value);var i=this.current.time>=this.target.time?t:e+(t-e)*o(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),n=this.current.value;return this._exponential?this.current.value=Math.exp(i):this.current.value=i,n!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(t){function r(e){t.extend(!0,this,{timeout:t.DEFAULT_SETTINGS.timeout,jobId:null},e),this.image=null}function o(e,t,i){e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&0<e.jobQueue.length&&(e.jobQueue.shift().start(),e.jobsInProgress++),i(t.image,t.errorMsg,t.request)}r.prototype={errorMsg:null,start:function(){var a=this,e=this.abort;this.image=new Image,this.image.onload=function(){a.finish(!0)},this.image.onabort=this.image.onerror=function(){a.errorMsg="Image load aborted",a.finish(!1)},this.jobId=window.setTimeout(function(){a.errorMsg="Image load exceeded timeout",a.finish(!1)},this.timeout),this.loadWithAjax?(this.request=t.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(e){var t;try{t=new window.Blob([e.response])}catch(o){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===o.name&&i){var n=new i;n.append(e.response),t=n.getBlob()}}0===t.size&&(a.errorMsg="Empty image response.",a.finish(!1));var r=(window.URL||window.webkitURL).createObjectURL(t);a.image.src=r},error:function(){a.errorMsg="Image load aborted - XHR error",a.finish(!1)}}),this.abort=function(){a.request.abort(),"function"==typeof e&&e()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},t.ImageLoader=function(e){t.extend(!0,this,{jobLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,timeout:t.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},e)},t.ImageLoader.prototype={addJob:function(t){var i=this,e=function(e){o(i,e,t.callback)},n=new r({src:t.src,loadWithAjax:t.loadWithAjax,ajaxHeaders:t.loadWithAjax?t.ajaxHeaders:null,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,callback:e,abort:t.abort,timeout:this.timeout});!this.jobLimit||this.jobsInProgress<this.jobLimit?(n.start(),this.jobsInProgress++):this.jobQueue.push(n)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(s){s.Tile=function(e,t,i,n,r,o,a,s,l){this.level=e,this.x=t,this.y=i,this.bounds=n,this.exists=r,this.url=o,this.context2D=a,this.loadWithAjax=s,this.ajaxHeaders=l,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0},s.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(e){this.cacheImageRecord?this.loaded?(this.element||(this.element=s.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=e&&e.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",s.setElementOpacity(this.element,this.opacity)):s.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):s.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(e,t,i,n){var r,o=this.position.times(s.pixelDensityRatio),a=this.size.times(s.pixelDensityRatio);this.context2D||this.cacheImageRecord?(r=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&r?(e.save(),e.globalAlpha=this.opacity,"number"==typeof i&&1!==i&&(o=o.times(i),a=a.times(i)),n instanceof s.Point&&(o=o.plus(n)),1===e.globalAlpha&&this._hasTransparencyChannel()&&e.clearRect(o.x+1,o.y+1,a.x-2,a.y-2),t({context:e,tile:this,rendered:r}),e.drawImage(r.canvas,0,0,r.canvas.width,r.canvas.height,o.x,o.y,a.x,a.y),e.restore()):s.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):s.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var e;if(this.cacheImageRecord)e=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return s.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;e=this.context2D}return e.canvas.width/(this.size.x*s.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(e,t,i){var n=Math.max(1,Math.ceil((i.x-t.x)/2)),r=Math.max(1,Math.ceil((i.y-t.y)/2));return new s.Point(n,r).minus(this.position.times(s.pixelDensityRatio).times(e||1).apply(function(e){return e%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(u){u.OverlayPlacement=u.Placement,u.OverlayRotationMode=u.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),u.Overlay=function(e,t,i){var n;n=u.isPlainObject(e)?e:{element:e,location:t,placement:i},this.element=n.element,this.style=n.element.style,this._init(n)},u.Overlay.prototype={_init:function(e){this.location=e.location,this.placement=e.placement===undefined?u.Placement.TOP_LEFT:e.placement,this.onDraw=e.onDraw,this.checkResize=e.checkResize===undefined||e.checkResize,this.width=e.width===undefined?null:e.width,this.height=e.height===undefined?null:e.height,this.rotationMode=e.rotationMode||u.OverlayRotationMode.EXACT,this.location instanceof u.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=u.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new u.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(e,t){var i=u.Placement.properties[this.placement];i&&(i.isHorizontallyCentered?e.x-=t.x/2:i.isRight&&(e.x-=t.x),i.isVerticallyCentered?e.y-=t.y/2:i.isBottom&&(e.y-=t.y))},destroy:function(){var e=this.element,t=this.style;e.parentNode&&(e.parentNode.removeChild(e),e.prevElementParent&&(t.display="none",document.body.appendChild(e))),this.onDraw=null,t.top="",t.left="",t.position="",null!==this.width&&(t.width=""),null!==this.height&&(t.height="");var i=u.getCssPropertyWithVendorPrefix("transformOrigin"),n=u.getCssPropertyWithVendorPrefix("transform");i&&n&&(t[i]="",t[n]="")},drawHTML:function(e,t){var i=this.element;i.parentNode!==e&&(i.prevElementParent=i.parentNode,i.prevNextSibling=i.nextSibling,e.appendChild(i),this.style.position="absolute",this.size=u.getElementSize(i));var n=this._getOverlayPositionAndSize(t),r=n.position,o=this.size=n.size,a=n.rotate;if(this.onDraw)this.onDraw(r,o,this.element);else{var s=this.style;s.left=r.x+"px",s.top=r.y+"px",null!==this.width&&(s.width=o.x+"px"),null!==this.height&&(s.height=o.y+"px");var l=u.getCssPropertyWithVendorPrefix("transformOrigin"),c=u.getCssPropertyWithVendorPrefix("transform");l&&c&&(a?(s[l]=this._getTransformOrigin(),s[c]="rotate("+a+"deg)"):(s[l]="",s[c]="")),"none"!==s.display&&(s.display="block")}},_getOverlayPositionAndSize:function(e){var t=e.pixelFromPoint(this.location,!0),i=this._getSizeInPixels(e);this.adjust(t,i);var n=0;if(e.degrees&&this.rotationMode!==u.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===u.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var r=new u.Rect(t.x,t.y,i.x,i.y),o=this._getBoundingBox(r,e.degrees);t=o.getTopLeft(),i=o.getSize()}else n=e.degrees;return{position:t,size:i,rotate:n}},_getSizeInPixels:function(e){var t=this.size.x,i=this.size.y;if(null!==this.width||null!==this.height){var n=e.deltaPixelsFromPointsNoRotate(new u.Point(this.width||0,this.height||0),!0);null!==this.width&&(t=n.x),null!==this.height&&(i=n.y)}if(this.checkResize&&(null===this.width||null===this.height)){var r=this.size=u.getElementSize(this.element);null===this.width&&(t=r.x),null===this.height&&(i=r.y)}return new u.Point(t,i)},_getBoundingBox:function(e,t){var i=this._getPlacementPoint(e);return e.rotate(t,i).getBoundingBox()},_getPlacementPoint:function(e){var t=new u.Point(e.x,e.y),i=u.Placement.properties[this.placement];return i&&(i.isHorizontallyCentered?t.x+=e.width/2:i.isRight&&(t.x+=e.width),i.isVerticallyCentered?t.y+=e.height/2:i.isBottom&&(t.y+=e.height)),t},_getTransformOrigin:function(){var e="",t=u.Placement.properties[this.placement];return t&&(t.isLeft?e="left":t.isRight&&(e="right"),t.isTop?e+=" top":t.isBottom&&(e+=" bottom")),e},update:function(e,t){var i=u.isPlainObject(e)?e:{location:e,placement:t};this._init({location:i.location||this.location,placement:i.placement!==undefined?i.placement:this.placement,onDraw:i.onDraw||this.onDraw,checkResize:i.checkResize||this.checkResize,width:i.width!==undefined?i.width:this.width,height:i.height!==undefined?i.height:this.height,rotationMode:i.rotationMode||this.rotationMode})},getBounds:function(e){u.console.assert(e,"A viewport must now be passed to Overlay.getBounds.");var t=this.width,i=this.height;if(null===t||null===i){var n=e.deltaPointsFromPixelsNoRotate(this.size,!0);null===t&&(t=n.x),null===i&&(i=n.y)}var r=this.location.clone();return this.adjust(r,new u.Point(t,i)),this._adjustBoundsForRotation(e,new u.Rect(r.x,r.y,t,i))},_adjustBoundsForRotation:function(e,t){if(!e||0===e.degrees||this.rotationMode===u.OverlayRotationMode.EXACT)return t;if(this.rotationMode!==u.OverlayRotationMode.BOUNDING_BOX)return t.rotate(-e.degrees,this._getPlacementPoint(t));if(null===this.width||null===this.height)return t;var i=this._getOverlayPositionAndSize(e);return e.viewerElementToViewportRectangle(new u.Rect(i.position.x,i.position.y,i.size.x,i.size.y))}}}(OpenSeadragon),function(d){d.Drawer=function(e){d.console.assert(e.viewer,"[Drawer] options.viewer is required");var t=arguments;if(d.isPlainObject(e)||(e={source:t[0],viewport:t[1],element:t[2]}),d.console.assert(e.viewport,"[Drawer] options.viewport is required"),d.console.assert(e.element,"[Drawer] options.element is required"),e.source&&d.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=e.viewer,this.viewport=e.viewport,this.debugGridColor=e.debugGridColor||d.DEFAULT_SETTINGS.debugGridColor,e.opacity&&d.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=d.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=d.getElement(e.element),this.canvas=d.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var i=this._calculateCanvasSize();this.canvas.width=i.x,this.canvas.height=i.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",d.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas)},d.Drawer.prototype={addOverlay:function(e,t,i,n){return d.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(e,t,i,n),this},updateOverlay:function(e,t,i){return d.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(e,t,i),this},removeOverlay:function(e){return d.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(e),this},clearOverlays:function(){return d.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},setOpacity:function(e){d.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var t=this.viewer.world,i=0;i<t.getItemCount();i++)t.getItemAt(i).setOpacity(e);return this},getOpacity:function(){d.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var e=this.viewer.world,t=0,i=0;i<e.getItemCount();i++){var n=e.getItemAt(i).getOpacity();t<n&&(t=n)}return t},needsUpdate:function(){return d.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return d.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return d.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return d.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!=e.x||this.canvas.height!=e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,
this.sketchCanvas.height=t.y}this._clear()}},_clear:function(e,t){if(this.useCanvas){var i=this._getContext(e);if(t)i.clearRect(t.x,t.y,t.width,t.height);else{var n=i.canvas;i.clearRect(0,0,n.width,n.height)}}},viewportToDrawerRectangle:function(e){var t=this.viewport.pixelFromPointNoRotate(e.getTopLeft(),!0),i=this.viewport.deltaPixelsFromPointsNoRotate(e.getSize(),!0);return new d.Rect(t.x*d.pixelDensityRatio,t.y*d.pixelDensityRatio,i.x*d.pixelDensityRatio,i.y*d.pixelDensityRatio)},drawTile:function(e,t,i,n,r){if(d.console.assert(e,"[Drawer.drawTile] tile is required"),d.console.assert(t,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var o=this._getContext(i);n=n||1,e.drawCanvas(o,t,n,r)}else e.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var i=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=i.x,this.sketchCanvas.height=i.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var n=this;this.viewer.addHandler("rotate",function r(){if(0!==n.viewport.getRotation()){n.viewer.removeHandler("rotate",r);var e=n._calculateSketchCanvasSize();n.sketchCanvas.width=e.x,n.sketchCanvas.height=e.y}})}}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var i=this._getContext(t);i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()}},drawRectangle:function(e,t,i){if(this.useCanvas){var n=this._getContext(i);n.save(),n.fillStyle=t,n.fillRect(e.x,e.y,e.width,e.height),n.restore()}},blendSketch:function(e,t,i,n){var r=e;if(d.isPlainObject(r)||(r={opacity:e,scale:t,translate:i,compositeOperation:n}),this.useCanvas&&this.sketchCanvas){e=r.opacity,n=r.compositeOperation;var o=r.bounds;if(this.context.save(),this.context.globalAlpha=e,n&&(this.context.globalCompositeOperation=n),o)o.x<0&&(o.width+=o.x,o.x=0),o.x+o.width>this.canvas.width&&(o.width=this.canvas.width-o.x),o.y<0&&(o.height+=o.y,o.y=0),o.y+o.height>this.canvas.height&&(o.height=this.canvas.height-o.y),this.context.drawImage(this.sketchCanvas,o.x,o.y,o.width,o.height,o.x,o.y,o.width,o.height);else{t=r.scale||1;var a=(i=r.translate)instanceof d.Point?i:new d.Point(0,0),s=0,l=0;if(i){var c=this.sketchCanvas.width-this.canvas.width,u=this.sketchCanvas.height-this.canvas.height;s=Math.round(c/2),l=Math.round(u/2)}this.context.drawImage(this.sketchCanvas,a.x-s*t,a.y-l*t,(this.canvas.width+2*s)*t,(this.canvas.height+2*l)*t,-s,-l,this.canvas.width+2*s,this.canvas.height+2*l)}this.context.restore()}},drawDebugInfo:function(e,t,i,n){if(this.useCanvas){var r=this.context;r.save(),r.lineWidth=2*d.pixelDensityRatio,r.font="small-caps bold "+13*d.pixelDensityRatio+"px arial",r.strokeStyle=this.debugGridColor,r.fillStyle=this.debugGridColor,0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),n.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:n.getRotation(!0),point:n.viewport.pixelFromPointNoRotate(n._getRotationPoint(!0),!0)}),r.strokeRect(e.position.x*d.pixelDensityRatio,e.position.y*d.pixelDensityRatio,e.size.x*d.pixelDensityRatio,e.size.y*d.pixelDensityRatio);var o=(e.position.x+e.size.x/2)*d.pixelDensityRatio,a=(e.position.y+e.size.y/2)*d.pixelDensityRatio;r.translate(o,a),r.rotate(Math.PI/180*-this.viewport.degrees),r.translate(-o,-a),0===e.x&&0===e.y&&(r.fillText("Zoom: "+this.viewport.getZoom(),e.position.x*d.pixelDensityRatio,(e.position.y-30)*d.pixelDensityRatio),r.fillText("Pan: "+this.viewport.getBounds().toString(),e.position.x*d.pixelDensityRatio,(e.position.y-20)*d.pixelDensityRatio)),r.fillText("Level: "+e.level,(e.position.x+10)*d.pixelDensityRatio,(e.position.y+20)*d.pixelDensityRatio),r.fillText("Column: "+e.x,(e.position.x+10)*d.pixelDensityRatio,(e.position.y+30)*d.pixelDensityRatio),r.fillText("Row: "+e.y,(e.position.x+10)*d.pixelDensityRatio,(e.position.y+40)*d.pixelDensityRatio),r.fillText("Order: "+i+" of "+t,(e.position.x+10)*d.pixelDensityRatio,(e.position.y+50)*d.pixelDensityRatio),r.fillText("Size: "+e.size.toString(),(e.position.x+10)*d.pixelDensityRatio,(e.position.y+60)*d.pixelDensityRatio),r.fillText("Position: "+e.position.toString(),(e.position.x+10)*d.pixelDensityRatio,(e.position.y+70)*d.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),n.getRotation(!0)%360!=0&&this._restoreRotationChanges(),r.restore()}},debugRect:function(e){if(this.useCanvas){var t=this.context;t.save(),t.lineWidth=2*d.pixelDensityRatio,t.strokeStyle=this.debugGridColor,t.fillStyle=this.debugGridColor,t.strokeRect(e.x*d.pixelDensityRatio,e.y*d.pixelDensityRatio,e.width*d.pixelDensityRatio,e.height*d.pixelDensityRatio),t.restore()}},getCanvasSize:function(e){var t=this._getContext(e).canvas;return new d.Point(t.width,t.height)},getCanvasCenter:function(){return new d.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(e){var t=e.point?e.point.times(d.pixelDensityRatio):this.getCanvasCenter(),i=this._getContext(e.useSketch);i.save(),i.translate(t.x,t.y),i.rotate(Math.PI/180*e.degrees),i.translate(-t.x,-t.y)},_restoreRotationChanges:function(e){this._getContext(e).restore()},_calculateCanvasSize:function(){var e=d.pixelDensityRatio,t=this.viewport.getContainerSize();return{x:t.x*e,y:t.y*e}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}}(OpenSeadragon),function(p){p.Viewport=function(e){var t=arguments;t.length&&t[0]instanceof p.Point&&(e={containerSize:t[0],contentSize:t[1],config:t[2]}),e.config&&(p.extend(!0,e,e.config),delete e.config),this._margins=p.extend({left:0,top:0,right:0,bottom:0},e.margins||{}),delete e.margins,p.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:p.DEFAULT_SETTINGS.springStiffness,animationTime:p.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:p.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:p.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:p.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:p.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:p.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:p.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:p.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:p.DEFAULT_SETTINGS.maxZoomLevel,degrees:p.DEFAULT_SETTINGS.degrees,homeFillsViewer:p.DEFAULT_SETTINGS.homeFillsViewer},e),this._updateContainerInnerSize(),this.centerSpringX=new p.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new p.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new p.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new p.Rect(0,0,1,1),1),this.goHome(!0),this.update()},p.Viewport.prototype={resetContentSize:function(e){return p.console.assert(e,"[Viewport.resetContentSize] contentSize is required"),p.console.assert(e instanceof p.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),p.console.assert(0<e.x,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),p.console.assert(0<e.y,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new p.Rect(0,0,1,e.y/e.x),e.x),this},setHomeBounds:function(e,t){p.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(e,t)},_setContentBounds:function(e,t){p.console.assert(e,"[Viewport._setContentBounds] bounds is required"),p.console.assert(e instanceof p.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),p.console.assert(0<e.width,"[Viewport._setContentBounds] bounds.width must be greater than 0"),p.console.assert(0<e.height,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=e.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(t),this._contentBounds=e.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(t),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:t,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?1<=e?e:1:1<=e?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var e=this._contentBounds.getCenter(),t=1/this.getHomeZoom(),i=t/this.getAspectRatio();return new p.Rect(e.x-t/2,e.y-i/2,t,i)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new p.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return p.extend({},this._margins)},setMargins:function(e){p.console.assert("object"===p.type(e),"[Viewport.setMargins] margins must be an object"),this._margins=p.extend({left:0,top:0,right:0,bottom:0},e),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation())},getBoundsNoRotate:function(e){var t=this.getCenter(e),i=1/this.getZoom(e),n=i/this.getAspectRatio();return new p.Rect(t.x-i/2,t.y-n/2,i,n)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),i=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/i,t.y-=this._margins.top/i,t.width+=(this._margins.left+this._margins.right)/i,t.height+=(this._margins.top+this._margins.bottom)/i,t},getCenter:function(e){var t,i,n,r,o,a,s=new p.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),l=new p.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e?s:this.zoomPoint?(t=this.pixelFromPoint(this.zoomPoint,!0),r=(n=1/(i=this.getZoom()))/this.getAspectRatio(),o=new p.Rect(s.x-n/2,s.y-r/2,n,r),a=this._pixelFromPoint(this.zoomPoint,o).minus(t).divide(this._containerInnerSize.x*i),l.plus(a)):l},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(e){var t=new p.Rect(e.x,e.y,e.width,e.height);if(this.wrapHorizontal);else{var i=this.visibilityRatio*t.width,n=t.x+t.width,r=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,o=this._contentBoundsNoRotate.x-n+i,a=r-t.x-i;i>this._contentBoundsNoRotate.width?t.x+=(o+a)/2:a<0?t.x+=a:0<o&&(t.x+=o)}if(this.wrapVertical);else{var s=this.visibilityRatio*t.height,l=t.y+t.height,c=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,u=this._contentBoundsNoRotate.y-l+s,d=c-t.y-s;s>this._contentBoundsNoRotate.height?t.y+=(u+d)/2:d<0?t.y+=d:0<u&&(t.y+=u)}return t},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),i=this._applyZoomConstraints(t);t!==i&&this.zoomTo(i,this.zoomPoint,e);var n=this.getBoundsNoRotate(),r=this._applyBoundaryConstraints(n);return this._raiseConstraintsEvent(e),(n.x!==r.x||n.y!==r.y||e)&&this.fitBounds(r.rotate(-this.getRotation()),e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(e,t){var i=(t=t||{}).immediately||!1,n=t.constraints||!1,r=this.getAspectRatio(),o=e.getCenter(),a=new p.Rect(e.x,e.y,e.width,e.height,e.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=r?a.height=a.width/r:a.width=a.height*r,a.x=o.x-a.width/2,a.y=o.y-a.height/2;var s=1/a.width;if(n){var l=a.getAspectRatio(),c=this._applyZoomConstraints(s);s!==c&&(s=c,a.width=1/s,a.x=o.x-a.width/2,a.height=a.width/l,a.y=o.y-a.height/2),o=(a=this._applyBoundaryConstraints(a)).getCenter(),this._raiseConstraintsEvent(i)}if(i)return this.panTo(o,!0),this.zoomTo(s,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var u=this.getBounds(),d=this.getZoom();if(0===d||Math.abs(s/d-1)<1e-8)return this.zoomTo(s,!0),this.panTo(o,i);var h=(a=a.rotate(-this.getRotation())).getTopLeft().times(s).minus(u.getTopLeft().times(d)).divide(s-d);return this.zoomTo(s,h,i)},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(e){var t=new p.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(t,e)},fitHorizontally:function(e){var t=new p.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(t,e)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(e,t){var i=new p.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(i.plus(e),t)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,i){return this.zoomTo(this.zoomSpring.target.value*e,t,i)},zoomTo:function(e,t,i){var n=this;return this.zoomPoint=t instanceof p.Point&&!isNaN(t.x)&&!isNaN(t.y)?t:null,i?this._adjustCenterSpringsForZoomPoint(function(){n.zoomSpring.resetTo(e)}):this.zoomSpring.springTo(e),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:e,refPoint:t,immediately:i}),this},setRotation:function(e){return this.viewer&&this.viewer.drawer.canRotate()&&(this.degrees=p.positiveModulo(e,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:e})),this},getRotation:function(){return this.degrees},resize:function(e,t){var i,n=this.getBoundsNoRotate(),r=n;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(i=e.x/this.containerSize.x,r.width=n.width*i,r.height=r.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(r,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new p.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint(function(){e.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,t},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var i=this.pixelFromPoint(this.zoomPoint,!0).minus(t),n=this.deltaPointsFromPixels(i,!0);this.centerSpringX.shiftBy(n.x),this.centerSpringY.shiftBy(n.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation()),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation())},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(e,t){return e.minus(t.getTopLeft()).times(this._containerInnerSize.x/t.width).plus(new p.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(e,t){var i=this.getBoundsNoRotate(t);return e.minus(new p.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/i.width).plus(i.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(e,t){var i=this._contentBoundsNoRotate.width;return new p.Point(e*this._contentSizeNoRotate.x/i,t*this._contentSizeNoRotate.x/i)},viewportToImageCoordinates:function(e,t){if(e instanceof p.Point)return this.viewportToImageCoordinates(e.x,e.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(1<i)p.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===i){return this.viewer.world.getItemAt(0).viewportToImageCoordinates(e,t,!0)}}return this._viewportToImageDelta(e-this._contentBoundsNoRotate.x,t-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(e,t){var i=this._contentBoundsNoRotate.width;return new p.Point(e/this._contentSizeNoRotate.x*i,t/this._contentSizeNoRotate.x*i)},imageToViewportCoordinates:function(e,t){if(e instanceof p.Point)return this.imageToViewportCoordinates(e.x,e.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(1<i)p.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===i){return this.viewer.world.getItemAt(0).imageToViewportCoordinates(e,t,!0)}}var n=this._imageToViewportDelta(e,t);return n.x+=this._contentBoundsNoRotate.x,n.y+=this._contentBoundsNoRotate.y,n},imageToViewportRectangle:function(e,t,i,n){var r=e;if(r instanceof p.Rect||(r=new p.Rect(e,t,i,n)),this.viewer){var o=this.viewer.world.getItemCount();if(1<o)p.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===o){return this.viewer.world.getItemAt(0).imageToViewportRectangle(e,t,i,n,!0)}}var a=this.imageToViewportCoordinates(r.x,r.y),s=this._imageToViewportDelta(r.width,r.height);return new p.Rect(a.x,a.y,s.x,s.y,r.degrees)},viewportToImageRectangle:function(e,t,i,n){var r=e;if(r instanceof p.Rect||(r=new p.Rect(e,t,i,n)),this.viewer){var o=this.viewer.world.getItemCount();if(1<o)p.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===o){return this.viewer.world.getItemAt(0).viewportToImageRectangle(e,t,i,n,!0)}}var a=this.viewportToImageCoordinates(r.x,r.y),s=this._viewportToImageDelta(r.width,r.height);return new p.Rect(a.x,a.y,s.x,s.y,r.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){p.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var t=e.minus(p.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return p.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(e).plus(p.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(e){return p.Rect.fromSummits(this.pointFromPixel(e.getTopLeft(),!0),this.pointFromPixel(e.getTopRight(),!0),this.pointFromPixel(e.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(e){return p.Rect.fromSummits(this.pixelFromPoint(e.getTopLeft(),!0),this.pixelFromPoint(e.getTopRight(),!0),this.pixelFromPoint(e.getBottomLeft(),!0))},windowToViewportCoordinates:function(e){p.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var t=e.minus(p.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(t)},viewportToWindowCoordinates:function(e){return p.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(e).plus(p.getElementPosition(this.viewer.element))},viewportToImageZoom:function(e){if(this.viewer){var t=this.viewer.world.getItemCount();if(1<t)p.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===t){return this.viewer.world.getItemAt(0).viewportToImageZoom(e)}}var i=this._contentSizeNoRotate.x;return e*(this._containerInnerSize.x/i*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(e){if(this.viewer){var t=this.viewer.world.getItemCount();if(1<t)p.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===t){return this.viewer.world.getItemAt(0).imageToViewportZoom(e)}}return e*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)}}}(OpenSeadragon),function(y){function g(e,t,i,n,r,o,a,s,l){var c=a.getBoundingBox().getTopLeft(),u=a.getBoundingBox().getBottomRight();e.viewer&&e.viewer.raiseEvent("update-level",{tiledImage:e,havedrawn:t,level:n,opacity:r,visibility:o,drawArea:a,topleft:c,bottomright:u,currenttime:s,best:l}),E(e.coverage,n),E(e.loadingCoverage,n);for(var d=e._getCornerTiles(n,c,u),h=d.topLeft,p=d.bottomRight,f=e.source.getNumTiles(n),g=e.viewport.pixelFromPoint(e.viewport.getCenter()),m=h.x;m<=p.x;m++)for(var v=h.y;v<=p.y;v++){if(!e.wrapHorizontal&&!e.wrapVertical){var y=e.source.getTileBounds(n,m,v);if(null===a.intersection(y))continue}l=w(e,i,t,m,v,n,r,o,g,f,s,l)}return l}function w(e,t,i,n,r,o,a,s,l,c,u,d){var h=m(n,r,o,e,e.source,e.tilesMatrix,u,c,e._worldWidthCurrent,e._worldHeightCurrent),p=i;e.viewer&&e.viewer.raiseEvent("update-tile",{tiledImage:e,tile:h}),T(e.coverage,o,n,r,!1);var f=h.loaded||h.loading||j(e.loadingCoverage,o,n,r);if(T(e.loadingCoverage,o,n,r,f),!h.exists)return d;if(t&&!p&&(j(e.coverage,o,n,r)?T(e.coverage,o,n,r,!0):p=!0),!p)return d;if(_(h,e.source.tileOverlap,e.viewport,l,s,e),!h.loaded)if(h.context2D)b(e,h);else{var g=e._tileCache.getImageRecord(h.cacheKey);if(g)b(e,h,g.getImage())}h.loaded?x(e,h,n,r,o,a,u)&&(e._needsDraw=!0):h.loading?e._tilesLoading++:f||(d=C(d,h));return d}function m(e,t,i,n,r,o,a,s,l,c){var u,d,h,p,f,g,m,v;return o[i]||(o[i]={}),o[i][e]||(o[i][e]={}),o[i][e][t]||(u=(s.x+e%s.x)%s.x,d=(s.y+t%s.y)%s.y,h=r.getTileBounds(i,u,d),p=r.tileExists(i,u,d),f=r.getTileUrl(i,u,d),n.loadTilesWithAjax?(g=r.getTileAjaxHeaders(i,u,d),y.isPlainObject(n.ajaxHeaders)&&(g=y.extend({},n.ajaxHeaders,g))):g=null,m=r.getContext2D?r.getContext2D(i,u,d):undefined,h.x+=(e-u)/s.x,h.y+=c/l*((t-d)/s.y),o[i][e][t]=new y.Tile(i,e,t,h,p,f,m,n.loadTilesWithAjax,g)),(v=o[i][e][t]).lastTouchTime=a,v}function v(n,r,o){r.loading=!0,n._imageLoader.addJob({src:r.url,loadWithAjax:r.loadWithAjax,ajaxHeaders:r.ajaxHeaders,crossOriginPolicy:n.crossOriginPolicy,ajaxWithCredentials:n.ajaxWithCredentials,callback:function(e,t,i){a(n,r,o,e,t,i)},abort:function(){r.loading=!1}})}function a(t,i,e,n,r,o){if(!n)return y.console.log("Tile %s failed to load: %s - error: %s",i,i.url,r),t.viewer.raiseEvent("tile-load-failed",{tile:i,tiledImage:t,time:e,message:r,tileRequest:o}),i.loading=!1,void(i.exists=!1);if(e<t.lastResetTime)return y.console.log("Ignoring tile %s loaded before reset: %s",i,i.url),void(i.loading=!1);var a=function(){var e=t.source.getClosestLevel();b(t,i,n,e,o)};t._midDraw?window.setTimeout(a,1):a()}function b(e,t,i,n,r){function o(){return s++,a}function a(){0===--s&&(t.loading=!1,t.loaded=!0,t.context2D||e._tileCache.cacheTile({image:i,tile:t,cutoff:n,tiledImage:e}),e._needsDraw=!0)}var s=0;e.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:e,tileRequest:r,image:i,getCompletionCallback:o}),o()()}function _(e,t,i,n,r,o){var a=e.bounds.getTopLeft();a.x*=o._scaleSpring.current.value,a.y*=o._scaleSpring.current.value,a.x+=o._xSpring.current.value,a.y+=o._ySpring.current.value;var s=e.bounds.getSize();s.x*=o._scaleSpring.current.value,s.y*=o._scaleSpring.current.value;var l=i.pixelFromPointNoRotate(a,!0),c=i.pixelFromPointNoRotate(a,!1),u=i.deltaPixelsFromPointsNoRotate(s,!0),d=i.deltaPixelsFromPointsNoRotate(s,!1),h=c.plus(d.divide(2)),p=n.squaredDistanceTo(h);t||(u=u.plus(new y.Point(1,1))),e.position=l,e.size=u,e.squaredDistance=p,e.visibility=r}function x(e,t,i,n,r,o,a){var s,l,c=1e3*e.blendTime;if(t.blendStart||(t.blendStart=a),s=a-t.blendStart,l=c?Math.min(1,s/c):1,e.alwaysBlend&&(l*=o),t.opacity=l,e.lastDrawn.push(t),1==l)T(e.coverage,r,i,n,!0),e._hasOpaqueTile=!0;else if(s<c)return!0;return!1}function k(e,t,i,n){var r,o,a,s;if(!e[t])return!1;if(i!==undefined&&n!==undefined)return e[t][i]===undefined||e[t][i][n]===undefined||!0===e[t][i][n];for(a in r=e[t])if(r.hasOwnProperty(a))for(s in o=r[a])if(o.hasOwnProperty(s)&&!o[s])return!1;return!0}function j(e,t,i,n){return i===undefined||n===undefined?k(e,t+1):k(e,t+1,2*i,2*n)&&k(e,t+1,2*i,2*n+1)&&k(e,t+1,2*i+1,2*n)&&k(e,t+1,2*i+1,2*n+1)}function T(e,t,i,n,r){e[t]?(e[t][i]||(e[t][i]={}),e[t][i][n]=r):y.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",t)}function E(e,t){e[t]={}}function C(e,t){return e?t.visibility>e.visibility?t:t.visibility==e.visibility&&t.squaredDistance<e.squaredDistance?t:e:t}function S(e,t){if(0!==e.opacity&&0!==t.length){var i,n,r,o=t[0],a=e.opacity<1||e.compositeOperation&&"source-over"!==e.compositeOperation||!e._isBottomItem()&&o._hasTransparencyChannel(),s=e.viewport.getZoom(!0),l=e.viewportToImageZoom(s);1<t.length&&l>e.smoothTileEdgesMinZoom&&!e.iOSDevice&&e.getRotation(!0)%360==0&&y.supportsCanvas&&(a=!0,i=o.getScaleForEdgeSmoothing(),n=o.getTranslationForEdgeSmoothing(i,e._drawer.getCanvasSize(!1),e._drawer.getCanvasSize(!0))),a&&(i||(r=e.viewport.viewportToViewerElementRectangle(e.getClippedBounds(!0)).getIntegerBoundingBox().times(y.pixelDensityRatio)),e._drawer._clear(!0,r)),i||(0!==e.viewport.degrees&&e._drawer._offsetForRotation({degrees:e.viewport.degrees,useSketch:a}),e.getRotation(!0)%360!=0&&e._drawer._offsetForRotation({degrees:e.getRotation(!0),point:e.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),useSketch:a}));var c=!1;if(e._clip){e._drawer.saveContext(a);var u=e.imageToViewportRectangle(e._clip,!0);u=u.rotate(-e.getRotation(!0),e._getRotationPoint(!0));var d=e._drawer.viewportToDrawerRectangle(u);i&&(d=d.times(i)),n&&(d=d.translate(n)),e._drawer.setClip(d,a),c=!0}if(e.placeholderFillStyle&&!1===e._hasOpaqueTile){var h=e._drawer.viewportToDrawerRectangle(e.getBounds(!0));i&&(h=h.times(i)),n&&(h=h.translate(n));var p=null;p="function"==typeof e.placeholderFillStyle?e.placeholderFillStyle(e,e._drawer.context):e.placeholderFillStyle,e._drawer.drawRectangle(h,p,a)}for(var f=t.length-1;0<=f;f--)o=t[f],e._drawer.drawTile(o,e._drawingHandler,a,i,n),o.beingDrawn=!0,e.viewer&&e.viewer.raiseEvent("tile-drawn",{tiledImage:e,tile:o});c&&e._drawer.restoreContext(a),i||(e.getRotation(!0)%360!=0&&e._drawer._restoreRotationChanges(a),0!==e.viewport.degrees&&e._drawer._restoreRotationChanges(a)),a&&(i&&(0!==e.viewport.degrees&&e._drawer._offsetForRotation({degrees:e.viewport.degrees,useSketch:!1}),e.getRotation(!0)%360!=0&&e._drawer._offsetForRotation({degrees:e.getRotation(!0),point:e.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),useSketch:!1})),e._drawer.blendSketch({opacity:e.opacity,scale:i,translate:n,compositeOperation:e.compositeOperation,bounds:r}),i&&(e.getRotation(!0)%360!=0&&e._drawer._restoreRotationChanges(!1),0!==e.viewport.degrees&&e._drawer._restoreRotationChanges(!1))),P(e,t)}}function P(e,t){if(e.debugMode)for(var i=t.length-1;0<=i;i--){var n=t[i];try{e._drawer.drawDebugInfo(n,t.length,i,e)}catch(r){y.console.error(r)}}}y.TiledImage=function(e){var t=this;y.console.assert(e.tileCache,"[TiledImage] options.tileCache is required"),y.console.assert(e.drawer,"[TiledImage] options.drawer is required"),y.console.assert(e.viewer,"[TiledImage] options.viewer is required"),y.console.assert(e.imageLoader,"[TiledImage] options.imageLoader is required"),y.console.assert(e.source,"[TiledImage] options.source is required"),y.console.assert(!e.clip||e.clip instanceof y.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),y.EventSource.call(this),this._tileCache=e.tileCache,delete e.tileCache,this._drawer=e.drawer,delete e.drawer,this._imageLoader=e.imageLoader,delete e.imageLoader,e.clip instanceof y.Rect&&(this._clip=e.clip.clone()),delete e.clip;var i=e.x||0;delete e.x;var n=e.y||0;delete e.y,this.normHeight=e.source.dimensions.y/e.source.dimensions.x,this.contentAspectX=e.source.dimensions.x/e.source.dimensions.y;var r=1;e.width?(r=e.width,delete e.width,e.height&&(y.console.error("specifying both width and height to a tiledImage is not supported"),delete e.height)):e.height&&(r=e.height/this.normHeight,delete e.height);var o=e.fitBounds;delete e.fitBounds;var a=e.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete e.fitBoundsPlacement;var s=e.degrees||0;delete e.degrees,y.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:y.DEFAULT_SETTINGS.springStiffness,animationTime:y.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:y.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:y.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:y.DEFAULT_SETTINGS.wrapVertical,immediateRender:y.DEFAULT_SETTINGS.immediateRender,blendTime:y.DEFAULT_SETTINGS.blendTime,alwaysBlend:y.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:y.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:y.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:y.DEFAULT_SETTINGS.iOSDevice,debugMode:y.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:y.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:y.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:y.DEFAULT_SETTINGS.placeholderFillStyle,opacity:y.DEFAULT_SETTINGS.opacity,preload:y.DEFAULT_SETTINGS.preload,compositeOperation:y.DEFAULT_SETTINGS.compositeOperation},e),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new y.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new y.Spring({initial:n,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new y.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new y.Spring({initial:s,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),o&&this.fitBounds(o,a,!0),this._drawingHandler=function(e){t.viewer.raiseEvent("tile-drawing",y.extend({tiledImage:t},e))}},y.extend(y.TiledImage.prototype,y.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=y.now(),
this._needsDraw=!0},update:function(){var e=this._xSpring.update(),t=this._ySpring.update(),i=this._scaleSpring.update(),n=this._degreesSpring.update();return!!(e||t||i||n)&&(this._updateForScale(),this._needsDraw=!0)},draw:function(){(0!==this.opacity||this._preload)&&(this._midDraw=!0,this._updateViewport(),this._midDraw=!1)},destroy:function(){this.reset()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(e){return e?new y.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new y.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return y.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(e){var t=this.getBoundsNoRotate(e);if(this._clip){var i=(e?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,n=this._clip.times(i);t=new y.Rect(t.x+n.x,t.y+n.y,n.width,n.height)}return t.rotate(this.getRotation(e),this._getRotationPoint(e))},getContentSize:function(){return new y.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(e,t,i){var n=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new y.Point(e*(this.source.dimensions.x/n),t*(this.source.dimensions.y*this.contentAspectX/n))},viewportToImageCoordinates:function(e,t,i){var n;return e instanceof y.Point?(i=t,n=e):n=new y.Point(e,t),n=n.rotate(-this.getRotation(i),this._getRotationPoint(i)),i?this._viewportToImageDelta(n.x-this._xSpring.current.value,n.y-this._ySpring.current.value):this._viewportToImageDelta(n.x-this._xSpring.target.value,n.y-this._ySpring.target.value)},_imageToViewportDelta:function(e,t,i){var n=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new y.Point(e/this.source.dimensions.x*n,t/this.source.dimensions.y/this.contentAspectX*n)},imageToViewportCoordinates:function(e,t,i){e instanceof y.Point&&(i=t,t=e.y,e=e.x);var n=this._imageToViewportDelta(e,t);return i?(n.x+=this._xSpring.current.value,n.y+=this._ySpring.current.value):(n.x+=this._xSpring.target.value,n.y+=this._ySpring.target.value),n.rotate(this.getRotation(i),this._getRotationPoint(i))},imageToViewportRectangle:function(e,t,i,n,r){var o=e;o instanceof y.Rect?r=t:o=new y.Rect(e,t,i,n);var a=this.imageToViewportCoordinates(o.getTopLeft(),r),s=this._imageToViewportDelta(o.width,o.height,r);return new y.Rect(a.x,a.y,s.x,s.y,o.degrees+this.getRotation(r))},viewportToImageRectangle:function(e,t,i,n,r){var o=e;e instanceof y.Rect?r=t:o=new y.Rect(e,t,i,n);var a=this.viewportToImageCoordinates(o.getTopLeft(),r),s=this._viewportToImageDelta(o.width,o.height,r);return new y.Rect(a.x,a.y,s.x,s.y,o.degrees-this.getRotation(r))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(e){var t=this._scaleSpring.current.value;return e=e.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new y.Rect((e.x-this._xSpring.current.value)/t,(e.y-this._ySpring.current.value)/t,e.width/t,e.height/t,e.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var i=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(i&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(i)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}i||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},fitBounds:function(e,t,i){t=t||y.Placement.CENTER;var n=y.Placement.properties[t],r=this.contentAspectX,o=0,a=0,s=1,l=1;if(this._clip&&(r=this._clip.getAspectRatio(),s=this._clip.width/this.source.dimensions.x,l=this._clip.height/this.source.dimensions.y,e.getAspectRatio()>r?(o=this._clip.x/this._clip.height*e.height,a=this._clip.y/this._clip.height*e.height):(o=this._clip.x/this._clip.width*e.width,a=this._clip.y/this._clip.width*e.width)),e.getAspectRatio()>r){var c=e.height/l,u=0;n.isHorizontallyCentered?u=(e.width-e.height*r)/2:n.isRight&&(u=e.width-e.height*r),this.setPosition(new y.Point(e.x-o+u,e.y-a),i),this.setHeight(c,i)}else{var d=e.width/s,h=0;n.isVerticallyCentered?h=(e.height-e.width/r)/2:n.isBottom&&(h=e.height-e.width/r),this.setPosition(new y.Point(e.x-o,e.y-a+h),i),this.setWidth(d,i)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(e){y.console.assert(!e||e instanceof y.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),e instanceof y.Rect?this._clip=e.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(e){e!==this.opacity&&(this.opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){e!==this.compositeOperation&&(this.compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(e,t){var i=this._scaleSpring.target.value===e;if(t){if(i&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(i)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}i||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,i=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return{lowestLevel:e=Math.min(e,i),highestLevel:i}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};0<this.lastDrawn.length;){this.lastDrawn.pop().beingDrawn=!1}var e=this.viewport,t=this._viewportToTiledImageRectangle(e.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var i=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(t=t.intersection(i)))return}for(var n=this._getLevelsInterval(),r=n.lowestLevel,o=n.highestLevel,a=null,s=!1,l=y.now(),c=o;r<=c;c--){var u=!1,d=e.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(c),!0).x*this._scaleSpring.current.value;if(c===r||!s&&d>=this.minPixelRatio)s=u=!0;else if(!s)continue;var h=e.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(c),!1).x*this._scaleSpring.current.value,p=e.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,f=this.immediateRender?1:p;if(a=g(this,s,u,c,Math.min(1,(d-.5)/.5),f/Math.abs(f-h),t,l,a),k(this.coverage,c))break}S(this,this.lastDrawn),a&&!a.context2D?(v(this,a,l),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(e,t,i){var n,r,o,a;this.wrapHorizontal?(n=y.positiveModulo(t.x,1),r=y.positiveModulo(i.x,1)):(n=Math.max(0,t.x),r=Math.min(1,i.x));var s=1/this.source.aspectRatio;this.wrapVertical?(o=y.positiveModulo(t.y,s),a=y.positiveModulo(i.y,s)):(o=Math.max(0,t.y),a=Math.min(s,i.y));var l=this.source.getTileAtPoint(e,new y.Point(n,o)),c=this.source.getTileAtPoint(e,new y.Point(r,a)),u=this.source.getNumTiles(e);return this.wrapHorizontal&&(l.x+=u.x*Math.floor(t.x),c.x+=u.x*Math.floor(i.x)),this.wrapVertical&&(l.y+=u.y*Math.floor(t.y/s),c.y+=u.y*Math.floor(i.y/s)),{topLeft:l,bottomRight:c}}})}(OpenSeadragon),function(f){var g=function(e){f.console.assert(e,"[TileCache.cacheTile] options is required"),f.console.assert(e.tile,"[TileCache.cacheTile] options.tile is required"),f.console.assert(e.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=e.tile,this.tiledImage=e.tiledImage},m=function(e){f.console.assert(e,"[ImageRecord] options is required"),f.console.assert(e.image,"[ImageRecord] options.image is required"),this._image=e.image,this._tiles=[]};m.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(e){f.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=e},addTile:function(e){f.console.assert(e,"[ImageRecord.addTile] tile is required"),this._tiles.push(e)},removeTile:function(e){for(var t=0;t<this._tiles.length;t++)if(this._tiles[t]===e)return void this._tiles.splice(t,1);f.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",e)},getTileCount:function(){return this._tiles.length}},f.TileCache=function(e){e=e||{},this._maxImageCacheCount=e.maxImageCacheCount||f.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},f.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(e){f.console.assert(e,"[TileCache.cacheTile] options is required"),f.console.assert(e.tile,"[TileCache.cacheTile] options.tile is required"),f.console.assert(e.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),f.console.assert(e.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var t=e.cutoff||0,i=this._tilesLoaded.length,n=this._imagesLoaded[e.tile.cacheKey];if(n||(f.console.assert(e.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),n=this._imagesLoaded[e.tile.cacheKey]=new m({image:e.image}),this._imagesLoadedCount++),n.addTile(e.tile),e.tile.cacheImageRecord=n,this._imagesLoadedCount>this._maxImageCacheCount){for(var r,o,a,s,l,c,u=null,d=-1,h=null,p=this._tilesLoaded.length-1;0<=p;p--)(r=(c=this._tilesLoaded[p]).tile).level<=t||r.beingDrawn||(u?(s=r.lastTouchTime,o=u.lastTouchTime,l=r.level,a=u.level,(s<o||s==o&&a<l)&&(u=r,d=p,h=c)):(u=r,d=p,h=c));u&&0<=d&&(this._unloadTile(h),i=d)}this._tilesLoaded[i]=new g({tile:e.tile,tiledImage:e.tiledImage})},clearTilesFor:function(e){var t;f.console.assert(e,"[TileCache.clearTilesFor] tiledImage is required");for(var i=0;i<this._tilesLoaded.length;++i)(t=this._tilesLoaded[i]).tiledImage===e&&(this._unloadTile(t),this._tilesLoaded.splice(i,1),i--)},getImageRecord:function(e){return f.console.assert(e,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[e]},_unloadTile:function(e){f.console.assert(e,"[TileCache._unloadTile] tileRecord is required");var t=e.tile,i=e.tiledImage;t.unload(),t.cacheImageRecord=null;var n=this._imagesLoaded[t.cacheKey];n.removeTile(t),n.getTileCount()||(n.destroy(),delete this._imagesLoaded[t.cacheKey],this._imagesLoadedCount--),i.viewer.raiseEvent("tile-unloaded",{tile:t,tiledImage:i})}}}(OpenSeadragon),function(m){m.World=function(e){var t=this;m.console.assert(e.viewer,"[World] options.viewer is required"),m.EventSource.call(this),this.viewer=e.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(){t._autoRefigureSizes?t._figureSizes():t._needsSizesFigured=!0},this._figureSizes()},m.extend(m.World.prototype,m.EventSource.prototype,{addItem:function(e,t){if(m.console.assert(e,"[World.addItem] item is required"),m.console.assert(e instanceof m.TiledImage,"[World.addItem] only TiledImages supported at this time"),(t=t||{}).index!==undefined){var i=Math.max(0,Math.min(this._items.length,t.index));this._items.splice(i,0,e)}else this._items.push(e);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,e.addHandler("bounds-change",this._delegatedFigureSizes),e.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:e})},getItemAt:function(e){return m.console.assert(e!==undefined,"[World.getItemAt] index is required"),this._items[e]},getIndexOfItem:function(e){return m.console.assert(e,"[World.getIndexOfItem] item is required"),m.indexOf(this._items,e)},getItemCount:function(){return this._items.length},setItemIndex:function(e,t){m.console.assert(e,"[World.setItemIndex] item is required"),m.console.assert(t!==undefined,"[World.setItemIndex] index is required");var i=this.getIndexOfItem(e);if(t>=this._items.length)throw new Error("Index bigger than number of layers.");t!==i&&-1!==i&&(this._items.splice(i,1),this._items.splice(t,0,e),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:e,previousIndex:i,newIndex:t}))},removeItem:function(e){m.console.assert(e,"[World.removeItem] item is required");var t=m.indexOf(this._items,e);-1!==t&&(e.removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy(),this._items.splice(t,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(e))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var i=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<i.length;t++)e=i[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){(this._autoRefigureSizes=e)&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(e){var t,i=(e=e||{}).immediately||!1,n=e.layout||m.DEFAULT_SETTINGS.collectionLayout,r=e.rows||m.DEFAULT_SETTINGS.collectionRows,o=e.columns||m.DEFAULT_SETTINGS.collectionColumns,a=e.tileSize||m.DEFAULT_SETTINGS.collectionTileSize,s=a+(e.tileMargin||m.DEFAULT_SETTINGS.collectionTileMargin);t=!e.rows&&o?o:Math.ceil(this._items.length/r);var l,c,u,d,h,p=0,f=0;this.setAutoRefigureSizes(!1);for(var g=0;g<this._items.length;g++)g&&g%t==0&&("horizontal"===n?(f+=s,p=0):(p+=s,f=0)),d=(u=(c=(l=this._items[g]).getBounds()).width>c.height?a:a*(c.width/c.height))*(c.height/c.width),h=new m.Point(p+(a-u)/2,f+(a-d)/2),l.setPosition(h,i),l.setWidth(u,i),"horizontal"===n?p+=s:f+=s;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var e=this._homeBounds?this._homeBounds.clone():null,t=this._contentSize?this._contentSize.clone():null,i=this._contentFactor||0;if(this._items.length){var n=this._items[0],r=n.getBounds();this._contentFactor=n.getContentSize().x/r.width;for(var o=n.getClippedBounds().getBoundingBox(),a=o.x,s=o.y,l=o.x+o.width,c=o.y+o.height,u=1;u<this._items.length;u++)r=(n=this._items[u]).getBounds(),this._contentFactor=Math.max(this._contentFactor,n.getContentSize().x/r.width),o=n.getClippedBounds().getBoundingBox(),a=Math.min(a,o.x),s=Math.min(s,o.y),l=Math.max(l,o.x+o.width),c=Math.max(c,o.y+o.height);this._homeBounds=new m.Rect(a,s,l-a,c-s),this._contentSize=new m.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new m.Rect(0,0,1,1),this._contentSize=new m.Point(1,1),this._contentFactor=1;this._contentFactor===i&&this._homeBounds.equals(e)&&this._contentSize.equals(t)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(OpenSeadragon),function(e,t,n){if(!e.version||e.version.major<1)throw new Error("OpenSeadragonViewerInputHook requires OpenSeadragon version 1.0.0+");e.Viewer.prototype.addViewerInputHook=function(e){return(e=e||{}).viewer=this,new t.ViewerInputHook(e)},t.ViewerInputHook=function(e){var t,i;for((e=e||{}).hooks=e.hooks||[],this.viewerTrackers={},e.viewer&&(this.viewerTrackers.viewer=e.viewer.innerTracker,this.viewerTrackers.viewer_outer=e.viewer.outerTracker),t=0;t<e.hooks.length;t++){if("string"==typeof e.hooks[t].tracker){if(!e.viewer)throw new Error("A viewer must be specified.");if((i=this.viewerTrackers[e.hooks[t].tracker])===n)throw new Error("Unknown tracker specified: "+e.hooks[t].tracker)}else i=e.hooks[t].tracker;!function(t,e,i,n){var r=e[i];e[i]=function(e){return t.callHandlers(n,r,e)}}(this,i,e.hooks[t].handler,e.hooks[t].hookHandler)}},t.ViewerInputHook.version={versionStr:"2.0.0"};var i=t.ViewerInputHook.version.versionStr.split(".");t.ViewerInputHook.version.major=parseInt(i[0],10),t.ViewerInputHook.version.minor=parseInt(i[1],10),t.ViewerInputHook.version.revision=parseInt(i[2],10),t.ViewerInputHook.prototype.callHandlers=function(e,t,i){var n=e(i);return t&&!i.stopHandlers&&(n=t(i)),!i.stopBubbling&&n}}(OpenSeadragon,window.OpenSeadragonImaging=window.OpenSeadragonImaging||{});